{"version":3,"sources":["webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/ammo-capacities/ammo-capacities.component.ts","webpack:///src/app/components/ammo-capacities/ammo-capacities.component.html","webpack:///src/app/components/armor-list/armor-list.component.ts","webpack:///src/app/components/armor-list/armor-list.component.html","webpack:///src/app/components/augmentation-slot/augmentation-slot.component.ts","webpack:///src/app/components/augmentation-slot/augmentation-slot.component.html","webpack:///src/app/components/augmentations-list/augmentations-list.component.ts","webpack:///src/app/components/augmentations-list/augmentations-list.component.html","webpack:///src/app/components/awakening-slot/awakening-slot.component.ts","webpack:///src/app/components/awakening-slot/awakening-slot.component.html","webpack:///src/app/components/calc-details/calc-details.component.ts","webpack:///src/app/components/calc-details/calc-details.component.html","webpack:///src/app/components/charm-list/charm-list.component.ts","webpack:///src/app/components/charm-list/charm-list.component.html","webpack:///src/app/components/common-details/common-details.component.ts","webpack:///src/app/components/common-details/common-details.component.html","webpack:///src/app/components/common/common.module.ts","webpack:///src/app/components/common/dropdown/dropdown.component.ts","webpack:///src/app/components/common/dropdown/dropdown.component.html","webpack:///src/app/components/common/modal/modal.component.ts","webpack:///src/app/components/common/modal/modal.component.html","webpack:///src/app/components/decoration-details/decoration-details.component.ts","webpack:///src/app/components/decoration-details/decoration-details.component.html","webpack:///src/app/components/decoration-list/decoration-list.component.ts","webpack:///src/app/components/decoration-list/decoration-list.component.html","webpack:///src/app/components/decoration-slot/decoration-slot.component.ts","webpack:///src/app/components/decoration-slot/decoration-slot.component.html","webpack:///src/app/components/equipped-buffs/equipped-buffs.component.ts","webpack:///src/app/components/equipped-buffs/equipped-buffs.component.html","webpack:///src/app/components/equipped-skills/equipped-skills.component.ts","webpack:///src/app/components/equipped-skills/equipped-skills.component.html","webpack:///src/app/components/equipped-stats/equipped-stats.component.ts","webpack:///src/app/components/equipped-stats/equipped-stats.component.html","webpack:///src/app/components/item-details/item-details.component.ts","webpack:///src/app/components/item-details/item-details.component.html","webpack:///src/app/components/item-slot/item-slot.component.ts","webpack:///src/app/components/item-slot/item-slot.component.html","webpack:///src/app/components/kinsect-details/kinsect-details.component.ts","webpack:///src/app/components/kinsect-details/kinsect-details.component.html","webpack:///src/app/components/kinsect-list/kinsect-list.component.ts","webpack:///src/app/components/kinsect-list/kinsect-list.component.html","webpack:///src/app/components/kinsect-slot/kinsect-slot.component.ts","webpack:///src/app/components/kinsect-slot/kinsect-slot.component.html","webpack:///src/app/components/melodies/melodies.component.ts","webpack:///src/app/components/melodies/melodies.component.html","webpack:///src/app/components/modification-slot/modification-slot.component.ts","webpack:///src/app/components/modification-slot/modification-slot.component.html","webpack:///src/app/components/modifications-list/modifications-list.component.ts","webpack:///src/app/components/modifications-list/modifications-list.component.html","webpack:///src/app/components/set-bonus-details/set-bonus-details.component.ts","webpack:///src/app/components/set-bonus-details/set-bonus-details.component.html","webpack:///src/app/components/set-list/set-list.component.ts","webpack:///src/app/components/set-list/set-list.component.html","webpack:///src/app/components/setbonus-list/setbonus-list.component.ts","webpack:///src/app/components/setbonus-list/setbonus-list.component.html","webpack:///src/app/components/sharpness-bar/sharpness-bar.component.ts","webpack:///src/app/components/sharpness-bar/sharpness-bar.component.html","webpack:///src/app/components/skill-details/skill-details.component.ts","webpack:///src/app/components/skill-details/skill-details.component.html","webpack:///src/app/components/tool-list/tool-list.component.ts","webpack:///src/app/components/tool-list/tool-list.component.html","webpack:///src/app/components/tooltip/tooltip.component.ts","webpack:///src/app/components/tooltip/tooltip.component.html","webpack:///src/app/components/upagrade-slot/upgrade-slot.component.ts","webpack:///src/app/components/upagrade-slot/upgrade-slot.component.html","webpack:///src/app/components/upgrade-details/upgrade-details.component.ts","webpack:///src/app/components/upgrade-details/upgrade-details.component.html","webpack:///src/app/components/upgrades-list/upgrades-list.component.ts","webpack:///src/app/components/upgrades-list/upgrades-list.component.html","webpack:///src/app/components/weapon-list/weapon-list.component.ts","webpack:///src/app/components/weapon-list/weapon-list.component.html","webpack:///src/app/data/data.module.ts","webpack:///src/app/data/loaders/ammo-capacities.loader.ts","webpack:///src/app/data/loaders/armor.loader.ts","webpack:///src/app/data/loaders/augmentations.loader.ts","webpack:///src/app/data/loaders/awakenings.loader.ts","webpack:///src/app/data/loaders/charms.loader.ts","webpack:///src/app/data/loaders/data.loader.ts","webpack:///src/app/data/loaders/decorations.loader.ts","webpack:///src/app/data/loaders/kinsects.loader.ts","webpack:///src/app/data/loaders/melodies.loader.ts","webpack:///src/app/data/loaders/melodyEffect.loader.ts","webpack:///src/app/data/loaders/modifications.loader.ts","webpack:///src/app/data/loaders/set-bonuses.loader.ts","webpack:///src/app/data/loaders/sharpness-modifiers.loader.ts","webpack:///src/app/data/loaders/skills.loader.ts","webpack:///src/app/data/loaders/tools.loader.ts","webpack:///src/app/data/loaders/upgrades.loader.ts","webpack:///src/app/data/loaders/weapon-modifiers.loader.ts","webpack:///src/app/data/loaders/weapons.loader.ts","webpack:///src/app/data/parsers/data-parser.ts","webpack:///src/app/data/parsers/melodies-effect.parser.ts","webpack:///src/app/data/parsers/melodies.parser.ts","webpack:///src/app/data/parsers/other-data.parser.ts","webpack:///src/app/data/parsers/skill-references.parser.ts","webpack:///src/app/data/parsers/slots.parser.ts","webpack:///src/app/data/parsers/tags.parser.ts","webpack:///src/app/data/parsers/values.parser.ts","webpack:///src/app/models/ammo-capacities.model.ts","webpack:///src/app/models/app-data.model.ts","webpack:///src/app/models/augmentation.model.ts","webpack:///src/app/models/awakening-level.model.ts","webpack:///src/app/models/buffs.model.ts","webpack:///src/app/models/build.model.ts","webpack:///src/app/models/common.model.ts","webpack:///src/app/models/decoration.model.ts","webpack:///src/app/models/equipped-set-bonus.model.ts","webpack:///src/app/models/equipped-skill.model.ts","webpack:///src/app/models/extra-data.model.ts","webpack:///src/app/models/item.model.ts","webpack:///src/app/models/kinsect.model.ts","webpack:///src/app/models/melodies.model.ts","webpack:///src/app/models/modification.model.ts","webpack:///src/app/models/sharpness-bar.model.ts","webpack:///src/app/models/skill.model.ts","webpack:///src/app/models/stat-detail.model.ts","webpack:///src/app/models/stats.model.ts","webpack:///src/app/models/upgrade-container.model.ts","webpack:///src/app/models/upgrade.model.ts","webpack:///src/app/pipes/numberArr.pipe.ts","webpack:///src/app/providers/app-data.provider.ts","webpack:///src/app/services/build.service.ts","webpack:///src/app/services/calculation.service.ts","webpack:///src/app/services/data.service.ts","webpack:///src/app/services/equipment.service.ts","webpack:///src/app/services/set.service.ts","webpack:///src/app/services/skill.service.ts","webpack:///src/app/services/slot.service.ts","webpack:///src/app/services/stat.service.ts","webpack:///src/app/services/tooltip.service.ts","webpack:///src/app/types/ailment.type.ts","webpack:///src/app/types/ammo.type.ts","webpack:///src/app/types/attack.type.ts","webpack:///src/app/types/awakening.type.ts","webpack:///src/app/types/damage.type.ts","webpack:///src/app/types/deviation.type.ts","webpack:///src/app/types/elderseal.type.ts","webpack:///src/app/types/element.type.ts","webpack:///src/app/types/equipment-category.type.ts","webpack:///src/app/types/item.type.ts","webpack:///src/app/types/mode.type.ts","webpack:///src/app/types/pointer.type.ts","webpack:///src/app/types/weapon.type.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","slotService","dataService","buildService","changeDetector","location","equipmentCategoryTypes","itemTypes","equipmentVisible","statsVisible","tabsVisible","attackDefenseVisible","skillsVisible","buffsVisible","detailsVisible","respondToResize","initialize","weaponSlot","headSlot","chestSlot","armsSlot","waistSlot","legsSlot","charmSlot","tool1Slot","tool2Slot","buildIdUpdated$","subscribe","buildId","replaceState","path","anySlotSelected$","slot","itemListModal","title","slotName","isOpen","itemSelected$","item","decorationSelected$","decoration","augmentationSelected$","augmentation","upgradeSelected$","upgrade","setbonusSelected$","setBonus","modificationSelected$","modification","kinsectSelected$","kinsect","hash","loadBuild","window","innerWidth","event","key","document","getElementById","focus","pointerType","Mouse","tooltipComponent","move","clientX","clientY","close","open","changeLogModal","setListModal","confirm","body","canvas","a","createElement","setAttribute","Date","toISOString","toDataURL","replace","click","contributorsModal","moveTooltip","equipmentSelected","statsSelected","skillsSelected","openSaveModal","screenshot","clearAllItems","openContributors","openChangeLog","selector","templateUrl","styleUrls","static","AppModule","provide","useClass","useFactory","appDataProviderFactory","deps","multi","declarations","imports","providers","bootstrap","provider","load","toPromise","AmmoCapacitiesComponent","statService","recoilSuppresorMod","reloadAssistMod","deviationSuppresorMod","closeRangeUpMod","rangeAttackUpMod","shieldMod","showAmmoModsInfo","deviationTypes","recoilType","reloadType","statsUpdated$","stats","setRecoil","Math","abs","recoil","setReload","reload","setDeviation","deviation","levels","every","v","capacity","val","max","ArmorListComponent","equipmentCategoryType","searchLength","headId","bodyId","armsId","waistId","legsId","showFilterContainer","showSortContainer","itemsAll","getArmors","sort","b","getItemTypeIndex","itemType","getArmorIds","itemSelectedNew$","refreshList","armorSlotSelected$","setTimeout","searchBox","nativeElement","select","itemList","refresh","items","virtualItems","itemsWorld","filter","f","itemsIceborne","applyIceborneFilter","applyItemFilter","query","length","toLowerCase","trim","alphaIndex","indexOf","betaIndex","gammaIndex","queryParts","split","filteredItems","itemName","name","skills","getSkills","nameMatch","includes","skillMatch","some","skill","tagMatch","queryPart","tags","tag","i","abgQuery","push","query2Match","resetSearchResults","value","armorTypeSort","itemTypeFilters","onlyIceborne","concat","newItem","Object","assign","selectArmorItemByType","itemTypeFilter","existFilter","index","splice","search","itemSkill","find","s","result","level","itemId","Head","Chest","Arms","Waist","Legs","handsSlot","feetSlot","type","item1","item2","defense","resistance1","resistance2","fireResist","waterResist","thunderResist","iceResist","dragonResist","slotValue1","slotValue2","slots","_itemTypeFilters","loadItems","_onlyIceborne","AugmentationSlotComponent","tooltipService","Augmentation","selectAugmentationSlot","stopPropagation","clearAugmentationSlot","clearTooltipAugmentation","setAugmentation","clicked","setTooltipAugmentation","clearClicked","AugmentationsListComponent","augmentations","getAugmentations","newAugmentation","selectAugmentation","AwakeningSlotComponent","Awakening","weaponIndex","elementTypes","ailmentTypes","awakeningTypes","weaponTypes","elementValues","map","ailmentValues","pop","awakeningValues","JSON","parse","stringify","getAwakenings","selectSetbonusSlot","even","setbonus","clearSkillSlot","awakenins","selectedElement","weaponElement","elementAttack","getSafiElementAttack","changeWeaponName","selectWeaponElement","selectedAilment","weaponAilment","ailmentType","Poison","Blast","ailmentAttack","getSafiAilmentAttack","selectWeaponAilment","getSafiWeaponName","weaponType","selectedAwakening","awakeningLevel","short","maxLevel","min","minLevel","selectAwakenings","awakenings","None","element","assetPath","ailment","_awakeningsLevel","_weaponElement","_weaponAilment","_weaponType","isNaN","Number","initAwakeningValues","HuntingHorn","LightBowgun","HeavyBowgun","Bow","clearSkillClicked","CalcDetailsComponent","setCalc","detailTemplate","calc","calculationTemplate","template","calculationVariables","join","colorClass","_calc","generateTemplate","clearCalc","CharmListComponent","getCharms","selectItem","_itemType","CommonDetailsComponent","CommonModule","DropdownComponent","descendants","ModalComponent","DecorationDetailsComponent","setDecoration","_decoration","loadSkills","Array","clearTooltipItem","DecorationListComponent","decorationSelected","decorationList","decorations","virtualDecorations","getDecorations","decorationLevel","priority","filteredDecorations","d","newDecoration","selectDecoration","getSkill","_decorationLevel","DecorationSlotComponent","Decoration","clearDecorationSlot","selectDecorationSlot","setTooltipItem","showOnClickTooltipItem","EquippedBuffsComponent","equipementService","elementBuffActive","updateElementBuff","buffElementLarge","EquippedSkillsComponent","skillService","equipmentService","skillsUpdated$","skillsBackup","skill1","skill2","isSetBonus","equippedCount","totalLevelCount","localeCompare","setBonusesUpdated$","setBonuses","tool1Count","tool2Count","equippedArmorCount","equippedToolActiveCount","requiredCount","equippedSkill","setEquippedSkill","equippedSetBonus","setEquippedSetBonus","mode","AllSkillActive","Active","Inactive","hasActiveStats","updateSkillMode","detail","activeSkills","skillExtra","es","createEquippedSkill","isNatureBonus","skillIndex","findIndex","x","EquippedStatsComponent","calculationService","attackCalcs","defenseCalcs","attackCalcsUpdated$","calcs","ammoUpdated$","ammo","ammoCapacities","kinsectUpdated$","sharpnessUpdated$","sharp","sharpnessBar","sharpnessBarComponent","handicraftLevel","extraDataUpdated$","extraData","defenseCalcsUpdated$","attackVisible","ammoVisible","kinsectVisible","defenseVisible","info","clearCalcDetails","setSharpTooltip","setExtraDatailsTooltip","otherData","other","variable","displayName","data","otherDetail","sharpDetail","tooltipTemplate","sharpnessDataNeeded","clearSharpDetails","ItemDetailsComponent","rarity","Weapon","getWeaponTypeName","baseAttack","baseAffinityPercent","color","ailmentHidden","ailmentBaseAttack","elementHidden","elementBaseAttack","elderseal","auxDetail","ChargeBlade","SwitchAxe","Gunlance","InsectGlaive","Charm","Tool1","Tool2","duration","recharge","equipmentCategory","Armor","monsters","setItem","_item","setupStats","ItemSlotComponent","modifications","selectItemSlot","equippedLevel","updateItemLevel","active","activeItemTool","getEquipmentCategory","Tool","clearItemSlot","equipmentSlotClicked","equipmentClearClicked","KinsectDetailsComponent","icon","attackType","dustEffect","class1","power","powerDetail","elementPower","speed","heal","_kinsect","KinsectListComponent","sortType","loadKinsects","kinsects","getKinsects","kinsectsWorld","kinsectsIceborne","toLocaleLowerCase","filteredKinsects","k","toString","virtualKinsects","newKinsect","selectKinsect","property","setOnlyIceborne","KinsectSlotComponent","Kinsect","elements","selectKinsectSlot","clearKinsectSlot","clearTooltipKinsect","setKinsect","setTooltipKinsect","MelodiesComponent","note","parseInt","substring","ModificationSlotComponent","Modification","selectModificationSlot","clearModificationSlot","clearTooltipModification","setModification","setTooltipModification","ModificationsListComponent","getModifications","newModification","selectModification","SetBonusDetailsComponent","equipped","clearSetBonus","SetListComponent","setService","sets","selectedSetIndex","loading","hideFilterContainer","setsUpdated$","weaponTypeFilter","getSets","importSet","setName","save","saveSets","sortSets","remove","set","saveBox","dateNow","toLocaleDateString","year","month","day","fileName","fileString","blob","Blob","navigator","msSaveOrOpenBlob","href","URL","createObjectURL","download","appendChild","removeChild","downloadHtmlFile","downloadJsonFile","SetbonusListComponent","setbonusSelected","setbonusList","setbonuses","virtualSetbonuses","getSetBonuses","filteredSetbonuses","newSetbonus","selectSetbonus","setLevels","pieces","SharpnessBarComponent","_handicraftLevel","_sharpnessLevels","total","reduce","maxHandicraftLevels","sharps","maxColorSharp","levelsToSubstract","levelsToAdd","sharpnessEmpty","last","maxLevelSharp","toSubstract","aux","sharpnessAux","colorIndex","first","toSubstract2","reverse","empty","widthModifier","levelsMissing","dataNeeded","sharpsFiltered","sharpnessLevels","generateSharpnessBar","SkillDetailsComponent","clearSkill","ToolListComponent","itemSelected","getTools","applyToolFilter","typeSort","TooltipComponent","renderer","mouseXOffset","mouseYOffset","itemChanged$","hide","reset","show","decorationChanged$","augmentationChanged$","augLevel","description","common","upgradeContainerChanged$","upgradeContainer","modificationChanged$","modLevel","kinsectChanged$","equippedSkillChanged$","equippedSetBonusChanged$","skillChanged$","calcChanged$","visible","y","newTop","newRight","newLeft","container","offsetWidth","scrollWidth","innerHeight","scrollHeight","setStyle","UpgradeSlotComponent","Upgrade","selectUpgradeSlot","clearUpgradeSlot","setUpgradeContainer","setTooltipUpgrade","clearTooltipUpgrade","UpgradeDetailsComponent","upgradeDetails","upgradePassiveAttack","upgradePassiveAffinity","upgradePassiveAilmentElement","upgradePassiveDefense","customUpgradeIds","entries","customId","customUpgradeValues","_upgradeContainer","UpgradesListComponent","upgrades","getUpgrades","newUpg","selectUpgradeContainer","used","selectUpgLevel","verifyUpgrades","augIndex","auxUpg","auxOverrideValue","WeaponLevels","auxDown","totalSlots","overrideUpgrageLevel","updatePassiveStats","clearPassiveStats","auxLevel","upgradeLevel","passiveAttack","passiveAffinity","passiveDefense","slotLevel","healOnHitPercent","passiveAilment","passiveElement","aug","requiredSlots","upgIndex","levelIndex","augId","customUpgrade","customUpgrades","values","augType","cUpg","newDetail","WeaponCustomUpgrades","maximum","acumulator","currentValue","selectUpgrade","WeaponListComponent","getWeapons","weaponSlotSelected$","match","monstersMatch","applyWeaponFilter","weaponTypeSort","getAmmoCapacities","melodies","getMelodies","monster","sharp1","sharp2","sharpnessLevelsBar","DataModule","AmmoCapacitiesLoader","http","ArmorLoader","content","parseTextContent","columnName","parser","AugmentationsLoader","AwakeningsLoader","CharmsLoader","charm","DataLoader","defaultLocale","delimeter","_","resourceName","withLocale","ext","observer","getResources","results","r","txVal","newVal","next","complete","localeData","json","resources","locale","getLocale","loadJsonResource","loadTextResource","fromLocale","get","getPath","pipe","responseType","localStorage","getItem","languages","columnParsers","rows","headerColumns","row","rowValues","j","columnHeader","rowValue","columnParser","p","DecorationsLoader","KinsectsLoader","MelodiesLoader","MelodyEffectLoader","melodyEffect","ModificationsLoader","SetBonusesLoader","SharpnessModifiersLoader","SkillsLoader","ToolsLoader","tool","UpgradesLoader","WeaponModifiersLoader","WeaponsLoader","forEach","over","sharpnessMaxLevel","sharpnessMaxColorIndex","DataParser","MelodiesEffectParser","effects","melodiesEffect","count","effect","melody","MelodiesParser","notes","OtherDataParser","otherLevels","parts","SkillReferencesParser","skillRefs","SlotsParser","TagsParser","ValuesParser","AmmoCapacitiesModel","AmmoTypeModel","AmmoLevelModel","AppDataModel","weaponModifiers","sharpnessModifiers","weapons","armors","charms","tools","AugmentationModel","AwakeningLevelModel","BuffModel","attackBuff","deffenseBuff","elementBuff","BuildModel","BuildItemModel","CommonModel","CommonLevelModel","DecorationModel","EquippedSetBonusModel","weaponCount","headCount","chestCount","armsCount","waistCount","legsCount","EquippedSetBonusDetailModel","EquippedSkillModel","charmCount","toolCount","equippedTool1Count","equippedTool2Count","secretLevelCount","ExtraDataModel","ItemModel","KinsectModel","MelodiesModel","MelodiesDetailModel","ModificationModel","SharpnessBarModel","SkillModel","StatDetailModel","StatsModel","totalAttack","attack","upgradeAttack","awakeningAttack","activeAttack","activeAttackPercent","elementless","elementlessBoostPercent","passiveSharpness","extraSharpness","effectivePhysicalSharpnessModifier","effectiveElementalSharpnessModifier","extraSlot","weaponAttackModifier","critElementModifier","trueCritElementModifier","critStatusModifier","trueCritStatusModifier","affinity","upgradeAffinity","awakeningAffinity","activeAffinity","weakPointAffinity","passiveCriticalBoostPercent","criticalElement","criticalStatus","trueCriticalElement","trueCriticalStatus","baseElementAttack","upgradeElementAttack","awakeningElementAttack","effectiveElementAttack","elementCap","elementCapped","totalElementAttack","totalElementAttackPotential","baseAilmentAttack","upgradeAilmentAttack","awakeningAilmentAttack","effectiveAilmentAttack","ailmentCap","ailmentCapped","totalAilmentAttack","totalAilmentAttackPotential","elementAttackMultiplier","passiveFireAttack","passiveFireAttackPercent","passiveWaterAttack","passiveWaterAttackPercent","passiveThunderAttack","passiveThunderAttackPercent","passiveIceAttack","passiveIceAttackPercent","passiveDragonAttack","passiveDragonAttackPercent","passivePoisonAttack","passivePoisonBuildupPercent","passiveSleepAttack","passiveSleepBuildupPercent","passiveParalysisAttack","passiveParalysisBuildupPercent","passiveBlastAttack","passiveBlastBuildupPercent","passiveStunAttack","passiveStunBuildupPercent","effectivePassiveElementAttack","effectivePassiveAilmentAttack","effectivePassiveAilmentBuildupPercent","activeElementAttack","activeAilmentAttack","activeAilmentAttackBuildUpPercent","eldersealLevelBoost","passiveDefensePercent","activeDefense","passiveHealth","passiveStamina","passiveFireResist","passiveWaterResist","passiveThunderResist","passiveIceResist","passiveDragonResist","ammoCapacitiesUp","ammoUp","UpgradeContainerModel","hasCustomUpgrades","UpgradeModel","UpgradeLevelModel","NumbersArrPipe","args","res","AppDataProvider","weaponLoader","armorLoader","charmsLoader","decorationsLoader","augmentationsLoader","modificationsLoader","kinsectsLoader","skillsLoader","setBonusesLoader","sharpnessModifiersLoader","weaponModifiersLoader","ammoCapacitiesLoader","melodiesLoader","melodyEffectLoader","toolsLoader","upgradesLoader","awakeningsLoader","appData","all","results2","BuildService","loadingBuild","subscribeSlotEvents","updateBuildId","itemLevelChanged$","weaponModSelected$","buildHash","buildParts","build","parseBuildId","loadBuildSlot","head","chest","hands","legs","feet","tool1","tool2","weapon","detectChanges","itemGroupRegex","itemRegex","decoRegex","augRegex","upgRegex","custRegex","awkRegex","setbRegex","kinsectRegex","kinsectElementRegex","elementRegex","ailmentRegex","modRegex","levelRegex","itemGroups","itemGroup","buildItem","decos","decorationIds","deco","augs","augmentationIds","upgs","upgradeLevels","customs","customLevelIds","awks","awk","awkAux","setb","setbonusId","elementId","ailmentId","mods","modificationIds","mod","kinsectId","kinsectElement","kinsectElementId","updateStats","getWeapon","getArmor","getCharm","getTool","types","getElement","upgradeType","getAilment","awakeningLevels","getAwakening","awakeningSlot","getSetBonusByBuildId","getAugmentation","augmentationSlots","toArray","newAug","upgradeSlot","overrideValue","getKinsect","kinsectSlot","modId","getModification","modificationSlots","decorationId","getDecoration","decorationSlots","getItemBuildString","awakening","awakeningSetbonus","elementIndex","hasOwnProperty","getElementId","getAilmentId","CalculationService","affinityTotal","buildAttackCalcs","buildDefenseCalcs","buildAmmoCapacities","buildKinsect","getSharpnessBar","getExtraData","getAttack","getAttackPotential","getAffinity","getAffinityPotential","getCriticalBoost","ailmentCalc","getAilmentAttack","elementCalc","getElementAttack","getElderseal","hastenRecovery","frostcraft","getRawAttack","getRawAttackCritical","getRawAttackAverage","attackCalc","round","getElementlessVariable","getAwakeningVariable","attackPotentialCalc","totalAttackPotential","toFixed","affinityValue","affinityCalc","affinityPotentialCalc","critBoostValue","critBoostCalc","ailmentAttackCalc","valueColor","elementAttackCalc","affinityPotentialTotal","auxDivider","trueElement","getElementAverage","trueAilment","getAilmentAverage","rawAttackAveragePotentialCalc","isInteger","extra1","extra2","class2","elementCriticalBoost","ailmentCriticalBoost","rawAttackAveragePotential","getRawAverage","trueElementPotential","trueAilmentPotential","defValue","def","Blunt","Sever","criticalBoostPercent","attackWithAffinity","attackWithoutAffinity","criticalModifier","sharpnessModifier","ailmentWithAffinity","ailmentWithoutAffinity","elementWithAffinity","elementWithoutAffinity","DataService","appDataProvider","w","armorType","armor","itemSkills","damageType","elementAwakening","safiElements","ailmentAwakening","safiAilments","elementName","Fire","Water","Thunder","Ice","Dragon","ailmentName","Paralysis","Sleep","GreatSword","LongSword","SwordAndShield","DualBlades","Hammer","Lance","weaponName","safiName","getSafiName","getSafiElementName","getSafiAilmentName","weaponId","c","getMelodyDetails","melodyId","melodyEffects","m","EquipmentService","buffs","update","updateSkills","Average","equippedSkills","SetService","loadSets","stringSets","err","console","log","buildV","itemGroupsLenght","overwrite","hashString","resistances","w1","getWeaponTypeIndex","w2","SkillService","equippedSetBonuses","addItemSkills","addDecorationSkills","addSetSkills","addAugmentationSkills","countSkillItemPart","setBonusNames","setBonusParts","setCounts","setBonusName","getSetBonus","sl","setParts","setLevel","raiseSkillId","equippedSkillToRaise","details","bonusLevel","augGroups","skillRef","actualCount","skillId","SlotService","itemActiveChanged$","clearSlotSelect","selectedItemSlot","selected","selectedDecorationSlot","selectedAugmentationSlot","selectedUpgradeSlot","selectedSetbonusSlot","selectedModificationSlot","selectedKinsectSlot","clearSlotItems","equipment","removeDecoration","removeAugmentation","applySlotAugmentation","removeUpgrade","applySlotUpgrade","clearUpgradeContainer","removeAwakening","removeSetbonus","removeModification","removeKinsect","addItem","closeModal","slotAux","currentId","clearArmorSlot","addDecoration","addAugmentation","addUpgrade","selectedAwakeningSlot","addAwakenings","applySlotAwakening","addSetbonus","addModification","addKinsect","changeElement","changeAilment","updateItemActive","slotAugs","augDecorationSlot","decoSlot","decorationSlot","applySlotIncrement","slotAwakening","Slot","extraSlots","decoSlotsIncremented","slotsAdded","totalAdded","added","slotsIncrementRecursive","toAdd","toRemove","removeItem","ds","as","md","StatService","calcService","defaultElementAttackIncreaseCap","awakeningsData","weaponModifier","getWeaponModifier","updateAwakenings","updateUpgrades","updateItemStats","updateSkillStats","updateAugmentations","updateModifications","calculateAttack","updateCalcs","nearestTen","skillUpgrade","toUpperCase","activeWeakPointAffinity","passiveElementResistPercent","hiddenElementUp","elementConversionSkill","sumElementalRes","elementalBonus","floor","attackModifier","Attack","Affinity","awakeningDefense","Defense","awakeningAilment","Ailment","awakeningElement","Element","awakeningSharpness","Sharpness","attackMelody","AttackMelody","staminaMelody","StaminaMelody","elementalMelody","ElementalMelody","statusMelody","StatusMelody","earplugsMelody","EarplugsMelody","getMelodiesById","awakeningNormalCapacity","NormalCapacity","awakeningPierceCapacity","PierceCapacity","awakeningSpreadCapacity","SpreadCapacity","awakeningElementalCapacity","ElementalCapacity","normalCapacity","normalAmmo","normal","pierceCapacity","pierceAmmo","pierce","spreadCapacity","spreadAmmo","spread","elementalCapacity","elementalAmmo","fire","flaming","water","thunder","ice","freeze","dragon","modGroups","Stun","maxHandicraft","currentSharpnessIndex","extraSharpnessAdd","extraSharpnessRemove","getSharpnessModifier","Physical","ElementalSharpnessModifier","Elemental","elementAttackIncreaseCap","elementAttackIncreaseCapOverride","ailmentAttackIncreaseCap","rawAttack","attackPercent","checkElementless","eldersealTypes","currentIndex","newIndex","TooltipService","AilmentType","AmmoType","AttackType","AwakeningType","DamageType","DeviationType","RecoilType","ReloadType","EldersealType","ElementType","EquipmentCategoryType","ItemType","ModeType","PointerType","WeaponType","environment","production","bootstrapModule","catch","error"],"mappings":"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;gBA2Ib,0D;iBAAa,kB,EAAoB,CAAC,QAAD,C;;;;;;;;;;;;;;;;;;;;AEvMnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AA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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Location } from '@angular/common';\nimport { AfterViewInit, ChangeDetectorRef, Component, HostListener, OnInit, ViewChild } from '@angular/core';\nimport { AugmentationSlotComponent } from './components/augmentation-slot/augmentation-slot.component';\nimport { ModalComponent } from './components/common/modal/modal.component';\nimport { DecorationSlotComponent } from './components/decoration-slot/decoration-slot.component';\nimport { EquippedSkillsComponent } from './components/equipped-skills/equipped-skills.component';\nimport { EquippedStatsComponent } from './components/equipped-stats/equipped-stats.component';\nimport { ItemSlotComponent } from './components/item-slot/item-slot.component';\nimport { TooltipComponent } from './components/tooltip/tooltip.component';\nimport { BuildService } from './services/build.service';\nimport { DataService } from './services/data.service';\nimport { SlotService } from './services/slot.service';\nimport { EquipmentCategoryType } from './types/equipment-category.type';\nimport { ItemType } from './types/item.type';\nimport { PointerType } from './types/pointer.type';\nimport html2canvas from 'html2canvas';\n\n@Component({\n\tselector: 'mhw-builder-root',\n\ttemplateUrl: './app.component.html',\n\tstyleUrls: ['./app.component.scss']\n})\n\nexport class AppComponent implements OnInit, AfterViewInit {\n\tpublic equipmentCategoryTypes = EquipmentCategoryType;\n\tpublic itemTypes = ItemType;\n\n\t@ViewChild(EquippedStatsComponent, { static: true }) equippedStatsComponent: EquippedStatsComponent;\n\t@ViewChild(EquippedSkillsComponent, { static: true }) equippedSkillsComponent: EquippedSkillsComponent;\n\t@ViewChild(TooltipComponent, { static: true }) tooltipComponent: TooltipComponent;\n\t@ViewChild('weaponSlot', { static: true }) weaponSlot: ItemSlotComponent;\n\t@ViewChild('headSlot', { static: true }) headSlot: ItemSlotComponent;\n\t@ViewChild('chestSlot', { static: true }) chestSlot: ItemSlotComponent;\n\t@ViewChild('armsSlot', { static: true }) armsSlot: ItemSlotComponent;\n\t@ViewChild('waistSlot', { static: true }) waistSlot: ItemSlotComponent;\n\t@ViewChild('legsSlot', { static: true }) legsSlot: ItemSlotComponent;\n\t@ViewChild('charmSlot', { static: true }) charmSlot: ItemSlotComponent;\n\t@ViewChild('tool1Slot', { static: true }) tool1Slot: ItemSlotComponent;\n\t@ViewChild('tool2Slot', { static: true }) tool2Slot: ItemSlotComponent;\n\n\t@ViewChild('itemListModal', { static: true }) itemListModal: ModalComponent;\n\t@ViewChild('changeLogModal', { static: true }) changeLogModal: ModalComponent;\n\t@ViewChild('setListModal', { static: true }) setListModal: ModalComponent;\n\t@ViewChild('contributorsModal', { static: true }) contributorsModal: ModalComponent;\n\n\tequipmentVisible = true;\n\tstatsVisible = true;\n\n\ttabsVisible = false;\n\tattackDefenseVisible = true;\n\tskillsVisible = true;\n\tbuffsVisible = true;\n\tdetailsVisible = true;\n\n\tmodalTitle: string;\n\n\tselectedEquipmentSlot: ItemSlotComponent;\n\tselectedDecorationSlot: DecorationSlotComponent;\n\tselectedAugmentationSlot: AugmentationSlotComponent;\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.respondToResize();\n\t}\n\n\tconstructor(\n\t\tpublic slotService: SlotService,\n\t\tpublic dataService: DataService,\n\t\tprivate buildService: BuildService,\n\t\tprivate changeDetector: ChangeDetectorRef,\n\t\tprivate location: Location\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.slotService.initialize(\n\t\t\tthis.weaponSlot,\n\t\t\tthis.headSlot,\n\t\t\tthis.chestSlot,\n\t\t\tthis.armsSlot,\n\t\t\tthis.waistSlot,\n\t\t\tthis.legsSlot,\n\t\t\tthis.charmSlot,\n\t\t\tthis.tool1Slot,\n\t\t\tthis.tool2Slot,\n\t\t\tthis.changeDetector\n\t\t);\n\n\t\tthis.respondToResize();\n\n\t\tthis.buildService.initialize(this.changeDetector);\n\n\t\tthis.buildService.buildIdUpdated$.subscribe(buildId => {\n\t\t\tthis.location.replaceState(this.location.path(false), '#' + buildId);\n\t\t});\n\n\t\tthis.slotService.anySlotSelected$.subscribe(slot => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.title = `Select ${slot.slotName}`;\n\t\t\t\tthis.itemListModal.isOpen = slot != null;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.itemSelected$.subscribe(item => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !item;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.decorationSelected$.subscribe(decoration => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !decoration;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.augmentationSelected$.subscribe(augmentation => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !augmentation;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.upgradeSelected$.subscribe(upgrade => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !upgrade;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.setbonusSelected$.subscribe(setBonus => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !setBonus;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.modificationSelected$.subscribe(modification => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !modification;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.kinsectSelected$.subscribe(kinsect => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !kinsect;\n\t\t\t}\n\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\tif (location.hash) {\n\t\t\tthis.buildService.loadBuild(location.hash);\n\t\t}\n\t}\n\n\trespondToResize() {\n\t\tif (window.innerWidth <= 768) {\n\t\t\tif (!this.equipmentVisible && this.statsVisible) {\n\t\t\t\tthis.equipmentVisible = false;\n\t\t\t\tthis.statsVisible = true;\n\t\t\t\tthis.attackDefenseVisible = true;\n\t\t\t\tthis.skillsVisible = false;\n\t\t\t\tthis.buffsVisible = true;\n\t\t\t} else {\n\t\t\t\tthis.equipmentVisible = true;\n\t\t\t\tthis.statsVisible = false;\n\t\t\t\tthis.attackDefenseVisible = false;\n\t\t\t\tthis.skillsVisible = false;\n\t\t\t\tthis.buffsVisible = false;\n\t\t\t}\n\t\t\tthis.tabsVisible = true;\n\t\t} else {\n\t\t\tthis.equipmentVisible = true;\n\t\t\tthis.statsVisible = true;\n\t\t\tthis.attackDefenseVisible = true;\n\t\t\tthis.skillsVisible = true;\n\t\t\tthis.buffsVisible = true;\n\t\t\tthis.tabsVisible = false;\n\t\t}\n\t}\n\n\tequipmentSelected() {\n\t\tthis.equipmentVisible = true;\n\t\tthis.statsVisible = false;\n\t}\n\n\tstatsSelected() {\n\t\tthis.equipmentVisible = false;\n\t\tthis.statsVisible = true;\n\t\tthis.attackDefenseVisible = true;\n\t\tthis.skillsVisible = false;\n\t\tthis.detailsVisible = true;\n\t\tthis.buffsVisible = true;\n\t}\n\tskillsSelected() {\n\t\tthis.equipmentVisible = false;\n\t\tthis.statsVisible = true;\n\t\tthis.attackDefenseVisible = false;\n\t\tthis.skillsVisible = true;\n\t\tthis.detailsVisible = false;\n\t\tthis.buffsVisible = false;\n\t}\n\n\t@HostListener('document:keydown', ['$event']) onKeydownHandler(event: KeyboardEvent) {\n\t\tif (event.key === 'Enter') {\n\t\t\tdocument.getElementById('dummy').focus();\n\t\t}\n\t}\n\n\tmoveTooltip(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipComponent.move(event.clientX, event.clientY);\n\t\t}\n\t}\n\n\topenItemListModal() {\n\t\tif (this.itemListModal.isOpen) {\n\t\t\tthis.itemListModal.close();\n\t\t} else {\n\t\t\tthis.itemListModal.open();\n\t\t}\n\t}\n\n\topenChangeLog() {\n\t\tthis.changeLogModal.open();\n\t}\n\n\topenSaveModal() {\n\t\tthis.setListModal.open();\n\t}\n\n\tclearAllItems() {\n\t\tif (confirm('Are you sure you want to clear all items?')) {\n\t\t\tthis.buildService.loadBuild('#v3iiiiiiiii');\n\t\t} else {\n\t\t}\n\t}\n\n\tscreenshot() {\n\t\thtml2canvas(document.body).then(function(canvas) {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.setAttribute('download', new Date().toISOString()+'.MHW-Builder.png');\n\t\t\ta.setAttribute('href', canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\"));\n\t\t\ta.click();\n\t\t});\n\t}\n\n\topenContributors() {\n\t\tthis.contributorsModal.open();\n\t}\n}\n","<div class=\"container\" (pointermove)=\"moveTooltip($event)\">\n\t<div class=\"tab-container\">\n\t\t<div class=\"tab\" (click)=\"equipmentSelected()\" [class.selected]=\"equipmentVisible\">Equipment</div>\n\t\t<div class=\"tab\" (click)=\"statsSelected()\" [class.selected]=\"attackDefenseVisible && statsVisible\">Stats</div>\n\t\t<div class=\"tab\" (click)=\"skillsSelected()\" [class.selected]=\"skillsVisible && statsVisible\">Skills</div>\n\t\t<div class=\"tab\" (click)=\"openSaveModal()\">\n\t\t\t<i class=\"fas fa-save fa-lg\"></i>\n\t\t</div>\n\t</div>\n\n\t<div class=\"equipment-container\" [hidden]=\"!equipmentVisible\">\n\t\t<div class=\"equipment-slots-container\">\n\t\t\t<mhw-builder-item-slot #weaponSlot slotName=\"Weapon\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #headSlot slotName=\"Head\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #chestSlot slotName=\"Chest\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #armsSlot slotName=\"Arms\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #waistSlot slotName=\"Waist\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #legsSlot slotName=\"Legs\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #charmSlot slotName=\"Charm\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #tool1Slot slotName=\"Tool1\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #tool2Slot slotName=\"Tool2\"></mhw-builder-item-slot>\n\t\t</div>\n\t</div>\n\t<div class=\"stats-container\" [hidden]=\"!statsVisible\">\n\t\t<div class=\"control-buttons\">\n\t\t\t<button type=\"button\" (click)=\"screenshot()\" title=\"Screenshot\">\n\t\t\t\t<i class=\"fas fa-camera fa-lg\"></i>\n\t\t\t</button>\n\t\t\t<button type=\"button\" (click)=\"clearAllItems()\" title=\"Clear\">\n\t\t\t\t<i class=\"fas fa-eraser fa-lg\"></i>\n\t\t\t</button>\n\t\t\t<button type=\"button\" (click)=\"openSaveModal()\" title=\"Save\">\n\t\t\t\t<i class=\"fas fa-save fa-lg\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<mhw-builder-equipped-stats [hidden]=\"!attackDefenseVisible\"></mhw-builder-equipped-stats>\n\t\t<mhw-builder-equipped-skills [hidden]=\"!skillsVisible\"></mhw-builder-equipped-skills>\n\t\t<ng-container *ngIf=\"weaponSlot?.item?.melodies && attackDefenseVisible\">\n\t\t\t<br />\n\t\t\t<h4>\n\t\t\t\tMelodies\n\t\t\t\t<span [hidden]=\"!detailsVisible\" (click)=\"detailsVisible = !detailsVisible\"><i\n\t\t\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t\t\t<span [hidden]=\"detailsVisible\" (click)=\"detailsVisible = !detailsVisible\"><i\n\t\t\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t\t\t</h4>\n\t\t\t<div [hidden]=\"!detailsVisible\">\n\t\t\t\t<hr>\n\t\t\t\t<mhw-builder-melodies [weaponMelodies]=\"weaponSlot.item.melodies\"></mhw-builder-melodies>\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<mhw-builder-equipped-buffs [hidden]=\"!buffsVisible\">\n\n\t\t</mhw-builder-equipped-buffs>\n\t</div>\n\n\t<mhw-builder-tooltip></mhw-builder-tooltip>\n\n\t<div class=\"signature\">\n\t\tBy TurkeyTickle & Neftalimich -\n\t\t<button type=\"button\" (click)=\"openContributors()\">Info</button>\n\t\t<a href=\"https://github.com/neftalimich/mhw-builder\" target=\"_blank\" rel=\"noreferrer\" title=\"github\">\n\t\t\t<i class=\"fab fa-github\"></i>\n\t\t</a>\n\t\t<a href=\"https://discord.gg/4s7yqFg\" target=\"_blank\" rel=\"noreferrer\" title=\"discord\">\n\t\t\t<i class=\"fab fa-discord\"></i>\n\t\t</a>\n\t\t<a href=\"https://twitter.com/mhw_builder\" target=\"_blank\" rel=\"noreferrer\" title=\"twitter\">\n\t\t\t<i class=\"fab fa-twitter\"></i>\n\t\t</a>\n\t</div>\n\n\t<div class=\"version-info\">\n\t\t<button type=\"button\" id=\"dummy\" aria-label=\"dummy\"></button>\n\t\t<button type=\"button\" (click)=\"openChangeLog()\">ChangeLog</button>\n\t</div>\n\n\t<mhw-builder-modal #setListModal title=\"Saved Sets List\">\n\t\t<mhw-builder-set-list></mhw-builder-set-list>\n\t</mhw-builder-modal>\n\n\t<mhw-builder-modal #contributorsModal title=\"Information\">\n\t\t<div style=\"padding:16px;\">\n\t\t\t<h3>\n\t\t\t\t<a href=\"https://github.com/TurkeyTickle/mhw-builder\" target=\"_blank\" rel=\"noreferrer\">TurkeyTickle\n\t\t\t\t\tGithub (v1.0)</a>\n\t\t\t</h3>\n\t\t\t<h3>\n\t\t\t\t<a href=\"https://www.github.com/neftalimich/mhw-builder\" target=\"_blank\" rel=\"noreferrer\">Neftalí\n\t\t\t\t\tMichelet Github (v2.0)</a>\n\t\t\t</h3>\n\t\t\t<p>\n\t\t\t\t<a href=\"https://twitter.com/mhw_builder\" target=\"_blank\" rel=\"noreferrer\">MHW Builder Twitter</a>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<a href=\"https://paypal.me/neftalimich\" target=\"_blank\" rel=\"noreferrer\">Donations 🙏</a>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<a href=\"http://honeyhunterworld.com/mhwbi/\" target=\"_blank\" rel=\"noreferrer\">Honey Hunter World</a>\n\t\t\t</p>\n\t\t</div>\n\t</mhw-builder-modal>\n\n\t<mhw-builder-modal #itemListModal>\n\t\t<mhw-builder-weapon-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Weapon\"\n\t\t\t[itemType]=\"slotService.selectedItemSlot?.slotName\" [onlyIceborne]=\"slotService.onlyIceborne\">\n\t\t</mhw-builder-weapon-list>\n\n\t\t<mhw-builder-armor-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Armor\"\n\t\t\t[itemTypeFilters]=\"[slotService.selectedItemSlot?.slotName]\" [onlyIceborne]=\"slotService.onlyIceborne\">\n\t\t</mhw-builder-armor-list>\n\n\t\t<mhw-builder-charm-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Charm\"\n\t\t\t[itemType]=\"slotService.selectedItemSlot?.slotName\"></mhw-builder-charm-list>\n\n\t\t<mhw-builder-tool-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Tool\"\n\t\t\t[itemType]=\"slotService.selectedItemSlot?.slotName\"></mhw-builder-tool-list>\n\n\t\t<mhw-builder-decoration-list *ngIf=\"slotService.selectedDecorationSlot\"\n\t\t\t[decorationLevel]=\"slotService.selectedDecorationSlot?.level\"></mhw-builder-decoration-list>\n\t\t<mhw-builder-augmentations-list *ngIf=\"slotService.selectedAugmentationSlot\"></mhw-builder-augmentations-list>\n\t\t<mhw-builder-upgrades-list *ngIf=\"slotService.selectedUpgradeSlot\"\n\t\t\t[upgradeContainer]=\"slotService.selectedUpgradeSlot?.upgradeContainer\"></mhw-builder-upgrades-list>\n\t\t<mhw-builder-setbonus-list *ngIf=\"slotService.selectedSetbonusSlot\"></mhw-builder-setbonus-list>\n\t\t<mhw-builder-modifications-list *ngIf=\"slotService.selectedModificationSlot\"></mhw-builder-modifications-list>\n\t\t<mhw-builder-kinsect-list *ngIf=\"slotService.selectedKinsectSlot\"></mhw-builder-kinsect-list>\n\t</mhw-builder-modal>\n\n\t<mhw-builder-modal #changeLogModal title=\"Change Log\">\n\t\t<div style=\"padding:16px;\">\n\t\t\t<h3>2020-07-12 Alatreon (Version 3.1.8)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Alatreon.</li>\n\t\t\t\t<li>Buffs Alpha</li>\n\t\t\t</ul>\n\t\t\t<h3>2020-01-01 ICEBORNE (Version 3.0.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Safi'Jiiva Weapons and Awakenings.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-10-14 ICEBORNE (Version 2.7.5)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Now you can select multiple distinct armor pieces using the filter.</li>\n\t\t\t\t<li>Bug fixes.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-10-10 ICEBORNE (Version 2.7.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>New Rajang Weapons/Armor added.</li>\n\t\t\t\t<li>New Custom upgrades updated.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-09-22 ICEBORNE (Version 2.6.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>New Weapons Augment System added.</li>\n\t\t\t\t<li>New Weapons Custom Upgrade System added.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-09-22 ICEBORNE (Version 2.5.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Tools Slots Added.</li>\n\t\t\t\t<li>Active/Inactive Tools Slot.</li>\n\t\t\t\t<li>Equipped Skills Desing Improvement.</li>\n\t\t\t\t<li>Iceborne Armor Pack 1.</li>\n\t\t\t\t<li>Iceborne Weapon Pack 1. (Thanks HoneyTear)</li>\n\t\t\t\t<li>New Charms.</li>\n\t\t\t\t<li>New & Updated Skills Pack 1.</li>\n\t\t\t\t<li>Etc.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-03-20 (Version 2.3)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Download Set List HTML + AngularJS.</li>\n\t\t\t\t<li>Filters</li>\n\t\t\t\t<li>Bug Fixes</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-03-19 (Version 2.2.5)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Kinsect Slot.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-03-15 (Version 2.2.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>HBG/LBG Modifications Slot Added.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-01-11 (Version 2.1.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Save sets list.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-01-01 (Version 2.0.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Tons of improvements.</li>\n\t\t\t</ul>\n\t\t</div>\n\t</mhw-builder-modal>\n</div>","import { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { VirtualScrollerModule } from 'ngx-virtual-scroller';\nimport { AppComponent } from './app.component';\nimport { AmmoCapacitiesComponent } from './components/ammo-capacities/ammo-capacities.component';\nimport { ArmorListComponent } from './components/armor-list/armor-list.component';\nimport { AugmentationSlotComponent } from './components/augmentation-slot/augmentation-slot.component';\nimport { AugmentationsListComponent } from './components/augmentations-list/augmentations-list.component';\nimport { AwakeningSlotComponent } from './components/awakening-slot/awakening-slot.component';\nimport { CalcDetailsComponent } from './components/calc-details/calc-details.component';\nimport { CharmListComponent } from './components/charm-list/charm-list.component';\nimport { CommonDetailsComponent } from './components/common-details/common-details.component';\nimport { CommonModule } from './components/common/common.module';\nimport { DecorationDetailsComponent } from './components/decoration-details/decoration-details.component';\nimport { DecorationListComponent } from './components/decoration-list/decoration-list.component';\nimport { DecorationSlotComponent } from './components/decoration-slot/decoration-slot.component';\nimport { EquippedSkillsComponent } from './components/equipped-skills/equipped-skills.component';\nimport { EquippedStatsComponent } from './components/equipped-stats/equipped-stats.component';\nimport { EquippedBuffsComponent } from './components/equipped-buffs/equipped-buffs.component';\nimport { ItemDetailsComponent } from './components/item-details/item-details.component';\nimport { ItemSlotComponent } from './components/item-slot/item-slot.component';\nimport { KinsectDetailsComponent } from './components/kinsect-details/kinsect-details.component';\nimport { KinsectListComponent } from './components/kinsect-list/kinsect-list.component';\nimport { KinsectSlotComponent } from './components/kinsect-slot/kinsect-slot.component';\nimport { MelodiesComponent } from './components/melodies/melodies.component';\nimport { ModificationSlotComponent } from './components/modification-slot/modification-slot.component';\nimport { ModificationsListComponent } from './components/modifications-list/modifications-list.component';\nimport { SetBonusDetailsComponent } from './components/set-bonus-details/set-bonus-details.component';\nimport { SetListComponent } from './components/set-list/set-list.component';\nimport { SetbonusListComponent } from './components/setbonus-list/setbonus-list.component';\nimport { SharpnessBarComponent } from './components/sharpness-bar/sharpness-bar.component';\nimport { SkillDetailsComponent } from './components/skill-details/skill-details.component';\nimport { ToolListComponent } from './components/tool-list/tool-list.component';\nimport { TooltipComponent } from './components/tooltip/tooltip.component';\nimport { UpgradeSlotComponent } from './components/upagrade-slot/upgrade-slot.component';\nimport { UpgradeDetailsComponent } from './components/upgrade-details/upgrade-details.component';\nimport { UpgradesListComponent } from './components/upgrades-list/upgrades-list.component';\nimport { WeaponListComponent } from './components/weapon-list/weapon-list.component';\nimport { DataModule } from './data/data.module';\nimport { NumbersArrPipe } from './pipes/numberArr.pipe';\nimport { AppDataProvider } from './providers/app-data.provider';\nimport { BuildService } from './services/build.service';\nimport { CalculationService } from './services/calculation.service';\nimport { DataService } from './services/data.service';\nimport { EquipmentService } from './services/equipment.service';\nimport { SetService } from './services/set.service';\nimport { SkillService } from './services/skill.service';\nimport { SlotService } from './services/slot.service';\nimport { StatService } from './services/stat.service';\nimport { TooltipService } from './services/tooltip.service';\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tArmorListComponent,\n\t\tWeaponListComponent,\n\t\tAugmentationsListComponent,\n\t\tUpgradesListComponent,\n\t\tModificationsListComponent,\n\t\tKinsectListComponent,\n\t\tAmmoCapacitiesComponent,\n\t\tMelodiesComponent,\n\t\tDecorationListComponent,\n\t\tCharmListComponent,\n\t\tToolListComponent,\n\t\tSetbonusListComponent,\n\t\tItemDetailsComponent,\n\t\tCommonDetailsComponent,\n\t\tUpgradeDetailsComponent,\n\t\tDecorationDetailsComponent,\n\t\tKinsectDetailsComponent,\n\t\tItemSlotComponent,\n\t\tAugmentationSlotComponent,\n\t\tUpgradeSlotComponent,\n\t\tAwakeningSlotComponent,\n\t\tModificationSlotComponent,\n\t\tKinsectSlotComponent,\n\t\tDecorationSlotComponent,\n\t\tEquippedStatsComponent,\n\t\tEquippedSkillsComponent,\n\t\tEquippedBuffsComponent,\n\t\tCalcDetailsComponent,\n\t\tSkillDetailsComponent,\n\t\tSetBonusDetailsComponent,\n\t\tTooltipComponent,\n\t\tSharpnessBarComponent,\n\t\tSetListComponent,\n\t\tNumbersArrPipe,\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tHttpClientModule,\n\t\tVirtualScrollerModule,\n\t\tDataModule,\n\t\tCommonModule\n\t],\n\tproviders: [\n\t\tLocation,\n\t\t{ provide: LocationStrategy, useClass: PathLocationStrategy },\n\t\tDataService,\n\t\tSkillService,\n\t\tTooltipService,\n\t\tEquipmentService,\n\t\tSlotService,\n\t\tStatService,\n\t\tCalculationService,\n\t\tBuildService,\n\t\tSetService,\n\t\tAppDataProvider,\n\t\t{ provide: APP_INITIALIZER, useFactory: appDataProviderFactory, deps: [AppDataProvider], multi: true }\n\t],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule { }\n\nexport function appDataProviderFactory(provider: AppDataProvider) {\n\treturn () => provider.load().toPromise();\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { StatService } from 'src/app/services/stat.service';\nimport { AmmoCapacitiesModel, AmmoLevelModel } from '../../models/ammo-capacities.model';\nimport { DeviationType, RecoilType, ReloadType } from '../../types/deviation.type';\n\n@Component({\n\tselector: 'mhw-builder-ammo-capacities',\n\ttemplateUrl: './ammo-capacities.component.html',\n\tstyleUrls: ['./ammo-capacities.component.scss']\n})\nexport class AmmoCapacitiesComponent implements OnInit {\n\n\t@Input() ammoCapacities: AmmoCapacitiesModel;\n\n\trecoilSuppresorMod = 0;\n\treloadAssistMod = 0;\n\tdeviationSuppresorMod = 0;\n\tcloseRangeUpMod = 0;\n\trangeAttackUpMod = 0;\n\tshieldMod = 0;\n\n\tshowAmmoModsInfo = false;\n\n\tdeviationTypes = DeviationType;\n\trecoilType = RecoilType;\n\treloadType = ReloadType;\n\n\tconstructor(private statService: StatService) {\n\t\tthis.statService.statsUpdated$.subscribe(stats => {\n\t\t\tthis.recoilSuppresorMod = 0;\n\t\t\tthis.reloadAssistMod = 0;\n\t\t\tthis.deviationSuppresorMod = 0;\n\t\t\tthis.setRecoil(Math.abs(stats.recoil));\n\t\t\tthis.setReload(Math.abs(stats.reload));\n\t\t\tthis.setDeviation(Math.abs(stats.deviation));\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n\tallZero(levels: AmmoLevelModel[]) {\n\t\treturn levels.every(v => v.capacity == 0);\n\t}\n\n\tsetRecoil(val: number) {\n\t\tif (this.recoilSuppresorMod == val) {\n\t\t\tthis.recoilSuppresorMod = Math.max(this.recoilSuppresorMod - 1, 0);\n\t\t} else {\n\t\t\tthis.recoilSuppresorMod = val;\n\t\t}\n\t}\n\tsetReload(val: number) {\n\t\tif (this.reloadAssistMod == val) {\n\t\t\tthis.reloadAssistMod = Math.max(this.reloadAssistMod - 1, 0);\n\t\t} else {\n\t\t\tthis.reloadAssistMod = val;\n\t\t}\n\t}\n\tsetDeviation(val: number) {\n\t\tif (this.deviationSuppresorMod == val) {\n\t\t\tthis.deviationSuppresorMod = Math.max(this.deviationSuppresorMod - 1, 0);\n\t\t} else {\n\t\t\tthis.deviationSuppresorMod = val;\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<div *ngIf=\"showAmmoModsInfo\" class=\"\">\n\t\t<button type=\"button\" (click)=\"setRecoil(1)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 0}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 1\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setRecoil(2)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 1}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 2\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setRecoil(3)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 2}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 3\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setRecoil(4)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 3}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 4\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(1)\" [ngClass]=\"{'reload':reloadAssistMod > 0}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 1\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(2)\" [ngClass]=\"{'reload':reloadAssistMod > 1}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 2\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(3)\" [ngClass]=\"{'reload':reloadAssistMod > 2}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 3\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(4)\" [ngClass]=\"{'reload':reloadAssistMod > 3}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 4\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(1)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 0}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 1\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(2)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 1}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 2\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(3)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 2}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 3\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(4)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 3}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 4\n\t\t</button>\n\t</div>\n\t<table *ngIf=\"ammoCapacities?.deviation\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th style=\"text-align:left;\">\n\t\t\t\t\tDeviation {{ammoCapacities.deviation[deviationSuppresorMod]}}\n\t\t\t\t\t<span *ngIf=\"deviationSuppresorMod >= ammoCapacities.deviation.length\">\n\t\t\t\t\t\t{{ammoCapacities.deviation[ ammoCapacities.deviation.length-1]}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<br />\n\t\t\t\t\t{{ammoCapacities.specialAmmo}}\n\t\t\t\t\t<button>\n\t\t\t\t\t\t<i class=\"fas fa-cog\" [ngClass]=\"{'sharp-2': showAmmoModsInfo}\" (click)=\"showAmmoModsInfo =! showAmmoModsInfo\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</th>\n\t\t\t\t<th class=\"text-right\">Lv 1</th>\n\t\t\t\t<th class=\"text-right\">Lv 2</th>\n\t\t\t\t<th class=\"text-right\">Lv 3</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<ng-container *ngFor=\"let ammo of ammoCapacities.ammo\">\n\t\t\t\t<tr *ngIf=\"!allZero(ammo.levels)\">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<img [src]=\"'assets/images/ammo/ammo-'+ammo.name+'-icon.png'\" alt=\"Bullet\" /> {{ammo.name|titlecase}}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td *ngFor=\"let level of ammo.levels\" class=\"text-right\">\n\t\t\t\t\t\t<div *ngIf=\"!showAmmoModsInfo\" class=\"\">\n\t\t\t\t\t\t\t<span style=\"font-weight:bold;\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90 recoil\" *ngIf=\"level.type == 1\"></i>\n\t\t\t\t\t\t\t\t<i class=\"fas fa-angle-double-up sharp-2\" *ngIf=\"level.type == 2\"></i>\n\t\t\t\t\t\t\t\t{{level.capacity}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"showAmmoModsInfo && level.capacity > 0\" class=\"\">\n\t\t\t\t\t\t\t<span *ngIf=\"recoilSuppresorMod<level.recoil.length\" class=\"recoil\">\n\t\t\t\t\t\t\t\t<!--{{level.recoil[recoilSuppresorMod]}}-->\n\t\t\t\t\t\t\t\t{{recoilType[level.recoil[recoilSuppresorMod]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngIf=\"recoilSuppresorMod>=level.recoil.length\" class=\"recoil\">\n\t\t\t\t\t\t\t\t{{recoilType[level.recoil[level.recoil.length-1]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span *ngIf=\"reloadAssistMod<level.reload.length\" class=\"reload\">\n\t\t\t\t\t\t\t\t<!--{{level.reload[reloadAssistMod]}}-->\n\t\t\t\t\t\t\t\t{{reloadType[level.reload[reloadAssistMod]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngIf=\"reloadAssistMod>=level.reload.length\" class=\"reload\">\n\n\t\t\t\t\t\t\t\t<!--{{level.reload[level.reload.length-1]}}-->\n\t\t\t\t\t\t\t\t{{reloadType[level.reload[level.reload.length-1]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td *ngIf=\"(ammo.levels).length < 3\">\n\t\t\t\t\t\t-\n\t\t\t\t\t</td>\n\t\t\t\t\t<td *ngIf=\"(ammo.levels).length < 2\">\n\t\t\t\t\t\t-\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</ng-container>\n\t\t</tbody>\n\t</table>\n\t<div class=\"no-data-warning\" *ngIf=\"ammoCapacities?.missingData && showAmmoModsInfo\">\n\t\tAmmo capacity data is missing!\n\t</div>\n\t<div class=\"no-data-warning\" *ngIf=\"ammoCapacities?.missingMods && showAmmoModsInfo\">\n\t\tAmmo mods data is missing!\n\t</div>\n</div>\n","import { Component, ElementRef, HostListener, Input, OnInit, ViewChild } from '@angular/core';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\n\n@Component({\n\tselector: 'mhw-builder-armor-list',\n\ttemplateUrl: './armor-list.component.html',\n\tstyleUrls: ['./armor-list.component.scss']\n})\nexport class ArmorListComponent implements OnInit {\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\tprivate _itemTypeFilters: ItemType[];\n\tprivate _onlyIceborne: boolean;\n\tprivate searchLength = 0;\n\n\t@Input()\n\tset itemTypeFilters(itemTypeFilters: ItemType[]) {\n\t\tthis._itemTypeFilters = itemTypeFilters;\n\t\tthis.loadItems();\n\t\tthis.search({ key: 'Filter' }, this.searchBox.nativeElement.value);\n\t}\n\tget itemTypeFilters(): ItemType[] { return this._itemTypeFilters; }\n\n\t@Input()\n\tset onlyIceborne(onlyIceborne: boolean) {\n\t\tthis._onlyIceborne = onlyIceborne;\n\t\tthis.search({ key: 'Filter' }, this.searchBox.nativeElement.value);\n\t\tthis.armorTypeSort = '';\n\t}\n\tget onlyIceborne(): boolean { return this._onlyIceborne; }\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titemsAll: ItemModel[];\n\titemsWorld: ItemModel[];\n\titemsIceborne: ItemModel[];\n\tfilteredItems: ItemModel[];\n\tvirtualItems: ItemModel[];\n\tarmorTypeSort: string;\n\n\theadId = 0;\n\tbodyId = 0;\n\tarmsId = 0;\n\twaistId = 0;\n\tlegsId = 0;\n\n\tshowFilterContainer = true;\n\tshowSortContainer = true;\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService\n\t) {\n\t\tthis.itemsAll = this.dataService.getArmors();\n\t\tthis.itemsAll.sort((a, b) => {\n\t\t\treturn (this.getItemTypeIndex(a.itemType) > this.getItemTypeIndex(b.itemType)) ?\n\t\t\t\t1 : ((this.getItemTypeIndex(b.itemType) > this.getItemTypeIndex(a.itemType)) ?\n\t\t\t\t\t-1 : 0);\n\t\t});\n\n\t\tthis.slotService.itemSelected$.subscribe(item => {\n\t\t\tthis.getArmorIds();\n\t\t});\n\t\tthis.slotService.itemSelectedNew$.subscribe(item => {\n\t\t\tthis.getArmorIds();\n\t\t});\n\t}\n\n\tngOnInit(): void {\n\t\tthis.slotService.armorSlotSelected$.subscribe(slot => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.searchBox.nativeElement.focus();\n\t\t\t\tthis.searchBox.nativeElement.select();\n\t\t\t}, 250);\n\t\t});\n\t\tthis.getArmorIds();\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tonItemListUpdate(items: ItemModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tloadItems() {\n\t\tthis.itemsWorld = this.itemsAll.filter(f => f.id < 1000);\n\t\tthis.itemsIceborne = this.itemsAll.filter(f => f.id >= 1000);\n\n\t\tthis.applyIceborneFilter();\n\t\tthis.applyItemFilter();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(event, query: string) {\n\t\tif (query.length < this.searchLength || (event && (event.key === 'FilterHard' || event.key === 'Backspace' || event.key === 'Delete'))) {\n\t\t\tthis.applyIceborneFilter();\n\t\t}\n\n\t\tif (query) {\n\t\t\tif (query.length > 2) {\n\t\t\t\tquery = query.toLowerCase().trim();\n\n\t\t\t\tconst alphaIndex = query.indexOf('alpha');\n\t\t\t\tif (alphaIndex > -1) {\n\t\t\t\t\tquery = query.replace('alpha', '');\n\t\t\t\t}\n\t\t\t\tconst betaIndex = query.indexOf('beta');\n\t\t\t\tif (betaIndex > -1) {\n\t\t\t\t\tquery = query.replace('beta', '');\n\t\t\t\t}\n\t\t\t\tconst gammaIndex = query.indexOf('gamma');\n\t\t\t\tif (gammaIndex > -1) {\n\t\t\t\t\tquery = query.replace('gamma', '');\n\t\t\t\t}\n\t\t\t\tquery = query.trim();\n\n\t\t\t\tconst queryParts = query.split(' ');\n\n\t\t\t\tif ((query.length !== this.searchLength || event && event.key === 'FilterSoft') && (alphaIndex > -1 || betaIndex > -1 || gammaIndex > -1)) {\n\t\t\t\t\tthis.applyIceborneFilter();\n\t\t\t\t}\n\n\t\t\t\tif (this.filteredItems) {\n\t\t\t\t\tfor (const item of this.filteredItems) {\n\t\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\t\t\t\t\t\tconst skills = this.dataService.getSkills(item.skills);\n\n\t\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\t\t\t\t\t\tconst skillMatch = skills.some(skill => skill.name.toLowerCase().includes(query));\n\n\t\t\t\t\t\tconst tagMatch = queryParts.some(queryPart => {\n\t\t\t\t\t\t\treturn item.tags.some(tag => tag.toLowerCase().includes(queryPart));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!nameMatch && !skillMatch && !tagMatch) {\n\t\t\t\t\t\t\tthis.filteredItems = this.filteredItems.filter(i => i.name != item.name);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (alphaIndex > -1 || betaIndex > -1 || gammaIndex > -1) {\n\t\t\t\t\t\t\tconst abgQuery = [];\n\n\t\t\t\t\t\t\tif (alphaIndex > -1) {\n\t\t\t\t\t\t\t\tabgQuery.push('α');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (betaIndex > -1) {\n\t\t\t\t\t\t\t\tabgQuery.push('β');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (gammaIndex > -1) {\n\t\t\t\t\t\t\t\tabgQuery.push('γ');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst query2Match = abgQuery.some(queryPart => {\n\t\t\t\t\t\t\t\treturn itemName.includes(queryPart);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!query2Match) {\n\t\t\t\t\t\t\t\tthis.filteredItems = this.filteredItems.filter(i => i.name != item.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.applyItemFilter();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t\tthis.searchLength = query.length;\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.applyIceborneFilter();\n\t\tthis.applyItemFilter();\n\t\tthis.armorTypeSort = '';\n\t}\n\n\tapplyItemFilter() {\n\t\tif (this.filteredItems && this.itemTypeFilters) {\n\t\t\tthis.filteredItems = this.filteredItems.filter(item => {\n\t\t\t\tfor (const itemType of this.itemTypeFilters) {\n\t\t\t\t\tif (item.itemType == itemType) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t}\n\n\tapplyIceborneFilter() {\n\t\tif (this.onlyIceborne) {\n\t\t\tthis.filteredItems = this.itemsIceborne;\n\t\t} else {\n\t\t\tthis.filteredItems = this.itemsIceborne.concat(this.itemsWorld);\n\t\t}\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tconst newItem = Object.assign({}, item);\n\t\tif (this.itemTypeFilters.length == 1) {\n\t\t\tthis.slotService.selectArmorItemByType(newItem, true);\n\t\t} else {\n\t\t\tthis.slotService.selectArmorItemByType(newItem);\n\t\t}\n\t}\n\n\taddItemTypeFilter(itemTypeFilter: ItemType) {\n\t\tconst existFilter = this.itemTypeFilters.filter(f => f == itemTypeFilter);\n\t\tif (existFilter.length > 0) {\n\t\t\tconst index = this.itemTypeFilters.indexOf(existFilter[0], 0);\n\t\t\tif (index > -1) {\n\t\t\t\tthis.itemTypeFilters.splice(index, 1);\n\t\t\t}\n\t\t\tthis.search({ key: 'FilterSoft' }, this.searchBox.nativeElement.value);\n\t\t} else {\n\t\t\tthis.itemTypeFilters.push(itemTypeFilter);\n\t\t\tthis.search({ key: 'FilterHard' }, this.searchBox.nativeElement.value);\n\t\t}\n\t}\n\n\tgetSkillCount(item: ItemModel, skill: SkillModel): string {\n\t\tconst itemSkill = item.skills.find(s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\titemTypeIsSelected(itemType: ItemType) {\n\t\tif (this.itemTypeFilters.filter(f => f == itemType).length > 0) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\titemIsSelected(id: number, itemType: ItemType) {\n\t\tlet itemId = 0;\n\n\t\tswitch (itemType) {\n\t\t\tcase ItemType.Head:\n\t\t\t\titemId = this.headId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Chest:\n\t\t\t\titemId = this.bodyId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Arms:\n\t\t\t\titemId = this.armsId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Waist:\n\t\t\t\titemId = this.waistId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Legs:\n\t\t\t\titemId = this.legsId;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn id == itemId;\n\t}\n\n\tgetArmorIds() {\n\t\tif (this.slotService.headSlot.item) {\n\t\t\tthis.headId = this.slotService.headSlot.item.id;\n\t\t} else {\n\t\t\tthis.headId = 0;\n\t\t}\n\t\tif (this.slotService.chestSlot.item) {\n\t\t\tthis.bodyId = this.slotService.chestSlot.item.id;\n\t\t} else {\n\t\t\tthis.bodyId = 0;\n\t\t}\n\t\tif (this.slotService.handsSlot.item) {\n\t\t\tthis.armsId = this.slotService.handsSlot.item.id;\n\t\t} else {\n\t\t\tthis.armsId = 0;\n\t\t}\n\t\tif (this.slotService.legsSlot.item) {\n\t\t\tthis.waistId = this.slotService.legsSlot.item.id;\n\t\t} else {\n\t\t\tthis.waistId = 0;\n\t\t}\n\t\tif (this.slotService.feetSlot.item) {\n\t\t\tthis.legsId = this.slotService.feetSlot.item.id;\n\t\t} else {\n\t\t\tthis.legsId = 0;\n\t\t}\n\t}\n\n\tgetItemTypeIndex(type: ItemType): number {\n\t\tif (type == ItemType.Head) {\n\t\t\treturn 1;\n\t\t} else if (type == ItemType.Chest) {\n\t\t\treturn 2;\n\t\t} else if (type == ItemType.Arms) {\n\t\t\treturn 3;\n\t\t} else if (type == ItemType.Waist) {\n\t\t\treturn 4;\n\t\t} else if (type == ItemType.Legs) {\n\t\t\treturn 5;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tsortByDefense() {\n\t\tthis.armorTypeSort = 'DEF';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.defense[2] > item2.defense[2]) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.defense[2] < item2.defense[2]) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortByResistance(type: string) {\n\t\tthis.armorTypeSort = type;\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet resistance1 = 0;\n\t\t\tlet resistance2 = 0;\n\t\t\tif (type == 'FIR') {\n\t\t\t\tresistance1 = item1.fireResist;\n\t\t\t\tresistance2 = item2.fireResist;\n\t\t\t} else if (type == 'WAT') {\n\t\t\t\tresistance1 = item1.waterResist;\n\t\t\t\tresistance2 = item2.waterResist;\n\t\t\t} else if (type == 'THU') {\n\t\t\t\tresistance1 = item1.thunderResist;\n\t\t\t\tresistance2 = item2.thunderResist;\n\t\t\t} else if (type == 'ICE') {\n\t\t\t\tresistance1 = item1.iceResist;\n\t\t\t\tresistance2 = item2.iceResist;\n\t\t\t} else if (type == 'DRA') {\n\t\t\t\tresistance1 = item1.dragonResist;\n\t\t\t\tresistance2 = item2.dragonResist;\n\t\t\t}\n\t\t\tif (resistance1 > resistance2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (resistance1 < resistance2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortBySlots() {\n\t\tthis.armorTypeSort = 'SLOT';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet slotValue1 = 0;\n\t\t\tlet slotValue2 = 0;\n\n\t\t\tif (item1.slots.length > 0) {\n\t\t\t\tslotValue1 += item1.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item1.slots.length > 1) {\n\t\t\t\tslotValue1 += item1.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item1.slots.length > 2) {\n\t\t\t\tslotValue1 += item1.slots[2].level;\n\t\t\t}\n\t\t\tif (item2.slots.length > 0) {\n\t\t\t\tslotValue2 += item2.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item2.slots.length > 1) {\n\t\t\t\tslotValue2 += item2.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item2.slots.length > 2) {\n\t\t\t\tslotValue2 += item2.slots[2].level;\n\t\t\t}\n\n\t\t\tif (slotValue1 > slotValue2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (slotValue1 < slotValue2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search($event, searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\t\t<button type=\"button\" class=\"iceborne-button\" (click)=\"onlyIceborne = !onlyIceborne\" title=\"Only Iceborne\">\n\t\t\t<i class=\"fas fa-toggle-on\" [hidden]=\"!onlyIceborne\"></i>\n\t\t\t<i class=\"fas fa-toggle-off\" [hidden]=\"onlyIceborne\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"showFilterContainer=!showFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"filter-container\" *ngIf=\"showFilterContainer\">\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Head')\"\n\t\t\t(click)=\"addItemTypeFilter('Head')\" title=\"Head\">\n\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"headId == 0\" alt=\"Head\">\n\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"headId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"head\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Chest')\"\n\t\t\t(click)=\"addItemTypeFilter('Chest')\" title=\"Chest\">\n\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"bodyId == 0\" alt=\"Chest\">\n\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"bodyId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Chest\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Arms')\"\n\t\t\t(click)=\"addItemTypeFilter('Arms')\" title=\"Arms\">\n\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"armsId == 0\" alt=\"Arms\">\n\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"armsId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Arms\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Waist')\"\n\t\t\t(click)=\"addItemTypeFilter('Waist')\" title=\"Waist\">\n\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"waistId == 0\" alt=\"Waist\">\n\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"waistId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Waist\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Legs')\"\n\t\t\t(click)=\"addItemTypeFilter('Legs')\" title=\"Legs\">\n\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"legsId == 0\" alt=\"Legs\">\n\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"legsId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Legs\">\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'DEF'\" (click)=\"sortByDefense()\">\n\t\t\t<span>DEF</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'FIR'\"\n\t\t\t(click)=\"sortByResistance('FIR')\">\n\t\t\t<span>FIR</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'WAT'\"\n\t\t\t(click)=\"sortByResistance('WAT')\">\n\t\t\t<span>WAT</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'THU'\"\n\t\t\t(click)=\"sortByResistance('THU')\">\n\t\t\t<span>THU</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'ICE'\"\n\t\t\t(click)=\"sortByResistance('ICE')\">\n\t\t\t<span>ICE</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'DRA'\"\n\t\t\t(click)=\"sortByResistance('DRA')\">\n\t\t\t<span>DRA</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'SLOT'\" (click)=\"sortBySlots()\">\n\t\t\t<span>SLOT</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"itemsAll\" [items]=\"filteredItems\"\n\t\t(vsUpdate)=\"onItemListUpdate($event)\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\"\n\t\t\t[class.itemSelected]=\"itemIsSelected(item.id, item.itemType)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"'vColor-' + item.vColor\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"slots\">\n\t\t\t\t\t<div *ngIf=\"item.slots[0]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[1]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[2]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"type\">\n\t\t\t\t\t<span class=\"typeName\">{{item.itemType}}</span>\n\t\t\t\t\t<img [src]=\"'assets/images/armor/' + (item.itemType | lowercase) + '-icon.png'\" alt=\"item type\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"item.rarity\" [ngClass]=\"'rarity-'+item?.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{item.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/defense-icon.png\" alt=\"defense\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">\n\t\t\t\t\t\t<span *ngFor=\"let def of item.defense; let i = index\">\n\t\t\t\t\t\t\t{{def}}\n\t\t\t\t\t\t\t<span *ngIf=\"i < item.defense.length - 2\">\n\t\t\t\t\t\t\t\t|\n\t\t\t\t\t\t\t\t<!--➝-->\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngIf=\"i == item.defense.length -2\">\n\t\t\t\t\t\t\t\t|\n\t\t\t\t\t\t\t\t<!--➟-->\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/fire-icon.png\" alt=\"fire\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.fireResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/water-icon.png\" alt=\"water\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.waterResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/ice-icon.png\" alt=\"ice\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.iceResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/thunder-icon.png\" alt=\"thunder\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.thunderResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/dragon-icon.png\" alt=\"dragon\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.dragonResist}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-augmentation-slot',\n\ttemplateUrl: './augmentation-slot.component.html',\n\tstyleUrls: ['./augmentation-slot.component.scss']\n})\nexport class AugmentationSlotComponent implements OnInit {\n\tslotName = ItemType.Augmentation;\n\n\taugmentation: AugmentationModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void { }\n\n\tclicked() {\n\t\tthis.slotService.selectAugmentationSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearAugmentationSlot(this);\n\t\tthis.clearTooltipAugmentation();\n\t}\n\n\tsetTooltipAugmentation(event: PointerEvent, augmentation: AugmentationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setAugmentation(augmentation);\n\t\t}\n\t}\n\n\tclearTooltipAugmentation() {\n\t\tthis.tooltipService.setAugmentation(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clicked()\" [class.selected]=\"selected\" (pointerenter)=\"setTooltipAugmentation($event, augmentation)\" (pointerleave)=\"clearTooltipAugmentation()\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/augment-icon.png'\" alt=\"augment\"></div>\n\t<div class=\"selected-augmentation\">\n\t\t<span class=\"hidden-xs\">{{augmentation?.name}}</span>\n\t\t<span class=\"visible-xs\">{{augmentation?.code}}</span>\n\t</div>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-augmentations-list',\n\ttemplateUrl: './augmentations-list.component.html',\n\tstyleUrls: ['./augmentations-list.component.scss']\n})\nexport class AugmentationsListComponent implements OnInit {\n\taugmentations: AugmentationModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.loadItems();\n\t}\n\n\tloadItems() {\n\t\tthis.augmentations = this.dataService.getAugmentations();\n\t}\n\n\tselectAugmentation(augmentation: AugmentationModel) {\n\t\tconst newAugmentation = Object.assign({}, augmentation);\n\t\tthis.slotService.selectAugmentation(newAugmentation);\n\t}\n\n\tsetTooltipAugmentation(event: PointerEvent, augmentation: AugmentationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setAugmentation(augmentation);\n\t\t}\n\t}\n\n\tclearTooltipAugmentation() {\n\t\tthis.tooltipService.setAugmentation(null);\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"items-container\">\n\t\t<ul>\n\t\t\t<li *ngFor=\"let aug of augmentations\" (click)=\"selectAugmentation(aug)\" (pointerenter)=\"setTooltipAugmentation($event, aug)\" (pointerleave)=\"clearTooltipAugmentation()\">\n\t\t\t\t<div class=\"info-container\">\n\t\t\t\t\t<div class=\"name-container\">\n\t\t\t\t\t\t{{aug.name}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t\t<div class=\"description-value\">\n\t\t\t\t\t\t\t{{aug.description}}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<div *ngFor=\"let level of aug.levels\">\n\t\t\t\t\t\t\t\t{{level.description}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { AwakeningModel } from 'src/app/models/awakening.model';\nimport { AwakeningLevelModel } from '../../models/awakening-level.model';\nimport { KeyValuePair } from '../../models/common/key-value-pair.model';\nimport { SetBonusModel } from '../../models/set-bonus.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { AilmentType } from '../../types/ailment.type';\nimport { AwakeningType } from '../../types/awakening.type';\nimport { ElementType } from '../../types/element.type';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\nimport { WeaponType } from '../../types/weapon.type';\nimport { DropdownComponent } from '../common/dropdown/dropdown.component';\n\n@Component({\n\tselector: 'mhw-builder-awakening-slot',\n\ttemplateUrl: './awakening-slot.component.html',\n\tstyleUrls: ['./awakening-slot.component.scss']\n})\nexport class AwakeningSlotComponent implements OnInit {\n\tslotName = ItemType.Awakening;\n\tsetbonus: SetBonusModel;\n\n\tpublic selected: boolean;\n\n\tprivate _awakeningsLevel: AwakeningLevelModel[];\n\tprivate _weaponElement: ElementType;\n\tprivate _weaponAilment: AilmentType;\n\tprivate _weaponType: WeaponType;\n\n\tweaponIndex = 0;\n\telementTypes = ElementType;\n\tailmentTypes = AilmentType;\n\tawakeningTypes = AwakeningType;\n\tweaponTypes = WeaponType;\n\n\telementValues: KeyValuePair<string, string>[];\n\tailmentValues: KeyValuePair<string, string>[];\n\tawakeningValues: AwakeningModel[];\n\n\t@Input()\n\tset awakenings(awakenings: AwakeningLevelModel[]) {\n\t\tthis._awakeningsLevel = awakenings;\n\t}\n\tget awakenings(): AwakeningLevelModel[] {\n\t\treturn this._awakeningsLevel;\n\t}\n\n\t@Input()\n\tset weaponElement(weaponElement: ElementType) {\n\t\tif (!weaponElement) {\n\t\t\tweaponElement = ElementType.None;\n\t\t}\n\t\tthis._weaponElement = weaponElement;\n\t}\n\tget weaponElement(): ElementType {\n\t\treturn this._weaponElement;\n\t}\n\n\t@Input()\n\tset weaponAilment(weaponAilment: AilmentType) {\n\t\tif (!weaponAilment) {\n\t\t\tweaponAilment = AilmentType.None;\n\t\t}\n\t\tthis._weaponAilment = weaponAilment;\n\t}\n\tget weaponAilment(): AilmentType {\n\t\treturn this._weaponAilment;\n\t}\n\n\t@Input()\n\tset weaponType(weaponType: WeaponType) {\n\t\tthis._weaponType = weaponType;\n\n\t\tthis.weaponIndex = 0;\n\t\tfor (const item in WeaponType) {\n\t\t\tif (isNaN(Number(item))) {\n\t\t\t\tif (item == weaponType) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tthis.weaponIndex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.initAwakeningValues();\n\t\tif (weaponType != WeaponType.HuntingHorn) {\n\t\t\tthis.awakeningValues.splice(12, 5);\n\t\t}\n\t\tif (weaponType != WeaponType.LightBowgun && weaponType != WeaponType.HeavyBowgun) {\n\t\t\tthis.awakeningValues.splice(8, 4);\n\t\t}\n\t\tif (weaponType == WeaponType.Bow || weaponType == WeaponType.LightBowgun || weaponType == WeaponType.HeavyBowgun) {\n\t\t\tthis.awakeningValues.splice(7, 1);\n\t\t}\n\t}\n\tget weaponType(): WeaponType {\n\t\treturn this._weaponType;\n\t}\n\n\t@ViewChild(DropdownComponent, { static: true }) elementDropdown: DropdownComponent;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate dataService: DataService,\n\t\tprivate tooltipService: TooltipService\n\t) {\n\t}\n\n\tngOnInit(): void {\n\t\tthis.elementValues = [];\n\t\tObject.keys(ElementType).map(key => {\n\t\t\tthis.elementValues.push({ key: key, value: key });\n\t\t});\n\t\tthis.ailmentValues = [];\n\t\tObject.keys(AilmentType).map(key => {\n\t\t\tthis.ailmentValues.push({ key: key, value: key });\n\t\t});\n\t\tthis.ailmentValues.pop();\n\t}\n\n\tinitAwakeningValues() {\n\t\tthis.awakeningValues = JSON.parse(JSON.stringify(this.dataService.getAwakenings()));\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectSetbonusSlot(this);\n\t}\n\n\tclearAwakeninsClicked(even: Event) { }\n\n\tclearSkillClicked(event: Event) {\n\t\tthis.setbonus = null;\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearSkillSlot(this);\n\t}\n\n\tsetTooltipAwakening(event: PointerEvent, awakenins: AwakeningLevelModel[]) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t}\n\t}\n\n\tclearTooltipAwakening() {\n\t}\n\n\tselectElement(selectedElement: ElementType) {\n\t\tthis.weaponElement = selectedElement;\n\t\tconst elementAttack = this.dataService.getSafiElementAttack(this.weaponIndex);\n\t\tthis.changeWeaponName();\n\t\tthis.slotService.selectWeaponElement(selectedElement, elementAttack);\n\t}\n\tselectAilment(selectedAilment: AilmentType) {\n\t\tthis.weaponAilment = selectedAilment;\n\t\tlet ailmentType = 0;\n\t\tif (selectedAilment == AilmentType.Poison || selectedAilment == AilmentType.Blast) {\n\t\t\tailmentType = 1;\n\t\t}\n\t\tconst ailmentAttack = this.dataService.getSafiAilmentAttack(this.weaponIndex, ailmentType);\n\t\tthis.changeWeaponName();\n\t\tthis.slotService.selectWeaponAilment(selectedAilment, ailmentAttack);\n\t}\n\n\tprivate changeWeaponName() {\n\t\tthis.slotService.changeWeaponName(this.dataService.getSafiWeaponName(this.weaponType, this.weaponElement, this.weaponAilment));\n\t}\n\n\tselectAwakeningType(selectedAwakening: AwakeningModel, awakeningLevel: AwakeningLevelModel, index: number) {\n\t\tawakeningLevel.id = selectedAwakening.id;\n\t\tawakeningLevel.type = selectedAwakening.type;\n\t\tawakeningLevel.name = selectedAwakening.name;\n\t\tawakeningLevel.short = selectedAwakening.short;\n\t\tif (index == 0) {\n\t\t\tawakeningLevel.maxLevel = Math.min(selectedAwakening.maxLevel, 6);\n\t\t} else {\n\t\t\tawakeningLevel.maxLevel = Math.min(selectedAwakening.maxLevel, 5);\n\t\t}\n\t\tawakeningLevel.minLevel = selectedAwakening.minLevel;\n\n\t\tif (awakeningLevel.level == 0) {\n\t\t\tawakeningLevel.level = awakeningLevel.maxLevel;\n\t\t} else {\n\t\t\tawakeningLevel.level = Math.min(Math.max(awakeningLevel.level, awakeningLevel.minLevel), awakeningLevel.maxLevel);\n\t\t}\n\n\t\tthis.slotService.selectAwakenings(this.awakenings);\n\t}\n\n\tselectAwakeningLevel(level: number, awakeningLevel: AwakeningLevelModel) {\n\t\tif (awakeningLevel.type != AwakeningType.None) {\n\t\t\tif (awakeningLevel.level == level && awakeningLevel.minLevel < level) {\n\t\t\t\tawakeningLevel.level -= 1;\n\t\t\t} else {\n\t\t\t\tawakeningLevel.level = level;\n\t\t\t}\n\t\t}\n\t\tthis.slotService.selectAwakenings(this.awakenings);\n\t}\n\n\tgetMin(a: number, b: number): number {\n\t\treturn Math.min(a, b);\n\t}\n\n\tgetElementIcon(element: ElementType): string {\n\t\tlet assetPath;\n\t\tif (element && element != ElementType.None) {\n\t\t\tassetPath = `${element.toLowerCase()}-icon`;\n\t\t}\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n\n\tgetAilmentIcon(ailment: AilmentType): string {\n\t\tlet assetPath;\n\t\tif (ailment && ailment != AilmentType.None) {\n\t\t\tassetPath = `${ailment.toLowerCase()}-icon`;\n\t\t}\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"elementAilment\" *ngIf=\"weaponType != weaponTypes.LightBowgun && weaponType != weaponTypes.HeavyBowgun\">\n\t\t<div class=\"element-slot\" (click)=\"elementDropdown.toggle($event)\">\n\t\t\t<div class=\"element selected-element\">\n\t\t\t\t<div *ngIf=\"weaponElement && weaponElement != elementTypes.None\" class=\"image-container\">\n\t\t\t\t\t<img *ngIf=\"weaponElement\" [src]=\"getElementIcon(weaponElement)\">\n\t\t\t\t</div>\n\t\t\t\t<span *ngIf=\"weaponElement && weaponElement != elementTypes.None\">\n\t\t\t\t\t{{weaponElement}}\n\t\t\t\t</span>\n\t\t\t\t<span *ngIf=\"!weaponElement || weaponElement == elementTypes.None\">\n\t\t\t\t\tElement Type\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<mhw-builder-dropdown #elementDropdown>\n\t\t\t\t<div class=\"element\" *ngFor=\"let e of elementValues\" (click)=\"selectElement(e.value)\">\n\t\t\t\t\t<div class=\"image-container\">\n\t\t\t\t\t\t<img *ngIf=\"e.value != elementTypes.None\" [src]=\"getElementIcon(e.value)\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{{e.value}}</span>\n\t\t\t\t</div>\n\t\t\t</mhw-builder-dropdown>\n\t\t</div>\n\t\t<div class=\"ailment-slot\" (click)=\"ailmentDropdown.toggle($event)\">\n\t\t\t<div class=\"ailment selected-ailment\">\n\t\t\t\t<div *ngIf=\"weaponAilment && weaponAilment != ailmentTypes.None\" class=\"image-container\">\n\t\t\t\t\t<img *ngIf=\"weaponAilment\" [src]=\"getElementIcon(weaponAilment)\">\n\t\t\t\t</div>\n\t\t\t\t<span *ngIf=\"weaponAilment && weaponAilment != ailmentTypes.None\">\n\t\t\t\t\t{{weaponAilment}}\n\t\t\t\t</span>\n\t\t\t\t<span *ngIf=\"!weaponAilment || weaponAilment == ailmentTypes.None\">\n\t\t\t\t\tAilment Type\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<mhw-builder-dropdown #ailmentDropdown>\n\t\t\t\t<div class=\"ailment\" *ngFor=\"let e of ailmentValues\" (click)=\"selectAilment(e.value)\">\n\t\t\t\t\t<div class=\"image-container\">\n\t\t\t\t\t\t<img *ngIf=\"e.value != ailmentTypes.None\" [src]=\"getAilmentIcon(e.value)\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{{e.value}}</span>\n\t\t\t\t</div>\n\t\t\t</mhw-builder-dropdown>\n\t\t</div>\n\t</div>\n\t<div class=\"awakenings\">\n\t\t<div class=\"awakening-slot\">\n\t\t\t<div class=\"awakening-type\">\n\t\t\t\t<div class=\"awakening selected-awakening\" (click)=\"clicked()\">\n\t\t\t\t\t<span *ngIf=\"setbonus\">\n\t\t\t\t\t\t{{setbonus?.name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf=\"!setbonus\">\n\t\t\t\t\t\tAbility\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"awakening-level\">\n\t\t\t\t\t<span *ngIf=\"setbonus?.level\">\n\t\t\t\t\t\t{{setbonus?.level}} <i class=\"fas fa-star star-icon\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"awakening-clear\">\n\t\t\t\t\t<button type=\"button\" class=\"clear-button\" (click)=\"clearSkillClicked($event)\">\n\t\t\t\t\t\t<i class=\"fas fa-times fa-sm\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"awakening-slot\" *ngFor=\"let awakening of awakenings; let i = index\">\n\t\t\t<div class=\"awakening-type\" (click)=\"awakeningDropdown.toggle($event)\">\n\t\t\t\t<div class=\"awakening selected-awakening\">\n\t\t\t\t\t<span *ngIf=\"awakening.type != awakeningTypes.None\">\n\t\t\t\t\t\t<span class=\"name1\">{{awakening.name}}</span>\n\t\t\t\t\t\t<span class=\"name2\" style=\"display: none;\">{{awakening.short ? awakening.short : awakening.name}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf=\"awakening.type == awakeningTypes.None\">\n\t\t\t\t\t\tAwakening\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<mhw-builder-dropdown #awakeningDropdown>\n\t\t\t\t\t<div class=\"awakening\" *ngFor=\"let e of awakeningValues\"\n\t\t\t\t\t\t(click)=\"selectAwakeningType(e, awakening, i)\">\n\t\t\t\t\t\t<span class=\"name1\">{{e.name}}</span>\n\t\t\t\t\t\t<span class=\"name2\" style=\"display: none;\">{{e.short ? e.short : e.name}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</mhw-builder-dropdown>\n\t\t\t</div>\n\t\t\t<div class=\"awakening-level\">\n\t\t\t\t<div *ngIf=\"awakening.type != awakeningTypes.None\">\n\t\t\t\t\t<span *ngFor=\"let key of awakening.minLevel - 1 | numbersArr\">\n\t\t\t\t\t\t<i class=\"far fa-star fa-sm c-pointer\" [ngClass]=\"awakening.type\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (awakening.level - awakening.minLevel + 1) | numbersArr\">\n\t\t\t\t\t\t<i class=\"fas fa-star fa-sm c-pointer\" [ngClass]=\"awakening.type\"\n\t\t\t\t\t\t\t(click)=\"selectAwakeningLevel(key + 1 + awakening.minLevel - 1, awakening)\">\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (getMin(i == 0 ? 6 : 5, awakening.maxLevel) - awakening.level) | numbersArr\">\n\t\t\t\t\t\t<i class=\"far fa-star fa-sm c-pointer\" [ngClass]=\"awakening.type\"\n\t\t\t\t\t\t\t(click)=\"selectAwakeningLevel(key + 1 + awakening.level, awakening)\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (6 - getMin(awakening.maxLevel, i == 0 ? 6 : 5)) | numbersArr\">\n\t\t\t\t\t\t<i class=\"far fa-star fa-sm c-pointer\" style=\"color:#525252\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-calc-details',\n\ttemplateUrl: './calc-details.component.html',\n\tstyleUrls: ['./calc-details.component.scss'],\n})\nexport class CalcDetailsComponent implements OnInit {\n\n\tprivate _calc: StatDetailModel;\n\t@Input()\n\tpublic set calc(calc: StatDetailModel) {\n\t\tthis._calc = calc;\n\t\tthis.generateTemplate();\n\t}\n\tpublic get calc() { return this._calc; }\n\n\tdetailTemplate: string;\n\n\tconstructor(\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t}\n\n\tclearCalc() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tgenerateTemplate() {\n\t\tthis.detailTemplate = null;\n\n\t\tif (this.calc.calculationTemplate) {\n\t\t\tlet template = this.calc.calculationTemplate;\n\t\t\tfor (const item of this.calc.calculationVariables) {\n\t\t\t\ttemplate = template.split(`{${item.name}}`).join(`<span class=\"${item.colorClass}\">${item.value}</span>`);\n\t\t\t}\n\n\t\t\tthis.detailTemplate = template;\n\t\t}\n\t}\n}\n","<div class=\"container\" (click)=\"clearCalc()\">\n\t<h3>{{calc.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<div class=\"template\" [innerHTML]=\"detailTemplate\"></div>\n\t<ul class=\"info\" *ngIf=\"calc.info\">\n\t\t<li *ngFor=\"let info of calc.info\">{{info}}</li>\n\t</ul>\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let item of calc.calculationVariables\">\n\t\t\t<span class=\"name\">{{item.displayName}}</span>\n\t\t\t<span class=\"value\" [ngClass]=\"item.colorClass\">{{item.value}}</span>\n\t\t</li>\n\t</ul>\n</div>\n","import { Component, ElementRef, HostListener, Input, OnInit, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\n\n@Component({\n\tselector: 'mhw-builder-charm-list',\n\ttemplateUrl: './charm-list.component.html',\n\tstyleUrls: ['./charm-list.component.scss']\n})\nexport class CharmListComponent implements OnInit {\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\n\tprivate _itemType: ItemType;\n\n\t@Input()\n\tset itemType(itemType: ItemType) {\n\t\tthis._itemType = itemType;\n\t\tthis.loadItems();\n\t}\n\tget itemType(): ItemType { return this._itemType; }\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titems: ItemModel[];\n\tfilteredItems: ItemModel[];\n\tvirtualItems: ItemModel[];\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService\n\t) { }\n\n\tngOnInit(): void { }\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tloadItems() {\n\t\tthis.items = this.dataService.getCharms();\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredItems = this.items;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.items) {\n\t\t\t\tfor (const item of this.items) {\n\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\t\t\t\t\tconst skills = this.dataService.getSkills(item.skills);\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\t\t\t\t\tconst skillMatch = _.some(skills, skill => skill.name.toLowerCase().includes(query));\n\n\t\t\t\t\tconst tagMatch = _.some(queryParts, queryPart => {\n\t\t\t\t\t\treturn _.some(item.tags, tag => tag.toLowerCase().includes(queryPart));\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!nameMatch && !skillMatch && !tagMatch) {\n\t\t\t\t\t\tthis.filteredItems = _.reject(this.filteredItems, i => i.name === item.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredItems = this.items;\n\t}\n\n\tonItemListUpdate(items: ItemModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tconst newItem = Object.assign({}, item);\n\t\tthis.slotService.selectItem(newItem);\n\t}\n\n\tgetSkillCount(item: ItemModel, skill: SkillModel): string {\n\t\tconst itemSkill = _.find(item.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"items\" [items]=\"filteredItems\" (vsUpdate)=\"onItemListUpdate($event)\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"item.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{item.rarity}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"levels\">\n\t\t\t\t\t{{item.levels}} {{item.levels > 1 ? 'levels' : 'level'}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\" *ngIf=\"item.skills.length == 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"skills-container-2\" *ngIf=\"item.skills.length > 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { CommonModel } from '../../models/common.model';\n\n@Component({\n\tselector: 'mhw-builder-common-details',\n\ttemplateUrl: './common-details.component.html',\n\tstyleUrls: ['./common-details.component.scss']\n})\nexport class CommonDetailsComponent implements OnInit {\n\t@Input() common: CommonModel;\n\n\tconstructor(\n\t) { }\n\n\tngOnInit(): void { }\n}\n","<div class=\"container\">\n\t<h3>{{common?.name}}</h3>\n\t<hr>\n\t<div>{{common?.description}}</div>\n\t<br />\n\t<ul>\n\t\t<li *ngFor=\"let level of common?.levels; let i = index\">\n\t\t\t<div class=\"level\">Lv {{i + 1}}</div>\n\t\t\t<div class=\"level-description\">{{level.description}}</div>\n\t\t</li>\n\t</ul>\n</div>\n","import { NgModule } from '@angular/core';\nimport { DropdownComponent } from './dropdown/dropdown.component';\nimport { ModalComponent } from './modal/modal.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tDropdownComponent,\n\t\tModalComponent\n\t],\n\texports: [\n\t\tDropdownComponent,\n\t\tModalComponent\n\t]\n})\nexport class CommonModule { }\n","import { Component, ContentChildren, ElementRef, OnInit, QueryList, ViewChild } from '@angular/core';\n\n@Component({\n\tselector: 'mhw-builder-dropdown',\n\ttemplateUrl: './dropdown.component.html',\n\tstyleUrls: ['./dropdown.component.scss']\n})\nexport class DropdownComponent implements OnInit {\n\tisOpen = false;\n\n\t@ViewChild('container', { static: true }) container: ElementRef;\n\t@ContentChildren(ElementRef, { descendants: true }) items: QueryList<ElementRef>;\n\n\tconstructor() { }\n\n\tngOnInit() {\n\t}\n\n\tpublic toggle(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.isOpen = !this.isOpen;\n\t}\n\n\tpublic open() {\n\t\tthis.isOpen = true;\n\t}\n\n\tpublic close() {\n\t\tthis.isOpen = false;\n\t}\n}\n","<div #container class=\"container\" [hidden]=\"!isOpen\">\n\t<ng-content></ng-content>\n</div>\n","import { Component, HostBinding, HostListener, Input, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'mhw-builder-modal',\n\ttemplateUrl: './modal.component.html',\n\tstyleUrls: ['./modal.component.scss']\n})\nexport class ModalComponent implements OnInit {\n\n\t@Input() title: string;\n\n\t@HostBinding('class.open') isOpen: boolean;\n\n\t@HostListener('document:keyup', ['$event'])\n\tonKeyUp(event: KeyboardEvent) {\n\t\tif (event.key === 'Escape') {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tconstructor() { }\n\n\tngOnInit(): void {\n\n\t}\n\n\topen() {\n\t\tthis.isOpen = true;\n\t}\n\n\tclose() {\n\t\tthis.isOpen = false;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"header-container\">\n\t\t<div class=\"title-container\">\n\t\t\t<span>{{title}}</span>\n\t\t</div>\n\n\t\t<button class=\"close-button\" (click)=\"close()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"content-container\">\n\t\t<ng-content></ng-content>\n\t</div>\n\n\t<div class=\"background\" (click)=\"close()\"></div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport * as _ from 'lodash';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-decoration-details',\n\ttemplateUrl: './decoration-details.component.html',\n\tstyleUrls: ['./decoration-details.component.scss']\n})\nexport class DecorationDetailsComponent implements OnInit {\n\tprivate _decoration: DecorationModel;\n\n\t@Input()\n\tset decoration(decoration: DecorationModel) {\n\t\tthis._decoration = decoration;\n\t\tif (decoration) {\n\t\t\tthis.loadSkills();\n\t\t} else {\n\t\t\tthis.skills = new Array<SkillModel>();\n\t\t}\n\t}\n\tget decoration(): DecorationModel {\n\t\treturn this._decoration;\n\t}\n\n\tskills: SkillModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tloadSkills() {\n\t\tthis.skills = this.dataService.getSkills(this.decoration.skills);\n\t}\n\n\tgetSkillCount(skill: SkillModel): string {\n\t\tconst itemSkill = _.find(this.decoration.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setDecoration(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clearTooltipItem()\">\n\t<h3>{{decoration?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul class=\"striped-light\">\n\t\t<li>\n\t\t\t<span class=\"name\">Rarity</span>\n\t\t\t<span class=\"value\">{{decoration?.rarity}}</span>\n\t\t</li>\n\t</ul>\n\t<div *ngIf=\"skills?.length\" class=\"skills-container\">\n\t\t<ul>\n\t\t\t<ng-container *ngFor=\"let skill of skills\">\n\t\t\t\t<li *ngIf=\"skill.levels\">\n\t\t\t\t\t<div class=\"skill-header\">\n\t\t\t\t\t\t<h4 class=\"skill-name\">{{skill.name}}</h4>\n\t\t\t\t\t\t<h4 class=\"skill-level\">{{getSkillCount(skill)}}</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<span>{{skill.description}}</span>\n\t\t\t\t</li>\n\t\t\t</ng-container>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-decoration-list',\n\ttemplateUrl: './decoration-list.component.html',\n\tstyleUrls: ['./decoration-list.component.scss']\n})\nexport class DecorationListComponent implements OnInit {\n\tprivate _decorationLevel: number;\n\n\t@Input()\n\tset decorationLevel(decorationLevel: number) {\n\t\tthis._decorationLevel = decorationLevel;\n\t\tthis.loadItems();\n\t}\n\tget decorationLevel(): number { return this._decorationLevel; }\n\n\t@Output() decorationSelected = new EventEmitter<DecorationModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('decorationList') decorationList: VirtualScrollerComponent;\n\n\tdecorations: DecorationModel[];\n\tfilteredDecorations: DecorationModel[];\n\tvirtualDecorations: DecorationModel[];\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tpublic dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void { }\n\n\trefreshList() {\n\t\tif (this.decorationList) {\n\t\t\tthis.decorationList.refresh();\n\t\t}\n\t}\n\n\tonDecorationListUpdate(decorations: DecorationModel[]) {\n\t\tthis.virtualDecorations = decorations;\n\t}\n\n\tloadItems() {\n\t\tthis.decorations = this.dataService.getDecorations(this.decorationLevel);\n\t\tthis.decorations = this.decorations.sort((a, b) => {\n\t\t\tif (a.priority < b.priority) {\n\t\t\t\treturn 1;\n\t\t\t} else if (a.priority > b.priority) {\n\t\t\t\treturn -1;\n\t\t\t} else if (a.level < b.level) {\n\t\t\t\treturn 1;\n\t\t\t} else if (a.level > b.level) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\tif (a.skills.length < b.skills.length) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (a.skills.length > b.skills.length) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.filteredDecorations = this.decorations;\n\t\tthis.search(this.searchBox.nativeElement.value);\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredDecorations = this.decorations;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.decorations) {\n\t\t\t\tfor (const decoration of this.decorations) {\n\t\t\t\t\tconst itemName = decoration.name.toLowerCase();\n\t\t\t\t\tconst skills = this.dataService.getSkills(decoration.skills);\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\n\t\t\t\t\tlet skillMatch = true;\n\t\t\t\t\tfor (const queryPart of queryParts) {\n\t\t\t\t\t\tskillMatch = _.some(skills, skill => skill.name.toLowerCase().includes(queryPart));\n\t\t\t\t\t\tif (!skillMatch) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!nameMatch && !skillMatch) {\n\t\t\t\t\t\tthis.filteredDecorations = _.reject(this.filteredDecorations, d => d.name === decoration.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredDecorations = this.decorations;\n\t}\n\n\tselectDecoration(decoration: DecorationModel) {\n\t\tconst newDecoration = Object.assign({}, decoration);\n\t\tthis.slotService.selectDecoration(newDecoration);\n\t}\n\n\tgetSkills(decoration: DecorationModel): SkillModel[] {\n\t\tconst result: SkillModel[] = [];\n\t\tfor (const skill of decoration.skills) {\n\t\t\tresult.push(this.dataService.getSkill(skill.id));\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetSkillCount(decoration: DecorationModel, skill: SkillModel): string {\n\t\tconst itemSkill = _.find(decoration.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"decorations-list\" #decorationList class=\"scroll-container\" *ngIf=\"decorations\" [items]=\"filteredDecorations\" (vsUpdate)=\"onDecorationListUpdate($event)\">\n\t\t<div *ngFor=\"let decoration of virtualDecorations\" class=\"scroll-item-container\" (click)=\"selectDecoration(decoration)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t{{decoration.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"decoration.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{decoration.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\" *ngIf=\"decoration.skills.length == 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of getSkills(decoration)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(decoration, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"skills-container-2\" *ngIf=\"decoration.skills.length > 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of getSkills(decoration)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(decoration, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-decoration-slot',\n\ttemplateUrl: './decoration-slot.component.html',\n\tstyleUrls: ['./decoration-slot.component.scss'],\n})\nexport class DecorationSlotComponent implements OnInit {\n\tslotName = ItemType.Decoration;\n\n\t@Input() level: number;\n\t@Input() itemId: number;\n\t@Input() itemType: ItemType;\n\n\tdecoration: DecorationModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.clearTooltipItem();\n\t\tthis.slotService.clearDecorationSlot(this);\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectDecorationSlot(this);\n\t}\n\n\tsetTooltipItem(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setDecoration(this.decoration);\n\t\t}\n\t}\n\n\tshowOnClickTooltipItem() {\n\t\tthis.tooltipService.setDecoration(this.decoration);\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setDecoration(null);\n\t}\n}\n","<div class=\"container\" [class.selected]=\"selected\">\n\t<div class=\"slot-icon\">\n\t\t<img [src]=\"'assets/images/decorations/' + level + '-' + (decoration?.level ? decoration?.level : 0) + '.png'\" alt=\"slot\">\n\t</div>\n\t<div class=\"selected-decoration\"\n\t\t (click)=\"clicked()\"\n\t\t (pointerenter)=\"setTooltipItem($event)\"\n\t\t (pointerleave)=\"clearTooltipItem()\">\n\t\t{{decoration?.name}}\n\t</div>\n\n\t<button type=\"button\" class=\"info-button\" (click)=\"showOnClickTooltipItem()\" aria-label=\"info\">\n\t\t<i class=\"fas fa-grip-lines-vertical fa-sm icon-xs\" [ngClass]=\"'rarity-'+decoration?.rarity\" style=\"display:none;\"></i>\n\t\t<i class=\"fas fa-grip-lines-vertical icon-md fa-sm\" [ngClass]=\"'rarity-'+decoration?.rarity\"></i>\n\t</button>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { EquipmentService } from 'src/app/services/equipment.service';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-equipped-buffs',\n\ttemplateUrl: './equipped-buffs.component.html',\n\tstyleUrls: ['./equipped-buffs.component.scss']\n})\n\nexport class EquippedBuffsComponent implements OnInit {\n\n\tbuffsVisible = true;\n\telementBuffActive = 0;\n\n\tconstructor(\n\t\tprivate equipementService: EquipmentService,\n\t\tprivate tooltipService: TooltipService,\n\t) { }\n\n\tngOnInit() {\n\t}\n\tbuffElementLarge() {\n\t\tif (this.elementBuffActive != 3) {\n\t\t\tthis.elementBuffActive = 3;\n\t\t} else {\n\t\t\tthis.elementBuffActive = 0;\n\t\t}\n\n\t\tthis.equipementService.updateElementBuff(this.elementBuffActive);\n\t}\n}\n","<div class=\"container\">\n    <br />\n    <h4>\n        Buffs (ALPHA)\n        <span [hidden]=\"!buffsVisible\" (click)=\"buffsVisible = !buffsVisible\"><i\n                class=\"fas fa-minus-circle number\"></i></span>\n        <span [hidden]=\"buffsVisible\" (click)=\"buffsVisible = !buffsVisible\"><i\n                class=\"fas fa-plus-circle number\"></i></span>\n    </h4>\n    <div [hidden]=\"!buffsVisible\">\n        <span class=\"detail-icon cursor-p\" (click)=\"buffElementLarge()\">\n            <img [src]=\"'assets/images/drinks/drink-element-icon.png'\" alt=\"element buff\"> Large Element\n            {{elementBuffActive == 3 ? 'ON': 'OFF'}}\n        </span>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { EquippedSetBonusDetailModel, EquippedSetBonusModel } from '../../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../../models/equipped-skill.model';\nimport { EquipmentService } from '../../services/equipment.service';\nimport { SkillService } from '../../services/skill.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ModeType } from '../../types/mode.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-equipped-skills',\n\ttemplateUrl: './equipped-skills.component.html',\n\tstyleUrls: ['./equipped-skills.component.scss']\n})\nexport class EquippedSkillsComponent implements OnInit {\n\tskills: EquippedSkillModel[];\n\tskillsBackup: EquippedSkillModel[];\n\tsetBonuses: EquippedSetBonusModel[];\n\n\tskillsVisible = true;\n\n\tconstructor(\n\t\tprivate skillService: SkillService,\n\t\tprivate equipmentService: EquipmentService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.skillService.skillsUpdated$.subscribe(skills => {\n\t\t\tthis.skills = skills;\n\t\t\tthis.skillsBackup = JSON.parse(JSON.stringify(this.skills));\n\t\t\tthis.skills.sort(function (skill1, skill2) {\n\t\t\t\tif (skill1.isSetBonus && !skill2.isSetBonus) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} if (!skill1.isSetBonus && skill2.isSetBonus) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (skill1.equippedCount > skill2.equippedCount) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (skill1.equippedCount < skill2.equippedCount) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else if (skill1.totalLevelCount > skill2.totalLevelCount) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (skill1.totalLevelCount < skill2.totalLevelCount) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else {\n\t\t\t\t\treturn skill1.name.localeCompare(skill2.name);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.skillService.setBonusesUpdated$.subscribe(setBonuses => {\n\t\t\tthis.setBonuses = setBonuses;\n\t\t});\n\t}\n\n\tgetMinCount(tool1Count: number, tool2Count: number) {\n\t\treturn Math.min(tool1Count, tool2Count);\n\t}\n\n\tgetMaxCount(tool1Count: number, tool2Count: number) {\n\t\treturn Math.max(tool1Count, tool2Count);\n\t}\n\n\tgetSkillCountColor(skill: EquippedSkillModel): string {\n\t\tif (skill.isSetBonus) {\n\t\t\treturn '#F0E68C';\n\t\t} else if (skill.equippedArmorCount > skill.totalLevelCount) {\n\t\t\treturn '#ffa07a';\n\t\t} else if (skill.equippedArmorCount == skill.totalLevelCount) {\n\t\t\treturn '#87cefa';\n\t\t} else if (skill.equippedCount + skill.equippedToolActiveCount >= skill.totalLevelCount) {\n\t\t\treturn '#86ff86';\n\t\t}\n\n\t\treturn 'white';\n\t}\n\n\tgetSetBonusColor(equippedCount: number, requiredCount: number): string {\n\t\tif (equippedCount >= requiredCount) {\n\t\t\treturn '#87cefa';\n\t\t}\n\t\treturn 'rgba(200,200,200,0.5)';\n\t}\n\n\tshowSkillDetails(event: PointerEvent, equippedSkill: EquippedSkillModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setEquippedSkill(equippedSkill);\n\t\t}\n\t}\n\n\tclearSkillDetails() {\n\t\tthis.tooltipService.setEquippedSkill(null);\n\t}\n\n\tshowOnClickSkillDetails(equippedSkill: EquippedSkillModel) {\n\t\tthis.tooltipService.setEquippedSkill(equippedSkill);\n\t}\n\n\tshowSetBonusDetails(event: PointerEvent, equippedSetBonus: EquippedSetBonusModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setEquippedSetBonus(equippedSetBonus);\n\t\t}\n\t}\n\n\tclearSetBonusDetails() {\n\t\tthis.tooltipService.setEquippedSetBonus(null);\n\t}\n\n\tshowOnClickSetBonusDetails(equippedSetBonus: EquippedSetBonusModel) {\n\t\tthis.tooltipService.setEquippedSetBonus(equippedSetBonus);\n\t}\n\n\tskillMode(equippedSkill: EquippedSkillModel) {\n\t\tif (equippedSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\tequippedSkill.skill.mode = ModeType.Active;\n\t\t} else if (equippedSkill.skill.mode == ModeType.Active) {\n\t\t\tequippedSkill.skill.mode = ModeType.Inactive;\n\t\t} else if (equippedSkill.skill.mode == ModeType.Inactive) {\n\t\t\tif (equippedSkill.hasActiveStats) {\n\t\t\t\tequippedSkill.skill.mode = ModeType.AllSkillActive;\n\t\t\t} else {\n\t\t\t\tequippedSkill.skill.mode = ModeType.Active;\n\t\t\t}\n\t\t}\n\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t}\n\n\tSetbonusSkillMode(detail: EquippedSetBonusDetailModel, equippedCount: number) {\n\t\tif (equippedCount >= detail.requiredCount) {\n\t\t\tif (detail.skill.levels[0].activeSkills) {\n\t\t\t\tif (detail.mode == ModeType.Active) {\n\t\t\t\t\tdetail.mode = ModeType.AllSkillActive;\n\t\t\t\t\tfor (const skillExtra of detail.skill.levels[0].activeSkills) {\n\t\t\t\t\t\tlet equippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\tequippedSkill = this.skills.find(es => es.id == skillExtra.id);\n\t\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\t\tequippedSkill = this.skillService.createEquippedSkill(skillExtra.id, skillExtra.level);\n\t\t\t\t\t\t\tequippedSkill.isNatureBonus = true;\n\t\t\t\t\t\t\tthis.skills.push(equippedSkill);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (skillExtra.level > equippedSkill.equippedCount) {\n\t\t\t\t\t\t\t\tequippedSkill.equippedCount = skillExtra.level;\n\t\t\t\t\t\t\t\tequippedSkill.equippedArmorCount = skillExtra.level;\n\t\t\t\t\t\t\t\tequippedSkill.isNatureBonus = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t\t\t\t} else if (detail.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tdetail.mode = ModeType.Active;\n\t\t\t\t\tfor (const skillExtra of detail.skill.levels[0].activeSkills) {\n\t\t\t\t\t\tlet equippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\tequippedSkill = this.skillsBackup.find(es => es.id == skillExtra.id);\n\t\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\t\tconst skillIndex = this.skills.findIndex(es => es.id == skillExtra.id);\n\t\t\t\t\t\t\tif (skillIndex > -1) {\n\t\t\t\t\t\t\t\tthis.skills.splice(skillIndex, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst skillIndex = this.skills.findIndex(es => es.id == skillExtra.id);\n\t\t\t\t\t\t\tif (skillIndex > -1) {\n\t\t\t\t\t\t\t\tthis.skills[skillIndex] = equippedSkill;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t\t\t\t}\n\t\t\t} else if (detail.skill.hasActiveStats) {\n\t\t\t\tif (detail.mode == ModeType.Active) {\n\t\t\t\t\tdetail.mode = ModeType.AllSkillActive;\n\t\t\t\t} else if (detail.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tdetail.mode = ModeType.Active;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst skill = this.skills.find(x => x.id == detail.skill.id);\n\t\t\tskill.skill.mode = detail.mode;\n\t\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t\t}\n\t}\n\n\tgetModeColor(mode: ModeType) {\n\t\tif (mode == 1) {\n\t\t\treturn '';\n\t\t} else if (mode == 2) {\n\t\t\treturn 'rgba(200,200,200,0.5)';\n\t\t} else if (mode == 3) {\n\t\t\treturn '#0091c2';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetIconModeClass(mode: ModeType) {\n\t\tif (mode == 1) {\n\t\t\treturn 'fas fa-circle';\n\t\t} else if (mode == 2) {\n\t\t\treturn 'far fa-circle';\n\t\t} else if (mode == 3) {\n\t\t\treturn 'fas fa-circle';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\n\t}\n}\n","<div class=\"container\">\n\t<br />\n\t<h4>\n\t\tSkills\n\t\t<span [hidden]=\"!skillsVisible\" (click)=\"skillsVisible = !skillsVisible\"><i class=\"fas fa-minus-circle number\"></i></span>\n\t\t<span [hidden]=\"skillsVisible\" (click)=\"skillsVisible = !skillsVisible\"><i class=\"fas fa-plus-circle number\"></i></span>\n\t</h4>\n\n\t<div [hidden]=\"!skillsVisible\">\n\t\t<hr>\n\t\t<ul class=\"striped\">\n\t\t\t<ng-container *ngFor=\"let skill of skills; let i = index\">\n\t\t\t\t<li *ngIf=\"!skill.isSetBonus\" [style.color]=\"getSkillCountColor(skill)\" (pointerenter)=\"showSkillDetails($event, skill)\" (pointerleave)=\"clearSkillDetails()\">\n\t\t\t\t\t<span class=\"detail-icon\" (click)=\"showOnClickSkillDetails(skill)\">\n\t\t\t\t\t\t<i class=\"far fa-question-circle\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"name\" [style.color]=\"getSkillCountColor(skill)\" (click)=\"showOnClickSkillDetails(skill)\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"value\">\n\t\t\t\t\t\t<span (click)=\"skillMode(skill)\" class=\"cursor-p\" style=\"font-size:14px !important;\">\n\t\t\t\t\t\t\t<i [ngClass]=\"getIconModeClass(skill.skill.mode)\" [style.color]=\"getModeColor(skill.skill.mode)\"></i>\n\t\t\t\t\t\t\t[{{skill.equippedCount}}]\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"skill-box\" style=\"display:inline-block;position:relative;\">\n\t\t\t\t\t\t\t<span *ngFor=\"let key of getMinCount(skill.equippedArmorCount, skill.totalLevelCount - skill.secretLevelCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span *ngIf=\"!skill.isNatureBonus\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-active\" *ngIf=\"skill.skill.mode == 1\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-mode2\" *ngIf=\"skill.skill.mode == 2\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-mode3\" *ngIf=\"skill.skill.mode == 3\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-nature\" *ngIf=\"skill.isNatureBonus\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of (getMinCount(skill.equippedArmorCount, skill.totalLevelCount) - (skill.totalLevelCount - skill.secretLevelCount)) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-secret\" *ngIf=\"!skill.isNatureBonus\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of getMinCount(skill.equippedToolActiveCount, skill.totalLevelCount - skill.equippedArmorCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-tool\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of (skill.totalLevelCount - skill.equippedArmorCount - skill.equippedToolActiveCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-empty\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of (7 - skill.totalLevelCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-transparent\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t</ng-container>\n\t\t</ul>\n\n\t\t<div *ngIf=\"setBonuses?.length\">\n\t\t\t<br />\n\t\t\t<h4>Set Bonuses</h4>\n\t\t\t<hr>\n\t\t\t<ul class=\"\">\n\t\t\t\t<ng-container *ngFor=\"let setBonus of setBonuses\">\n\t\t\t\t\t<li class=\"setBonus-header\" (pointerenter)=\"showSetBonusDetails($event, setBonus)\" (pointerleave)=\"clearSetBonusDetails()\" (click)=\"showOnClickSetBonusDetails(setBonus)\">\n\t\t\t\t\t\t<span class=\"detail-icon\">\n\t\t\t\t\t\t\t<i class=\"far fa-question-circle\"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"name\">\n\t\t\t\t\t\t\t{{setBonus.name}}\n\t\t\t\t\t\t\t<span [style.color]=\"getSetBonusColor(setBonus.equippedCount, setBonus.details[setBonus.details.length-1].requiredCount)\">\n\t\t\t\t\t\t\t\t[{{setBonus.equippedCount}}]\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li *ngFor=\"let level of setBonus.details; let i=index\" [style.color]=\"getSetBonusColor(setBonus.equippedCount, level.requiredCount)\" (pointerenter)=\"showSkillDetails($event, level)\" (pointerleave)=\"clearSkillDetails()\">\n\t\t\t\t\t\t<span class=\"detail-icon\">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"name\" (click)=\"showOnClickSkillDetails(level)\">\n\t\t\t\t\t\t\t<i class=\"far fa-question-circle\"></i>&nbsp;{{level.skill.name}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t\t<span (click)=\"SetbonusSkillMode(level, setBonus.equippedCount)\" class=\"cursor-p\" style=\"font-size:14px !important;\">\n\t\t\t\t\t\t\t\t<i [ngClass]=\"getIconModeClass(level.mode)\" [style.color]=\"getModeColor(level.mode)\"></i>\n\t\t\t\t\t\t\t\t[{{level.requiredCount}}]\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"skill-box\" style=\"display:inline-block;position:relative;\" (click)=\"showOnClickSkillDetails(level)\">\n\t\t\t\t\t\t\t\t<span *ngFor=\"let key of getMinCount(setBonus.equippedCount, level.requiredCount) | numbersArr\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-setbonus\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span *ngFor=\"let key of (level.requiredCount - getMinCount(setBonus.equippedCount, level.requiredCount)) | numbersArr\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-empty\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span *ngFor=\"let key of (5 - level.requiredCount) | numbersArr\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-transparent\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ng-container>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { KinsectModel } from 'src/app/models/kinsect.model';\nimport { AmmoCapacitiesModel } from '../../models/ammo-capacities.model';\nimport { CalculationVariableModel } from '../../models/calculation-variable.model';\nimport { ExtraDataModel } from '../../models/extra-data.model';\nimport { SharpnessBarModel } from '../../models/sharpness-bar.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { CalculationService } from '../../services/calculation.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { PointerType } from '../../types/pointer.type';\nimport { SharpnessBarComponent } from '../sharpness-bar/sharpness-bar.component';\n\n@Component({\n\tselector: 'mhw-builder-equipped-stats',\n\ttemplateUrl: './equipped-stats.component.html',\n\tstyleUrls: ['./equipped-stats.component.scss']\n})\n\nexport class EquippedStatsComponent implements OnInit {\n\n\tattackCalcs = new Array<StatDetailModel>();\n\tdefenseCalcs = new Array<StatDetailModel>();\n\tammoCapacities: AmmoCapacitiesModel;\n\tkinsect: KinsectModel;\n\tsharpnessBar: SharpnessBarModel;\n\textraData: ExtraDataModel;\n\n\tattackVisible: boolean;\n\tammoVisible: boolean;\n\tkinsectVisible: boolean;\n\tdefenseVisible: boolean;\n\n\t@ViewChild(SharpnessBarComponent) sharpnessBarComponent: SharpnessBarComponent;\n\n\tconstructor(\n\t\tprivate calculationService: CalculationService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.calculationService.attackCalcsUpdated$.subscribe(calcs => {\n\t\t\tthis.attackCalcs = calcs;\n\t\t});\n\n\t\tthis.calculationService.ammoUpdated$.subscribe(ammo => {\n\t\t\tthis.ammoCapacities = ammo;\n\t\t});\n\n\t\tthis.calculationService.kinsectUpdated$.subscribe(kinsect => {\n\t\t\tthis.kinsect = kinsect;\n\t\t});\n\n\t\tthis.calculationService.sharpnessUpdated$.subscribe(sharp => {\n\t\t\tthis.sharpnessBar = sharp;\n\t\t\tif (this.sharpnessBarComponent) {\n\t\t\t\tthis.sharpnessBarComponent.handicraftLevel = sharp.handicraftLevel;\n\t\t\t}\n\t\t});\n\n\t\tthis.calculationService.extraDataUpdated$.subscribe(extraData => {\n\t\t\tthis.extraData = extraData;\n\t\t});\n\n\t\tthis.calculationService.defenseCalcsUpdated$.subscribe(calcs => {\n\t\t\tthis.defenseCalcs = calcs;\n\t\t});\n\n\t\tthis.attackVisible = true;\n\t\tthis.ammoVisible = true;\n\t\tthis.kinsectVisible = true;\n\t\tthis.defenseVisible = true;\n\t}\n\n\tshowCalcDetails(event: PointerEvent, calc: StatDetailModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tif (calc.calculationTemplate || (calc.info && calc.info.length)) {\n\t\t\t\tthis.tooltipService.setCalc(calc);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearCalcDetails() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tshowOnClickCalcDetails(calc: StatDetailModel) {\n\t\tif (calc.calculationTemplate || (calc.info && calc.info.length)) {\n\t\t\tthis.tooltipService.setCalc(calc);\n\t\t} else {\n\t\t\tthis.clearCalcDetails();\n\t\t}\n\t}\n\n\tshowSharpDetails(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.setSharpTooltip(this.sharpnessBarComponent.sharpnessBar);\n\t\t}\n\t}\n\n\tshowOnClickSharpDetails() {\n\t\tthis.setSharpTooltip(this.sharpnessBarComponent.sharpnessBar);\n\t}\n\n\tclearSharpDetails() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tshowExtraDetails(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.setExtraDatailsTooltip();\n\t\t}\n\t}\n\tshowOnClickExtraDetails(event: PointerEvent) {\n\t\tthis.setExtraDatailsTooltip();\n\t}\n\n\tclearExtraDetails() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tprivate setExtraDatailsTooltip() {\n\t\tconst calculationVariables: CalculationVariableModel[] = [];\n\t\tfor (const other of this.extraData.otherData) {\n\t\t\tconst variable: CalculationVariableModel = {\n\t\t\t\tdisplayName: other.value,\n\t\t\t\tname: other.value,\n\t\t\t\tcolorClass: 'white',\n\t\t\t\tvalue: other.data\n\t\t\t};\n\t\t\tcalculationVariables.push(variable);\n\t\t}\n\t\tconst otherDetail: StatDetailModel = {\n\t\t\tname: 'Weapon Info',\n\t\t\tvalue: '',\n\t\t\tcalculationTemplate: '',\n\t\t\tcalculationVariables: calculationVariables,\n\t\t\tinfo: []\n\t\t};\n\n\t\tthis.tooltipService.setCalc(otherDetail);\n\t}\n\n\tprivate setSharpTooltip(sharp: SharpnessBarModel) {\n\t\tif (sharp.levels) {\n\t\t\tconst sharpDetail: StatDetailModel = {\n\t\t\t\tname: 'Sharpness',\n\t\t\t\tvalue: sharp.tooltipTemplate,\n\t\t\t\tcalculationTemplate: sharp.tooltipTemplate,\n\t\t\t\tcalculationVariables: [],\n\t\t\t\tinfo: []\n\t\t\t};\n\t\t\tif (sharp.sharpnessDataNeeded) {\n\t\t\t\tsharpDetail.info.push('Missing data for this weapon! Sharpness values are probably incorrect!');\n\t\t\t}\n\n\t\t\tthis.tooltipService.setCalc(sharpDetail);\n\t\t} else {\n\t\t\tthis.clearSharpDetails();\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<h4>\n\t\tAttack\n\t\t<span [hidden]=\"!attackVisible\" (click)=\"attackVisible = !attackVisible\"><i\n\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t<span [hidden]=\"attackVisible\" (click)=\"attackVisible = !attackVisible\"><i\n\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t</h4>\n\t<div [hidden]=\"!attackVisible\">\n\t\t<hr>\n\t\t<ul class=\"attack-stats striped\">\n\t\t\t<li *ngFor=\"let calc of attackCalcs\" (pointerenter)=\"showCalcDetails($event, calc)\"\n\t\t\t\t(pointerleave)=\"clearCalcDetails()\" (click)=\"showOnClickCalcDetails(calc)\">\n\t\t\t\t<span *ngIf=\"(calc.calculationTemplate || calc.info?.length) && !calc.icon\" class=\"detail-icon\"\n\t\t\t\t\t[ngClass]=\"calc.color\">\n\t\t\t\t\t<i class=\"far fa-question-circle\"></i>\n\t\t\t\t</span>\n\t\t\t\t<span *ngIf=\"calc.icon\" class=\"detail-icon\">\n\t\t\t\t\t<img [src]=\"'assets/images/' + calc.icon + '-icon.png'\" alt=\"stat icon\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">{{calc.name}}</span>\n\t\t\t\t<span class=\"value\">\n\t\t\t\t\t<span [ngClass]=\"calc.valueColor\">{{calc.value}}</span>\n\t\t\t\t\t<span *ngIf=\"calc.extra1 || calc.extra2\"> (</span>\n\t\t\t\t\t<span [ngClass]=\"calc.class1\">{{calc.extra1}}</span>\n\t\t\t\t\t<span *ngIf=\"calc.extra1 && calc.extra2\">/</span>\n\t\t\t\t\t<span [ngClass]=\"calc.class2\">{{calc.extra2}}</span>\n\t\t\t\t\t<span *ngIf=\"calc.extra1 || calc.extra2\">)</span>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li *ngIf=\"sharpnessBar && sharpnessBar.levels && sharpnessBar.levels.length\"\n\t\t\t\t(pointerenter)=\"showSharpDetails($event)\" (pointerleave)=\"clearSharpDetails()\"\n\t\t\t\t(click)=\"showOnClickSharpDetails()\">\n\t\t\t\t<span class=\"detail-icon\" [ngClass]=\"sharpnessBar.color\">\n\t\t\t\t\t<img [src]=\"'assets/images/sharpness3-icon.png'\" alt=\"sharpness\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">\n\t\t\t\t\tSharpness\n\t\t\t\t</span>\n\t\t\t\t<mhw-builder-sharpness-bar class=\"value\" [sharpnessLevels]=\"sharpnessBar.levels\"\n\t\t\t\t\t[handicraftLevel]=\"sharpnessBar.handicraftLevel\" [dataNeeded]=\"sharpnessBar.sharpnessDataNeeded\">\n\t\t\t\t</mhw-builder-sharpness-bar>\n\t\t\t</li>\n\n\t\t\t<li *ngIf=\"extraData && extraData.otherData[0].value\" (pointerenter)=\"showExtraDetails($event)\"\n\t\t\t\t(click)=\"showOnClickExtraDetails(calc)\" (pointerleave)=\"clearExtraDetails()\">\n\t\t\t\t<span class=\"detail-icon text-center\">\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='Bow'\" [src]=\"'assets/images/phials/phial-close.png'\"\n\t\t\t\t\t\talt=\"icon\" />\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='ChargeBlade' || extraData.weaponType=='SwitchAxe'\"\n\t\t\t\t\t\t[src]=\"'assets/images/phial-icon.png'\" alt=\"icon\" />\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='Gunlance'\" [src]=\"'assets/images/special-ammo-icon.png'\"\n\t\t\t\t\t\talt=\"icon\" />\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='InsectGlaive'\" [src]=\"'assets/images/dust-effect-icon.png'\"\n\t\t\t\t\t\talt=\"icon\" />\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='Bow'\">Coatings</span>\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='ChargeBlade' || extraData.weaponType=='SwitchAxe'\">Phial\n\t\t\t\t\t\tType</span>\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='Gunlance'\">Shell Type</span>\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='InsectGlaive'\">Boost Type</span>\n\t\t\t\t</span>\n\t\t\t\t<div class=\"value\">\n\t\t\t\t\t<div *ngFor=\"let other of extraData.otherData; let i = index\"\n\t\t\t\t\t\tstyle=\"display:inline;white-space:nowrap;\">\n\t\t\t\t\t\t<div *ngIf=\"extraData.weaponType=='Bow'\" class=\"other-container\">\n\t\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + other.value + '.png'\" alt=\"coat\" />\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"extraData.weaponType=='ChargeBlade' || extraData.weaponType=='SwitchAxe'\"\n\t\t\t\t\t\t\tclass=\"other-container\">\n\t\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + other.value + '.png'\" alt=\"phial\" />\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{other.value}}<span *ngIf=\"other.data && other.data!=0\">-{{other.data}}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"extraData.weaponType=='Gunlance' || extraData.weaponType=='InsectGlaive'\"\n\t\t\t\t\t\t\tclass=\"other-container\">\n\t\t\t\t\t\t\t{{other.value}}<span *ngIf=\"other.data && other.data!=0\">-{{other.data}}</span>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<br />\n\n\t<div class=\"kinsect-stats\" *ngIf=\"kinsect\">\n\t\t<h4>\n\t\t\tKinsect\n\t\t\t<span [hidden]=\"!kinsectVisible\" (click)=\"kinsectVisible = !kinsectVisible\"><i\n\t\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t\t<span [hidden]=\"kinsectVisible\" (click)=\"kinsectVisible = !kinsectVisible\"><i\n\t\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t\t</h4>\n\t\t<div class=\"\" [hidden]=\"!kinsectVisible\">\n\t\t\t<hr>\n\t\t\t<mhw-builder-kinsect-details [kinsect]=\"kinsect\"></mhw-builder-kinsect-details>\n\t\t</div>\n\t\t<br />\n\t</div>\n\n\t<div *ngIf=\"ammoCapacities\">\n\t\t<h4>\n\t\t\tAmmo\n\t\t\t<span [hidden]=\"!ammoVisible\" (click)=\"ammoVisible = !ammoVisible\"><i\n\t\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t\t<span [hidden]=\"ammoVisible\" (click)=\"ammoVisible = !ammoVisible\"><i\n\t\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t\t</h4>\n\t\t<div class=\"ammo-stats\" [hidden]=\"!ammoVisible\">\n\t\t\t<hr>\n\t\t\t<mhw-builder-ammo-capacities [ammoCapacities]=\"ammoCapacities\"></mhw-builder-ammo-capacities>\n\t\t</div>\n\t\t<br />\n\t</div>\n\n\t<h4>\n\t\tDefense\n\t\t<span [hidden]=\"!defenseVisible\" (click)=\"defenseVisible = !defenseVisible\"><i\n\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t<span [hidden]=\"defenseVisible\" (click)=\"defenseVisible = !defenseVisible\"><i\n\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t</h4>\n\t<div [hidden]=\"!defenseVisible\">\n\t\t<hr>\n\t\t<ul class=\"defense-stats striped\">\n\t\t\t<li *ngFor=\"let calc of defenseCalcs\" (pointerenter)=\"showCalcDetails($event, calc)\"\n\t\t\t\t(pointerleave)=\"clearCalcDetails()\">\n\t\t\t\t<span *ngIf=\"calc.icon\" class=\"detail-icon\">\n\t\t\t\t\t<img [src]=\"'assets/images/' + calc.icon + '-icon.png'\" alt=\"stat icon\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">{{calc.name}}</span>\n\t\t\t\t<span class=\"value\">{{calc.value}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { DataService } from '../../services/data.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { WeaponType } from '../../types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-item-details',\n\ttemplateUrl: './item-details.component.html',\n\tstyleUrls: ['./item-details.component.scss']\n})\nexport class ItemDetailsComponent implements OnInit {\n\tprivate _item: ItemModel;\n\n\t@Input()\n\tset item(item: ItemModel) {\n\t\tthis._item = item;\n\t\tif (item) {\n\t\t\tthis.setupStats();\n\t\t\tthis.loadSkills();\n\t\t} else {\n\t\t\tthis.skills = new Array<SkillModel>();\n\t\t}\n\t}\n\tget item(): ItemModel {\n\t\treturn this._item;\n\t}\n\n\tskills: SkillModel[];\n\tstats: StatDetailModel[] = [];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tsetupStats() {\n\t\tthis.stats = [];\n\n\t\tif (this.item.rarity) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Rarity',\n\t\t\t\tvalue: this.item.rarity\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.itemType == ItemType.Weapon) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Weapon Type',\n\t\t\t\tvalue: this.getWeaponTypeName(this.item.weaponType)\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Attack',\n\t\t\t\tvalue: this.item.baseAttack\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Affinity',\n\t\t\t\tvalue: this.item.baseAffinityPercent\n\t\t\t});\n\n\t\t\tif (this.item.ailment) {\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Ailment',\n\t\t\t\t\tvalue: this.item.ailment,\n\t\t\t\t\tcolor: this.item.ailmentHidden ? 'grey' : 'white'\n\t\t\t\t});\n\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Ailment Attack',\n\t\t\t\t\tvalue: this.item.ailmentBaseAttack,\n\t\t\t\t\tcolor: this.item.ailmentHidden ? 'grey' : 'white'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.item.element) {\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Element',\n\t\t\t\t\tvalue: this.item.element,\n\t\t\t\t\tcolor: this.item.elementHidden ? 'grey' : 'white'\n\t\t\t\t});\n\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Element Attack',\n\t\t\t\t\tvalue: this.item.elementBaseAttack,\n\t\t\t\t\tcolor: this.item.elementHidden ? 'grey' : 'white'\n\t\t\t\t});\n\n\t\t\t\tif (this.item.elderseal) {\n\t\t\t\t\tthis.stats.push({\n\t\t\t\t\t\tname: 'Elderseal',\n\t\t\t\t\t\tvalue: this.item.elderseal\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.item.otherData && this.item.otherData[0].value) {\n\t\t\t\tconst auxDetail: StatDetailModel = {\n\t\t\t\t\tname: '',\n\t\t\t\t\tvalue: ''\n\t\t\t\t};\n\t\t\t\tswitch (this.item.weaponType) {\n\t\t\t\t\tcase WeaponType.Bow:\n\t\t\t\t\t\tauxDetail.name = 'Coatings';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.ChargeBlade:\n\t\t\t\t\tcase WeaponType.SwitchAxe:\n\t\t\t\t\t\tauxDetail.name = 'Phial Type';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.Gunlance:\n\t\t\t\t\t\tauxDetail.name = 'Shell Type';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\t\tauxDetail.name = 'Boost Type';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tauxDetail.name = 'Other Data';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfor (const other of this.item.otherData) {\n\t\t\t\t\tauxDetail.value += `${other.value}${other.data ? '-' + other.data : ''}\t`;\n\t\t\t\t\tif (this.item.otherData.length > 1) {\n\t\t\t\t\t\tauxDetail.value += ' | ';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.stats.push(auxDetail);\n\t\t\t}\n\t\t}\n\n\t\tif (this.item.itemType == ItemType.Charm) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Levels',\n\t\t\t\tvalue: this.item.levels\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.itemType == ItemType.Tool1 || this.item.itemType == ItemType.Tool2) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Duration',\n\t\t\t\tvalue: this.item.duration\n\t\t\t});\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Recharge',\n\t\t\t\tvalue: this.item.recharge\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.defense) {\n\t\t\tlet value = '';\n\t\t\tfor (let i = 0; i < this.item.defense.length; i++) {\n\t\t\t\tvalue += this.item.defense[i];\n\t\t\t\tif (i < this.item.defense.length - 2) {\n\t\t\t\t\tvalue += ' ➝ ';\n\t\t\t\t} else if (i < this.item.defense.length - 1) {\n\t\t\t\t\tvalue += ' ➟ ';\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Defense',\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.equipmentCategory == EquipmentCategoryType.Armor) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Fire Resist',\n\t\t\t\tvalue: this.item.fireResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Water Resist',\n\t\t\t\tvalue: this.item.waterResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Thunder Resist',\n\t\t\t\tvalue: this.item.thunderResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Ice Resist',\n\t\t\t\tvalue: this.item.iceResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Dragon Resist',\n\t\t\t\tvalue: this.item.dragonResist || 0\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.monsters) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Monsters',\n\t\t\t\tvalue: this.item.monsters.join(' | ').replace(/-/g, ' ')\n\t\t\t});\n\t\t}\n\t}\n\n\n\tloadSkills() {\n\t\tthis.skills = this.dataService.getSkills(this.item.skills);\n\t}\n\n\tgetSkillCount(skill: SkillModel): string {\n\t\tconst itemSkill = _.find(this.item.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\tgetWeaponTypeName(weaponType: WeaponType): string {\n\t\treturn this.dataService.getWeaponTypeName(weaponType);\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setItem(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clearTooltipItem()\">\n\t<h3>{{item?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let stat of stats\">\n\t\t\t<span class=\"name\" [ngStyle]=\"{ color: stat.color }\">{{stat.name}}</span>\n\t\t\t<span class=\"value\" [ngStyle]=\"{ color: stat.color }\">{{stat.value}}</span>\n\t\t</li>\n\t\t<li *ngIf=\"item.sharpnessLevelsBar && item.sharpnessLevelsBar.length > 1\">\n\t\t\t<span class=\"name\">Max Sharpness</span>\n\t\t\t<span class=\"value\">\n\t\t\t\t{{item.sharpnessMaxLevel * 10}}\n\t\t\t\t<i class=\"fas fa-circle fa-sm\" [ngClass]=\"['sharp-' + item.sharpnessMaxColorIndex]\"></i>\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n\n\t<div class=\"slots-container\">\n\t\t<ng-template [ngIf]=\"item?.slots\">\n\t\t\t<div *ngIf=\"item?.slots[0]?.level\">\n\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t</div>\n\t\t\t<div *ngIf=\"item?.slots[1]?.level\">\n\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t</div>\n\t\t\t<div *ngIf=\"item?.slots[2]?.level\">\n\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t</div>\n\t\t</ng-template>\n\t</div>\n\n\t<div *ngIf=\"skills?.length\" class=\"skills-container\">\n\t\t<ul>\n\t\t\t<ng-container *ngFor=\"let skill of skills\">\n\t\t\t\t<li *ngIf=\"skill.levels\">\n\t\t\t\t\t<div class=\"skill-header\">\n\t\t\t\t\t\t<h4 class=\"skill-name\">{{skill.name}}</h4>\n\t\t\t\t\t\t<h4 class=\"skill-level\">{{getSkillCount(skill)}}</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<span>{{skill.description}}</span>\n\t\t\t\t</li>\n\t\t\t</ng-container>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, Input, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\nimport { KinsectModel } from 'src/app/models/kinsect.model';\nimport { ModificationModel } from 'src/app/models/modification.model';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { AwakeningLevelModel } from '../../models/awakening-level.model';\nimport { ItemModel } from '../../models/item.model';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\nimport { AugmentationSlotComponent } from '../augmentation-slot/augmentation-slot.component';\nimport { AwakeningSlotComponent } from '../awakening-slot/awakening-slot.component';\nimport { DecorationSlotComponent } from '../decoration-slot/decoration-slot.component';\nimport { KinsectSlotComponent } from '../kinsect-slot/kinsect-slot.component';\nimport { ModificationSlotComponent } from '../modification-slot/modification-slot.component';\nimport { UpgradeSlotComponent } from '../upagrade-slot/upgrade-slot.component';\n\n@Component({\n\tselector: 'mhw-builder-item-slot',\n\ttemplateUrl: './item-slot.component.html',\n\tstyleUrls: ['./item-slot.component.scss']\n})\nexport class ItemSlotComponent implements OnInit {\n\t@Input() slotName: ItemType;\n\n\t@ViewChildren(DecorationSlotComponent) decorationSlots: QueryList<DecorationSlotComponent>;\n\t@ViewChildren(AugmentationSlotComponent) augmentationSlots: QueryList<AugmentationSlotComponent>;\n\t@ViewChild(UpgradeSlotComponent) upgradeSlot: UpgradeSlotComponent;\n\t@ViewChild(AwakeningSlotComponent) awakeningSlot: AwakeningSlotComponent;\n\t@ViewChildren(ModificationSlotComponent) modificationSlots: QueryList<ModificationSlotComponent>;\n\t@ViewChild(KinsectSlotComponent) kinsectSlot: KinsectSlotComponent;\n\n\titem: ItemModel;\n\n\tpublic augmentations = new Array<AugmentationModel>();\n\tpublic upgradeContainer: UpgradeContainerModel;\n\tpublic awakenings = new Array<AwakeningLevelModel>();\n\tpublic modifications = new Array<ModificationModel>();\n\tpublic kinsect: KinsectModel;\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t}\n\n\tequipmentSlotClicked() {\n\t\tthis.slotService.selectItemSlot(this);\n\t}\n\n\tlevelDownClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tif (this.item.equippedLevel > 1) {\n\t\t\tthis.item.equippedLevel--;\n\t\t\tthis.slotService.updateItemLevel();\n\t\t}\n\t}\n\n\tlevelUpClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tif (this.item.equippedLevel < this.item.levels) {\n\t\t\tthis.item.equippedLevel++;\n\t\t\tthis.slotService.updateItemLevel();\n\t\t}\n\t}\n\n\tactiveClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.item.active = !this.item.active;\n\t\tthis.slotService.activeItemTool(this.item.itemType, this.item.active);\n\t}\n\n\tgetItemIconName(): string {\n\t\tlet assetPath;\n\t\tswitch (this.dataService.getEquipmentCategory(this.slotName)) {\n\t\t\tcase EquipmentCategoryType.Armor:\n\t\t\t\tassetPath = `armor/${this.slotName.toLowerCase()}-icon`;\n\t\t\t\tbreak;\n\t\t\tcase EquipmentCategoryType.Weapon:\n\t\t\t\tif (this.item) {\n\t\t\t\t\tassetPath = `weapons/${this.item.weaponType.toLowerCase()}-icon`;\n\t\t\t\t} else {\n\t\t\t\t\tassetPath = 'weapons/greatsword-icon';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EquipmentCategoryType.Charm:\n\t\t\t\tassetPath = 'armor/charm-icon';\n\t\t\t\tbreak;\n\t\t\tcase EquipmentCategoryType.Tool:\n\t\t\t\tassetPath = 'armor/tool-icon';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n\n\tequipmentClearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearItemSlot(this);\n\t\tthis.clearTooltipItem();\n\t}\n\n\tsetTooltipItem(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setItem(this.item);\n\t\t}\n\t}\n\n\tshowOnClickTooltipItem() {\n\t\tthis.tooltipService.setItem(this.item);\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setItem(null);\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"item-container\" [class.selected]=\"selected\">\n\t\t<!--<div class=\"slot-name\">{{slotName}}</div>-->\n\t\t<div class=\"slot-icon\" (click)=\"equipmentSlotClicked()\">\n\t\t\t<img [src]=\"getItemIconName()\" alt=\"slot icon\">\n\t\t</div>\n\t\t<div class=\"selected-item\" (click)=\"equipmentSlotClicked()\"\n\t\t\t (pointerenter)=\"setTooltipItem($event)\"\n\t\t\t (pointerleave)=\"clearTooltipItem()\">\n\t\t\t{{item?.name}}\n\t\t</div>\n\n\t\t<div *ngIf=\"item?.levels\" class=\"levels-container\">\n\t\t\t<button type=\"button\" class=\"level-down-button\" (click)=\"levelDownClicked($event)\">\n\t\t\t\t<i class=\"fas fa-minus\"></i>\n\t\t\t</button>\n\n\t\t\t<div class=\"level\">\n\t\t\t\t{{item.equippedLevel}}\n\t\t\t</div>\n\n\t\t\t<button type=\"button\" class=\"level-up-button\" (click)=\"levelUpClicked($event)\">\n\t\t\t\t<i class=\"fas fa-plus\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div *ngIf=\"item && (slotName=='Tool1' || slotName=='Tool2')\" class=\"active-container\">\n\t\t\t<button type=\"button\" class=\"active-button\" (click)=\"activeClicked($event)\">\n\t\t\t\t<i class=\"fas fa-lg\" [ngClass]=\"{'fa-toggle-on text-white': item?.active, 'fa-toggle-off': !item?.active}\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<button type=\"button\" class=\"info-button\" (click)=\"showOnClickTooltipItem()\" aria-label=\"info\">\n\t\t\t<i class=\"fas fa-info-circle icon-xs\" [ngClass]=\"'rarity-'+item?.rarity\" style=\"display:none;\"></i>\n\t\t\t<i class=\"fas fa-grip-lines-vertical icon-md\" [ngClass]=\"'rarity-'+item?.rarity\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"equipmentClearClicked($event)\" aria-label=\"clear\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"kinsect-container\" *ngIf=\"kinsect\">\n\t\t<mhw-builder-kinsect-slot></mhw-builder-kinsect-slot>\n\t</div>\n\n\t<div class=\"augmentation-container\" *ngIf=\"augmentations && augmentations.length\">\n\t\t<mhw-builder-augmentation-slot *ngFor=\"let aug of augmentations\">\n\t\t</mhw-builder-augmentation-slot>\n\t</div>\n\n\t<div class=\"upgrade-container\" *ngIf=\"upgradeContainer?.slots > 0\">\n\t\t<mhw-builder-upgrade-slot [upgradeContainer]=\"upgradeContainer\">\n\t\t</mhw-builder-upgrade-slot>\n\t</div>\n\n\t<div class=\"modification-container\" *ngIf=\"modifications && modifications.length\">\n\t\t<mhw-builder-modification-slot *ngFor=\"let mod of modifications\">\n\t\t</mhw-builder-modification-slot>\n\t</div>\n\n\t<div class=\"awakening-container\" *ngIf=\"item?.weaponType && item?.upgradeType && item?.upgradeType==2\">\n\t\t<mhw-builder-awakening-slot [awakenings]=\"awakenings\"\n\t\t\t\t\t\t\t\t\t[weaponElement]=\"item?.element\"\n\t\t\t\t\t\t\t\t\t[weaponAilment]=\"item?.ailment\"\n\t\t\t\t\t\t\t\t\t[weaponType]=\"item?.weaponType\">\n\t\t</mhw-builder-awakening-slot>\n\t</div>\n\n\t<div class=\"decoration-container\" *ngIf=\"item?.slots && item?.slots.length\">\n\t\t<mhw-builder-decoration-slot *ngFor=\"let slot of item?.slots\"\n\t\t\t\t\t\t\t\t\t [level]=\"slot.level\"\n\t\t\t\t\t\t\t\t\t [itemId]=\"item.id\"\n\t\t\t\t\t\t\t\t\t [itemType]=\"item.itemType\">\n\t\t</mhw-builder-decoration-slot>\n\t</div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { StatService } from 'src/app/services/stat.service';\nimport { ElementType } from 'src/app/types/element.type';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\n\n@Component({\n\tselector: 'mhw-builder-kinsect-details',\n\ttemplateUrl: './kinsect-details.component.html',\n\tstyleUrls: ['./kinsect-details.component.scss']\n})\nexport class KinsectDetailsComponent implements OnInit {\n\n\tprivate _kinsect: KinsectModel;\n\n\t@Input()\n\tset kinsect(kinsect: KinsectModel) {\n\t\tthis._kinsect = kinsect;\n\t\tif (kinsect) {\n\t\t\tthis.setupStats();\n\t\t} else {\n\n\t\t}\n\t}\n\tget kinsect(): KinsectModel {\n\t\treturn this._kinsect;\n\t}\n\n\tstats: StatDetailModel[] = [];\n\n\tconstructor(private statService: StatService) {\n\t\tthis.statService.statsUpdated$.subscribe(stats => {\n\t\t\tif (stats.kinsect) {\n\t\t\t\tthis.kinsect = stats.kinsect;\n\t\t\t\tthis.setupStats();\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n\tsetupStats() {\n\t\tthis.stats = [];\n\n\t\tthis.stats.push({\n\t\t\ticon: 'attack-type',\n\t\t\tname: 'Attack Type',\n\t\t\tvalue: this.kinsect.attackType\n\t\t});\n\n\t\tthis.stats.push({\n\t\t\ticon: 'dust-effect',\n\t\t\tname: 'Dust Effect',\n\t\t\tvalue: this.kinsect.dustEffect,\n\t\t\tclass1: this.kinsect.dustEffect\n\t\t});\n\n\t\tlet power = this.kinsect.power;\n\t\tconst powerDetail: StatDetailModel = {\n\t\t\ticon: 'kinsect/power',\n\t\t\tname: 'Power',\n\t\t\tvalue: 'Lv '\n\t\t};\n\t\tif (this.kinsect.element && this.kinsect.element != ElementType.None) {\n\t\t\tthis.stats.push({\n\t\t\t\ticon: this.kinsect.element.toLowerCase(),\n\t\t\t\tname: 'Element Power',\n\t\t\t\tvalue: `Lv ${this.kinsect.elementPower}`,\n\t\t\t\tclass1: this.kinsect.element\n\t\t\t});\n\t\t\tpower -= 1;\n\t\t\tpowerDetail.color = 'yellow';\n\t\t}\n\t\tpowerDetail.value += `${power}`;\n\t\tthis.stats.push(powerDetail);\n\n\t\tthis.stats.push({\n\t\t\ticon: '/kinsect/speed',\n\t\t\tname: 'Speed',\n\t\t\tvalue: `Lv ${this.kinsect.speed}`\n\t\t});\n\n\t\tthis.stats.push({\n\t\t\ticon: '/kinsect/heal',\n\t\t\tname: 'Heal',\n\t\t\tvalue: `Lv ${this.kinsect.heal}`\n\t\t});\n\t}\n}\n","<div class=\"container\">\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let stat of stats\">\n\t\t\t<span *ngIf=\"stat.icon\" class=\"detail-icon\">\n\t\t\t\t<img [src]=\"'assets/images/' + stat.icon + '-icon.png'\" style=\"height:1em;margin:auto;padding-top:1px;\" alt=\"stat icon\">\n\t\t\t</span>\n\t\t\t<span class=\"name\">{{stat.name}}</span>\n\t\t\t<span class=\"value\" [ngStyle]=\"{ color: stat.color }\" [ngClass]=\"stat.class1\">{{stat.value}}</span>\n\t\t</li>\n\t</ul>\n</div>\n","import { Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ElementType } from 'src/app/types/element.type';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\n\n@Component({\n\tselector: 'mhw-builder-kinsect-list',\n\ttemplateUrl: './kinsect-list.component.html',\n\tstyleUrls: ['./kinsect-list.component.scss']\n})\nexport class KinsectListComponent implements OnInit {\n\tonlyIceborne = true;\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\tkinsects: KinsectModel[];\n\tkinsectsWorld: KinsectModel[];\n\tkinsectsIceborne: KinsectModel[];\n\tfilteredKinsects: KinsectModel[];\n\tvirtualKinsects: KinsectModel[];\n\n\tshowSortContainer = true;\n\tsortType = '';\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate dataService: DataService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.loadKinsects();\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tloadKinsects() {\n\t\tthis.kinsects = this.dataService.getKinsects();\n\t\tthis.kinsectsWorld = this.kinsects.filter(item => item.id <= 100);\n\t\tthis.kinsectsIceborne = this.kinsects.filter(item => item.id > 100);\n\t\tthis.resetSearchResults();\n\t}\n\n\tsearch(query: string) {\n\t\tthis.applyIceborneFilter();\n\n\t\tif (query) {\n\t\t\tquery = query.toLocaleLowerCase().trim();\n\n\t\t\tthis.filteredKinsects = _.filter(this.filteredKinsects, (k: KinsectModel) =>\n\t\t\t\tk.name.toLocaleLowerCase().includes(query) ||\n\t\t\t\tk.attackType.toString().toLocaleLowerCase().includes(query) ||\n\t\t\t\tk.dustEffect.toString().toLocaleLowerCase().includes(query));\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.applyIceborneFilter();\n\t\tthis.sortType = '';\n\t}\n\n\tapplyIceborneFilter() {\n\t\tif (this.onlyIceborne) {\n\t\t\tthis.filteredKinsects = this.kinsectsIceborne;\n\t\t} else {\n\t\t\tthis.filteredKinsects = this.kinsectsIceborne.concat(this.kinsectsWorld);\n\t\t}\n\t}\n\n\tsetOnlyIceborne() {\n\t\tthis.onlyIceborne = !this.onlyIceborne;\n\t\tthis.applyIceborneFilter();\n\t}\n\n\tonKinsectListUpdate(kinsects: KinsectModel[]) {\n\t\tthis.virtualKinsects = kinsects;\n\t}\n\n\tselectKinsect(kinsect: KinsectModel) {\n\t\tconst newKinsect = Object.assign({}, kinsect);\n\t\tnewKinsect.element = ElementType.None;\n\t\tthis.slotService.selectKinsect(newKinsect);\n\t}\n\n\tsortByProperty(property: string) {\n\t\tthis.sortType = property;\n\t\tthis.filteredKinsects.sort(function (a, b) {\n\t\t\tif (a[property] > b[property]) {\n\t\t\t\treturn -1;\n\t\t\t} else if (a[property] < b[property]) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualKinsects = this.filteredKinsects;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, kinsect types, dust types\" />\n\t\t<button type=\"button\" class=\"iceborne-button\" (click)=\"setOnlyIceborne()\" title=\"Only Iceborne\">\n\t\t\t<i class=\"fas fa-toggle-on\" [hidden]=\"!onlyIceborne\"></i>\n\t\t\t<i class=\"fas fa-toggle-off\" [hidden]=\"onlyIceborne\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'power'\" (click)=\"sortByProperty('power')\">\n\t\t\t<span>POWER</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'speed'\" (click)=\"sortByProperty('speed')\">\n\t\t\t<span>SPEED</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'heal'\" (click)=\"sortByProperty('heal')\">\n\t\t\t<span>HEAL</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'attackType'\" (click)=\"sortByProperty('attackType')\">\n\t\t\t<span>TYPE</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'dustEffect'\" (click)=\"sortByProperty('dustEffect')\">\n\t\t\t<span>DUST</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"kinsects-list\" #itemList class=\"scroll-container\" *ngIf=\"kinsects\" [items]=\"filteredKinsects\" (vsUpdate)=\"onKinsectListUpdate($event)\">\n\t\t<div *ngFor=\"let kinsect of virtualKinsects\" class=\"scroll-item-container\" (click)=\"selectKinsect(kinsect)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"{'ver-52':kinsect.id==6}\">\n\t\t\t\t\t{{kinsect.name}}\n\t\t\t\t</div>\n\t\t\t\t<!--<div class=\"type\">\n\t\t\t\t</div>-->\n\t\t\t\t<div class=\"rarity\" *ngIf=\"kinsect.rarity\">\n\t\t\t\t\tRarity {{kinsect.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/attack-type-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.attackType}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/dust-effect-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.dustEffect}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/element-damage-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value sharp-8\">{{kinsect.elementPower}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/kinsect/power-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.power}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/kinsect/speed-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.speed}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/kinsect/heal-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.heal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { KeyValuePair } from '../../models/common/key-value-pair.model';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ElementType } from '../../types/element.type';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\nimport { DropdownComponent } from '../common/dropdown/dropdown.component';\n\n@Component({\n\tselector: 'mhw-builder-kinsect-slot',\n\ttemplateUrl: './kinsect-slot.component.html',\n\tstyleUrls: ['./kinsect-slot.component.scss']\n})\nexport class KinsectSlotComponent implements OnInit {\n\tslotName = ItemType.Kinsect;\n\telementTypes = ElementType;\n\tkinsect: KinsectModel;\n\telements: KeyValuePair<string, string>[];\n\n\tpublic selected: boolean;\n\n\t@ViewChild(DropdownComponent, { static: true }) elementDropdown: DropdownComponent;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.elements = [];\n\t\tObject.keys(ElementType).map(key => {\n\t\t\tthis.elements.push({ key: key, value: key });\n\t\t});\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectKinsectSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearKinsectSlot(this);\n\t\tthis.clearTooltipKinsect();\n\t}\n\n\tsetTooltipKinsect(event: PointerEvent, kinsect: KinsectModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setKinsect(kinsect);\n\t\t}\n\t}\n\n\tclearTooltipKinsect() {\n\t\tthis.tooltipService.setKinsect(null);\n\t}\n\n\tselectElement(selectedElement: ElementType) {\n\t\tthis.kinsect.element = selectedElement;\n\t\tthis.slotService.selectKinsectSlot(this);\n\t\tthis.slotService.selectKinsect(this.kinsect);\n\t}\n\n\tgetElementIcon(element: ElementType): string {\n\t\tlet assetPath;\n\t\tif (element && element != ElementType.None) {\n\t\t\tassetPath = `${element.toLowerCase()}-icon`;\n\t\t}\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n}\n","<div class=\"container\" (click)=\"clicked()\" [class.selected]=\"selected\" (pointerenter)=\"setTooltipKinsect($event, kinsect)\" (pointerleave)=\"clearTooltipKinsect()\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/kinsect/culldrone-icon.png'\"></div>\n\t<div class=\"selected-kinsect\">{{kinsect?.name}}</div>\n\n\t<div class=\"element-slot\" [hidden]=\"!kinsect\" (click)=\"elementDropdown.toggle($event)\">\n\t\t<div class=\"element selected-element\">\n\t\t\t<div *ngIf=\"kinsect?.element && kinsect?.element != elementTypes.None\" class=\"image-container\">\n\t\t\t\t<img *ngIf=\"kinsect?.element\" [src]=\"getElementIcon(kinsect?.element)\">\n\t\t\t</div>\n\t\t\t<span>{{kinsect?.element}}</span>\n\t\t</div>\n\t\t<mhw-builder-dropdown #elementDropdown>\n\t\t\t<div class=\"element\" *ngFor=\"let e of elements\" (click)=\"selectElement(e.value)\">\n\t\t\t\t<div class=\"image-container\">\n\t\t\t\t\t<img *ngIf=\"e.value != elementTypes.None\" [src]=\"getElementIcon(e.value)\">\n\t\t\t\t</div>\n\t\t\t\t<span>{{e.value}}</span>\n\t\t\t</div>\n\t\t</mhw-builder-dropdown>\n\t</div>\n\n\t<button class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MelodiesModel } from '../../models/melodies.model';\n\n@Component({\n\tselector: 'mhw-builder-melodies',\n\ttemplateUrl: './melodies.component.html',\n\tstyleUrls: ['./melodies.component.scss']\n})\nexport class MelodiesComponent implements OnInit {\n\n\t@Input() weaponMelodies: MelodiesModel;\n\n\tconstructor() { }\n\n\tngOnInit() {\n\n\t}\n\n\tgetNoteClass(note: string) {\n\t\tif (isNaN(parseInt(note.substring(note.length - 1, note.length), 10))) {\n\t\t\treturn note;\n\t\t} else {\n\t\t\treturn note.substring(0, note.length - 1);\n\t\t}\n\t}\n\tgetNoteSymbol(note: string) {\n\t\tif (isNaN(parseInt(note.substring(note.length - 1, note.length), 10))) {\n\t\t\treturn '♪';\n\t\t} else {\n\t\t\tconst val = note.substring(note.length - 1, note.length);\n\t\t\tif (val == '1') {\n\t\t\t\treturn '♪';\n\t\t\t} if (val == '2') {\n\t\t\t\treturn '♫';\n\t\t\t} else if (val == '3') {\n\t\t\t\treturn '𝆺𝅥𝅯';\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tNotes: &nbsp;\n\t\t\t\t\t<span *ngFor=\"let note of weaponMelodies.notes; let i = index\">\n\t\t\t\t\t\t<span [ngClass]=\"'note-' + getNoteClass(note)\" style=\"font-size:20px;font-weight:bold;\">\n\t\t\t\t\t\t\t<span *ngIf=\"i < 3\">{{getNoteSymbol(note)}}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr *ngFor=\"let melodyEffect of weaponMelodies.melodyEffects; let i = index\">\n\t\t\t\t<td>\n\t\t\t\t\t<span *ngFor=\"let effect of melodyEffect.effects; let effectIndex = index\">\n\t\t\t\t\t\t<span *ngIf=\"effectIndex > 0\"> +</span>\n\t\t\t\t\t\t{{effect.name}} <span *ngIf=\"effect.level\">({{effect.level}})</span>\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span *ngFor=\"let note of melodyEffect.melody\">\n\t\t\t\t\t\t<span [ngClass]=\"'note-' + getNoteClass(weaponMelodies.notes[note-1])\" style=\"font-size:20px;\">\n\t\t\t\t\t\t\t{{getNoteSymbol(weaponMelodies.notes[note-1])}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ModificationModel } from 'src/app/models/modification.model';\nimport { SlotService } from 'src/app/services/slot.service';\nimport { TooltipService } from 'src/app/services/tooltip.service';\nimport { ItemType } from 'src/app/types/item.type';\nimport { PointerType } from 'src/app/types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-modification-slot',\n\ttemplateUrl: './modification-slot.component.html',\n\tstyleUrls: ['./modification-slot.component.scss']\n})\nexport class ModificationSlotComponent implements OnInit {\n\tslotName = ItemType.Modification;\n\n\tmodification: ModificationModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void { }\n\n\tclicked() {\n\t\tthis.slotService.selectModificationSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearModificationSlot(this);\n\t\tthis.clearTooltipModification();\n\t}\n\n\tsetTooltipModification(event: PointerEvent, modification: ModificationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setModification(modification);\n\t\t}\n\t}\n\n\tclearTooltipModification() {\n\t\tthis.tooltipService.setModification(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clicked()\" [class.selected]=\"selected\" (pointerenter)=\"setTooltipModification($event, modification)\" (pointerleave)=\"clearTooltipModification()\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/mod-icon.png'\" alt=\"augment\"></div>\n\t<div class=\"selected-modification\">\n\t\t<span class=\"hidden-xs\">{{modification?.name}}</span>\n\t\t<span class=\"visible-xs\">{{modification?.code}}</span>\n\t</div>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ModificationModel } from '../../models/modification.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-modifications-list',\n\ttemplateUrl: './modifications-list.component.html',\n\tstyleUrls: ['./modifications-list.component.scss']\n})\nexport class ModificationsListComponent implements OnInit {\n\tmodifications: ModificationModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.loadItems();\n\t}\n\n\tloadItems() {\n\t\tthis.modifications = this.dataService.getModifications();\n\t}\n\n\tselectModification(modification: ModificationModel) {\n\t\tconst newModification = Object.assign({}, modification);\n\t\tthis.slotService.selectModification(newModification);\n\t}\n\n\tsetTooltipModification(event: PointerEvent, modification: ModificationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setModification(modification);\n\t\t}\n\t}\n\n\tclearTooltipModification() {\n\t\tthis.tooltipService.setModification(null);\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"items-container\">\n\t\t<ul>\n\t\t\t<li *ngFor=\"let mod of modifications\" (click)=\"selectModification(mod)\" (pointerenter)=\"setTooltipModification($event, mod)\" (pointerleave)=\"clearTooltipModification()\">\n\t\t\t\t<div class=\"info-container\">\n\t\t\t\t\t<div class=\"name-container\">\n\t\t\t\t\t\t{{mod.name}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t\t<div class=\"description-value\">\n\t\t\t\t\t\t\t{{mod.description}}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<div *ngFor=\"let level of mod.levels\">\n\t\t\t\t\t\t\t\t{{level.description}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { EquippedSetBonusModel } from '../../models/equipped-set-bonus.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-set-bonus-details',\n\ttemplateUrl: './set-bonus-details.component.html',\n\tstyleUrls: ['./set-bonus-details.component.scss']\n})\nexport class SetBonusDetailsComponent implements OnInit {\n\n\t@Input() equippedSetBonus: EquippedSetBonusModel;\n\n\tconstructor(\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tclearSetBonus() {\n\t\tthis.tooltipService.setEquippedSetBonus(null);\n\t}\n\n\tgetLevelColor(equipped: boolean): string {\n\t\treturn equipped ? '#F0E68C' : 'white';\n\t}\n}\n","<div class=\"container\" (click)=\"clearSetBonus()\">\n\t<h3>{{equippedSetBonus?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul>\n\t\t<li *ngFor=\"let level of equippedSetBonus?.details; let i = index\" [style.color]=\"getLevelColor(equippedSetBonus?.equippedCount >= level.requiredCount)\">\n\t\t\t<div class=\"level\">{{level.requiredCount}} Parts</div>\n\t\t\t<div class=\"level-description\">{{level.skill.name}}</div>\n\t\t</li>\n\t</ul>\n\t<hr />\n\t<table class=\"skill-part-table\">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon.png\" [hidden]=\"!(equippedSetBonus?.weaponCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Weapon\">\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.weaponCount > 0)\" class=\"armor-icon\" alt=\"Weapon\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"!(equippedSetBonus?.headCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Head\">\n\t\t\t\t<img src=\"assets/images/armor/head-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.headCount > 0)\" class=\"armor-icon\" alt=\"Head\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"!(equippedSetBonus?.chestCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Chest\">\n\t\t\t\t<img src=\"assets/images/armor/chest-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.chestCount > 0)\" class=\"armor-icon\" alt=\"Chest\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"!(equippedSetBonus?.armsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Arms\">\n\t\t\t\t<img src=\"assets/images/armor/arms-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.armsCount > 0)\" class=\"armor-icon\" alt=\"Arms\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"!(equippedSetBonus?.waistCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Waist\">\n\t\t\t\t<img src=\"assets/images/armor/waist-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.waistCount > 0)\" class=\"armor-icon\" alt=\"Waist\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"!(equippedSetBonus?.legsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Legs\">\n\t\t\t\t<img src=\"assets/images/armor/legs-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.legsCount > 0)\" class=\"armor-icon\" alt=\"Legs\">\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { SavedSetModel } from 'src/app/models/saved-set.model';\nimport { SetService } from 'src/app/services/set.service';\nimport { WeaponType } from 'src/app/types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-set-list',\n\ttemplateUrl: './set-list.component.html',\n\tstyleUrls: ['./set-list.component.scss']\n})\nexport class SetListComponent implements OnInit, AfterViewInit {\n\tsets: SavedSetModel[] = [];\n\tvirtualItems: SavedSetModel[];\n\tfilteredItems: SavedSetModel[];\n\tselectedSetIndex = -1;\n\tloading = 0;\n\n\t@ViewChild('saveBox', { static: true }) saveBox: ElementRef;\n\n\tweaponTypeFilter?: WeaponType;\n\thideFilterContainer = true;\n\n\tconstructor(\n\t\tprivate setService: SetService\n\t) {\n\t\tthis.setService.setsUpdated$.subscribe(sets => {\n\t\t\tthis.sets = sets;\n\t\t\tif (this.weaponTypeFilter) {\n\t\t\t\tthis.filteredItems = _.reject(this.sets, item => item.weaponType != this.weaponTypeFilter);\n\t\t\t} else {\n\t\t\t\tthis.filteredItems = this.sets;\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnInit() {\n\t\tthis.sets = this.setService.getSets();\n\t\tthis.filteredItems = this.sets;\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.setService.importSet();\n\t}\n\n\tsave(setName: string) {\n\t\tif (setName) {\n\t\t\tthis.loading = 1;\n\t\t\tthis.selectedSetIndex = this.setService.save(setName);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.loading = 0;\n\t\t\t}, 500);\n\t\t}\n\t}\n\n\tsaveSets() {\n\t\tthis.loading = 2;\n\t\tthis.setService.saveSets();\n\t\tsetTimeout(() => {\n\t\t\tthis.loading = 0;\n\t\t}, 500);\n\t}\n\n\tsortSets() {\n\t\tthis.loading = 3;\n\t\tthis.setService.sortSets();\n\t\tsetTimeout(() => {\n\t\t\tthis.loading = 0;\n\t\t}, 500);\n\t}\n\n\tremove(index: number) {\n\t\tthis.setService.remove(this.sets.indexOf(this.filteredItems[index]));\n\t}\n\n\tselect(set: SavedSetModel, index: number = 0) {\n\t\tthis.setService.select(set);\n\t\tthis.selectedSetIndex = index;\n\t\tthis.saveBox.nativeElement.value = set.setName;\n\t}\n\n\tweaponFilterClicked(weaponType?: WeaponType) {\n\t\tthis.selectedSetIndex = -1;\n\t\tif (!this.weaponTypeFilter || this.weaponTypeFilter != weaponType) {\n\t\t\tthis.weaponTypeFilter = weaponType;\n\t\t\tthis.filteredItems = _.reject(this.sets, item => item.weaponType != this.weaponTypeFilter);\n\t\t} else if (this.weaponTypeFilter == weaponType) {\n\t\t\tthis.weaponTypeFilter = null;\n\t\t\tthis.filteredItems = this.sets;\n\t\t}\n\t}\n\n\tdownloadHtmlFile() {\n\t\tconst dateNow = new Date().toLocaleDateString('en-GB', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: '2-digit',\n\t\t\tday: '2-digit',\n\t\t});\n\t\tconst fileName = `mhworld-builder-save(${dateNow}).html`;\n\t\tconst fileString = `\n<!DOCTYPE html>\n\n<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\" ng-app=\"mhwApp\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n    <title>MHWorld-Builder SetList</title>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.11.2/css/all.css\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.7/angular.min.js\" crossorigin=\"anonymous\"></script>\n    <style>\n        a {\n            color: cornflowerblue;\n        }\n        .Fire {\n            color: #ff6666;\n        }\n        .Water {\n            color: #66ccff;\n        }\n        .Thunder {\n            color: #ff9900;\n        }\n        .Ice {\n            color: #0099ff;\n        }\n        .Dragon {\n            color: #3cb05d;\n        }\n        .Poison {\n            color: #cc44ff;\n        }\n        .Sleep {\n            color: #9999ff;\n        }\n        .Paralysis {\n            color: #e6cb00;\n        }\n        .Blast {\n            color: #E6A400;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container-fluid\" ng-controller=\"SetListController\">\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <h2>MHWorld-Builder</h2>\n                <div class=\"input-group mb-2\">\n                    <select class=\"custom-select\" id=\"weaponFilter\" ng-model=\"weaponFilter\">\n                        <option value=\"\" selected></option>\n                        <option value=\"GreatSword\">GreatSword</option>\n                        <option value=\"SwordAndShield\">SwordAndShield</option>\n                        <option value=\"DualBlades\">DualBlades</option>\n                        <option value=\"LongSword\">LongSword</option>\n                        <option value=\"Hammer\">Hammer</option>\n                        <option value=\"HuntingHorn\">HuntingHorn</option>\n                        <option value=\"Lance\">Lance</option>\n                        <option value=\"Gunlance\">Gunlance</option>\n                        <option value=\"SwitchAxe\">SwitchAxe</option>\n                        <option value=\"ChargeBlade\">ChargeBlade</option>\n                        <option value=\"InsectGlaive\">InsectGlaive</option>\n                        <option value=\"Bow\">Bow</option>\n                        <option value=\"HeavyBowgun\">HeavyBowgun</option>\n                        <option value=\"LightBowgun\">LightBowgun</option>\n                    </select>\n                    <div class=\"input-group-append\">\n                        <label class=\"input-group-text\" for=\"inputGroupSelect02\">Weapon</label>\n                    </div>\n                </div>\n                <div class=\"card-columns\">\n                    <div class=\"card\" ng-repeat=\"(key,item) in sets | filter:(weaponFilter? {weaponType:weaponFilter}: ''):(weaponFilter? true: false) track by $index\" style=\"margin-bottom:.5rem;\">\n                        <div class=\"card-body\" style=\"padding:6px;\">\n                            <h6 class=\"card-title\" style=\"margin:0px;\">\n                                <a href=\"https://neftalimich.github.io/mhw-builder-page?{{item.hashString}}\" class=\"text-decoration-none\" target=\"_blank\">\n                                    {{item.setName}}\n                                </a>\n                                <span style=\"font-size:14px;\">\n                                    <a class=\"float-right ml-1 text-secondary\" href=\"https://neftalimich.github.io/mhw-builder-page?{{item.hashString}}i{{item.setName | uppercase}}\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\" title=\"Import\">\n                                        <i class=\"fas fa-cloud-upload-alt fa-sm\"></i>\n                                    </a>\n                                    <span class=\"float-right\">\n                                        <span>{{item.totalAttack}}</span>\n                                        <span ng-show=\"item.element || item.ailment\">\n\t\t\t\t\t\t\t\t\t\t\t(<span class=\"{{item.element}}\" title=\"{{item.element}}\">{{item.element ? item.elementAttack : ''}}</span><!--\n\t\t\t\t\t\t\t\t\t\t\t-->{{item.ailment && item.element ? '/' : ''}}<!--\n\t\t\t\t\t\t\t\t\t\t\t--><span class=\"{{item.ailment}}\" title=\"{{item.ailment}}\">{{item.ailment ? item.ailmentAttack : ''}}</span>)\n                                        </span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-muted\" style=\"font-size:12px;\">\n\t\t\t\t\t\t\t\t\t\t\t{{item.affinity}}%\n\t\t\t\t\t\t\t\t\t\t</span>\n                                    </span>\n                                </span>\n                            </h6>\n                            <p class=\"card-text\">\n                                <small class=\"text-muted text-capitalize\">\n                                    {{item.weaponType}}\n                                </small>\n\t\t\t\t\t\t\t\t<span style=\"font-size:10px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"float-right text-muted mt-2\" ng-show=\"item.resistances.length > 0\">\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t<span class=\"Fire\">{{item.resistances[0]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Water\">{{item.resistances[1]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Thunder\">{{item.resistances[2]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Ice\">{{item.resistances[3]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Dragon\">{{item.resistances[4]}}</span>\n\t\t\t\t\t\t\t\t\t\t] ➟ <span>{{item.defense[2]}} DEF</span>\n\t\t\t\t\t\t\t\t\t</span>\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <span class=\"text-muted float-right\" style=\"font-size:11px\">\n\t\t\t\t\tBy Neftalí Michelet (neftalimich)\n\t\t\t\t\t<a href=\"https://neftalimich.github.io/mhw-builder-page/\">Site</a>.\n\t\t\t\t</span>\n            </div>\n        </div>\n    </div>\n    <script>\n        var json = ${JSON.stringify(this.sets)};\n        var mhwApp = angular.module('mhwApp', []);\n        mhwApp.controller('SetListController', [\n            '$scope',\n            function ($scope) {\n                $scope.sets = json;\n            }\n        ]);\n    </script>\n</body>\n</html>\n\t\t`;\n\t\tconst blob = new Blob([fileString], { type: 'text/html' });\n\t\tif (window.navigator && window.navigator.msSaveOrOpenBlob) {\n\t\t\twindow.navigator.msSaveOrOpenBlob(blob, fileName);\n\t\t} else {\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = URL.createObjectURL(blob);\n\t\t\ta.download = fileName;\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\tdocument.body.removeChild(a);\n\t\t}\n\t}\n\n\tdownloadJsonFile() {\n\t\tconst dateNow = new Date().toLocaleDateString('en-GB', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: '2-digit',\n\t\t\tday: '2-digit',\n\t\t});\n\t\tconst fileName = `mhworld-builder-data(${dateNow}).json`;\n\t\tconst fileString = JSON.stringify(this.sets);\n\t\tconst blob = new Blob([fileString], { type: 'application/json' });\n\t\tif (window.navigator && window.navigator.msSaveOrOpenBlob) {\n\t\t\twindow.navigator.msSaveOrOpenBlob(blob, fileName);\n\t\t} else {\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = URL.createObjectURL(blob);\n\t\t\ta.download = fileName;\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\tdocument.body.removeChild(a);\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"save-container\">\n\t\t<input #saveBox placeholder=\"Set Name\" (keydown.enter)=\"save(saveBox.value)\" />\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"hideFilterContainer=!hideFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"save-button save-color\" (click)=\"save(saveBox.value)\">\n\t\t\t<i class=\"fas fa-save fa-lg\" [hidden]=\"loading==1\"></i>\n\t\t\t<i class=\"fas fa-spinner fa-spin\" [hidden]=\"loading!=1\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"filter-container\" *ngIf=\"!hideFilterContainer\">\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'GreatSword'\" (click)=\"weaponFilterClicked('GreatSword')\">\n\t\t\t<img src=\"assets/images/weapons/greatsword-icon.png\" alt=\"greatsword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwordAndShield'\" (click)=\"weaponFilterClicked('SwordAndShield')\">\n\t\t\t<img src=\"assets/images/weapons/swordandshield-icon.png\" alt=\"Sword and Shield\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'DualBlades'\" (click)=\"weaponFilterClicked('DualBlades')\">\n\t\t\t<img src=\"assets/images/weapons/dualblades-icon.png\" alt=\"Dual Blades\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LongSword'\" (click)=\"weaponFilterClicked('LongSword')\">\n\t\t\t<img src=\"assets/images/weapons/longsword-icon.png\" alt=\"Long Sword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Hammer'\" (click)=\"weaponFilterClicked('Hammer')\">\n\t\t\t<img src=\"assets/images/weapons/hammer-icon.png\" alt=\"Hammer\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HuntingHorn'\" (click)=\"weaponFilterClicked('HuntingHorn')\">\n\t\t\t<img src=\"assets/images/weapons/huntinghorn-icon.png\" alt=\"Hunting Horn\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Lance'\" (click)=\"weaponFilterClicked('Lance')\">\n\t\t\t<img src=\"assets/images/weapons/lance-icon.png\" alt=\"Lance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Gunlance'\" (click)=\"weaponFilterClicked('Gunlance')\">\n\t\t\t<img src=\"assets/images/weapons/gunlance-icon.png\" alt=\"Gunlance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwitchAxe'\" (click)=\"weaponFilterClicked('SwitchAxe')\">\n\t\t\t<img src=\"assets/images/weapons/switchaxe-icon.png\" alt=\"Switch Axe\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'ChargeBlade'\" (click)=\"weaponFilterClicked('ChargeBlade')\">\n\t\t\t<img src=\"assets/images/weapons/chargeblade-icon.png\" alt=\"Charge Blade\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'InsectGlaive'\" (click)=\"weaponFilterClicked('InsectGlaive')\">\n\t\t\t<img src=\"assets/images/weapons/insectglaive-icon.png\" alt=\"Insect Glaive\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Bow'\" (click)=\"weaponFilterClicked('Bow')\">\n\t\t\t<img src=\"assets/images/weapons/bow-icon.png\" alt=\"Bow\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LightBowgun'\" (click)=\"weaponFilterClicked('LightBowgun')\">\n\t\t\t<img src=\"assets/images/weapons/lightbowgun-icon.png\" alt=\"LBG\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HeavyBowgun'\" (click)=\"weaponFilterClicked('HeavyBowgun')\">\n\t\t\t<img src=\"assets/images/weapons/heavybowgun-icon.png\" alt=\"HBG\">\n\t\t</button>\n\t</div>\n\n\t<div class=\"scroll-container\" *ngIf=\"sets\">\n\t\t<div *ngFor=\"let item of filteredItems; let i = index\" class=\"scroll-item-container\">\n\t\t\t<div class=\"icon-container text-left\">\n\t\t\t\t<img [src]=\"'assets/images/weapons/'+item.weaponType.toLowerCase()+'-icon.png'\" *ngIf=\"item.weaponType\" alt=\"weapon\" />\n\t\t\t</div>\n\t\t\t<div class=\"name-container\" (click)=\"select(item, i)\" [ngClass]=\"{'sharp-2':i==selectedSetIndex}\">\n\t\t\t\t{{item.setName}}\n\t\t\t</div>\n\t\t\t<div class=\"stats-container text-right\" (click)=\"select(item, i)\">\n\t\t\t\t<span>{{item.totalAttack}}</span>\n\t\t\t\t<span *ngIf=\"item.element || item.ailment\"> (</span>\n\t\t\t\t<span [ngClass]=\"item.element\" *ngIf=\"item.element\">{{item.elementAttack}}</span>\n\t\t\t\t<span *ngIf=\"item.element && item.ailment\">/</span>\n\t\t\t\t<span [ngClass]=\"item.ailment\" *ngIf=\"item.ailment\">{{item.ailmentAttack}}</span>\n\t\t\t\t<span *ngIf=\"item.element || item.ailment\">)</span>\n\t\t\t</div>\n\t\t\t<div class=\"buttons-container text-right\">\n\t\t\t\t<button type=\"button\" (click)=\"remove(i)\">\n\t\t\t\t\t<i class=\"fas fa-trash\" [ngClass]=\"{'trash-color':item.confirm}\"></i>\n\t\t\t\t</button>\n\t\t\t\t<button [hidden]=\"!item.confirm\">\n\t\t\t\t\t<i class=\"fas fa-times\" (click)=\"item.confirm=false\"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=\"download-container text-center\">\n\t\t<button type=\"button\" (click)=\"sortSets()\" title=\"Sort sets\">\n\t\t\tSort <i class=\"fas fa-sort-amount-up\" [hidden]=\"loading==3\"></i><i class=\"fas fa-spinner fa-spin\" [hidden]=\"loading!=3\"></i>\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"saveSets()\" title=\"Save order of sets\">\n\t\t\tOrder <i class=\"fas fa-save\" [hidden]=\"loading==2\"></i><i class=\"fas fa-spinner fa-spin\" [hidden]=\"loading!=2\"></i>\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"downloadHtmlFile()\" title=\"Download Html\">\n\t\t\tHTML <i class=\"fas fa-file-download\"></i>\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"downloadJsonFile()\" title=\"Download Json\">\n\t\t\tJSON <i class=\"fas fa-file-code\"></i>\n\t\t</button>\n\t</div>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { EquippedSetBonusDetailModel } from '../../models/equipped-set-bonus.model';\nimport { SetBonusModel } from '../../models/set-bonus.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ModeType } from '../../types/mode.type';\n\n@Component({\n\tselector: 'mhw-builder-setbonus-list',\n\ttemplateUrl: './setbonus-list.component.html',\n\tstyleUrls: ['./setbonus-list.component.scss']\n})\nexport class SetbonusListComponent implements OnInit {\n\t@Output() setbonusSelected = new EventEmitter<SetBonusModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('setbonusList') setbonusList: VirtualScrollerComponent;\n\n\tsetbonuses: SetBonusModel[];\n\tfilteredSetbonuses: SetBonusModel[];\n\tvirtualSetbonuses: SetBonusModel[];\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tpublic dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.loadItems();\n\t}\n\n\trefreshList() {\n\t\tif (this.setbonusList) {\n\t\t\tthis.setbonusList.refresh();\n\t\t}\n\t}\n\n\tonSetbonusListUpdate(setbonuses: SetBonusModel[]) {\n\t\tthis.virtualSetbonuses = setbonuses;\n\t}\n\n\tloadItems() {\n\t\tthis.setbonuses = this.dataService.getSetBonuses();\n\t\tthis.setbonuses = this.setbonuses.sort((a, b) => {\n\t\t\tif (a.name > b.name) {\n\t\t\t\treturn 1;\n\t\t\t} else if (a.name < b.name) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredSetbonuses = this.setbonuses;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.setbonuses) {\n\t\t\t\tfor (const setbonus of this.setbonuses) {\n\t\t\t\t\tconst itemName = setbonus.name.toLowerCase();\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\n\t\t\t\t\tif (!nameMatch) {\n\t\t\t\t\t\tthis.filteredSetbonuses = _.reject(this.filteredSetbonuses, d => d.name === setbonus.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredSetbonuses = this.setbonuses;\n\t}\n\n\tselectSetbonus(setbonus: SetBonusModel) {\n\t\tconst newSetbonus = Object.assign({}, setbonus);\n\t\tthis.slotService.selectSetbonus(newSetbonus);\n\t}\n\n\tgetSkills(setbonus: SetBonusModel): EquippedSetBonusDetailModel[] {\n\t\tconst result: EquippedSetBonusDetailModel[] = [];\n\t\tfor (const level of setbonus.setLevels) {\n\t\t\tconst skill: SkillModel = JSON.parse(JSON.stringify(this.dataService.getSkill(level.id)));\n\t\t\tresult.push({\n\t\t\t\tskill: skill,\n\t\t\t\tmode: ModeType.Active,\n\t\t\t\trequiredCount: level.pieces\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names\" />\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"setbonuses-list\" #setbonusList class=\"scroll-container\" *ngIf=\"setbonuses\" [items]=\"filteredSetbonuses\" (vsUpdate)=\"onSetbonusListUpdate($event)\">\n\t\t<div *ngFor=\"let setbonus of virtualSetbonuses\" class=\"scroll-item-container\" (click)=\"selectSetbonus(setbonus)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t{{setbonus.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"level\" *ngIf=\"setbonus.level\">\n\t\t\t\t\t<span *ngFor=\"let key of setbonus.level | numbersArr\">\n\t\t\t\t\t\t<i class=\"fas fa-star fa-sm star-icon\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\" *ngIf=\"setbonus?.setLevels.length == 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let bonus of getSkills(setbonus)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{bonus.requiredCount}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{bonus.skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"skills-container-2\" *ngIf=\"setbonus?.setLevels.length > 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let bonus of getSkills(setbonus)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{bonus.requiredCount}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{bonus.skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { SharpnessBarModel } from 'src/app/models/sharpness-bar.model';\nimport { SharpnessModel } from 'src/app/models/sharpness-model';\nimport { TooltipService } from 'src/app/services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-sharpness-bar',\n\ttemplateUrl: './sharpness-bar.component.html',\n\tstyleUrls: ['./sharpness-bar.component.scss']\n})\nexport class SharpnessBarComponent implements OnInit {\n\tprivate _handicraftLevel = 0;\n\tprivate _sharpnessLevels: number[] = [];\n\n\t@Input()\n\tset handicraftLevel(handicraftLevel: number) {\n\t\tthis._handicraftLevel = handicraftLevel;\n\t}\n\n\t@Input()\n\tset sharpnessLevels(sharpnessLevels: number[]) {\n\t\tthis._sharpnessLevels = sharpnessLevels;\n\t\tthis.generateSharpnessBar();\n\t}\n\n\t@Input() dataNeeded: boolean;\n\n\tsharpnessBar: SharpnessBarModel = new SharpnessBarModel();\n\n\tconstructor(private tooltipService: TooltipService) {\n\t}\n\n\tngOnInit() {\n\t}\n\n\tgenerateSharpnessBar() {\n\t\tlet total = this._sharpnessLevels.reduce((a, b) => a + b, 0);\n\t\tconst maxHandicraftLevels = 40 + 5 - total;\n\t\tthis.sharpnessBar.tooltipTemplate = '';\n\t\tthis.sharpnessBar.sharps = [];\n\t\tthis.sharpnessBar.levels = JSON.parse(JSON.stringify(this._sharpnessLevels));\n\t\tthis.sharpnessBar.maxColorSharp = null;\n\n\t\tlet levelsToSubstract = Math.min(5 - this._handicraftLevel, maxHandicraftLevels);\n\t\tlet levelsToAdd = Math.min(this._handicraftLevel, maxHandicraftLevels);\n\t\tconst sharpnessEmpty = levelsToSubstract;\n\t\tlet last = true;\n\n\t\tfor (let i = this._sharpnessLevels.length - 1; i >= 0; i--) {\n\t\t\tif (this.sharpnessBar.maxColorSharp == null && this._sharpnessLevels[i] > 0) {\n\t\t\t\tthis.sharpnessBar.maxColorSharp = i;\n\t\t\t\tthis.sharpnessBar.maxLevelSharp = this._sharpnessLevels[i] - (total - 40);\n\t\t\t}\n\t\t\tif (levelsToSubstract > 0) {\n\t\t\t\tconst toSubstract = Math.min(this._sharpnessLevels[i], levelsToSubstract);\n\t\t\t\tthis._sharpnessLevels[i] -= toSubstract;\n\t\t\t\tlevelsToSubstract -= toSubstract;\n\t\t\t}\n\t\t\tconst aux = Math.min(this._sharpnessLevels[i], levelsToAdd);\n\n\t\t\tif (levelsToAdd > 0) {\n\t\t\t\tconst sharpnessAux: SharpnessModel = {\n\t\t\t\t\tcolorIndex: i,\n\t\t\t\t\tlevel: aux,\n\t\t\t\t\tactive: true,\n\t\t\t\t\tlast: last\n\t\t\t\t};\n\t\t\t\tlast = false;\n\t\t\t\tif (levelsToAdd - aux == 0) {\n\t\t\t\t\tsharpnessAux.first = true;\n\t\t\t\t}\n\t\t\t\tthis.sharpnessBar.sharps.push(sharpnessAux);\n\t\t\t}\n\t\t\tif (levelsToAdd < this._sharpnessLevels[i]) {\n\t\t\t\tconst sharpnessAux: SharpnessModel = {\n\t\t\t\t\tcolorIndex: i,\n\t\t\t\t\tlevel: this._sharpnessLevels[i] - levelsToAdd,\n\t\t\t\t\tactive: false\n\t\t\t\t};\n\t\t\t\t// When handicraft is not needed\n\t\t\t\tif (total > 40 && this._sharpnessLevels[i] > 0) {\n\t\t\t\t\tconst toSubstract2 = Math.min(this._sharpnessLevels[i], total - 40);\n\t\t\t\t\tthis.sharpnessBar.levels[i] -= toSubstract2;\n\t\t\t\t\tthis._sharpnessLevels[i] -= toSubstract2;\n\t\t\t\t\ttotal -= toSubstract2;\n\t\t\t\t\tsharpnessAux.level -= toSubstract2;\n\t\t\t\t}\n\t\t\t\tthis.sharpnessBar.sharps.push(sharpnessAux);\n\t\t\t}\n\t\t\tif (levelsToAdd == 0 && this._sharpnessLevels[i] == 0) {\n\t\t\t\tconst sharpnessAux: SharpnessModel = {\n\t\t\t\t\tcolorIndex: i,\n\t\t\t\t\tlevel: 0,\n\t\t\t\t\tactive: false\n\t\t\t\t};\n\t\t\t\tthis.sharpnessBar.sharps.push(sharpnessAux);\n\t\t\t}\n\t\t\tlevelsToAdd -= aux;\n\n\t\t\tthis.sharpnessBar.tooltipTemplate =\n\t\t\t\t`| <span class=\"sharp-${i}\">${this._sharpnessLevels[i] * 10}</span> ${this.sharpnessBar.tooltipTemplate}`;\n\t\t}\n\n\t\tthis.sharpnessBar.sharps = this.sharpnessBar.sharps.reverse();\n\t\tthis.sharpnessBar.empty = sharpnessEmpty;\n\t\tthis.sharpnessBar.widthModifier = 5;\n\t\tthis.sharpnessBar.levelsMissing = 7 - this._sharpnessLevels.length;\n\t\tthis.sharpnessBar.tooltipTemplate +=\n\t\t\t` | <br /> = <br /><span class=\"sharp-8\"> ${((total - sharpnessEmpty) * 10)}`\n\t\t\t+ ` [<span class=\"sharp-${this.sharpnessBar.maxColorSharp}\">${this.sharpnessBar.maxLevelSharp * 10}<i class=\"fas fa-circle fa-sm\"></i></span>]</span>`;\n\t\tthis.sharpnessBar.sharpnessDataNeeded = this.dataNeeded;\n\t\tthis.sharpnessBar.color = this.dataNeeded ? 'red' : 'white';\n\t}\n\n\tgetLevel(colorIndex: number) {\n\t\tconst sharpsFiltered = this.sharpnessBar.sharps.filter(item => {\n\t\t\treturn item['colorIndex'].toString().indexOf(colorIndex.toString()) != -1;\n\t\t});\n\t\tlet level = 0;\n\t\tfor (const sharp of sharpsFiltered) {\n\t\t\tlevel += sharp.level;\n\t\t}\n\t\treturn level;\n\t}\n}\n","<div style=\"display:inline-block;position:relative;margin-right:-1px;z-index:10;\">\n\t<i class=\"fas fa-filter fa-rotate-90 fa-sm sharp-8\" style=\"padding-top:2px;\"></i>\n</div>\n\n<div class=\"text-right sharp-box\" style=\"display:inline-block;position:relative;z-index:9;\">\n\t<span *ngFor=\"let colorIndex of (7 | numbersArr)\">\n\t\t<span [ngClass]=\"['sharp-bg-' + colorIndex]\"\n\t\t\t  [ngStyle]=\"{'width.px': (getLevel(colorIndex) * sharpnessBar.widthModifier)}\">\n\t\t</span>\n\t\t<span [ngClass]=\"['sharp-bg-' + colorIndex]\" style=\"height:3px !important;\"\n\t\t\t  [ngStyle]=\"{'width.px': ((sharpnessBar.levels[colorIndex]- getLevel(colorIndex)) * sharpnessBar.widthModifier)}\">\n\t\t</span>\n\t</span>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { EquippedSkillModel } from '../../models/equipped-skill.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-skill-details',\n\ttemplateUrl: './skill-details.component.html',\n\tstyleUrls: ['./skill-details.component.scss']\n})\nexport class SkillDetailsComponent implements OnInit {\n\n\t@Input() equippedSkill: EquippedSkillModel;\n\t@Input() skill: SkillModel;\n\n\tconstructor(\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t}\n\n\tclearSkill() {\n\t\tthis.tooltipService.setEquippedSkill(null);\n\t}\n\n\tgetLevelColor(level: number): string {\n\t\tif (this.equippedSkill.requiredCount) {\n\t\t\treturn '#87cefa';\n\t\t}\n\t\tlet color = 'white';\n\t\tif (level == Math.min(this.equippedSkill.equippedArmorCount + this.equippedSkill.equippedToolActiveCount, this.equippedSkill.totalLevelCount)) {\n\t\t\tcolor = 'rgb(134, 255, 134)';\n\t\t}\n\t\tif (level == Math.min(this.equippedSkill.equippedArmorCount, this.equippedSkill.totalLevelCount)) {\n\t\t\tcolor = '#87cefa';\n\t\t}\n\t\treturn color;\n\t}\n}\n","<div class=\"container\" (click)=\"clearSkill()\">\n\t<h3>{{skill?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<div [hidden]=\"skill?.levels.length == 1\">{{skill?.description}}</div>\n\t<ul>\n\t\t<li *ngFor=\"let level of skill?.levels; let i = index\" [style.color]=\"getLevelColor(i + 1)\">\n\t\t\t<div class=\"level\">\n\t\t\t\t<span [style.color]=\"i + 1 > skill?.maxLevel?'#b38cd9':''\">Lv {{i + 1}}</span>\n\t\t\t</div>\n\t\t\t<div class=\"level-description\">\n\t\t\t\t{{level.description}}\n\t\t\t\t<i *ngIf=\"i + 1 > skill?.maxLevel\" class=\"fas fa-angle-double-up\" style=\"color: #b38cd9;\"></i>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n\t<hr />\n\t<table class=\"skill-part-table\">\n\t\t<tr>\n\t\t\t<td [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon.png\" [hidden]=\"!(equippedSkill.weaponCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Weapon\">\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon-gold.png\" [hidden]=\"!(equippedSkill.weaponCount > 0)\" class=\"armor-icon\" alt=\"Weapon\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"!(equippedSkill.headCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Head\">\n\t\t\t\t<img src=\"assets/images/armor/head-icon-gold.png\" [hidden]=\"!(equippedSkill.headCount > 0)\" class=\"armor-icon\" alt=\"Head\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"!(equippedSkill.chestCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Chest\">\n\t\t\t\t<img src=\"assets/images/armor/chest-icon-gold.png\" [hidden]=\"!(equippedSkill.chestCount > 0)\" class=\"armor-icon\" alt=\"Chest\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"!(equippedSkill.armsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Arms\">\n\t\t\t\t<img src=\"assets/images/armor/arms-icon-gold.png\" [hidden]=\"!(equippedSkill.armsCount > 0)\" class=\"armor-icon\" alt=\"Arms\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"!(equippedSkill.waistCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Waist\">\n\t\t\t\t<img src=\"assets/images/armor/waist-icon-gold.png\" [hidden]=\"!(equippedSkill.waistCount > 0)\" class=\"armor-icon\" alt=\"Waist\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"!(equippedSkill.legsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Legs\">\n\t\t\t\t<img src=\"assets/images/armor/legs-icon-gold.png\" [hidden]=\"!(equippedSkill.legsCount > 0)\" class=\"armor-icon\" alt=\"Lgs\">\n\t\t\t</td>\n\t\t\t<td [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t\t<img src=\"assets/images/armor/charm-icon.png\" [hidden]=\"!(equippedSkill.charmCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Charm\">\n\t\t\t\t<img src=\"assets/images/armor/charm-icon-gold.png\" [hidden]=\"!(equippedSkill.charmCount > 0)\" class=\"armor-icon\" alt=\"Charm\">\n\t\t\t</td>\n\t\t\t<td [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t\t<img src=\"assets/images/armor/tool-icon.png\" [hidden]=\"!(equippedSkill.toolCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Tool\">\n\t\t\t\t<img src=\"assets/images/armor/tool-icon-gold.png\" [hidden]=\"!(equippedSkill.toolCount > 0)\" class=\"armor-icon\" alt=\"Tool\">\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.weaponCount==0}\">{{equippedSkill.weaponCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.headCount==0}\">{{equippedSkill.headCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.chestCount==0}\">{{equippedSkill.chestCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.armsCount==0}\">{{equippedSkill.armsCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.waistCount==0}\">{{equippedSkill.waistCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.legsCount==0}\">{{equippedSkill.legsCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.charmCount==0}\">{{equippedSkill.charmCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.toolCount==0}\">{{equippedSkill.toolCount}}</span>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ToolModel } from 'src/app/models/tool.model';\nimport { ItemModel } from '../../models/item.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { ToolType } from '../../types/tool.type';\n\n@Component({\n\tselector: 'mhw-builder-tool-list',\n\ttemplateUrl: './tool-list.component.html',\n\tstyleUrls: ['./tool-list.component.scss']\n})\nexport class ToolListComponent implements OnInit {\n\tpublic itemTypes = ItemType;\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\tprivate _itemType: ItemType;\n\ttypeSort: string;\n\n\t@Input()\n\tset itemType(itemType: ItemType) {\n\t\tthis._itemType = itemType;\n\t\tthis.loadItems();\n\t}\n\tget itemType(): ItemType { return this._itemType; }\n\n\t@Output() itemSelected = new EventEmitter<ItemModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titems: ToolModel[];\n\tfilteredItems: ToolModel[];\n\tvirtualItems: ToolModel[];\n\ttoolTypeFilter?: ToolType;\n\tweaponTypeSort: String;\n\n\thideFilterContainer = false;\n\tshowSortContainer = false;\n\n\tchildHeight: number;\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService,\n\t) { }\n\n\tngOnInit() {\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tonItemListUpdate(items: ToolModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tloadItems() {\n\t\tthis.items = this.dataService.getTools(this._itemType);\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredItems = this.items;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.items) {\n\t\t\t\tfor (const item of this.items) {\n\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\n\t\t\t\t\tif (!nameMatch) {\n\t\t\t\t\t\tthis.filteredItems = _.reject(this.filteredItems, i => i.name === item.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredItems = this.items;\n\t\tthis.applyToolFilter();\n\t}\n\n\tapplyToolFilter() {\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tconst newItem = Object.assign({}, item);\n\t\tthis.slotService.selectItem(newItem);\n\t}\n\n\tsortByDuration() {\n\t\tthis.typeSort = 'DUR';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.duration > item2.duration) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.duration < item2.duration) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortByRecharge() {\n\t\tthis.typeSort = 'REC';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.recharge < item2.recharge) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.recharge > item2.recharge) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortBySlots() {\n\t\tthis.typeSort = 'SLOT';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet slotValue1 = 0;\n\t\t\tlet slotValue2 = 0;\n\n\t\t\tif (item1.slots.length > 0) {\n\t\t\t\tslotValue1 += item1.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item1.slots.length > 1) {\n\t\t\t\tslotValue1 += item1.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item1.slots.length > 2) {\n\t\t\t\tslotValue1 += item1.slots[2].level;\n\t\t\t}\n\t\t\tif (item2.slots.length > 0) {\n\t\t\t\tslotValue2 += item2.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item2.slots.length > 1) {\n\t\t\t\tslotValue2 += item2.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item2.slots.length > 2) {\n\t\t\t\tslotValue2 += item2.slots[2].level;\n\t\t\t}\n\n\t\t\tif (slotValue1 > slotValue2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (slotValue1 < slotValue2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, skills\" />\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"hideFilterContainer=!hideFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"typeSort == 'DUR'\" (click)=\"sortByDuration()\">\n\t\t\t<span>DUR</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"typeSort == 'REC'\" (click)=\"sortByRecharge()\">\n\t\t\t<span>REC</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"typeSort == 'SLOT'\" (click)=\"sortBySlots()\">\n\t\t\t<span>SLOT</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"items\" [items]=\"filteredItems\" (vsUpdate)=\"onItemListUpdate($event)\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"'ver-'+ item.version\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"slots\">\n\t\t\t\t\t<div *ngIf=\"item.slots[0]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[1]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[2]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"type\">\n\t\t\t\t\t{{item.toolType}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/tool-duration-icon.png\" alt=\"duration\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.duration}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/tool-recharge-icon.png\" alt=\"recharge\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.recharge}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, ElementRef, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { CommonLevelModel, CommonModel } from 'src/app/models/common.model';\nimport { KinsectModel } from 'src/app/models/kinsect.model';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { EquippedSetBonusModel } from '../../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../../models/equipped-skill.model';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { WeaponType } from '../../types/weapon.type';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\n\n@Component({\n\tselector: 'mhw-builder-tooltip',\n\ttemplateUrl: './tooltip.component.html',\n\tstyleUrls: ['./tooltip.component.scss']\n})\nexport class TooltipComponent implements OnInit {\n\t@ViewChild('container', { static: true }) container: ElementRef;\n\n\titem: ItemModel;\n\tupgradeContainer: UpgradeContainerModel;\n\tdecoration: DecorationModel;\n\tcommon: CommonModel;\n\tkinsect: KinsectModel;\n\tequippedSkill: EquippedSkillModel;\n\tequippedSetBonus: EquippedSetBonusModel;\n\tskill: SkillModel;\n\tcalc: StatDetailModel;\n\tvisible: boolean;\n\tweaponTypes = WeaponType;\n\n\tprivate mouseXOffset = 40;\n\tprivate mouseYOffset = 40;\n\n\tconstructor(\n\t\tprivate renderer: Renderer2,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.tooltipService.itemChanged$.subscribe(item => {\n\t\t\tif (!item) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.item = item;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.decorationChanged$.subscribe(decoration => {\n\t\t\tif (!decoration) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.decoration = decoration;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.augmentationChanged$.subscribe(augmentation => {\n\t\t\tif (!augmentation) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tconst levels: CommonLevelModel[] = [];\n\t\t\t\tfor (const augLevel of augmentation.levels) {\n\t\t\t\t\tlet level: CommonLevelModel;\n\t\t\t\t\tlevel = {\n\t\t\t\t\t\tdescription: augLevel.description,\n\t\t\t\t\t\tskills: augLevel.skills\n\t\t\t\t\t};\n\t\t\t\t\tlevels.push(level);\n\t\t\t\t}\n\t\t\t\tthis.common = {\n\t\t\t\t\tid: augmentation.id,\n\t\t\t\t\tcode: augmentation.code,\n\t\t\t\t\tname: augmentation.name,\n\t\t\t\t\tdescription: augmentation.description,\n\t\t\t\t\tlevels: levels\n\t\t\t\t};\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.upgradeContainerChanged$.subscribe(upgradeContainer => {\n\t\t\tif (!upgradeContainer) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.upgradeContainer = upgradeContainer;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.modificationChanged$.subscribe(modification => {\n\t\t\tif (!modification) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tconst levels: CommonLevelModel[] = [];\n\t\t\t\tfor (const modLevel of modification.levels) {\n\t\t\t\t\tlet level: CommonLevelModel;\n\t\t\t\t\tlevel = {\n\t\t\t\t\t\tdescription: modLevel.description,\n\t\t\t\t\t\tskills: modLevel.skills\n\t\t\t\t\t};\n\t\t\t\t\tlevels.push(level);\n\t\t\t\t}\n\t\t\t\tthis.common = {\n\t\t\t\t\tid: modification.id,\n\t\t\t\t\tcode: modification.code,\n\t\t\t\t\tname: modification.name,\n\t\t\t\t\tdescription: modification.description,\n\t\t\t\t\tlevels: levels\n\t\t\t\t};\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.kinsectChanged$.subscribe(kinsect => {\n\t\t\tif (!kinsect) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.kinsect = kinsect;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.equippedSkillChanged$.subscribe(equippedSkill => {\n\t\t\tif (!equippedSkill) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.equippedSkill = equippedSkill;\n\t\t\t\tthis.skill = equippedSkill.skill;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.equippedSetBonusChanged$.subscribe(equippedSetBonus => {\n\t\t\tif (!equippedSetBonus) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.equippedSetBonus = equippedSetBonus;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.skillChanged$.subscribe(skill => {\n\t\t\tif (!skill) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.skill = skill;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.calcChanged$.subscribe(calc => {\n\t\t\tif (!calc) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.calc = calc;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\t}\n\n\treset() {\n\t\tthis.item = null;\n\t\tthis.upgradeContainer = null;\n\t\tthis.decoration = null;\n\t\tthis.common = null;\n\t\tthis.kinsect = null;\n\t\tthis.equippedSkill = null;\n\t\tthis.equippedSetBonus = null;\n\t\tthis.skill = null;\n\t\tthis.calc = null;\n\t}\n\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\tmove(x: number, y: number) {\n\t\tif (this.visible) {\n\t\t\tlet newTop = y + this.mouseYOffset;\n\t\t\tlet newRight = 0;\n\t\t\tlet newLeft = 0;\n\n\t\t\tif (x < window.innerWidth - (this.container.nativeElement.offsetWidth + this.mouseXOffset)) {\n\t\t\t\tnewLeft = x + this.mouseXOffset;\n\n\t\t\t\tif (window.innerWidth < newLeft + this.container.nativeElement.scrollWidth) {\n\t\t\t\t\tnewLeft = window.innerWidth - this.container.nativeElement.scrollWidth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewRight = window.innerWidth - x + this.mouseXOffset;\n\n\t\t\t\tif (window.innerWidth < newRight + this.container.nativeElement.scrollWidth) {\n\t\t\t\t\tnewRight = window.innerWidth - this.container.nativeElement.scrollWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (window.innerHeight - 20 < newTop + this.container.nativeElement.scrollHeight) {\n\t\t\t\tnewTop = window.innerHeight - this.container.nativeElement.scrollHeight - 20;\n\t\t\t}\n\n\t\t\tthis.renderer.setStyle(this.container.nativeElement, 'left', newLeft ? newLeft + 'px' : 'auto');\n\t\t\tthis.renderer.setStyle(this.container.nativeElement, 'right', newRight ? newRight + 'px' : 'auto');\n\t\t\tthis.renderer.setStyle(this.container.nativeElement, 'top', newTop + 'px');\n\t\t}\n\t}\n}\n","<div #container class=\"container\" [hidden]=\"!visible\">\n\t<mhw-builder-item-details *ngIf=\"item\" [item]=\"item\"></mhw-builder-item-details>\n\t<mhw-builder-upgrade-details *ngIf=\"upgradeContainer\" [upgradeContainer]=\"upgradeContainer\"></mhw-builder-upgrade-details>\n\t<mhw-builder-decoration-details *ngIf=\"decoration\" [decoration]=\"decoration\"></mhw-builder-decoration-details>\n\t<mhw-builder-common-details *ngIf=\"common\" [common]=\"common\"></mhw-builder-common-details>\n\t<mhw-builder-skill-details *ngIf=\"equippedSkill || skill\" [equippedSkill]=\"equippedSkill\" [skill]=\"skill\"></mhw-builder-skill-details>\n\t<mhw-builder-set-bonus-details *ngIf=\"equippedSetBonus\" [equippedSetBonus]=\"equippedSetBonus\"></mhw-builder-set-bonus-details>\n\t<mhw-builder-calc-details *ngIf=\"calc\" [calc]=\"calc\"></mhw-builder-calc-details>\n\t<ng-container *ngIf=\"kinsect\">\n\t\t<h3>{{kinsect?.name}}</h3>\n\t\t<hr>\n\t\t<mhw-builder-kinsect-details [kinsect]=\"kinsect\"></mhw-builder-kinsect-details>\n\t</ng-container>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-upgrade-slot',\n\ttemplateUrl: './upgrade-slot.component.html',\n\tstyleUrls: ['./upgrade-slot.component.scss']\n})\nexport class UpgradeSlotComponent implements OnInit {\n\tslotName = ItemType.Upgrade;\n\n\t@Input()\n\tupgradeContainer: UpgradeContainerModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) {\n\t}\n\n\tngOnInit(): void {\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectUpgradeSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearUpgradeSlot(this);\n\t}\n\n\tsetTooltipUpgrade(event: PointerEvent, upgradeContainer: UpgradeContainerModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setUpgradeContainer(upgradeContainer);\n\t\t}\n\t}\n\n\tshowOnClickTooltipItem() {\n\t\tthis.tooltipService.setUpgradeContainer(this.upgradeContainer);\n\t}\n\n\tclearTooltipUpgrade() {\n\t\tthis.tooltipService.setUpgradeContainer(null);\n\t}\n}\n","<div class=\"container\" [class.selected]=\"selected\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/augment-icon.png'\" alt=\"augment\"></div>\n\t<div class=\"upgrades\">\n\t\t<div class=\"selected-upgrade\" (click)=\"clicked()\" (pointerenter)=\"setTooltipUpgrade($event, upgradeContainer)\" (pointerleave)=\"clearTooltipUpgrade()\">\n\t\t\t<span *ngIf=\"upgradeContainer?.upgradeDetails\">\n\t\t\t\t<span *ngFor=\"let detail of upgradeContainer.upgradeDetails; let i = index\">\n\t\t\t\t\t<span *ngFor=\"let key of detail.totalSlots | numbersArr\">\n\t\t\t\t\t\t<span [class]=\"'hex-' + (i + 1)\" style=\"font-size: 24px;\">&#x2B22;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span *ngFor=\"let key of (upgradeContainer.slots - upgradeContainer.used) | numbersArr\">\n\t\t\t\t\t<span class=\"hex-0\" style=\"font-size: 24px;\">&#x2B22;</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div *ngIf=\"upgradeContainer?.hasCustomUpgrades\" class=\"selected-custom\" (click)=\"clicked()\" (pointerenter)=\"setTooltipUpgrade($event, upgradeContainer)\" (pointerleave)=\"clearTooltipUpgrade()\">\n\t\t\t<span *ngFor=\"let customId of upgradeContainer.customUpgradeIds; let i = index\">\n\t\t\t\t<span [ngClass]=\"'hex-' + customId\" style=\"font-size: 14px;\">&#9672;</span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t<button type=\"button\" class=\"info-button\" (click)=\"showOnClickTooltipItem()\" aria-label=\"info\">\n\t\t<i class=\"fas fa-info-circle icon-xs\" style=\"display:none;\"></i>\n\t</button>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-upgrade-details',\n\ttemplateUrl: './upgrade-details.component.html',\n\tstyleUrls: ['./upgrade-details.component.scss']\n})\nexport class UpgradeDetailsComponent implements OnInit {\n\tprivate _upgradeContainer: UpgradeContainerModel;\n\n\t@Input()\n\tset upgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tthis._upgradeContainer = upgradeContainer;\n\t\tif (upgradeContainer) {\n\t\t\tthis.setupStats();\n\t\t}\n\t}\n\tget upgradeContainer(): UpgradeContainerModel {\n\t\treturn this._upgradeContainer;\n\t}\n\n\tstats: StatDetailModel[] = [];\n\n\tconstructor(private tooltipService: TooltipService) {\n\t}\n\n\tngOnInit() { }\n\n\tsetupStats() {\n\t\tthis.stats = [];\n\t\tfor (const detail of this.upgradeContainer.upgradeDetails) {\n\t\t\tif (detail.level > 0) {\n\t\t\t\tthis.stats.push({ name: detail.type, value: detail.description });\n\t\t\t}\n\t\t}\n\n\t\tlet upgradePassiveAttack = 0;\n\t\tlet upgradePassiveAffinity = 0;\n\t\tlet upgradePassiveAilmentElement = 0;\n\t\tlet upgradePassiveDefense = 0;\n\n\t\tfor (const [i, customId] of this.upgradeContainer.customUpgradeIds.entries()) {\n\t\t\tswitch (customId) {\n\t\t\t\tcase 1: // Attack\n\t\t\t\t\tupgradePassiveAttack += this.upgradeContainer.customUpgradeValues[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2: // Affinity\n\t\t\t\t\tupgradePassiveAffinity += this.upgradeContainer.customUpgradeValues[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3: // Defense\n\t\t\t\t\tupgradePassiveDefense += this.upgradeContainer.customUpgradeValues[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6: // Element / Ailment\n\t\t\t\t\tupgradePassiveAilmentElement += this.upgradeContainer.customUpgradeValues[i] * 10;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\t\tif (upgradePassiveAttack > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Attack', value: `+${upgradePassiveAttack}` });\n\t\t}\n\t\tif (upgradePassiveAffinity > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Affinity', value: `+${upgradePassiveAffinity}` });\n\t\t}\n\t\tif (upgradePassiveDefense > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Defense', value: `+${upgradePassiveDefense}` });\n\t\t}\n\t\tif (upgradePassiveAilmentElement > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Element/Ailment', value: `+${upgradePassiveAilmentElement}` });\n\t\t}\n\t}\n\n\tclearTooltipUpgrade() {\n\t\tthis.tooltipService.setUpgradeContainer(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clearTooltipUpgrade()\">\n\t<h3>Upgrades<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let stat of stats\">\n\t\t\t<span class=\"name\" [ngStyle]=\"{ color: stat.color }\">{{stat.name}}</span>\n\t\t\t<span class=\"value\" [ngStyle]=\"{ color: stat.color }\">{{stat.value}}</span>\n\t\t</li>\n\t</ul>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { UpgradeLevelModel, UpgradeModel } from '../../models/upgrade.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { WeaponType } from '../../types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-upgrades-list',\n\ttemplateUrl: './upgrades-list.component.html',\n\tstyleUrls: ['./upgrades-list.component.scss']\n})\nexport class UpgradesListComponent implements OnInit {\n\tupgrades: UpgradeModel[];\n\tcustomUpgrades: any[];\n\tweaponIndex: number;\n\n\tprivate _upgradeContainer: UpgradeContainerModel;\n\n\t@Input()\n\tset upgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tif (upgradeContainer) {\n\t\t\tthis._upgradeContainer = JSON.parse(JSON.stringify(upgradeContainer));\n\n\t\t\tif (this.upgradeContainer.upgradeDetails && this.upgradeContainer.upgradeDetails.length == 0) {\n\t\t\t\tfor (const cUpg of this.upgrades) {\n\t\t\t\t\tconst newDetail = new UpgradeLevelModel();\n\t\t\t\t\tnewDetail.type = cUpg.type;\n\t\t\t\t\tnewDetail.level = 0;\n\t\t\t\t\tnewDetail.requiredSlots = 0;\n\t\t\t\t\tnewDetail.totalSlots = 0;\n\t\t\t\t\tthis.upgradeContainer.upgradeDetails.push(newDetail);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.weaponIndex = 0;\n\t\t\tfor (const item in WeaponType) {\n\t\t\t\tif (isNaN(Number(item))) {\n\t\t\t\t\tif (item == upgradeContainer.weaponType) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.weaponIndex += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.customUpgrades = [];\n\t\t\tfor (const cUpg of this.upgrades) {\n\t\t\t\tif (cUpg.WeaponCustomUpgrades) {\n\t\t\t\t\tconst levels = cUpg.WeaponCustomUpgrades[this.weaponIndex];\n\t\t\t\t\tconst maximum = levels.reduce((acumulator, currentValue) => acumulator + currentValue, 0);\n\t\t\t\t\tif (maximum > 0) {\n\t\t\t\t\t\tthis.customUpgrades.push({\n\t\t\t\t\t\t\tid: cUpg.id,\n\t\t\t\t\t\t\ttype: cUpg.type,\n\t\t\t\t\t\t\tmaximum: maximum,\n\t\t\t\t\t\t\tvalues: cUpg.WeaponCustomUpgrades[this.weaponIndex]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.verifyUpgrades();\n\t\t}\n\t}\n\tget upgradeContainer(): UpgradeContainerModel { return this._upgradeContainer; }\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService\n\t) {\n\t\tthis.upgrades = this.dataService.getUpgrades();\n\t}\n\n\tngOnInit(): void { }\n\n\tselectUpgrade() {\n\t\tconst newUpg = JSON.parse(JSON.stringify(this.upgradeContainer));\n\t\tthis.slotService.selectUpgradeContainer(newUpg);\n\t}\n\n\tverifyUpgrades() {\n\t\tif (this.upgradeContainer.used > this.upgradeContainer.slots) {\n\t\t\tfor (let i = 0; i < this.upgradeContainer.upgradeDetails.length; i++) {\n\t\t\t\tconst detail = this.upgradeContainer.upgradeDetails[i];\n\t\t\t\tif (detail.level > 0) {\n\t\t\t\t\tthis.selectUpgLevel(i, detail.level);\n\t\t\t\t\tthis.verifyUpgrades();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tselectUpgLevel(augIndex: number, level: number) {\n\t\tconst auxUpg = this.upgradeContainer.upgradeDetails[augIndex];\n\t\tlet auxOverrideValue: number = null;\n\t\tif (this.upgrades[augIndex].WeaponLevels) {\n\t\t\tauxOverrideValue = this.upgrades[augIndex].WeaponLevels[this.weaponIndex][level - 1];\n\t\t}\n\n\t\tif (auxUpg.level == level) {\n\t\t\tauxUpg.level = level - 1;\n\t\t\tif (level > 1) {\n\t\t\t\tconst auxDown = this.upgrades[augIndex].levels[level - 2];\n\t\t\t\tthis.upgradeContainer.used -= auxUpg.totalSlots;\n\t\t\t\tthis.upgradeContainer.used += auxDown.totalSlots;\n\n\t\t\t\tif (auxOverrideValue) {\n\t\t\t\t\tthis.overrideUpgrageLevel(auxDown, augIndex, auxOverrideValue);\n\t\t\t\t}\n\t\t\t\tthis.updatePassiveStats(auxUpg, auxDown);\n\t\t\t} else {\n\t\t\t\tthis.upgradeContainer.used -= auxUpg.totalSlots;\n\t\t\t\tthis.clearPassiveStats(auxUpg);\n\t\t\t}\n\t\t} else {\n\t\t\tconst auxLevel = this.upgrades[augIndex].levels[level - 1];\n\t\t\tif (this.upgradeContainer.used - auxUpg.totalSlots + auxLevel.totalSlots <= this.upgradeContainer.slots) {\n\t\t\t\tthis.upgradeContainer.used -= auxUpg.totalSlots;\n\t\t\t\tthis.upgradeContainer.used += auxLevel.totalSlots;\n\n\t\t\t\tauxUpg.level = level;\n\n\t\t\t\tif (auxOverrideValue) {\n\t\t\t\t\tthis.overrideUpgrageLevel(auxLevel, augIndex, auxOverrideValue);\n\t\t\t\t}\n\t\t\t\tthis.updatePassiveStats(auxUpg, auxLevel);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate overrideUpgrageLevel(upgradeLevel: UpgradeLevelModel, augIndex: number, value: number) {\n\t\tswitch (augIndex) {\n\t\t\tcase 0:\n\t\t\t\tupgradeLevel.passiveAttack = value;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tupgradeLevel.passiveAffinity = value;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tupgradeLevel.passiveDefense = value;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tupgradeLevel.slotLevel = value;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tupgradeLevel.healOnHitPercent = value;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tupgradeLevel.passiveAilment = value;\n\t\t\t\tupgradeLevel.passiveElement = value;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tupgradeLevel.description = '+' + value;\n\t}\n\n\tupdatePassiveStats(aug: UpgradeLevelModel, level: UpgradeLevelModel) {\n\t\taug.requiredSlots = level.requiredSlots;\n\t\taug.totalSlots = level.totalSlots;\n\n\t\taug.passiveAttack = level.passiveAttack;\n\t\taug.passiveAffinity = level.passiveAffinity;\n\t\taug.passiveDefense = level.passiveDefense;\n\t\taug.healOnHitPercent = level.healOnHitPercent;\n\t\taug.passiveElement = level.passiveElement;\n\t\taug.passiveAilment = level.passiveAilment;\n\n\t\taug.description = level.description;\n\t}\n\n\tclearPassiveStats(aug: UpgradeLevelModel) {\n\t\taug.requiredSlots = 0;\n\t\taug.totalSlots = 0;\n\n\t\taug.passiveAttack = 0;\n\t\taug.passiveAffinity = 0;\n\t\taug.passiveDefense = 0;\n\t\taug.healOnHitPercent = 0;\n\t\taug.passiveElement = 0;\n\t\taug.passiveAilment = 0;\n\t}\n\n\tgetHexagonClass(upgIndex: number, levelIndex: number) {\n\t\tconst auxUpg = this.upgradeContainer.upgradeDetails[upgIndex];\n\t\tconst auxLevel = this.upgrades[upgIndex].levels[levelIndex];\n\n\t\tif (levelIndex + 1 <= auxUpg.level) {\n\t\t\treturn 'hex-o-' + (upgIndex + 1);\n\t\t} else {\n\t\t\tif (this.upgradeContainer.used - auxUpg.totalSlots + auxLevel.totalSlots <= this.upgradeContainer.slots) {\n\t\t\t\treturn 'hex-' + (upgIndex + 1);\n\t\t\t} else {\n\t\t\t\treturn 'hex-' + (upgIndex + 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBackgroundColor(upgIndex: number, levelIndex: number) {\n\t\tconst auxUpg = this.upgradeContainer.upgradeDetails[upgIndex];\n\t\tconst auxLevel = this.upgrades[upgIndex].levels[levelIndex];\n\n\t\tif (levelIndex + 1 <= auxUpg.level) {\n\t\t\treturn '#525252';\n\t\t} else {\n\t\t\tif (this.upgradeContainer.used - auxUpg.totalSlots + auxLevel.totalSlots <= this.upgradeContainer.slots) {\n\t\t\t\treturn '';\n\t\t\t} else {\n\t\t\t\treturn '#1E1E1E';\n\t\t\t}\n\t\t}\n\t}\n\n\tselectCustomUpg(augId: number, levelIndex: number, level: number) {\n\t\tif (level > 0) {\n\t\t\tif (this.upgradeContainer.customUpgradeIds[levelIndex] == augId) {\n\t\t\t\tthis.upgradeContainer.customUpgradeIds[levelIndex] = 0;\n\t\t\t\tthis.upgradeContainer.customUpgradeValues[levelIndex] = 0;\n\t\t\t} else {\n\t\t\t\tthis.upgradeContainer.customUpgradeIds[levelIndex] = augId;\n\t\t\t\tthis.upgradeContainer.customUpgradeValues[levelIndex] = level;\n\t\t\t}\n\t\t}\n\t}\n\n\tcountCustomUpg(augId: number) {\n\t\treturn this.upgradeContainer.customUpgradeIds.filter(customId => customId == augId).length;\n\t}\n\n\tsumCustomUpg(augId: number) {\n\t\tlet result = 0;\n\t\tconst customUpgrade = this.customUpgrades.find(x => x.id == augId);\n\t\tfor (const [i, customId] of this.upgradeContainer.customUpgradeIds.entries()) {\n\t\t\tif (customId == augId) {\n\t\t\t\tresult += customUpgrade.values[i];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\n\tgetCustomColor(augType: string) {\n\t\tif (augType == 'Attack') {\n\t\t\treturn '0';\n\t\t} else if (augType == 'Affinity') {\n\t\t\treturn '1';\n\t\t} else if (augType == 'Defense') {\n\t\t\treturn '2';\n\t\t} else if (augType == 'Element') {\n\t\t\treturn '5';\n\t\t} else {\n\t\t\treturn 'gray';\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<table class=\"upgrades-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"text-center\">{{upgradeContainer.used}}/{{upgradeContainer.slots}}</th>\n\t\t\t\t<th class=\"text-center\">Lv1</th>\n\t\t\t\t<th class=\"text-center\">Lv2</th>\n\t\t\t\t<th class=\"text-center\">Lv3</th>\n\t\t\t\t<th class=\"text-center\">Lv4</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<ng-container *ngFor=\"let aug of upgrades; let augIndex = index\">\n\t\t\t\t<tr *ngIf=\"aug.levels && aug.levels.length > 0\">\n\t\t\t\t\t<td class=\"border-left-blue\">{{aug.type}}</td>\n\t\t\t\t\t<td *ngFor=\"let level of aug.levels; let levelIndex = index\"\n\t\t\t\t\t\t(click)=\"selectUpgLevel(augIndex, levelIndex + 1)\"\n\t\t\t\t\t\t[style.background-color]=\"getBackgroundColor(augIndex, levelIndex)\"\n\t\t\t\t\t\tclass=\"text-center\" style=\"cursor:pointer;\">\n\t\t\t\t\t\t<span *ngFor=\"let key of level.requiredSlots | numbersArr\"\n\t\t\t\t\t\t\t  [class]=\"getHexagonClass(augIndex,levelIndex)\"\n\t\t\t\t\t\t\t  style=\"font-size:24px;\">\n\t\t\t\t\t\t\t&#x2B22;\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</ng-container>\n\t\t</tbody>\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"4\" class=\"text-center border-left-blue\" style=\"background-color:#323232!important;\">\n\t\t\t\t\t<span *ngFor=\"let detail of upgradeContainer.upgradeDetails; let i = index\">\n\t\t\t\t\t\t<span *ngFor=\"let key of detail.totalSlots | numbersArr\">\n\t\t\t\t\t\t\t<span [class]=\"'hex-o-' + (i + 1)\" style=\"font-size: 26px;\">&#x2B22;</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (upgradeContainer.slots - upgradeContainer.used) | numbersArr\">\n\t\t\t\t\t\t<span class=\"hex-0\" style=\"font-size: 26px;\">&#x2B22;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-center bg-52\" (click)=\"selectUpgrade()\" style=\"cursor:pointer;\">\n\t\t\t\t\t<button type=\"button\" class=\"text-white\">OK</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</table>\n\t<table class=\"upgrades-table\" *ngIf=\"upgradeContainer.hasCustomUpgrades\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"text-left upgrade-th\">Custom</th>\n\t\t\t\t<th class=\"upgrade-th\">I</th>\n\t\t\t\t<th class=\"upgrade-th\">II</th>\n\t\t\t\t<th class=\"upgrade-th\">III</th>\n\t\t\t\t<th class=\"upgrade-th\">IV</th>\n\t\t\t\t<th class=\"upgrade-th\">V</th>\n\t\t\t\t<th class=\"upgrade-th\">VI</th>\n\t\t\t\t<th class=\"upgrade-th\">VII</th>\n\t\t\t\t<th class=\"upgrade-th\">Total</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr *ngFor=\"let customUpg of customUpgrades\">\n\t\t\t\t<td>\n\t\t\t\t\t{{customUpg.type}}\n\t\t\t\t</td>\n\t\t\t\t<td *ngFor=\"let value of customUpg.values; let i = index\"\n\t\t\t\t\t(click)=\"selectCustomUpg(customUpg.id, i, value)\"\n\t\t\t\t\t[class.selected]=\"upgradeContainer.customUpgradeIds[i] == customUpg.id\"\n\t\t\t\t\tclass=\"text-center upgrade-td\">\n\t\t\t\t\t<span [hidden]=\"value==0\">{{value}}</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-center upgrade-td bg-52\">\n\t\t\t\t\t+{{sumCustomUpg(customUpg.id)}}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"8\" class=\"text-center border-left-blue\" style=\"background-color:#323232!important;\">\n\t\t\t\t\t<span *ngFor=\"let customId of upgradeContainer.customUpgradeIds; let i = index\">\n\t\t\t\t\t\t<span [ngClass]=\"'hex-' + customId\" style=\"font-size: 22px;\">&#9672;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-center bg-52\" (click)=\"selectUpgrade()\" style=\"cursor:pointer;\">\n\t\t\t\t\t<button type=\"button\" class=\"text-white\">OK</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</table>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { WeaponType } from '../../types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-weapon-list',\n\ttemplateUrl: './weapon-list.component.html',\n\tstyleUrls: ['./weapon-list.component.scss']\n})\nexport class WeaponListComponent implements OnInit {\n\tpublic itemTypes = ItemType;\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\tprivate _itemType: ItemType;\n\tprivate _onlyIceborne: boolean;\n\tprivate searchLength = 0;\n\n\t@Input()\n\tset itemType(itemType: ItemType) {\n\t\tthis._itemType = itemType;\n\t\tthis.loadItems();\n\t}\n\tget itemType(): ItemType { return this._itemType; }\n\n\t@Input()\n\tset onlyIceborne(onlyIceborne: boolean) {\n\t\tthis._onlyIceborne = onlyIceborne;\n\t\tthis.applyIceborneFilter();\n\t\tthis.search({ key: 'Filter' }, this.searchBox.nativeElement.value);\n\t\tthis.weaponTypeSort = '';\n\t}\n\tget onlyIceborne(): boolean { return this._onlyIceborne; }\n\n\t@Output() itemSelected = new EventEmitter<ItemModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titems: ItemModel[];\n\titemsWorld: ItemModel[];\n\titemsIceborne: ItemModel[];\n\tfilteredItems: ItemModel[];\n\tvirtualItems: ItemModel[];\n\tweaponTypeFilter?: WeaponType;\n\tweaponTypeSort: String;\n\n\tshowFilterContainer = true;\n\tshowSortContainer = true;\n\n\tchildHeight: number;\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService,\n\t) {\n\t\tthis.items = this.dataService.getWeapons();\n\t}\n\n\tngOnInit() {\n\t\tthis.slotService.weaponSlotSelected$.subscribe(slot => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.searchBox.nativeElement.focus();\n\t\t\t\tthis.searchBox.nativeElement.select();\n\t\t\t}, 250);\n\t\t});\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tonItemListUpdate(items: ItemModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tloadItems() {\n\t\tthis.itemsWorld = this.items.filter(item => item.id < 1000);\n\t\tthis.itemsIceborne = this.items.filter(item => item.id >= 1000);\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(event, query: string) {\n\t\tif (query) {\n\t\t\tif (query.length < this.searchLength || (event && (event.key === 'FilterHard' || event.key === 'Backspace' || event.key === 'Delete'))) {\n\t\t\t\tthis.applyIceborneFilter();\n\t\t\t}\n\n\t\t\tif (query.length > 1) {\n\t\t\t\tquery = query.toLowerCase().trim();\n\t\t\t\tconst queryParts = query.split(' ');\n\n\t\t\t\tif (this.filteredItems) {\n\t\t\t\t\tfor (const item of this.filteredItems) {\n\t\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\n\t\t\t\t\t\tconst match = _.some(queryParts, queryPart => {\n\t\t\t\t\t\t\tconst nameMatch = itemName.includes(queryPart);\n\t\t\t\t\t\t\tconst skillMatch = _.some(item.skills, skill => skill.id.toLowerCase().includes(queryPart));\n\t\t\t\t\t\t\tconst tagMatch = _.some(item.tags, tag => tag.toLowerCase().includes(queryPart));\n\t\t\t\t\t\t\tconst monstersMatch = _.some(item.monsters, tag => tag.toLowerCase().includes(queryPart));\n\n\t\t\t\t\t\t\treturn nameMatch || skillMatch || tagMatch || monstersMatch;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tthis.filteredItems = _.reject(this.filteredItems, i => i.name === item.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.applyWeaponFilter();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.applyIceborneFilter();\n\t\tthis.applyWeaponFilter();\n\t\tthis.weaponTypeSort = '';\n\t}\n\n\tapplyWeaponFilter() {\n\t\tif (this.filteredItems && this.weaponTypeFilter && this.itemType == ItemType.Weapon) {\n\t\t\tthis.filteredItems = _.reject(this.filteredItems, item => item.weaponType != this.weaponTypeFilter);\n\t\t}\n\t}\n\n\tapplyIceborneFilter() {\n\t\tif (this.onlyIceborne) {\n\t\t\tthis.filteredItems = this.itemsIceborne;\n\t\t} else {\n\t\t\tthis.filteredItems = this.itemsIceborne.concat(this.itemsWorld);\n\t\t}\n\t}\n\n\tweaponFilterClicked(weaponType: WeaponType) {\n\t\tif (this.weaponTypeFilter) {\n\t\t\tif (this.weaponTypeFilter == weaponType) {\n\t\t\t\tthis.weaponTypeFilter = null;\n\t\t\t\tthis.search({ key: 'FilterHard' }, this.searchBox.nativeElement.value);\n\t\t\t} else {\n\t\t\t\tthis.weaponTypeFilter = weaponType;\n\t\t\t\tthis.search({ key: 'FilterHard' }, this.searchBox.nativeElement.value);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.weaponTypeFilter = weaponType;\n\t\t\tthis.search({ key: 'FilterSoft' }, this.searchBox.nativeElement.value);\n\t\t}\n\n\t\tthis.weaponTypeSort = '';\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tif (item.weaponType == WeaponType.LightBowgun || item.weaponType == WeaponType.HeavyBowgun) {\n\t\t\titem.ammoCapacities = this.dataService.getAmmoCapacities(item.id);\n\t\t} else if (item.weaponType == WeaponType.HuntingHorn && item.otherData) {\n\t\t\titem.melodies = this.dataService.getMelodies(item.otherData.map(other => other.value).join(';'));\n\t\t}\n\n\t\tconst newItem = Object.assign({}, item);\n\t\tthis.slotService.selectItem(newItem);\n\t}\n\n\tgetSkillCount(item: ItemModel, skill: SkillModel): string {\n\t\tconst itemSkill = _.find(item.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\tgetMonsterIcon(monster: string, item: ItemModel): string {\n\t\tif (monster != 'element') {\n\t\t\treturn `assets/images/monsters/${monster}.png`;\n\t\t} else {\n\t\t\tif (item.ailment) {\n\t\t\t\treturn `assets/images/${item.ailment.toLowerCase()}-icon.png`;\n\t\t\t} else if (item.element) {\n\t\t\t\treturn `assets/images/${item.element.toLowerCase()}-icon.png`;\n\t\t\t} else {\n\t\t\t\treturn `assets/images/monsters/question.png`;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElementIcon(item: ItemModel): string {\n\t\tif (item.element) {\n\t\t\treturn `assets/images/${item.element.toLowerCase()}${item.elementHidden ? '-gray' : ''}-icon.png`;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetAilmentIcon(item: ItemModel): string {\n\t\tif (item.ailment) {\n\t\t\treturn `assets/images/${item.ailment.toLowerCase()}${item.ailmentHidden ? '-gray' : ''}-icon.png`;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tweaponSortByAttack() {\n\t\tthis.weaponTypeSort = 'ATK';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.baseAttack > item2.baseAttack) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.baseAttack < item2.baseAttack) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByAffinity() {\n\t\tthis.weaponTypeSort = 'AFN';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.baseAffinityPercent > item2.baseAffinityPercent) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.baseAffinityPercent < item2.baseAffinityPercent) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByAilment() {\n\t\tthis.weaponTypeSort = 'AIL';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.ailment && !item2.ailment || item1.ailmentBaseAttack > item2.ailmentBaseAttack) {\n\t\t\t\treturn -1;\n\t\t\t} else if (!item1.ailment && item2.ailment || item1.ailmentBaseAttack < item2.ailmentBaseAttack) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByElement() {\n\t\tthis.weaponTypeSort = 'ELE';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.element && !item2.element || item1.elementBaseAttack > item2.elementBaseAttack) {\n\t\t\t\treturn -1;\n\t\t\t} else if (!item1.element && item2.element || item1.elementBaseAttack < item2.elementBaseAttack) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByDefense() {\n\t\tthis.weaponTypeSort = 'DEF';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.defense > item2.defense) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.defense < item2.defense) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortBySharpness() {\n\t\tthis.weaponTypeSort = 'SHARP';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet sharp1 = -1;\n\t\t\tlet sharp2 = -1;\n\t\t\tif (!item1.sharpnessDataNeeded && item1.sharpnessLevelsBar.length > 0) {\n\t\t\t\tif (item1.sharpnessLevelsBar[item1.sharpnessLevelsBar.length - 1] > 0) {\n\t\t\t\t\tsharp1 = item1.sharpnessLevelsBar.length * 100 + item1.sharpnessLevelsBar[item1.sharpnessLevelsBar.length - 1];\n\t\t\t\t} else {\n\t\t\t\t\tsharp1 = (item1.sharpnessLevelsBar.length - 1) * 100 + item1.sharpnessLevelsBar[item1.sharpnessLevelsBar.length - 2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!item2.sharpnessDataNeeded && item2.sharpnessLevelsBar.length > 0) {\n\t\t\t\tif (item2.sharpnessLevelsBar[item2.sharpnessLevelsBar.length - 1] > 0) {\n\t\t\t\t\tsharp2 = item2.sharpnessLevelsBar.length * 100 + item2.sharpnessLevelsBar[item2.sharpnessLevelsBar.length - 1];\n\t\t\t\t} else {\n\t\t\t\t\tsharp2 = (item2.sharpnessLevelsBar.length - 1) * 100 + item2.sharpnessLevelsBar[item2.sharpnessLevelsBar.length - 2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (sharp1 > sharp2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (sharp1 < sharp2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortBySlots() {\n\t\tthis.weaponTypeSort = 'SLOT';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet slotValue1 = 0;\n\t\t\tlet slotValue2 = 0;\n\n\t\t\tif (item1.slots.length > 0) {\n\t\t\t\tslotValue1 += item1.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item1.slots.length > 1) {\n\t\t\t\tslotValue1 += item1.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item1.slots.length > 2) {\n\t\t\t\tslotValue1 += item1.slots[2].level;\n\t\t\t}\n\t\t\tif (item2.slots.length > 0) {\n\t\t\t\tslotValue2 += item2.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item2.slots.length > 1) {\n\t\t\t\tslotValue2 += item2.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item2.slots.length > 2) {\n\t\t\t\tslotValue2 += item2.slots[2].level;\n\t\t\t}\n\n\t\t\tif (slotValue1 > slotValue2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (slotValue1 < slotValue2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search($event, searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\t\t<button type=\"button\" class=\"iceborne-button\" (click)=\"onlyIceborne = !onlyIceborne\" title=\"Only Iceborne\">\n\t\t\t<i class=\"fas fa-toggle-on\" [hidden]=\"!onlyIceborne\"></i>\n\t\t\t<i class=\"fas fa-toggle-off\" [hidden]=\"onlyIceborne\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"showFilterContainer=!showFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"filter-container\" *ngIf=\"itemType == 'Weapon' && showFilterContainer\">\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'GreatSword'\"\n\t\t\t(click)=\"weaponFilterClicked('GreatSword')\" title=\"Great Sword\">\n\t\t\t<img src=\"assets/images/weapons/greatsword-icon.png\" alt=\"greatsword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwordAndShield'\"\n\t\t\t(click)=\"weaponFilterClicked('SwordAndShield')\" title=\"Sword and Shield\">\n\t\t\t<img src=\"assets/images/weapons/swordandshield-icon.png\" alt=\"Sword and Shield\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'DualBlades'\"\n\t\t\t(click)=\"weaponFilterClicked('DualBlades')\" title=\"Dual Blades\">\n\t\t\t<img src=\"assets/images/weapons/dualblades-icon.png\" alt=\"Dual Blades\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LongSword'\"\n\t\t\t(click)=\"weaponFilterClicked('LongSword')\" title=\"Long Sword\">\n\t\t\t<img src=\"assets/images/weapons/longsword-icon.png\" alt=\"Long Sword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Hammer'\"\n\t\t\t(click)=\"weaponFilterClicked('Hammer')\" title=\"Hammer\">\n\t\t\t<img src=\"assets/images/weapons/hammer-icon.png\" alt=\"Hammer\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HuntingHorn'\"\n\t\t\t(click)=\"weaponFilterClicked('HuntingHorn')\" title=\"Hunting Horn\">\n\t\t\t<img src=\"assets/images/weapons/huntinghorn-icon.png\" alt=\"Hunting Horn\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Lance'\"\n\t\t\t(click)=\"weaponFilterClicked('Lance')\" title=\"Lance\">\n\t\t\t<img src=\"assets/images/weapons/lance-icon.png\" alt=\"Lance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Gunlance'\"\n\t\t\t(click)=\"weaponFilterClicked('Gunlance')\" title=\"Gunlance\">\n\t\t\t<img src=\"assets/images/weapons/gunlance-icon.png\" alt=\"Gunlance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwitchAxe'\"\n\t\t\t(click)=\"weaponFilterClicked('SwitchAxe')\" title=\"Switch Axe\">\n\t\t\t<img src=\"assets/images/weapons/switchaxe-icon.png\" alt=\"Switch Axe\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'ChargeBlade'\"\n\t\t\t(click)=\"weaponFilterClicked('ChargeBlade')\" title=\"Charge Blade\">\n\t\t\t<img src=\"assets/images/weapons/chargeblade-icon.png\" alt=\"Charge Blade\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'InsectGlaive'\"\n\t\t\t(click)=\"weaponFilterClicked('InsectGlaive')\" title=\"Insect Glaive\">\n\t\t\t<img src=\"assets/images/weapons/insectglaive-icon.png\" alt=\"Insect Glaive\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Bow'\"\n\t\t\t(click)=\"weaponFilterClicked('Bow')\" title=\"Bow\">\n\t\t\t<img src=\"assets/images/weapons/bow-icon.png\" alt=\"Bow\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LightBowgun'\"\n\t\t\t(click)=\"weaponFilterClicked('LightBowgun')\" title=\"Light Bowgun\">\n\t\t\t<img src=\"assets/images/weapons/lightbowgun-icon.png\" alt=\"LBG\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HeavyBowgun'\"\n\t\t\t(click)=\"weaponFilterClicked('HeavyBowgun')\" title=\"Heavy Bowgun\">\n\t\t\t<img src=\"assets/images/weapons/heavybowgun-icon.png\" alt=\"HBG\">\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'ATK'\"\n\t\t\t(click)=\"weaponSortByAttack()\">\n\t\t\t<!--<img src=\"assets/images/attack-icon.png\" />-->\n\t\t\t<span>ATK</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'AFN'\"\n\t\t\t(click)=\"weaponSortByAffinity()\">\n\t\t\t<!--<img src=\"assets/images/affinity-icon.png\" />-->\n\t\t\t<span>AFN</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'AIL'\"\n\t\t\t(click)=\"weaponSortByAilment()\">\n\t\t\t<span>AIL</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'ELE'\"\n\t\t\t(click)=\"weaponSortByElement()\">\n\t\t\t<span>ELE</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'DEF'\"\n\t\t\t(click)=\"weaponSortByDefense()\">\n\t\t\t<span>DEF</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'SHARP'\"\n\t\t\t(click)=\"weaponSortBySharpness()\">\n\t\t\t<span>SHARP</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'SLOT'\"\n\t\t\t(click)=\"weaponSortBySlots()\">\n\t\t\t<span>SLOT</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"items\" [items]=\"filteredItems\"\n\t\t(vsUpdate)=\"onItemListUpdate($event)\" [enableUnequalChildrenSizes]=\"true\" [bufferAmount]=\"10\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"'vColor-'+ item.vColor\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"upgrade\" *ngIf=\"item.upgradeType==1\">\n\t\t\t\t\t<img src=\"assets/images/custom-upgrade.png\" alt=\"upgrade\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"slots\" *ngIf=\"item.slots.length > 0\">\n\t\t\t\t\t<div *ngIf=\"item.slots[0]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[1]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[2]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"type\">\n\t\t\t\t\t<span *ngIf=\"item.equipmentCategory == equipmentCategoryType.Armor\">{{item.itemType}}</span>\n\t\t\t\t\t<img *ngIf=\"item.equipmentCategory == equipmentCategoryType.Weapon\"\n\t\t\t\t\t\t[src]=\"'assets/images/weapons/' + dataService.getWeaponTypeIcon(item.weaponType) + '-icon.png'\"\n\t\t\t\t\t\talt=\"weapon\" />\n\t\t\t\t\t<span class=\"typeName\"\n\t\t\t\t\t\t*ngIf=\"item.equipmentCategory == equipmentCategoryType.Weapon\">{{dataService.getWeaponTypeName(item.weaponType)}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"item.rarity\" [ngClass]=\"'rarity-'+item?.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{item.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/attack-icon.png\" alt=\"attack\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.baseAttack}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/affinity-icon.png\" alt=\"affinity\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [class.red]=\"item.baseAffinityPercent < 0\">{{item.baseAffinityPercent}}%\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"monsters-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/defense-icon.png\" alt=\"defense\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.defense}}</div>\n\t\t\t\t\t<div class=\"monster-icon\" *ngFor=\"let monster of item.monsters\">\n\t\t\t\t\t\t<img [src]=\"getMonsterIcon(monster, item)\" [alt]=\"monster\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{{monster}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.ailment\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"getAilmentIcon(item)\" alt=\"ailment\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [style.color]=\"item.ailmentHidden ? 'gray' : 'white'\">\n\t\t\t\t\t\t{{item.ailmentBaseAttack}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.element\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"getElementIcon(item)\" alt=\"element\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [style.color]=\"item.elementHidden ? 'gray' : 'white'\">\n\t\t\t\t\t\t{{item.elementBaseAttack}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.sharpnessLevelsBar.length > 1 && !item.sharpnessDataNeeded\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/sharpness3-icon.png\" alt=\"sharpness\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [ngClass]=\"['sharp-' + item.sharpnessMaxColorIndex]\">\n\t\t\t\t\t\t{{item.sharpnessMaxLevel * 10}} <i class=\"fas fa-circle fa-sm\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.ammoCapacities?.deviation\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/deviation-icon.png\" alt=\"deviation\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.ammoCapacities.deviation[0]}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.ammoCapacities?.specialAmmo\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/special-ammo-icon.png\" alt=\"special ammo\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.ammoCapacities.specialAmmo}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.weaponType=='Gunlance'\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/special-ammo-icon.png\" alt=\"special ammo\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.otherData[0].value}}-{{item.otherData[0].data}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.weaponType=='InsectGlaive'\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/dust-effect-icon.png'\" alt=\"boost\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">\n\t\t\t\t\t\t{{item.otherData[0].value}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.weaponType=='SwitchAxe' || item.weaponType=='ChargeBlade'\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + item.otherData[0].value + '.png'\" alt=\"phial\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">\n\t\t\t\t\t\t{{item.otherData[0].value}}\n\t\t\t\t\t\t<span *ngIf=\"item.otherData[0] && item.otherData[0].data\">- {{item.otherData[0].data}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"coats-container\" *ngIf=\"item.weaponType=='Bow'\">\n\t\t\t\t\t<div class=\"icon-container\" *ngFor=\"let phial of item.otherData\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + phial.value + '.png'\" alt=\"coat\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.elderseal\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img *ngIf=\"item.elderseal\" src=\"assets/images/elderseal.png\" alt=\"elderseal\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.elderseal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>","import { NgModule } from '@angular/core';\nimport { AmmoCapacitiesLoader } from './loaders/ammo-capacities.loader';\nimport { ArmorLoader } from './loaders/armor.loader';\nimport { AugmentationsLoader } from './loaders/augmentations.loader';\nimport { AwakeningsLoader } from './loaders/awakenings.loader';\nimport { CharmsLoader } from './loaders/charms.loader';\nimport { DecorationsLoader } from './loaders/decorations.loader';\nimport { KinsectsLoader } from './loaders/kinsects.loader';\nimport { MelodiesLoader } from './loaders/melodies.loader';\nimport { MelodyEffectLoader } from './loaders/melodyEffect.loader';\nimport { ModificationsLoader } from './loaders/modifications.loader';\nimport { SetBonusesLoader } from './loaders/set-bonuses.loader';\nimport { SharpnessModifiersLoader } from './loaders/sharpness-modifiers.loader';\nimport { SkillsLoader } from './loaders/skills.loader';\nimport { ToolsLoader } from './loaders/tools.loader';\nimport { UpgradesLoader } from './loaders/upgrades.loader';\nimport { WeaponModifiersLoader } from './loaders/weapon-modifiers.loader';\nimport { WeaponsLoader } from './loaders/weapons.loader';\n\n@NgModule({\n\tproviders: [\n\t\tWeaponsLoader,\n\t\tArmorLoader,\n\t\tCharmsLoader,\n\t\tDecorationsLoader,\n\t\tAugmentationsLoader,\n\t\tModificationsLoader,\n\t\tKinsectsLoader,\n\t\tSkillsLoader,\n\t\tSetBonusesLoader,\n\t\tSharpnessModifiersLoader,\n\t\tWeaponModifiersLoader,\n\t\tAmmoCapacitiesLoader,\n\t\tMelodiesLoader,\n\t\tMelodyEffectLoader,\n\t\tToolsLoader,\n\t\tUpgradesLoader,\n\t\tAwakeningsLoader\n\t],\n})\nexport class DataModule { }\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { AmmoCapacitiesModel } from '../../models/ammo-capacities.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class AmmoCapacitiesLoader extends DataLoader<AmmoCapacitiesModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { ValuesParser } from '../parsers/values.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class ArmorLoader extends DataLoader<ItemModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ItemModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'defense',\n\t\t\t\tparser: new ValuesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t}\n\t\t\t,\n\t\t\t{\n\t\t\t\tcolumnName: 'tags',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t]);\n\n\t\t_.each(items, item => {\n\t\t\titem.equipmentCategory = EquipmentCategoryType.Armor;\n\t\t});\n\t\treturn items;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class AugmentationsLoader extends DataLoader<AugmentationModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { AwakeningModel } from '../../models/awakening.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class AwakeningsLoader extends DataLoader<AwakeningModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class CharmsLoader extends DataLoader<ItemModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ItemModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'tags',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t]);\n\n\t\t_.each(items, charm => {\n\t\t\tcharm.itemType = ItemType.Charm;\n\t\t\tcharm.equipmentCategory = EquipmentCategoryType.Charm;\n\t\t});\n\n\t\treturn items;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as ld from 'lodash';\nimport { forkJoin, Observable, Observer, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { ColumnParser } from '../models/column-parser.model';\n\n@Injectable()\nexport abstract class DataLoader<T> {\n\treadonly defaultLocale = 'en-US';\n\treadonly delimeter = '\\t';\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) { }\n\n\tprotected parse(_: string): T[] {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tpublic load(resourceName: string, withLocale: boolean = true): Observable<T[]> {\n\t\tlet result: Observable<T[]>;\n\n\t\tconst ext = resourceName.split('.').pop();\n\t\tif (ext.toLowerCase() === 'json') {\n\t\t\tresult = new Observable((observer: Observer<T[]>) => {\n\t\t\t\tforkJoin(\n\t\t\t\t\tthis.getResources(resourceName, true, withLocale)\n\t\t\t\t).subscribe(results => {\n\t\t\t\t\tconst items = ld.map(results[0], r => {\n\t\t\t\t\t\tconst txVal = ld.find(results[1], { id: r.id });\n\t\t\t\t\t\tconst newVal = ld.assignIn(r, txVal);\n\t\t\t\t\t\treturn newVal;\n\t\t\t\t\t});\n\t\t\t\t\tobserver.next(items);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tresult = new Observable((observer: Observer<T[]>) => {\n\t\t\t\tforkJoin(\n\t\t\t\t\tthis.getResources(resourceName, false, withLocale)\n\t\t\t\t).subscribe(results => {\n\t\t\t\t\tconst data = this.parse(results[0]);\n\t\t\t\t\tconst localeData = results[1] ? this.parse(results[1]) : null;\n\t\t\t\t\tconst items = ld.map(data, r => ld.assignIn(r, ld.find(localeData, { id: (r as any).id })));\n\t\t\t\t\tobserver.next(items);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate getResources(resourceName: string, json: boolean, withLocale: boolean): Observable<any>[] {\n\t\tconst resources: Observable<any>[] = [];\n\t\tconst locale = this.getLocale();\n\n\t\tif (json) {\n\t\t\tresources.push(this.loadJsonResource(resourceName, false));\n\t\t\tif (withLocale && locale !== this.defaultLocale) {\n\t\t\t\tresources.push(this.loadJsonResource(resourceName, true));\n\t\t\t}\n\t\t} else {\n\t\t\tresources.push(this.loadTextResource(resourceName, false));\n\t\t\tif (withLocale && locale !== this.defaultLocale) {\n\t\t\t\tresources.push(this.loadTextResource(resourceName, true));\n\t\t\t}\n\t\t}\n\n\t\treturn resources;\n\t}\n\n\tprivate loadJsonResource(resourceName: string, fromLocale: boolean): Observable<T[]> {\n\t\treturn this.http.get<T[]>(this.getPath(resourceName, fromLocale)).pipe(\n\t\t\tcatchError(() => {\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate loadTextResource(resourceName: string, fromLocale: boolean): Observable<string> {\n\t\treturn this.http.get(this.getPath(resourceName, fromLocale), { responseType: 'text' }).pipe(\n\t\t\tcatchError(() => {\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate getPath(resourceName: string, fromLocale: boolean): string {\n\t\tlet path: string;\n\t\tconst locale = this.getLocale();\n\t\tif (fromLocale) {\n\t\t\tpath = `./assets/${locale}/${resourceName}`;\n\t\t} else {\n\t\t\tpath = `./assets/${resourceName}`;\n\t\t}\n\t\treturn path;\n\t}\n\n\tprivate getLocale(): string {\n\t\tlet locale = localStorage.getItem('locale');\n\t\tif (!locale) {\n\t\t\tlocale = navigator.languages[0];\n\t\t\tlocalStorage.setItem('locale', locale);\n\t\t}\n\n\t\treturn locale;\n\t}\n\n\tprotected parseTextContent(content: string, columnParsers: ColumnParser[] = []): T[] {\n\t\tconst result: Array<T> = [];\n\t\tconst rows = content.split('\\n');\n\t\tconst headerColumns = rows[0].split(this.delimeter);\n\n\t\tfor (let i = 1; i < rows.length; i++) {\n\t\t\tconst row = rows[i];\n\t\t\tconst rowValues = row.split(this.delimeter);\n\t\t\tconst item: any = {};\n\n\t\t\tfor (let j = 0; j < rowValues.length; j++) {\n\t\t\t\tconst columnHeader = headerColumns[j];\n\t\t\t\tconst rowValue = rowValues[j];\n\n\t\t\t\tconst columnParser = ld.find(columnParsers, p => p.columnName == columnHeader);\n\t\t\t\tif (columnParser) {\n\t\t\t\t\titem[columnHeader] = columnParser.parser.parse(rowValue);\n\t\t\t\t} else if (rowValue) {\n\t\t\t\t\tif (!Number.isNaN(Number(rowValue)) && rowValue != '') {\n\t\t\t\t\t\titem[columnHeader] = Number(rowValue);\n\t\t\t\t\t} else if (rowValue.toLowerCase() === 'true' || rowValue.toLowerCase() === 'false') {\n\t\t\t\t\t\titem[columnHeader] = rowValue === 'true';\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem[columnHeader] = rowValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(item);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { DataLoader } from './data.loader';\nimport { DecorationModel } from 'src/app/models/decoration.model';\n\n@Injectable()\nexport class DecorationsLoader extends DataLoader<DecorationModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): DecorationModel[] {\n\t\treturn this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class KinsectsLoader extends DataLoader<KinsectModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): KinsectModel[] {\n\t\treturn this.parseTextContent(content);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { MelodiesModel } from '../../models/melodies.model';\nimport { MelodiesEffectParser } from '../parsers/melodies-effect.parser';\nimport { MelodiesParser } from '../parsers/melodies.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class MelodiesLoader extends DataLoader<MelodiesModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): MelodiesModel[] {\n\t\tconst melodies = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'notes',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'melodies',\n\t\t\t\tparser: new MelodiesParser()\n\t\t\t}\n\t\t\t,\n\t\t\t{\n\t\t\t\tcolumnName: 'melodiesEffect',\n\t\t\t\tparser: new MelodiesEffectParser()\n\t\t\t}\n\t\t]);\n\n\t\treturn melodies;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { MelodyEffectModel } from '../../models/melody-effect.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class MelodyEffectLoader extends DataLoader<MelodyEffectModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): MelodyEffectModel[] {\n\t\tconst melodyEffect = this.parseTextContent(content, []);\n\n\t\treturn melodyEffect;\n\t}\n}\n\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ModificationModel } from '../../models/modification.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class ModificationsLoader extends DataLoader<ModificationModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { SetBonusModel } from '../../models/set-bonus.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class SetBonusesLoader extends DataLoader<SetBonusModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { SharpnessModifierModel } from '../../models/sharpness-modifier.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class SharpnessModifiersLoader extends DataLoader<SharpnessModifierModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class SkillsLoader extends DataLoader<SkillModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ToolModel } from '../../models/tool.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class ToolsLoader extends DataLoader<ToolModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ToolModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t}\n\t\t]);\n\t\t_.each(items, tool => {\n\t\t\ttool.equipmentCategory = EquipmentCategoryType.Tool;\n\t\t});\n\t\treturn items;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { UpgradeModel } from '../../models/upgrade.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class UpgradesLoader extends DataLoader<UpgradeModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { WeaponModifierModel } from '../../models/weapon-modifier.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class WeaponModifiersLoader extends DataLoader<WeaponModifierModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { OtherDataParser } from '../parsers/other-data.parser';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { ValuesParser } from '../parsers/values.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class WeaponsLoader extends DataLoader<ItemModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ItemModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'defense',\n\t\t\t\tparser: new ValuesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'sharpnessLevelsBar',\n\t\t\t\tparser: new ValuesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'monsters',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'tags',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'otherData',\n\t\t\t\tparser: new OtherDataParser()\n\t\t\t}\n\t\t]);\n\n\t\titems.forEach(item => {\n\t\t\titem.equipmentCategory = EquipmentCategoryType.Weapon;\n\t\t\titem.itemType = ItemType.Weapon;\n\t\t\tif (item.sharpnessLevelsBar && !isNaN(item.sharpnessLevelsBar[0])) {\n\t\t\t\tconst total = item.sharpnessLevelsBar.reduce((a, b) => a + b, 0);\n\t\t\t\tconst over = total - 40;\n\t\t\t\tfor (let i = item.sharpnessLevelsBar.length - 1; i >= 0; i--) {\n\t\t\t\t\tconst level = item.sharpnessLevelsBar[i];\n\t\t\t\t\tif (level > 0) {\n\t\t\t\t\t\titem.sharpnessMaxLevel = level - over;\n\t\t\t\t\t\titem.sharpnessMaxColorIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn items;\n\t}\n}\n","export abstract class DataParser<T> {\n\tabstract parse(data: string): T[];\n}\n","import { MelodyEffectModel } from '../../models/melody-effect.model';\nimport { DataParser } from './data-parser';\n\nexport class MelodiesEffectParser extends DataParser<MelodyEffectModel> {\n\tparse(data: string): MelodyEffectModel[] {\n\t\tconst effects = data.split(';');\n\t\tconst melodiesEffect: MelodyEffectModel[] = [];\n\t\tlet count = 0;\n\t\tfor (const effect of effects) {\n\t\t\tconst melodies = effect.split('+');\n\n\t\t\tfor (const melody of melodies) {\n\t\t\t\tconst values = melody.split('-');\n\t\t\t\tmelodiesEffect.push({\n\t\t\t\t\tid: values[0],\n\t\t\t\t\tlevel: values.length == 2 ? values[1] : null,\n\t\t\t\t\tindex: count\n\t\t\t\t});\n\t\t\t}\n\t\t\tcount += 1;\n\t\t}\n\t\treturn melodiesEffect;\n\t}\n}\n","import { DataParser } from './data-parser';\n\nexport class MelodiesParser extends DataParser<number[]> {\n\tparse(data: string): number[][] {\n\t\tconst result = [];\n\t\tconst melodies = data.split('|');\n\t\tfor (let i = 0; i < melodies.length; i++) {\n\t\t\tconst notes = melodies[i].split(';');\n\t\t\tconst aux = [];\n\t\t\tfor (let j = 0; j < notes.length; j++) {\n\t\t\t\taux.push(parseInt(notes[j], 10));\n\t\t\t}\n\t\t\tresult.push(aux);\n\t\t}\n\t\treturn result;\n\t}\n}\n","import { OtherDataModel } from '../../models/other-data.model';\nimport { DataParser } from './data-parser';\n\nexport class OtherDataParser extends DataParser<OtherDataModel> {\n\tparse(data: string): OtherDataModel[] {\n\t\tconst values = data.split(';');\n\t\tconst otherLevels: OtherDataModel[] = [];\n\t\tfor (const value of values) {\n\t\t\tconst parts = value.split('-');\n\t\t\totherLevels.push({\n\t\t\t\tvalue: parts[0],\n\t\t\t\tdata: parts.length == 2 ? parseInt(parts[1], 10) : null\n\t\t\t});\n\t\t}\n\t\treturn otherLevels;\n\t}\n}\n","import { SkillReferenceModel } from '../../models/skill-reference.model';\nimport { DataParser } from './data-parser';\n\nexport class SkillReferencesParser extends DataParser<SkillReferenceModel> {\n\tparse(data: string): SkillReferenceModel[] {\n\t\tconst values = data.split(';');\n\t\tconst skillRefs: SkillReferenceModel[] = [];\n\t\tif (data) {\n\t\t\tfor (const skill of values) {\n\t\t\t\tconst parts = skill.split('-');\n\t\t\t\tskillRefs.push({\n\t\t\t\t\tid: parts[0],\n\t\t\t\t\tlevel: parts.length > 1 ? Number(parts[1]) : null\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn skillRefs;\n\t}\n}\n","import { SlotModel } from '../../models/slot.model';\nimport { DataParser } from './data-parser';\nimport * as _ from 'lodash';\n\nexport class SlotsParser extends DataParser<SlotModel> {\n\tparse(data: string): SlotModel[] {\n\t\tconst values = data.split(';');\n\t\tconst slots: SlotModel[] = [];\n\t\tfor (const item of _.filter(values, v => v)) {\n\t\t\tslots.push({\n\t\t\t\tlevel: Number(item),\n\t\t\t});\n\t\t}\n\t\treturn slots;\n\t}\n}\n","import { DataParser } from './data-parser';\n\nexport class TagsParser extends DataParser<string> {\n\tparse(data: string): string[] {\n\t\treturn data.split(';');\n\t}\n}\n","import { DataParser } from './data-parser';\n\nexport class ValuesParser extends DataParser<number> {\n\tparse(data: string): number[] {\n\t\tconst result = [];\n\t\tconst aux = data.split(';');\n\t\tfor (let i = 0; i < aux.length; i++) {\n\t\t\tresult.push(parseInt(aux[i], 10));\n\t\t}\n\t\treturn result;\n\t}\n}\n","import { AmmoType } from '../types/ammo.type';\nimport { DeviationType } from '../types/deviation.type';\nimport { SpecialAmmoType } from '../types/special-ammo.type';\n\nexport class AmmoCapacitiesModel {\n\tid: number;\n\tdeviation: DeviationType[];\n\tspecialAmmo: SpecialAmmoType;\n\tammo: AmmoTypeModel[];\n\tmissingData: boolean;\n\tmissingMods: boolean;\n}\n\nexport class AmmoTypeModel {\n\tname: AmmoType;\n\tlevels: AmmoLevelModel[];\n}\n\nexport class AmmoLevelModel {\n\tcapacity: number;\n\ttype: number;\n\trecoil: number[];\n\treload: number[];\n}\n","import { AmmoCapacitiesModel } from './ammo-capacities.model';\nimport { AugmentationModel } from './augmentation.model';\nimport { AwakeningModel } from './awakening.model';\nimport { DecorationModel } from './decoration.model';\nimport { ItemModel } from './item.model';\nimport { KinsectModel } from './kinsect.model';\nimport { MelodiesModel } from './melodies.model';\nimport { MelodyEffectModel } from './melody-effect.model';\nimport { ModificationModel } from './modification.model';\nimport { SetBonusModel } from './set-bonus.model';\nimport { SharpnessModifierModel } from './sharpness-modifier.model';\nimport { SkillModel } from './skill.model';\nimport { ToolModel } from './tool.model';\nimport { UpgradeModel } from './upgrade.model';\nimport { WeaponModifierModel } from './weapon-modifier.model';\n\nexport class AppDataModel {\n\tweaponModifiers: WeaponModifierModel[];\n\tsharpnessModifiers: SharpnessModifierModel[];\n\tweapons: ItemModel[];\n\tarmors: ItemModel[];\n\tcharms: ItemModel[];\n\ttools: ToolModel[];\n\tsetBonuses: SetBonusModel[];\n\tskills: SkillModel[];\n\tdecorations: DecorationModel[];\n\taugmentations: AugmentationModel[];\n\tmodifications: ModificationModel[];\n\tkinsects: KinsectModel[];\n\tammoCapacities: AmmoCapacitiesModel[];\n\tmelodies: MelodiesModel[];\n\tmelodyEffect: MelodyEffectModel[];\n\tupgrades: UpgradeModel[];\n\tawakenings: AwakeningModel[];\n\n\tconstructor() {\n\t\tthis.weaponModifiers = new Array<WeaponModifierModel>();\n\t\tthis.sharpnessModifiers = new Array<SharpnessModifierModel>();\n\t\tthis.weapons = new Array<ItemModel>();\n\t\tthis.armors = new Array<ItemModel>();\n\t\tthis.charms = new Array<ItemModel>();\n\t\tthis.setBonuses = new Array<SetBonusModel>();\n\t\tthis.skills = new Array<SkillModel>();\n\t\tthis.decorations = new Array<DecorationModel>();\n\t\tthis.augmentations = new Array<AugmentationModel>();\n\t\tthis.modifications = new Array<ModificationModel>();\n\t\tthis.kinsects = new Array<KinsectModel>();\n\t\tthis.ammoCapacities = new Array<AmmoCapacitiesModel>();\n\t\tthis.melodies = new Array<MelodiesModel>();\n\t\tthis.melodyEffect = new Array<MelodyEffectModel>();\n\t\tthis.tools = new Array<ToolModel>();\n\t\tthis.upgrades = new Array<UpgradeModel>();\n\t\tthis.awakenings = new Array<AwakeningModel>();\n\t}\n}\n","import { AugmentationLevelModel } from './augmentation-level.model';\n\nexport class AugmentationModel {\n\tid: number;\n\tcode: string;\n\tname: string;\n\tdescription: string;\n\tlevels: AugmentationLevelModel[];\n}\n","import { AwakeningType } from '../types/awakening.type';\n\nexport class AwakeningLevelModel {\n\tid: number;\n\ttype: AwakeningType;\n\tname: string;\n\tshort?: string;\n\tlevel: number;\n\tminLevel: number;\n\tmaxLevel: number;\n\n\tconstructor() {\n\t\tthis.id = 0;\n\t\tthis.type = AwakeningType.None;\n\t\tthis.name = 'None';\n\t\tthis.short = 'None';\n\t\tthis.level = 0;\n\t\tthis.minLevel = 1;\n\t\tthis.maxLevel = 6;\n\t}\n}\n","\nexport class BuffModel {\n\tattackBuff: number;\n\tdeffenseBuff: number;\n\telementBuff: number;\n\n\tconstructor() {\n\t\tthis.attackBuff = 0;\n\t\tthis.deffenseBuff = 0;\n\t\tthis.elementBuff = 0;\n\t}\n}\n","export class BuildModel {\n\tweapon: BuildItemModel;\n\thead: BuildItemModel;\n\tchest: BuildItemModel;\n\thands: BuildItemModel;\n\tlegs: BuildItemModel;\n\tfeet: BuildItemModel;\n\tcharm: BuildItemModel;\n\ttool1: BuildItemModel;\n\ttool2: BuildItemModel;\n}\n\nexport class BuildItemModel {\n\titemId: number;\n\tkinsectId?: number;\n\tkinsectElementId?: number;\n\tdecorationIds?: number[];\n\taugmentationIds?: number[];\n\tupgradeLevels?: number[];\n\tcustomLevelIds?: number[];\n\tawakenings?: number[][];\n\tsetbonusId?: number;\n\tlevel?: number;\n\tmodificationIds: number[];\n\n\telementId?: number;\n\tailmentId?: number;\n}\n","import { SkillReferenceModel } from './skill-reference.model';\n\nexport class CommonModel {\n\tid: number;\n\tcode: string;\n\tname: string;\n\tdescription: string;\n\tlevels: CommonLevelModel[];\n}\n\nexport class CommonLevelModel {\n\tdescription: string;\n\tskills: SkillReferenceModel[];\n}\n","import { ItemType } from '../types/item.type';\nimport { SkillReferenceModel } from './skill-reference.model';\n\nexport class DecorationModel {\n\tid: number;\n\tname: string;\n\tlevel: number;\n\trarity: number;\n\tpriority: number;\n\tskills: SkillReferenceModel[];\n\n\titemId: number;\n\titemType: ItemType;\n\tactive: boolean;\n}\n","import { ModeType } from '../types/mode.type';\nimport { SkillModel } from './skill.model';\n\nexport class EquippedSetBonusModel {\n\tid: string;\n\tname: string;\n\tequippedCount: number;\n\tdetails: EquippedSetBonusDetailModel[];\n\n\tweaponCount: number;\n\theadCount: number;\n\tchestCount: number;\n\tarmsCount: number;\n\twaistCount: number;\n\tlegsCount: number;\n\n\tconstructor() {\n\t\tthis.weaponCount = 0;\n\t\tthis.headCount = 0;\n\t\tthis.chestCount = 0;\n\t\tthis.armsCount = 0;\n\t\tthis.waistCount = 0;\n\t\tthis.legsCount = 0;\n\t}\n}\nexport class EquippedSetBonusDetailModel {\n\trequiredCount: number;\n\tskill: SkillModel;\n\tmode: ModeType;\n\n\tconstructor() {\n\t\tthis.mode = ModeType.Active;\n\t}\n}\n\n","import { SkillModel } from './skill.model';\n\nexport class EquippedSkillModel {\n\tskill: SkillModel;\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tequippedArmorCount: number;\n\tequippedTool1Count: number;\n\tequippedTool2Count: number;\n\tequippedToolActiveCount: number;\n\tequippedCount: number;\n\tsecretLevelCount: number;\n\ttotalLevelCount: number;\n\n\tweaponCount: number; // Weapon\n\theadCount: number; // Helm\n\tchestCount: number; // Chest\n\tarmsCount: number; // Arms\n\twaistCount: number; // Waist\n\tlegsCount: number; // Legs\n\tcharmCount: number; // Charm\n\ttoolCount: number; // Tool\n\n\tisSetBonus: boolean;\n\tisNatureBonus: boolean;\n\trequiredCount?: number;\n\n\thasActiveStats?: boolean;\n\n\tconstructor() {\n\t\tthis.weaponCount = 0;\n\t\tthis.headCount = 0;\n\t\tthis.chestCount = 0;\n\t\tthis.armsCount = 0;\n\t\tthis.waistCount = 0;\n\t\tthis.legsCount = 0;\n\t\tthis.charmCount = 0;\n\t\tthis.toolCount = 0;\n\n\t\tthis.equippedArmorCount = 0;\n\t\tthis.equippedTool1Count = 0;\n\t\tthis.equippedTool2Count = 0;\n\t\tthis.equippedToolActiveCount = 0;\n\t\tthis.equippedCount = 0;\n\n\t\tthis.secretLevelCount = 0;\n\n\t\tthis.isSetBonus = false;\n\t\tthis.isNatureBonus = false;\n\t}\n}\n","import { WeaponType } from '../types/weapon.type';\nimport { OtherDataModel } from './other-data.model';\n\nexport class ExtraDataModel {\n\tweaponType: WeaponType;\n\totherData: OtherDataModel[];\n\ticon?: string;\n}\n","import { AilmentType } from '../types/ailment.type';\nimport { EldersealType } from '../types/elderseal.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { AmmoCapacitiesModel } from './ammo-capacities.model';\nimport { MelodiesModel } from './melodies.model';\nimport { OtherDataModel } from './other-data.model';\nimport { SkillReferenceModel } from './skill-reference.model';\nimport { SlotModel } from './slot.model';\n\nexport class ItemModel {\n\tid: number;\n\tname: string;\n\trarity: number;\n\titemType: ItemType;\n\tequipmentCategory: EquipmentCategoryType;\n\tslots?: SlotModel[];\n\tdefense?: number[];\n\tlevels?: number;\n\n\t// weapon properties\n\tweaponType?: WeaponType;\n\tbaseAttack?: number;\n\tsharpnessDataNeeded: boolean;\n\tsharpnessLevelsBar: number[];\n\tsharpnessMaxLevel?: number;\n\tsharpnessMaxColorIndex?: number;\n\tbaseAffinityPercent?: number;\n\tailment?: AilmentType;\n\tailmentBaseAttack: number;\n\tailmentHidden: boolean;\n\tailmentAttackIncreaseCapOverride: number;\n\telement?: ElementType;\n\telementBaseAttack?: number;\n\telementHidden: boolean;\n\telementAttackIncreaseCapOverride: number;\n\telderseal?: EldersealType;\n\totherData?: OtherDataModel[];\n\tupgradeType?: number;\n\tammoCapacities?: AmmoCapacitiesModel;\n\tmelodies?: MelodiesModel;\n\n\t// armor properties\n\tfireResist: number;\n\twaterResist: number;\n\tthunderResist: number;\n\ticeResist: number;\n\tdragonResist: number;\n\tskills?: SkillReferenceModel[];\n\n\t// tool properties\n\tduration: number;\n\trecharge: number;\n\n\tmonsters?: string[];\n\ttags?: string[];\n\tvColor: number;\n\n\tequippedLevel?: number;\n\tactive: boolean;\n}\n","import { AttackType } from '../types/attack.type';\nimport { DustEffectType } from '../types/dust-effect.type';\nimport { ElementType } from '../types/element.type';\nimport { KinsectType } from '../types/kinsect.type';\n\nexport class KinsectModel {\n\tid: number;\n\trarity: number;\n\ttype: KinsectType;\n\tname: string;\n\tattackType: AttackType;\n\tdustEffect: DustEffectType;\n\telement: ElementType;\n\tpower: number;\n\tspeed: number;\n\theal: number;\n\telementPower?: number;\n}\n","import { MelodyEffectModel } from './melody-effect.model';\n\nexport class MelodiesModel {\n\tid: number;\n\tnotes: string[];\n\tmelodies: number[][];\n\tmelodiesEffect: MelodyEffectModel[];\n\tmelodyEffects: MelodiesDetailModel[];\n}\n\nexport class MelodiesDetailModel {\n\tmelody: number[];\n\teffects: MelodyEffectModel[];\n}\n","import { ModificationLevelModel } from './modification-level.model';\n\nexport class ModificationModel {\n\tid: number;\n\tcode: string;\n\tname: string;\n\tdescription: string;\n\tlevels: ModificationLevelModel[];\n}\n","import { SharpnessModel } from './sharpness-model';\n\nexport class SharpnessBarModel {\n\tlevels: number[];\n\thandicraftLevel?: number;\n\tsharps: SharpnessModel[];\n\tempty: number;\n\twidthModifier: number;\n\tlevelsMissing: number;\n\ttooltipTemplate: string;\n\tmaxColorSharp?: number;\n\tmaxLevelSharp?: number;\n\tsharpnessDataNeeded: boolean;\n\tcolor: string;\n}\n","import { ModeType } from '../types/mode.type';\nimport { SkillLevelModel } from './skill-level.model';\n\nexport class SkillModel {\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tmaxLevel?: number;\n\traiseSkillId?: string;\n\tlevels: SkillLevelModel[];\n\thasActiveStats?: boolean;\n\tmode?: ModeType;\n}\n","import { CalculationVariableModel } from './calculation-variable.model';\n\nexport class StatDetailModel {\n\tname: string;\n\tvalue: string | number;\n\tvalueColor?: string;\n\tinfo?: string[];\n\tcalculationTemplate?: string;\n\tcalculationVariables?: CalculationVariableModel[];\n\tcolor?: string;\n\textra1?: string | number;\n\textra2?: string | number;\n\tclass1?: string;\n\tclass2?: string;\n\ticon?: string;\n}\n","import { AilmentType } from '../types/ailment.type';\nimport { ElementType } from '../types/element.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { AmmoCapacitiesModel } from './ammo-capacities.model';\nimport { ExtraDataModel } from './extra-data.model';\nimport { KinsectModel } from './kinsect.model';\n\nexport class StatsModel {\n\tweaponType?: WeaponType;\n\ttotalAttack: number;\n\ttotalAttackPotential: number;\n\tattack: number;\n\tupgradeAttack: number;\n\tawakeningAttack: number;\n\tpassiveAttack: number;\n\tactiveAttack: number;\n\tactiveAttackPercent: number;\n\n\tsharpnessDataNeeded: boolean;\n\tpassiveSharpness: number;\n\textraSharpness: number;\n\tsharpnessLevelsBar: number[];\n\teffectivePhysicalSharpnessModifier: number;\n\teffectiveElementalSharpnessModifier: number;\n\textraSlot: number;\n\n\tweaponAttackModifier: number;\n\tcritElementModifier: number;\n\ttrueCritElementModifier: number;\n\tcritStatusModifier: number;\n\ttrueCritStatusModifier: number;\n\taffinity: number;\n\tupgradeAffinity: number;\n\tawakeningAffinity: number;\n\tpassiveAffinity: number;\n\tactiveAffinity: number;\n\tweakPointAffinity: number;\n\tpassiveCriticalBoostPercent: number;\n\tcriticalElement: boolean;\n\tcriticalStatus: boolean;\n\ttrueCriticalElement: boolean;\n\ttrueCriticalStatus: boolean;\n\n\telementless: boolean;\n\telementlessBoostPercent: number;\n\n\telement: ElementType;\n\tbaseElementAttack: number;\n\tupgradeElementAttack: number;\n\tawakeningElementAttack: number;\n\teffectivePassiveElementAttack: number;\n\telementHidden: boolean;\n\teffectiveElementAttack: number;\n\telementCap: number;\n\telementCapped: boolean;\n\ttotalElementAttack: number;\n\ttotalElementAttackPotential: number;\n\n\tailment: AilmentType;\n\tbaseAilmentAttack: number;\n\tupgradeAilmentAttack: number;\n\tawakeningAilmentAttack: number;\n\teffectivePassiveAilmentAttack: number;\n\tailmentHidden: boolean;\n\teffectiveAilmentAttack: number;\n\tailmentCap: number;\n\tailmentCapped: boolean;\n\ttotalAilmentAttack: number;\n\ttotalAilmentAttackPotential: number;\n\n\telementAttackMultiplier: number;\n\n\tpassiveDragonAttack: number;\n\tpassiveDragonAttackPercent: number;\n\tpassiveFireAttack: number;\n\tpassiveFireAttackPercent: number;\n\tpassiveIceAttack: number;\n\tpassiveIceAttackPercent: number;\n\tpassiveWaterAttack: number;\n\tpassiveWaterAttackPercent: number;\n\tpassiveThunderAttack: number;\n\tpassiveThunderAttackPercent: number;\n\tpassivePoisonAttack: number;\n\tpassivePoisonBuildupPercent: number;\n\tpassiveSleepAttack: number;\n\tpassiveSleepBuildupPercent: number;\n\tpassiveParalysisAttack: number;\n\tpassiveParalysisBuildupPercent: number;\n\tpassiveBlastAttack: number;\n\tpassiveBlastBuildupPercent: number;\n\tpassiveStunAttack: number;\n\tpassiveStunBuildupPercent: number;\n\n\teffectivePassiveAilmentBuildupPercent: number;\n\n\tactiveElementAttack: number;\n\tactiveAilmentAttack: number;\n\tactiveAilmentAttackBuildUpPercent: number;\n\n\telderseal: string;\n\teldersealLevelBoost: number;\n\n\tdefense: number[];\n\tpassiveDefense: number;\n\tpassiveDefensePercent: number;\n\tactiveDefense: number;\n\tpassiveHealth: number;\n\tpassiveStamina: number;\n\n\tfireResist: number;\n\twaterResist: number;\n\tthunderResist: number;\n\ticeResist: number;\n\tdragonResist: number;\n\n\tpassiveFireResist: number;\n\tpassiveWaterResist: number;\n\tpassiveThunderResist: number;\n\tpassiveIceResist: number;\n\tpassiveDragonResist: number;\n\n\tpassiveElementResistPercent?: number;\n\n\thealOnHitPercent: number;\n\thastenRecovery?: number;\n\n\tammoCapacities: AmmoCapacitiesModel;\n\tammoCapacitiesUp: AmmoCapacitiesModel;\n\tammoUp: number;\n\textraData: ExtraDataModel;\n\trecoil: number;\n\treload: number;\n\tdeviation: number;\n\n\tkinsect?: KinsectModel;\n\n\tfrostcraft?: number[];\n\n\tconstructor() {\n\t\tthis.totalAttack = 0;\n\t\tthis.attack = 0;\n\t\tthis.upgradeAttack = 0;\n\t\tthis.awakeningAttack = 0;\n\t\tthis.passiveAttack = 0;\n\t\tthis.activeAttack = 0;\n\t\tthis.activeAttackPercent = 0;\n\n\t\tthis.elementless = false;\n\t\tthis.elementlessBoostPercent = 0;\n\n\t\tthis.sharpnessDataNeeded = false;\n\t\tthis.passiveSharpness = 0;\n\t\tthis.extraSharpness = 0;\n\t\tthis.effectivePhysicalSharpnessModifier = 1;\n\t\tthis.effectiveElementalSharpnessModifier = 1;\n\t\tthis.extraSlot = 0;\n\t\tthis.weaponAttackModifier = 0;\n\t\tthis.critElementModifier = 0;\n\t\tthis.trueCritElementModifier = 0;\n\t\tthis.critStatusModifier = 0;\n\t\tthis.trueCritStatusModifier = 0;\n\t\tthis.affinity = 0;\n\t\tthis.upgradeAffinity = 0;\n\t\tthis.awakeningAffinity = 0;\n\t\tthis.passiveAffinity = 0;\n\t\tthis.activeAffinity = 0;\n\t\tthis.weakPointAffinity = 0;\n\t\tthis.passiveCriticalBoostPercent = 0;\n\t\tthis.criticalElement = false;\n\t\tthis.criticalStatus = false;\n\t\tthis.trueCriticalElement = false;\n\t\tthis.trueCriticalStatus = false;\n\n\t\tthis.element = null;\n\t\tthis.baseElementAttack = 0;\n\t\tthis.upgradeElementAttack = 0;\n\t\tthis.awakeningElementAttack = 0;\n\t\tthis.elementHidden = false;\n\t\tthis.effectiveElementAttack = 0;\n\t\tthis.elementCap = 0;\n\t\tthis.elementCapped = false;\n\t\tthis.totalElementAttack = 0;\n\t\tthis.totalElementAttackPotential = 0;\n\n\t\tthis.ailment = null;\n\t\tthis.baseAilmentAttack = 0;\n\t\tthis.upgradeAilmentAttack = 0;\n\t\tthis.awakeningAilmentAttack = 0;\n\t\tthis.ailmentHidden = false;\n\t\tthis.effectiveAilmentAttack = 0;\n\t\tthis.ailmentCap = 0;\n\t\tthis.ailmentCapped = false;\n\t\tthis.totalAilmentAttack = 0;\n\t\tthis.totalAilmentAttackPotential = 0;\n\n\t\tthis.elementAttackMultiplier = 0;\n\n\t\tthis.passiveFireAttack = 0;\n\t\tthis.passiveFireAttackPercent = 0;\n\t\tthis.passiveWaterAttack = 0;\n\t\tthis.passiveWaterAttackPercent = 0;\n\t\tthis.passiveThunderAttack = 0;\n\t\tthis.passiveThunderAttackPercent = 0;\n\t\tthis.passiveIceAttack = 0;\n\t\tthis.passiveIceAttackPercent = 0;\n\t\tthis.passiveDragonAttack = 0;\n\t\tthis.passiveDragonAttackPercent = 0;\n\t\tthis.passivePoisonAttack = 0;\n\t\tthis.passivePoisonBuildupPercent = 0;\n\t\tthis.passiveSleepAttack = 0;\n\t\tthis.passiveSleepBuildupPercent = 0;\n\t\tthis.passiveParalysisAttack = 0;\n\t\tthis.passiveParalysisBuildupPercent = 0;\n\t\tthis.passiveBlastAttack = 0;\n\t\tthis.passiveBlastBuildupPercent = 0;\n\t\tthis.passiveStunAttack = 0;\n\t\tthis.passiveStunBuildupPercent = 0;\n\t\tthis.effectivePassiveElementAttack = 0;\n\t\tthis.effectivePassiveAilmentAttack = 0;\n\n\t\tthis.effectivePassiveAilmentBuildupPercent = 0;\n\n\t\tthis.activeElementAttack = 0;\n\t\tthis.activeAilmentAttack = 0;\n\t\tthis.activeAilmentAttackBuildUpPercent = 0;\n\n\t\tthis.elderseal = null;\n\t\tthis.eldersealLevelBoost = 0;\n\n\t\tthis.defense = [0, 0, 0];\n\t\tthis.passiveDefense = 0;\n\t\tthis.passiveDefensePercent = 0;\n\t\tthis.activeDefense = 0;\n\t\tthis.passiveHealth = 0;\n\t\tthis.passiveStamina = 0;\n\n\t\tthis.recoil = 0;\n\t\tthis.reload = 0;\n\t\tthis.deviation = 0;\n\n\t\tthis.fireResist = 0;\n\t\tthis.waterResist = 0;\n\t\tthis.thunderResist = 0;\n\t\tthis.iceResist = 0;\n\t\tthis.dragonResist = 0;\n\n\t\tthis.passiveFireResist = 0;\n\t\tthis.passiveWaterResist = 0;\n\t\tthis.passiveThunderResist = 0;\n\t\tthis.passiveIceResist = 0;\n\t\tthis.passiveDragonResist = 0;\n\n\t\tthis.healOnHitPercent = 0;\n\n\t\tthis.ammoCapacities = null;\n\t\tthis.ammoCapacitiesUp = null;\n\t\tthis.ammoUp = 0;\n\t\tthis.extraData = null;\n\t}\n}\n","import { WeaponType } from '../types/weapon.type';\nimport { UpgradeLevelModel } from './upgrade.model';\n\nexport class UpgradeContainerModel {\n\tslots: number;\n\tused: number;\n\thasCustomUpgrades: boolean;\n\tupgradeDetails: UpgradeLevelModel[];\n\tcustomUpgradeIds: number[];\n\tcustomUpgradeValues: number[];\n\tweaponType: WeaponType;\n\n\tconstructor() {\n\t\tthis.slots = 0;\n\t\tthis.used = 0;\n\t\tthis.hasCustomUpgrades = false;\n\t\tthis.upgradeDetails = new Array<UpgradeLevelModel>();\n\t\tthis.customUpgradeIds = [0, 0, 0, 0, 0, 0, 0];\n\t\tthis.customUpgradeValues = [0, 0, 0, 0, 0, 0, 0];\n\t}\n}\n","import { AugmentationType } from '../types/augmentation.type';\nimport { SkillReferenceModel } from './skill-reference.model';\n\nexport class UpgradeModel {\n\tid: number;\n\ttype: AugmentationType;\n\tname: string;\n\tdescription: string;\n\tlevels: UpgradeLevelModel[];\n\tmultiplier?: number;\n\tWeaponLevels?: number[][];\n\tWeaponCustomUpgrades: number[][];\n}\n\nexport class UpgradeLevelModel {\n\ttype: AugmentationType;\n\tlevel: number;\n\trequiredSlots: number;\n\ttotalSlots: number;\n\n\tpassiveAttack: number;\n\tpassiveAffinity: number;\n\tpassiveDefense: number;\n\thealOnHitPercent: number;\n\tslotLevel: number;\n\tpassiveElement: number;\n\tpassiveAilment: number;\n\n\tdescription: string;\n\n\tskills: SkillReferenceModel[];\n\n\tconstructor() {\n\t\tthis.passiveAttack = 0;\n\t\tthis.passiveAffinity = 0;\n\t\tthis.passiveDefense = 0;\n\t\tthis.slotLevel = 0;\n\t\tthis.healOnHitPercent = 0;\n\t\tthis.passiveElement = 0;\n\t\tthis.passiveAilment = 0;\n\n\t\tthis.description = '';\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'numbersArr'\n})\nexport class NumbersArrPipe implements PipeTransform {\n\ttransform(value, args: string[]): any {\n\t\tconst res = [];\n\t\tfor (let i = 0; i < value; i++) {\n\t\t\tres.push(i);\n\t\t}\n\t\treturn res;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable, Observer } from 'rxjs';\nimport { AmmoCapacitiesLoader } from '../data/loaders/ammo-capacities.loader';\nimport { ArmorLoader } from '../data/loaders/armor.loader';\nimport { AugmentationsLoader } from '../data/loaders/augmentations.loader';\nimport { AwakeningsLoader } from '../data/loaders/awakenings.loader';\nimport { CharmsLoader } from '../data/loaders/charms.loader';\nimport { DecorationsLoader } from '../data/loaders/decorations.loader';\nimport { KinsectsLoader } from '../data/loaders/kinsects.loader';\nimport { MelodiesLoader } from '../data/loaders/melodies.loader';\nimport { MelodyEffectLoader } from '../data/loaders/melodyEffect.loader';\nimport { ModificationsLoader } from '../data/loaders/modifications.loader';\nimport { SetBonusesLoader } from '../data/loaders/set-bonuses.loader';\nimport { SharpnessModifiersLoader } from '../data/loaders/sharpness-modifiers.loader';\nimport { SkillsLoader } from '../data/loaders/skills.loader';\nimport { ToolsLoader } from '../data/loaders/tools.loader';\nimport { UpgradesLoader } from '../data/loaders/upgrades.loader';\nimport { WeaponModifiersLoader } from '../data/loaders/weapon-modifiers.loader';\nimport { WeaponsLoader } from '../data/loaders/weapons.loader';\nimport { AppDataModel } from '../models/app-data.model';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class AppDataProvider {\n\tpublic appData: AppDataModel;\n\n\tconstructor(\n\t\tprivate weaponLoader: WeaponsLoader,\n\t\tprivate armorLoader: ArmorLoader,\n\t\tprivate charmsLoader: CharmsLoader,\n\t\tprivate decorationsLoader: DecorationsLoader,\n\t\tprivate augmentationsLoader: AugmentationsLoader,\n\t\tprivate modificationsLoader: ModificationsLoader,\n\t\tprivate kinsectsLoader: KinsectsLoader,\n\t\tprivate skillsLoader: SkillsLoader,\n\t\tprivate setBonusesLoader: SetBonusesLoader,\n\t\tprivate sharpnessModifiersLoader: SharpnessModifiersLoader,\n\t\tprivate weaponModifiersLoader: WeaponModifiersLoader,\n\t\tprivate ammoCapacitiesLoader: AmmoCapacitiesLoader,\n\t\tprivate melodiesLoader: MelodiesLoader,\n\t\tprivate melodyEffectLoader: MelodyEffectLoader,\n\t\tprivate toolsLoader: ToolsLoader,\n\t\tprivate upgradesLoader: UpgradesLoader,\n\t\tprivate awakeningsLoader: AwakeningsLoader\n\t) {\n\t\tthis.appData = new AppDataModel();\n\t}\n\n\tload(): Observable<boolean> {\n\t\treturn new Observable((observer: Observer<boolean>) => {\n\t\t\tPromise.all([\n\t\t\t\tthis.weaponLoader.load('weapons.tsv', false).toPromise(),\n\t\t\t\tthis.armorLoader.load('armor.tsv', false).toPromise(),\n\t\t\t\tthis.charmsLoader.load('charms.tsv', false).toPromise(),\n\t\t\t\tthis.decorationsLoader.load('decorations.tsv', false).toPromise(),\n\t\t\t\tthis.augmentationsLoader.load('augmentations.json', false).toPromise(),\n\t\t\t\tthis.modificationsLoader.load('modifications.json', false).toPromise(),\n\t\t\t\tthis.kinsectsLoader.load('kinsects.tsv', false).toPromise(),\n\t\t\t\tthis.skillsLoader.load('skills.json', false).toPromise(),\n\t\t\t\tthis.setBonusesLoader.load('set-bonuses.json', false).toPromise(),\n\t\t\t\tthis.sharpnessModifiersLoader.load('sharpness-modifiers.json', false).toPromise(),\n\t\t\t]).then(results => {\n\t\t\t\tthis.appData.weapons = results[0];\n\t\t\t\tthis.appData.armors = results[1];\n\t\t\t\tthis.appData.charms = results[2];\n\t\t\t\tthis.appData.decorations = results[3];\n\t\t\t\tthis.appData.augmentations = results[4];\n\t\t\t\tthis.appData.modifications = results[5];\n\t\t\t\tthis.appData.kinsects = results[6];\n\t\t\t\tthis.appData.skills = results[7];\n\t\t\t\tthis.appData.setBonuses = results[8];\n\t\t\t\tthis.appData.sharpnessModifiers = results[9];\n\n\t\t\t\tPromise.all([\n\t\t\t\t\tthis.weaponModifiersLoader.load('weapon-modifiers.json', false).toPromise(),\n\t\t\t\t\tthis.ammoCapacitiesLoader.load('ammo-capacities.json', false).toPromise(),\n\t\t\t\t\tthis.melodiesLoader.load('melodies.tsv', false).toPromise(),\n\t\t\t\t\tthis.melodyEffectLoader.load('melody-effect.tsv', false).toPromise(),\n\t\t\t\t\tthis.toolsLoader.load('tools.tsv', false).toPromise(),\n\t\t\t\t\tthis.upgradesLoader.load('upgrades.json', false).toPromise(),\n\t\t\t\t\tthis.awakeningsLoader.load('awakenings.json', false).toPromise()\n\t\t\t\t]).then(results2 => {\n\t\t\t\t\tthis.appData.weaponModifiers = results2[0];\n\t\t\t\t\tthis.appData.ammoCapacities = results2[1];\n\t\t\t\t\tthis.appData.melodies = results2[2];\n\t\t\t\t\tthis.appData.melodyEffect = results2[3];\n\t\t\t\t\tthis.appData.tools = results2[4];\n\t\t\t\t\tthis.appData.upgrades = results2[5];\n\t\t\t\t\tthis.appData.awakenings = results2[6];\n\n\t\t\t\t\tobserver.next(true);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n","import { ChangeDetectorRef, Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { ItemSlotComponent } from '../components/item-slot/item-slot.component';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { BuildItemModel, BuildModel } from '../models/build.model';\nimport { ItemModel } from '../models/item.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { UpgradeLevelModel } from '../models/upgrade.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { DataService } from './data.service';\nimport { EquipmentService } from './equipment.service';\nimport { SlotService } from './slot.service';\n\n@Injectable()\nexport class BuildService {\n\tpublic buildIdUpdated$ = new Subject<string>();\n\n\tprivate changeDetector: ChangeDetectorRef;\n\tprivate loadingBuild = false;\n\n\tprivate weaponItem: ItemModel;\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate equipmentService: EquipmentService\n\t) { }\n\n\tinitialize(\n\t\tchangeDetector: ChangeDetectorRef\n\t) {\n\t\t// TODO: Passing in change detector feels gross, but at the moment it's needed to set up decoration slots when an item is loaded by build id.\n\t\tthis.changeDetector = changeDetector;\n\t\tthis.subscribeSlotEvents();\n\t}\n\n\tprivate subscribeSlotEvents() {\n\t\tthis.slotService.itemSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\t\tthis.slotService.itemSelectedNew$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.decorationSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.augmentationSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.upgradeSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.modificationSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.kinsectSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.itemLevelChanged$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.weaponModSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.setbonusSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\t}\n\n\tloadBuild(buildHash: string) {\n\t\tthis.loadingBuild = true;\n\t\tconst buildParts = buildHash.split('&');\n\n\t\tconst buildId = buildParts[0];\n\n\t\tconst build = this.parseBuildId(buildId);\n\n\t\tthis.loadBuildSlot(build.head, this.slotService.headSlot);\n\t\tthis.loadBuildSlot(build.chest, this.slotService.chestSlot);\n\t\tthis.loadBuildSlot(build.hands, this.slotService.handsSlot);\n\t\tthis.loadBuildSlot(build.legs, this.slotService.legsSlot);\n\t\tthis.loadBuildSlot(build.feet, this.slotService.feetSlot);\n\t\tthis.loadBuildSlot(build.charm, this.slotService.charmSlot);\n\t\tif (build.tool1) { this.loadBuildSlot(build.tool1, this.slotService.tool1Slot); }\n\t\tif (build.tool2) { this.loadBuildSlot(build.tool2, this.slotService.tool2Slot); }\n\t\tthis.loadBuildSlot(build.weapon, this.slotService.weaponSlot, true);\n\n\t\tthis.slotService.selectItemSlot(null);\n\t\tthis.changeDetector.detectChanges();\n\t\tthis.loadingBuild = false;\n\t}\n\n\tprivate parseBuildId(buildId: string): BuildModel {\n\t\tconst itemGroupRegex = /(i[.]*[^i]*)/g;\n\t\tconst itemRegex = /(?<=i)([\\d]+)/g;\n\t\tconst decoRegex = /(?<=d)([\\d]+)/g;\n\t\tconst augRegex = /(?<=a)([\\d]+)/g;\n\t\tconst upgRegex = /(?<=u)([\\d]+)/g;\n\t\tconst custRegex = /(?<=c)([\\d]+)/g;\n\t\tconst awkRegex = /(?<=w)([\\d]+)(l)([\\d]+)/g;\n\t\tconst setbRegex = /(?<=s)([\\d]+)/g;\n\t\tconst kinsectRegex = /(?<=k)([\\d]+)/g;\n\t\tconst kinsectElementRegex = /(?<=e)([\\d]+)/g;\n\t\tconst elementRegex = /(?<=f)([\\d]+)/g;\n\t\tconst ailmentRegex = /(?<=g)([\\d]+)/g;\n\t\tconst modRegex = /(?<=m)([\\d]+)/g;\n\t\tconst levelRegex = /(?<=l)([\\d]+)/g;\n\n\t\tconst build = new BuildModel();\n\n\t\tconst itemGroups = buildId.match(itemGroupRegex);\n\t\tlet index = 1;\n\t\tfor (const itemGroup of itemGroups) {\n\t\t\tconst buildItem = new BuildItemModel();\n\n\t\t\tconst item = itemGroup.match(itemRegex);\n\t\t\tif (item) {\n\t\t\t\tbuildItem.itemId = parseInt(item[0], 10);\n\t\t\t}\n\n\t\t\tconst decos = itemGroup.match(decoRegex);\n\t\t\tif (decos) {\n\t\t\t\tbuildItem.decorationIds = [];\n\t\t\t\tfor (const deco of decos) {\n\t\t\t\t\tbuildItem.decorationIds.push(parseInt(deco, 10));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst augs = itemGroup.match(augRegex);\n\t\t\tif (augs) {\n\t\t\t\tbuildItem.augmentationIds = [];\n\t\t\t\tfor (const aug of augs) {\n\t\t\t\t\tbuildItem.augmentationIds.push(parseInt(aug, 10));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst upgs = itemGroup.match(upgRegex);\n\t\t\tif (upgs) {\n\t\t\t\tbuildItem.upgradeLevels = [];\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(0, 1), 10)); // Attack\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(1, 2), 10)); // Affinity\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(2, 3), 10)); // Defense\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(3, 4), 10)); // Slots\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(4, 5), 10)); // Health\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(5, 6), 10)); // Element/Ailment\n\t\t\t}\n\n\t\t\tconst customs = itemGroup.match(custRegex);\n\t\t\tif (customs) {\n\t\t\t\tif (customs.toString().length == 4) { // V2\n\t\t\t\t\t// Empty\n\t\t\t\t} else if (customs.toString().length == 7) { // v3\n\t\t\t\t\tbuildItem.customLevelIds = [];\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(0, 1), 10)); // Lv 1\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(1, 2), 10)); // Lv 2\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(2, 3), 10)); // Lv 3\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(3, 4), 10)); // Lv 4\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(4, 5), 10)); // Lv 5\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(5, 6), 10)); // Lv 6\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(6, 7), 10)); // Lv 7\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst awks = itemGroup.match(awkRegex);\n\t\t\tif (awks) {\n\t\t\t\tbuildItem.awakenings = [];\n\t\t\t\tfor (const awk of awks) {\n\t\t\t\t\tconst awkAux = awk.split('l');\n\t\t\t\t\tbuildItem.awakenings.push([parseInt(awkAux[0], 10), parseInt(awkAux[1], 10)]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst setb = itemGroup.match(setbRegex);\n\t\t\tif (setb) {\n\t\t\t\tbuildItem.setbonusId = parseInt(setb[0], 10);\n\t\t\t}\n\n\t\t\tconst element = itemGroup.match(elementRegex);\n\t\t\tif (element) {\n\t\t\t\tbuildItem.elementId = parseInt(element[0], 10);\n\t\t\t}\n\t\t\tconst ailment = itemGroup.match(ailmentRegex);\n\t\t\tif (ailment) {\n\t\t\t\tbuildItem.ailmentId = parseInt(ailment[0], 10);\n\t\t\t}\n\n\t\t\tconst mods = itemGroup.match(modRegex);\n\t\t\tif (mods) {\n\t\t\t\tbuildItem.modificationIds = [];\n\t\t\t\tfor (const mod of mods) {\n\t\t\t\t\tbuildItem.modificationIds.push(parseInt(mod, 10));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst kinsect = itemGroup.match(kinsectRegex);\n\t\t\tif (kinsect) {\n\t\t\t\tbuildItem.kinsectId = parseInt(kinsect[0], 10);\n\t\t\t}\n\n\t\t\tconst kinsectElement = itemGroup.match(kinsectElementRegex);\n\t\t\tif (kinsectElement) {\n\t\t\t\tbuildItem.kinsectElementId = parseInt(kinsectElement[0], 10);\n\t\t\t}\n\n\t\t\tconst level = itemGroup.match(levelRegex);\n\t\t\tif (level) {\n\t\t\t\tbuildItem.level = parseInt(level[0], 10);\n\t\t\t}\n\n\t\t\tswitch (index) {\n\t\t\t\tcase 1:\n\t\t\t\t\tbuild.weapon = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tbuild.head = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tbuild.chest = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tbuild.hands = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tbuild.legs = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tbuild.feet = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\tbuild.charm = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tbuild.tool1 = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 9:\n\t\t\t\t\tbuild.tool2 = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tindex++;\n\t\t}\n\n\t\treturn build;\n\t}\n\n\tprivate loadBuildSlot(buildItem: BuildItemModel, slot: ItemSlotComponent, updateStats: boolean = false) {\n\t\tif (buildItem.itemId) {\n\t\t\tlet item: ItemModel;\n\t\t\tswitch (this.dataService.getEquipmentCategory(slot.slotName)) {\n\t\t\t\tcase EquipmentCategoryType.Weapon:\n\t\t\t\t\titem = this.dataService.getWeapon(buildItem.itemId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase EquipmentCategoryType.Armor:\n\t\t\t\t\titem = this.dataService.getArmor(buildItem.itemId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase EquipmentCategoryType.Charm:\n\t\t\t\t\titem = this.dataService.getCharm(buildItem.itemId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase EquipmentCategoryType.Tool:\n\t\t\t\t\titem = this.dataService.getTool(buildItem.itemId, slot.slotName);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (item) {\n\t\t\t\tif (buildItem.level) {\n\t\t\t\t\titem.equippedLevel = buildItem.level;\n\t\t\t\t}\n\n\t\t\t\tthis.slotService.selectItemSlot(slot);\n\t\t\t\tthis.slotService.selectItem(item, updateStats);\n\n\t\t\t\tthis.changeDetector.detectChanges();\n\n\t\t\t\tif (item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\t\tlet weaponIndex = 0;\n\t\t\t\t\tfor (const types in WeaponType) {\n\t\t\t\t\t\tif (isNaN(Number(types))) {\n\t\t\t\t\t\t\tif (types == item.weaponType) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tweaponIndex += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Element\n\t\t\t\t\tif (buildItem.elementId != null && buildItem.elementId > 0) {\n\t\t\t\t\t\titem.element = this.dataService.getElement(buildItem.elementId);\n\t\t\t\t\t\tif (item.upgradeType == 2) {\n\t\t\t\t\t\t\tif (item.element != null) {\n\t\t\t\t\t\t\t\titem.elementBaseAttack = this.dataService.getSafiElementAttack(weaponIndex);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\titem.elementBaseAttack = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Ailment\n\t\t\t\t\tif (buildItem.ailmentId != null && buildItem.ailmentId > 0) {\n\t\t\t\t\t\titem.ailment = this.dataService.getAilment(buildItem.ailmentId);\n\t\t\t\t\t\tif (item.upgradeType == 2) {\n\t\t\t\t\t\t\tif (item.ailment != null) {\n\t\t\t\t\t\t\t\tlet ailmentType = 0;\n\t\t\t\t\t\t\t\tif (item.ailment == AilmentType.Poison || item.ailment == AilmentType.Blast) {\n\t\t\t\t\t\t\t\t\tailmentType = 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\titem.ailmentBaseAttack = this.dataService.getSafiAilmentAttack(weaponIndex, ailmentType);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\titem.ailmentBaseAttack = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\t\t\t\t\tif (item.upgradeType == 2\n\t\t\t\t\t\t&& item.weaponType != WeaponType.LightBowgun\n\t\t\t\t\t\t&& item.weaponType != WeaponType.HeavyBowgun\n\t\t\t\t\t\t&& (buildItem.elementId != null || buildItem.ailmentId != null)) {\n\t\t\t\t\t\titem.name = this.dataService.getSafiWeaponName(item.weaponType, item.element, item.ailment);\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Awakenings\n\t\t\t\t\tif (buildItem.awakenings != null) {\n\t\t\t\t\t\tconst awakeningLevels: AwakeningLevelModel[] = [];\n\t\t\t\t\t\tfor (const awk of buildItem.awakenings) {\n\t\t\t\t\t\t\tconst awkAux = this.dataService.getAwakening(awk[0]);\n\t\t\t\t\t\t\tawakeningLevels.push({\n\t\t\t\t\t\t\t\tid: awkAux.id,\n\t\t\t\t\t\t\t\ttype: awkAux.type,\n\t\t\t\t\t\t\t\tname: awkAux.name,\n\t\t\t\t\t\t\t\tshort: awkAux.short,\n\t\t\t\t\t\t\t\tlevel: awk[1],\n\t\t\t\t\t\t\t\tminLevel: awkAux.minLevel,\n\t\t\t\t\t\t\t\tmaxLevel: awkAux.maxLevel\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tslot.awakeningSlot.awakenings = awakeningLevels;\n\t\t\t\t\t\tthis.slotService.selectAwakenings(awakeningLevels);\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Setbonus\n\t\t\t\t\tif (buildItem.setbonusId != null) {\n\t\t\t\t\t\tconst setbonus = this.dataService.getSetBonusByBuildId(buildItem.setbonusId);\n\t\t\t\t\t\tif (setbonus) {\n\t\t\t\t\t\t\tif (slot.awakeningSlot) {\n\t\t\t\t\t\t\t\tslot.awakeningSlot.setbonus = setbonus;\n\t\t\t\t\t\t\t\tthis.slotService.selectSetbonusSlot(slot.awakeningSlot);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.slotService.selectSetbonus(setbonus);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\n\t\t\t\t\t// -------------------- Augmentations\n\t\t\t\t\tif (buildItem.augmentationIds) {\n\t\t\t\t\t\tfor (let i = 0; i < 9 - item.rarity; i++) {\n\t\t\t\t\t\t\tconst augId = buildItem.augmentationIds[i];\n\t\t\t\t\t\t\tif (augId) {\n\t\t\t\t\t\t\t\tconst aug = this.dataService.getAugmentation(augId);\n\t\t\t\t\t\t\t\tif (aug) {\n\t\t\t\t\t\t\t\t\tthis.slotService.selectAugmentationSlot(slot.augmentationSlots.toArray()[i]);\n\t\t\t\t\t\t\t\t\tconst newAug = Object.assign({}, aug);\n\t\t\t\t\t\t\t\t\tthis.slotService.selectAugmentation(newAug, updateStats);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// -------------------- Upgrades\n\t\t\t\t\tif (buildItem.upgradeLevels && slot.upgradeSlot) {\n\t\t\t\t\t\tconst upgrades = this.dataService.getUpgrades();\n\t\t\t\t\t\tconst upgradeContainer = new UpgradeContainerModel();\n\t\t\t\t\t\tupgradeContainer.hasCustomUpgrades = item.upgradeType == 1;\n\t\t\t\t\t\tupgradeContainer.weaponType = item.weaponType;\n\t\t\t\t\t\tif (item.rarity == 10) {\n\t\t\t\t\t\t\tupgradeContainer.slots = 10;\n\t\t\t\t\t\t} else if (item.rarity == 11) {\n\t\t\t\t\t\t\tupgradeContainer.slots = 8;\n\t\t\t\t\t\t} else if (item.rarity == 12) {\n\t\t\t\t\t\t\tupgradeContainer.slots = 6;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupgradeContainer.slots = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let i = 0; i < buildItem.upgradeLevels.length; i++) {\n\t\t\t\t\t\t\tconst detail = new UpgradeLevelModel;\n\t\t\t\t\t\t\tdetail.type = upgrades[i].type;\n\t\t\t\t\t\t\tdetail.level = buildItem.upgradeLevels[i];\n\t\t\t\t\t\t\tif (detail.level > 0) {\n\t\t\t\t\t\t\t\tdetail.requiredSlots = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].requiredSlots;\n\t\t\t\t\t\t\t\tdetail.totalSlots = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].totalSlots;\n\n\t\t\t\t\t\t\t\tdetail.passiveAttack = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveAttack;\n\t\t\t\t\t\t\t\tdetail.passiveAffinity = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveAffinity;\n\t\t\t\t\t\t\t\tdetail.passiveDefense = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveDefense;\n\t\t\t\t\t\t\t\tdetail.slotLevel = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].slotLevel;\n\t\t\t\t\t\t\t\tdetail.healOnHitPercent = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].healOnHitPercent;\n\t\t\t\t\t\t\t\tdetail.passiveElement = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveElement;\n\t\t\t\t\t\t\t\tdetail.passiveAilment = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveAilment;\n\n\t\t\t\t\t\t\t\tdetail.description = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].description;\n\n\t\t\t\t\t\t\t\tif (upgrades[i].WeaponLevels) {\n\t\t\t\t\t\t\t\t\tconst overrideValue = upgrades[i].WeaponLevels[weaponIndex][buildItem.upgradeLevels[i] - 1];\n\t\t\t\t\t\t\t\t\tthis.overrideUpgrageLevel(detail, i, overrideValue);\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tupgradeContainer.used += detail.totalSlots;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdetail.requiredSlots = 0;\n\t\t\t\t\t\t\t\tdetail.totalSlots = 0;\n\n\t\t\t\t\t\t\t\tdetail.passiveAttack = 0;\n\t\t\t\t\t\t\t\tdetail.passiveAffinity = 0;\n\t\t\t\t\t\t\t\tdetail.passiveDefense = 0;\n\t\t\t\t\t\t\t\tdetail.slotLevel = 0;\n\t\t\t\t\t\t\t\tdetail.healOnHitPercent = 0;\n\t\t\t\t\t\t\t\tdetail.passiveElement = 0;\n\t\t\t\t\t\t\t\tdetail.passiveAilment = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tupgradeContainer.upgradeDetails.push(detail);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buildItem.customLevelIds) {\n\t\t\t\t\t\t\tupgradeContainer.customUpgradeIds = buildItem.customLevelIds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tslot.upgradeSlot.upgradeContainer = upgradeContainer;\n\n\t\t\t\t\t\tthis.slotService.selectUpgradeSlot(slot.upgradeSlot);\n\t\t\t\t\t\tconst newUpg = JSON.parse(JSON.stringify(upgradeContainer));\n\t\t\t\t\t\tthis.slotService.selectUpgradeContainer(newUpg, updateStats);\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\t\t\t\t\tswitch (item.weaponType) {\n\t\t\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\t\t\tif (buildItem.kinsectId) {\n\t\t\t\t\t\t\t\tconst kinsect = this.dataService.getKinsect(buildItem.kinsectId);\n\t\t\t\t\t\t\t\tif (kinsect) {\n\t\t\t\t\t\t\t\t\tthis.slotService.selectKinsectSlot(slot.kinsectSlot);\n\t\t\t\t\t\t\t\t\tconst newKinsect = Object.assign({}, kinsect);\n\t\t\t\t\t\t\t\t\tthis.slotService.selectKinsect(newKinsect, updateStats);\n\t\t\t\t\t\t\t\t\tif (buildItem.kinsectElementId) {\n\t\t\t\t\t\t\t\t\t\tconst keys = Object.keys(ElementType);\n\t\t\t\t\t\t\t\t\t\tfor (const key in keys) {\n\t\t\t\t\t\t\t\t\t\t\tif (key == buildItem.kinsectElementId.toString()) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = keys[key];\n\t\t\t\t\t\t\t\t\t\t\t\tnewKinsect.element = (<any>ElementType)[value]; // There must be a better way to do this...\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewKinsect.element = ElementType.None;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\t\t\t\tif (buildItem.modificationIds) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < buildItem.modificationIds.length; i++) {\n\t\t\t\t\t\t\t\t\tconst modId = buildItem.modificationIds[i];\n\t\t\t\t\t\t\t\t\tif (modId) {\n\t\t\t\t\t\t\t\t\t\tconst mod = this.dataService.getModification(modId);\n\t\t\t\t\t\t\t\t\t\tif (mod) {\n\t\t\t\t\t\t\t\t\t\t\tthis.slotService.selectModificationSlot(slot.modificationSlots.toArray()[i]);\n\t\t\t\t\t\t\t\t\t\t\tconst newAug = Object.assign({}, mod);\n\t\t\t\t\t\t\t\t\t\t\tthis.slotService.selectModification(newAug, updateStats);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.changeDetector.detectChanges();\n\n\t\t\t\tif (buildItem.decorationIds) {\n\t\t\t\t\tlet i = 0;\n\t\t\t\t\tfor (const decorationId of buildItem.decorationIds) {\n\t\t\t\t\t\tconst decoration = this.dataService.getDecoration(decorationId);\n\t\t\t\t\t\tif (decoration) {\n\t\t\t\t\t\t\tthis.slotService.selectDecorationSlot(slot.decorationSlots.toArray()[i]);\n\t\t\t\t\t\t\tconst newDecoration = Object.assign({}, decoration);\n\t\t\t\t\t\t\tthis.slotService.selectDecoration(newDecoration, updateStats);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.slotService.clearItemSlot(slot);\n\t\t}\n\t}\n\n\tprivate updateBuildId() {\n\t\tconst weapon = this.equipmentService.items.find(item => item.equipmentCategory == EquipmentCategoryType.Weapon);\n\t\tconst head = this.equipmentService.items.find(item => item.itemType == ItemType.Head);\n\t\tconst chest = this.equipmentService.items.find(item => item.itemType == ItemType.Chest);\n\t\tconst hands = this.equipmentService.items.find(item => item.itemType == ItemType.Arms);\n\t\tconst legs = this.equipmentService.items.find(item => item.itemType == ItemType.Waist);\n\t\tconst feet = this.equipmentService.items.find(item => item.itemType == ItemType.Legs);\n\t\tconst charm = this.equipmentService.items.find(item => item.itemType == ItemType.Charm);\n\t\tconst tool1 = this.equipmentService.items.find(item => item.itemType == ItemType.Tool1);\n\t\tconst tool2 = this.equipmentService.items.find(item => item.itemType == ItemType.Tool2);\n\n\t\tlet buildId = 'v3';\n\n\t\tthis.changeDetector.detectChanges();\n\n\t\tbuildId += this.getItemBuildString(weapon);\n\t\tbuildId += this.getItemBuildString(head);\n\t\tbuildId += this.getItemBuildString(chest);\n\t\tbuildId += this.getItemBuildString(hands);\n\t\tbuildId += this.getItemBuildString(legs);\n\t\tbuildId += this.getItemBuildString(feet);\n\t\tbuildId += this.getItemBuildString(charm);\n\t\tbuildId += this.getItemBuildString(tool1);\n\t\tbuildId += this.getItemBuildString(tool2);\n\n\t\tthis.buildIdUpdated$.next(buildId);\n\t}\n\n\tprivate getItemBuildString(item: ItemModel): string {\n\t\tlet result = 'i';\n\n\t\tif (item) {\n\t\t\tresult += item.id.toString();\n\n\t\t\tif (item.equippedLevel) {\n\t\t\t\tresult += `l${item.equippedLevel}`;\n\t\t\t}\n\n\t\t\tif (item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\tif (item.rarity >= 6) {\n\t\t\t\t\t// -------------------- Augmentations\n\n\t\t\t\t\tfor (const aug of this.equipmentService.augmentations) {\n\t\t\t\t\t\tif (aug.id) {\n\t\t\t\t\t\t\tresult += `a${aug.id}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Upgrades\n\t\t\t\t\tif (this.equipmentService.upgradeContainer) {\n\t\t\t\t\t\tresult += 'u';\n\t\t\t\t\t\tfor (const detail of this.equipmentService.upgradeContainer.upgradeDetails) {\n\t\t\t\t\t\t\tif (detail.level) {\n\t\t\t\t\t\t\t\tresult += `${detail.level}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresult += '0';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += 'c';\n\t\t\t\t\t\tfor (const customId of this.equipmentService.upgradeContainer.customUpgradeIds) {\n\t\t\t\t\t\t\tresult += customId;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult += 'u000000c0000000';\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Awakenings\n\t\t\t\t\tif (this.equipmentService.awakenings.length) {\n\t\t\t\t\t\tfor (const awakening of this.equipmentService.awakenings) {\n\t\t\t\t\t\t\tresult += `w${awakening.id}l${awakening.level}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\n\t\t\t\t\t// -------------------- Setbonus\n\t\t\t\t\tif (this.equipmentService.awakeningSetbonus) {\n\t\t\t\t\t\tresult += `s${this.equipmentService.awakeningSetbonus.buildId}`;\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\t\t\t\t}\n\n\t\t\t\tfor (const mod of this.equipmentService.modifications) {\n\t\t\t\t\tif (mod.id) {\n\t\t\t\t\t\tresult += `m${mod.id}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.equipmentService.kinsect) {\n\t\t\t\t\tresult += `k${this.equipmentService.kinsect.id}`;\n\n\t\t\t\t\tif (this.equipmentService.kinsect.element) {\n\t\t\t\t\t\tconst keys = Object.keys(ElementType);\n\t\t\t\t\t\tlet elementIndex = '0';\n\t\t\t\t\t\tfor (const key in keys) {\n\t\t\t\t\t\t\tif (keys.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tconst value = keys[key];\n\t\t\t\t\t\t\t\tif (this.equipmentService.kinsect.element == value) {\n\t\t\t\t\t\t\t\t\telementIndex = key;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += `e${elementIndex}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (item.element) {\n\t\t\t\t\tconst elementId = this.dataService.getElementId(item.element);\n\t\t\t\t\tresult += `f${elementId}`;\n\t\t\t\t} else {\n\t\t\t\t\tresult += `f${0}`;\n\t\t\t\t}\n\t\t\t\tif (item.ailment) {\n\t\t\t\t\tconst ailmentId = this.dataService.getAilmentId(item.ailment);\n\t\t\t\t\tresult += `g${ailmentId}`;\n\t\t\t\t} else {\n\t\t\t\t\tresult += `g${0}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.slots) {\n\t\t\t\tlet decorations = this.equipmentService.decorations.filter(d => d.itemId === item.id);\n\t\t\t\tdecorations = decorations.sort((a, b) => (a.level < b.level) ? 1 : ((a.level > b.level) ? -1 : 0));\n\t\t\t\tfor (let i = 0; i < item.slots.length; i++) {\n\t\t\t\t\tconst slot = item.slots[i];\n\t\t\t\t\tconst decoration = decorations.find(d => d.itemId == item.id && d.level <= slot.level);\n\t\t\t\t\tdecorations = decorations.filter(d => !(d === decoration));\n\t\t\t\t\tif (decoration) {\n\t\t\t\t\t\tresult += `d${decoration.id.toString()}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate overrideUpgrageLevel(upgradeLevel: UpgradeLevelModel, augIndex: number, value: number) {\n\t\tswitch (augIndex) {\n\t\t\tcase 0:\n\t\t\t\tupgradeLevel.passiveAttack = value;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tupgradeLevel.passiveAffinity = value;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tupgradeLevel.passiveDefense = value;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tupgradeLevel.slotLevel = value;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tupgradeLevel.healOnHitPercent = value;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tupgradeLevel.passiveAilment = value;\n\t\t\t\tupgradeLevel.passiveElement = value;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tupgradeLevel.description = '+' + value;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { AmmoCapacitiesModel } from '../models/ammo-capacities.model';\nimport { CalculationVariableModel } from '../models/calculation-variable.model';\nimport { ExtraDataModel } from '../models/extra-data.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { SharpnessBarModel } from '../models/sharpness-bar.model';\nimport { StatDetailModel } from '../models/stat-detail.model';\nimport { StatsModel } from '../models/stats.model';\nimport { AttackType } from '../types/attack.type';\n\n@Injectable()\nexport class CalculationService {\n\tpublic attackCalcsUpdated$ = new Subject<StatDetailModel[]>();\n\tpublic defenseCalcsUpdated$ = new Subject<StatDetailModel[]>();\n\tpublic ammoUpdated$ = new Subject<AmmoCapacitiesModel>();\n\tpublic kinsectUpdated$ = new Subject<KinsectModel>();\n\tpublic sharpnessUpdated$ = new Subject<SharpnessBarModel>();\n\tpublic extraDataUpdated$ = new Subject<ExtraDataModel>();\n\n\tattackCalcs = new Array<StatDetailModel>();\n\tdefenseCalcs = new Array<StatDetailModel>();\n\tsharpnessBar = new SharpnessBarModel;\n\textraData = new ExtraDataModel;\n\taffinityTotal = 0;\n\n\tconstructor() {\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Defense',\n\t\t\tvalue: '',\n\t\t\ticon: 'defense'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Health',\n\t\t\tvalue: '100',\n\t\t\ticon: 'health'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Stamina',\n\t\t\tvalue: '100',\n\t\t\ticon: 'stamina'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Fire Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'fire'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Water Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'water'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Thunder Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'thunder'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Ice Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'ice'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Dragon Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'dragon'\n\t\t});\n\t}\n\n\tupdateCalcs(stats: StatsModel) {\n\t\tthis.buildAttackCalcs(stats);\n\t\tthis.buildDefenseCalcs(stats);\n\t\tthis.buildAmmoCapacities(stats);\n\t\tthis.buildKinsect(stats);\n\t\tthis.getSharpnessBar(stats);\n\t\tthis.getExtraData(stats);\n\n\t\tthis.attackCalcsUpdated$.next(this.attackCalcs);\n\t\tthis.defenseCalcsUpdated$.next(this.defenseCalcs);\n\n\t\tthis.ammoUpdated$.next(stats.ammoCapacitiesUp);\n\t\tthis.kinsectUpdated$.next(stats.kinsect);\n\t\tthis.sharpnessUpdated$.next(this.sharpnessBar);\n\t\tthis.extraDataUpdated$.next(this.extraData);\n\t}\n\n\tprivate buildAttackCalcs(stats: StatsModel) {\n\t\tthis.attackCalcs = [];\n\n\t\tthis.attackCalcs.push(this.getAttack(stats));\n\t\tif (stats.activeAttack || stats.effectivePhysicalSharpnessModifier) {\n\t\t\tthis.attackCalcs.push(this.getAttackPotential(stats));\n\t\t}\n\n\t\tthis.attackCalcs.push(this.getAffinity(stats));\n\t\tif (stats.activeAffinity || stats.weakPointAffinity) {\n\t\t\tthis.affinityTotal = stats.affinity + stats.passiveAffinity + stats.weakPointAffinity + stats.activeAffinity;\n\t\t\tthis.attackCalcs.push(this.getAffinityPotential(stats));\n\t\t}\n\n\t\tthis.attackCalcs.push(this.getCriticalBoost(stats));\n\n\t\tif (stats.ailment) {\n\t\t\tconst ailmentCalc = this.getAilment(stats);\n\t\t\t// this.attackCalcs.push(ailmentCalc);\n\t\t\tthis.attackCalcs.push(this.getAilmentAttack(stats, ailmentCalc));\n\t\t}\n\n\t\tif (stats.element) {\n\t\t\tconst elementCalc = this.getElement(stats);\n\t\t\t// this.attackCalcs.push(elementCalc);\n\t\t\tthis.attackCalcs.push(this.getElementAttack(stats, elementCalc));\n\t\t}\n\n\t\tif (stats.element) {\n\t\t\tif (stats.trueCriticalElement) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Elemental Critical Boost',\n\t\t\t\t\tvalue: stats.trueCritElementModifier * 100 + '%',\n\t\t\t\t\ticon: stats.element.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t} else if (stats.criticalElement) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Elemental Critical Boost',\n\t\t\t\t\tvalue: stats.critElementModifier * 100 + '%',\n\t\t\t\t\ticon: stats.element.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (stats.ailment) {\n\t\t\tif (stats.trueCriticalStatus) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Ailment Critical Boost',\n\t\t\t\t\tvalue: stats.trueCritStatusModifier * 100 + '%',\n\t\t\t\t\ticon: stats.ailment.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t} else if (stats.criticalStatus) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Ailment Critical Boost',\n\t\t\t\t\tvalue: stats.critStatusModifier * 100 + '%',\n\t\t\t\t\ticon: stats.ailment.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (stats.elderseal) {\n\t\t\tthis.attackCalcs.push(this.getElderseal(stats));\n\t\t}\n\n\t\tif (stats.healOnHitPercent) {\n\t\t\tthis.attackCalcs.push({\n\t\t\t\tname: 'Heal on Hit',\n\t\t\t\tvalue: stats.healOnHitPercent + '%'\n\t\t\t});\n\t\t}\n\t\tif (stats.hastenRecovery != null) {\n\t\t\tthis.attackCalcs.push({\n\t\t\t\tname: 'Heal every 5 Hits',\n\t\t\t\tvalue: stats.hastenRecovery + 'HP'\n\t\t\t});\n\t\t}\n\t\tif (stats.frostcraft != null) {\n\t\t\tthis.attackCalcs.push({\n\t\t\t\tname: 'Frostcraft',\n\t\t\t\tvalue: `+[${stats.frostcraft.join(', ')}]% ATK`\n\t\t\t});\n\t\t}\n\n\t\tthis.attackCalcs.push(this.getRawAttack(stats));\n\t\tthis.attackCalcs.push(this.getRawAttackCritical(stats));\n\t\tif (this.affinityTotal < 100) {\n\t\t\tthis.attackCalcs.push(this.getRawAttackAverage(stats));\n\t\t}\n\t}\n\n\tprivate getAttack(stats: StatsModel): StatDetailModel {\n\t\tconst attackCalc: StatDetailModel = {\n\t\t\tname: 'Attack',\n\t\t\tvalue: stats.totalAttack,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Base Raw Attack',\n\t\t\t\t\tname: 'attack',\n\t\t\t\t\tvalue: Math.round(stats.attack / stats.weaponAttackModifier),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Upgrade Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Attack',\n\t\t\t\t\tname: 'passiveAttack',\n\t\t\t\t\tvalue: stats.passiveAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier,\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.elementless) {\n\t\t\tattackCalc.calculationVariables.push(this.getElementlessVariable(stats));\n\t\t\tattackCalc.calculationTemplate =\n\t\t\t\t`({attack} × {elementlessBoostPercent} + {upgrade}${stats.awakeningAttack ? ' + {awakening}' : ''} + {passiveAttack}) × {weaponModifier} ≈ ${stats.totalAttack}`;\n\t\t} else {\n\t\t\tattackCalc.calculationTemplate =\n\t\t\t\t`({attack} + {upgrade}${stats.awakeningAttack ? ' + {awakening}' : ''} + {passiveAttack}) × {weaponModifier} ≈ ${stats.totalAttack}`;\n\t\t}\n\n\t\tif (stats.awakeningAttack > 0) {\n\t\t\tattackCalc.calculationVariables.splice(2, 0, this.getAwakeningVariable(stats));\n\t\t}\n\n\t\treturn attackCalc;\n\t}\n\n\tprivate getAttackPotential(stats: StatsModel): StatDetailModel {\n\t\tconst attackPotentialCalc: StatDetailModel = {\n\t\t\tname: 'Attack Potential',\n\t\t\tvalue: stats.totalAttackPotential,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Base Raw Attack',\n\t\t\t\t\tname: 'attack',\n\t\t\t\t\tvalue: Math.round(stats.attack / stats.weaponAttackModifier),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Upgrade Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Attack',\n\t\t\t\t\tname: 'passiveAttack',\n\t\t\t\t\tvalue: stats.passiveAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Attack',\n\t\t\t\t\tname: 'activeAttack',\n\t\t\t\t\tvalue: stats.activeAttack,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier,\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.elementlessBoostPercent > 0 && stats.totalAilmentAttack == 0 && stats.totalElementAttack == 0) {\n\t\t\tattackPotentialCalc.calculationTemplate =\n\t\t\t\t(stats.activeAttackPercent > 0 ? `(` : ``)\n\t\t\t\t+ `({attack} × {elementlessBoostPercent}`\n\t\t\t\t+ ` + {upgrade}${stats.awakeningAttack ? ` + {awakening}` : ``}`\n\t\t\t\t+ (stats.activeAttackPercent > 0 ? `) × {activeAttackPercent}` : ``)\n\t\t\t\t+ ` + {passiveAttack} + {activeAttack})`\n\t\t\t\t+ `<br> × {weaponModifier} × {sharpnessModifier}`\n\t\t\t\t+ `<br>≈<br>${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier)}`;\n\t\t\tattackPotentialCalc.calculationVariables.push(this.getElementlessVariable(stats));\n\t\t} else {\n\t\t\tattackPotentialCalc.calculationTemplate =\n\t\t\t\t(stats.activeAttackPercent > 0 ? `(` : ``)\n\t\t\t\t+ `({attack}`\n\t\t\t\t+ ` + {upgrade}${stats.awakeningAttack ? ` + {awakening}` : ``}`\n\t\t\t\t+ (stats.activeAttackPercent > 0 ? `) × {activeAttackPercent}` : ``)\n\t\t\t\t+ ` + {passiveAttack} + {activeAttack})`\n\t\t\t\t+ ` × {weaponModifier} × {sharpnessModifier}`\n\t\t\t\t+ `<br>≈<br>${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier)}`;\n\t\t}\n\n\t\tif (stats.activeAttackPercent > 0) {\n\t\t\tattackPotentialCalc.calculationVariables.splice(4, 0, {\n\t\t\t\tdisplayName: 'Active Attack Percent',\n\t\t\t\tname: 'activeAttackPercent',\n\t\t\t\tvalue: stats.activeAttackPercent / 100,\n\t\t\t\tcolorClass: 'red'\n\t\t\t});\n\t\t}\n\n\t\tif (stats.awakeningAttack > 0) {\n\t\t\tattackPotentialCalc.calculationVariables.splice(2, 0, this.getAwakeningVariable(stats));\n\t\t}\n\n\t\treturn attackPotentialCalc;\n\t}\n\n\tprivate getElementlessVariable(stats: StatsModel): CalculationVariableModel {\n\t\treturn {\n\t\t\tdisplayName: 'Elementless Boost Modifier',\n\t\t\tname: 'elementlessBoostPercent',\n\t\t\tvalue: (1 + stats.elementlessBoostPercent / 100).toFixed(2),\n\t\t\tcolorClass: 'kakhi'\n\t\t};\n\t}\n\n\tprivate getAwakeningVariable(stats: StatsModel): CalculationVariableModel {\n\t\treturn {\n\t\t\tdisplayName: 'Awakening Attack',\n\t\t\tname: 'awakening',\n\t\t\tvalue: stats.awakeningAttack,\n\t\t\tcolorClass: 'green'\n\t\t};\n\t}\n\n\tprivate getSharpnessBar(stats: StatsModel) {\n\t\tif (stats.sharpnessLevelsBar && !isNaN(stats.sharpnessLevelsBar[0])) {\n\t\t\tthis.sharpnessBar.levels = JSON.parse(JSON.stringify(stats.sharpnessLevelsBar));\n\t\t\tthis.sharpnessBar.handicraftLevel = (stats.passiveSharpness / 10);\n\t\t\tthis.sharpnessBar.sharpnessDataNeeded = stats.sharpnessDataNeeded;\n\t\t} else {\n\t\t\tthis.sharpnessBar.levels = null;\n\t\t}\n\t}\n\n\tprivate getExtraData(stats: StatsModel) {\n\t\tthis.extraData = stats.extraData;\n\t}\n\n\tprivate getAffinity(stats: StatsModel): StatDetailModel {\n\t\tconst affinityValue = `${stats.affinity + stats.passiveAffinity}%`;\n\t\tconst affinityCalc: StatDetailModel = {\n\t\t\tname: 'Affinity',\n\t\t\tvalue: affinityValue,\n\t\t\tcalculationTemplate: `{affinity} + {passiveAffinity} = ${affinityValue}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Affinity',\n\t\t\t\t\tname: 'affinity',\n\t\t\t\t\tvalue: stats.affinity,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Affinity',\n\t\t\t\t\tname: 'passiveAffinity',\n\t\t\t\t\tvalue: stats.passiveAffinity,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn affinityCalc;\n\t}\n\n\tprivate getAffinityPotential(stats: StatsModel): StatDetailModel {\n\t\tconst value = `${this.affinityTotal}%`;\n\t\tconst affinityPotentialCalc: StatDetailModel = {\n\t\t\tname: 'Affinity Potential',\n\t\t\tvalue: value,\n\t\t\tcalculationTemplate: `Base: {base} + {passive} + {weakPoint} + {active} = ${value}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Affinity',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: stats.affinity,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Affinity',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.passiveAffinity,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weak Point Affinity',\n\t\t\t\t\tname: 'weakPoint',\n\t\t\t\t\tvalue: stats.weakPointAffinity,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Affinity',\n\t\t\t\t\tname: 'active',\n\t\t\t\t\tvalue: stats.activeAffinity,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn affinityPotentialCalc;\n\t}\n\n\tprivate getCriticalBoost(stats: StatsModel): StatDetailModel {\n\t\tconst critBoostValue = `${125 + stats.passiveCriticalBoostPercent}%`;\n\t\tconst critBoostCalc: StatDetailModel = {\n\t\t\tname: 'Critical Boost',\n\t\t\tvalue: critBoostValue,\n\t\t\tcalculationTemplate: `{base} + {passive} = ${critBoostValue}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Base Critical Boost',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: '125',\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Critical Boost',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.passiveCriticalBoostPercent,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn critBoostCalc;\n\t}\n\n\tprivate getAilment(stats: StatsModel): StatDetailModel {\n\t\tconst ailmentCalc: StatDetailModel = {\n\t\t\tname: 'Ailment',\n\t\t\tvalue: stats.ailment,\n\t\t\tinfo: []\n\t\t};\n\n\t\tif (stats.ailmentCapped) {\n\t\t\tailmentCalc.info.push('Ailment attack is capped.');\n\t\t\tailmentCalc.color = 'yellow';\n\t\t}\n\n\t\tif (stats.ailmentHidden && stats.elementAttackMultiplier < 1) {\n\t\t\tailmentCalc.info.push('Effectiveness reduced due to hidden ailment.');\n\t\t\tailmentCalc.color = !stats.elementAttackMultiplier ? 'gray' : 'lightgray';\n\t\t}\n\n\t\treturn ailmentCalc;\n\t}\n\n\tprivate getAilmentAttack(stats: StatsModel, ailmentCalc: StatDetailModel): StatDetailModel {\n\t\tlet value = `${Math.round(stats.totalAilmentAttack)}`;\n\t\tif (stats.totalAilmentAttack != stats.totalAilmentAttackPotential) {\n\t\t\tvalue = `${stats.totalAilmentAttack} | ${stats.totalAilmentAttackPotential}`;\n\t\t}\n\t\tconst ailmentAttackCalc: StatDetailModel = {\n\t\t\tname: 'Ailment Attack',\n\t\t\tvalue: value,\n\t\t\tvalueColor: ailmentCalc.color,\n\t\t\ticon: stats.ailment.toLowerCase() + (stats.effectiveAilmentAttack == 0 ? '-gray' : ''),\n\t\t\tcolor: ailmentCalc.color,\n\t\t\tinfo: ailmentCalc.info,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Ailment Attack',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: stats.baseAilmentAttack - stats.upgradeAilmentAttack - stats.awakeningAilmentAttack,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Upgrade Ailment Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeAilmentAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Awakening Ailment Attack',\n\t\t\t\t\tname: 'awakening',\n\t\t\t\t\tvalue: stats.awakeningAilmentAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Ailment Buildup Percent',\n\t\t\t\t\tname: 'passiveBuildup',\n\t\t\t\t\tvalue: stats.effectivePassiveAilmentBuildupPercent / 100,\n\t\t\t\t\tcolorClass: 'oyellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Ailment Attack',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.effectivePassiveAilmentAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Ailment Attack',\n\t\t\t\t\tname: 'active',\n\t\t\t\t\tvalue: stats.activeAilmentAttack,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Ailment Buildup Percent',\n\t\t\t\t\tname: 'activeBuildup',\n\t\t\t\t\tvalue: stats.activeAilmentAttackBuildUpPercent / 100,\n\t\t\t\t\tcolorClass: 'red'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailmentHidden) {\n\t\t\tailmentAttackCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Hidden Ailment Multiplier',\n\t\t\t\tname: 'multiplier',\n\t\t\t\tvalue: stats.elementAttackMultiplier,\n\t\t\t\tcolorClass: 'kakhi'\n\t\t\t});\n\n\t\t\tif (stats.elementAttackMultiplier) {\n\t\t\t\tailmentAttackCalc.calculationTemplate =\n\t\t\t\t\t`(({base} + {upgrade} + {awakening}) × {multiplier} (1 + {passiveBuildup} + {activeBuildup}) + {passive} + {active} ≈ ${stats.totalAilmentAttackPotential}`;\n\t\t\t} else {\n\t\t\t\tailmentAttackCalc.calculationTemplate =\n\t\t\t\t\t`(({base} + {upgrade} + {awakening}) × (1 + {passiveBuildup} + {activeBuildup}) + {passive} + {active}) × {multiplier} ≈ ${stats.totalAilmentAttackPotential}`;\n\t\t\t}\n\t\t} else {\n\t\t\tailmentAttackCalc.calculationTemplate =\n\t\t\t\t`({base} + {upgrade} + {awakening}) × (1 + {passiveBuildup} + {activeBuildup}) + {passive} + {active} ≈ ${stats.totalAilmentAttackPotential}`;\n\t\t}\n\n\t\treturn ailmentAttackCalc;\n\t}\n\n\tprivate getElement(stats: StatsModel): StatDetailModel {\n\t\tconst elementCalc: StatDetailModel = {\n\t\t\tname: 'Element',\n\t\t\tvalue: stats.element,\n\t\t\tinfo: []\n\t\t};\n\n\t\tif (stats.elementCapped) {\n\t\t\telementCalc.info.push('Element attack is capped.');\n\t\t\telementCalc.color = 'yellow';\n\t\t}\n\n\t\tif (stats.elementHidden && stats.elementAttackMultiplier < 1) {\n\t\t\telementCalc.info.push('Effectiveness reduced due to hidden element.');\n\t\t\telementCalc.color = !stats.elementAttackMultiplier ? 'gray' : 'lightgray';\n\t\t}\n\n\t\treturn elementCalc;\n\t}\n\n\tprivate getElementAttack(stats: StatsModel, elementCalc: StatDetailModel): StatDetailModel {\n\t\tlet value = `${Math.round(stats.totalElementAttack)}`;\n\t\tif (stats.totalElementAttack != stats.totalElementAttackPotential) {\n\t\t\tvalue = `${stats.totalElementAttack} | ${stats.totalElementAttackPotential}`;\n\t\t}\n\t\tconst elementAttackCalc: StatDetailModel = {\n\t\t\tname: 'Elment Attack',\n\t\t\tvalue: value,\n\t\t\tvalueColor: elementCalc.color,\n\t\t\ticon: stats.element.toLowerCase() + (stats.effectiveElementAttack == 0 ? '-gray' : ''),\n\t\t\tcolor: elementCalc.color,\n\t\t\tinfo: elementCalc.info,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Element Attack',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: stats.baseElementAttack - stats.upgradeElementAttack - stats.awakeningElementAttack,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Upgrade Element Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeElementAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Awakening Element Attack',\n\t\t\t\t\tname: 'awakening',\n\t\t\t\t\tvalue: stats.awakeningElementAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Element Attack',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.effectivePassiveElementAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Element Attack',\n\t\t\t\t\tname: 'active',\n\t\t\t\t\tvalue: stats.activeElementAttack,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.elementHidden) {\n\t\t\telementAttackCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Hidden Element Multiplier',\n\t\t\t\tname: 'multiplier',\n\t\t\t\tvalue: stats.elementAttackMultiplier,\n\t\t\t\tcolorClass: 'kakhi'\n\t\t\t});\n\n\t\t\tif (stats.elementAttackMultiplier) {\n\t\t\t\telementAttackCalc.calculationTemplate = `({base} + {upgrade} + {awakening}) × {multiplier} + {passive} + {active} ≈ ${stats.totalElementAttackPotential}`;\n\t\t\t} else {\n\t\t\t\telementAttackCalc.calculationTemplate = `({base + {upgrade} + {awakening}} + {passive} + {active}) × {multiplier} ≈ ${stats.totalElementAttackPotential}`;\n\t\t\t}\n\t\t} else {\n\t\t\telementAttackCalc.calculationTemplate = `{base} + {upgrade} + {awakening} + {passive} + {active} = ${stats.totalElementAttackPotential}`;\n\t\t}\n\n\t\treturn elementAttackCalc;\n\t}\n\n\tprivate getElderseal(stats: StatsModel): StatDetailModel {\n\t\treturn {\n\t\t\tname: 'Elderseal',\n\t\t\tvalue: stats.elderseal\n\t\t};\n\t}\n\n\tprivate getRawAttack(stats: StatsModel): StatDetailModel {\n\t\tconst affinityPotentialTotal = Math.min(this.affinityTotal, 100);\n\n\t\tconst auxDivider = (stats.ailment && stats.element) ? 2 : 1;\n\n\t\tconst trueElement =\n\t\t\tthis.getElementAverage(\n\t\t\t\tstats.totalElementAttackPotential, // Attack\n\t\t\t\t0, // Affinity\n\t\t\t\t0, // Critical Modifier\n\t\t\t\tstats.effectiveElementalSharpnessModifier, // Weaponn Modifier\n\t\t\t\tauxDivider // Divider\n\t\t\t);\n\n\t\tconst trueAilment =\n\t\t\tthis.getAilmentAverage(\n\t\t\t\tstats.totalAilmentAttackPotential, // Attack\n\t\t\t\t0, // Affinity\n\t\t\t\t0, // Critical Modifier\n\t\t\t\tstats.effectiveElementalSharpnessModifier, // Weapon Modifier\n\t\t\t\tauxDivider // Divider\n\t\t\t);\n\n\t\tconst rawAttackAveragePotentialCalc: StatDetailModel = {\n\t\t\tname: 'True Raw',\n\t\t\tvalue: Number.isInteger(stats.totalAttackPotential) ?\n\t\t\t\t`${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`\n\t\t\t\t: 0,\n\t\t\textra1: stats.ailment && trueAilment ? trueAilment : null,\n\t\t\tclass1: stats.ailment && trueAilment ? stats.ailment : null,\n\t\t\textra2: stats.element && trueElement ? trueElement : null,\n\t\t\tclass2: stats.element && trueElement ? stats.element : null,\n\t\t\tcalculationTemplate:\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalAttackPotential} × {sharpnessModifier} ÷ {weaponModifier} ≈ ${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Attack Potential',\n\t\t\t\t\tname: 'totalAttackPotential',\n\t\t\t\t\tvalue: stats.totalAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Affinity Potential',\n\t\t\t\t\tname: 'totalAffinityPotential',\n\t\t\t\t\tvalue: (affinityPotentialTotal / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier.toFixed(2),\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailment && trueAilment) {\n\t\t\trawAttackAveragePotentialCalc.extra1 = trueAilment;\n\t\t\trawAttackAveragePotentialCalc.class1 = stats.ailment;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalAilment} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">30</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueAilment}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailement Attack',\n\t\t\t\t\tname: 'totalAilment',\n\t\t\t\t\tvalue: stats.totalAilmentAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.extra2 = trueElement;\n\t\t\trawAttackAveragePotentialCalc.class2 = stats.element;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalElement} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">10</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueElement}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Attack',\n\t\t\t\t\tname: 'totalElement',\n\t\t\t\t\tvalue: stats.totalElementAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (stats.ailment && trueAilment || stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Element Sharpness Modifier',\n\t\t\t\tname: 'elementSharpnessModifier',\n\t\t\t\tvalue: stats.effectiveElementalSharpnessModifier.toFixed(2),\n\t\t\t\tcolorClass: 'purple'\n\t\t\t});\n\t\t}\n\n\t\treturn rawAttackAveragePotentialCalc;\n\t}\n\n\tprivate getRawAttackCritical(stats: StatsModel): StatDetailModel {\n\t\tconst affinityPotentialTotal = Math.min(this.affinityTotal, 100);\n\n\t\tconst auxDivider = (stats.ailment && stats.element) ? 2 : 1;\n\n\t\tlet elementCriticalBoost = 1;\n\t\tif (stats.trueCriticalElement) {\n\t\t\telementCriticalBoost = stats.trueCritElementModifier;\n\t\t} else if (stats.criticalElement) {\n\t\t\telementCriticalBoost = stats.critElementModifier;\n\t\t}\n\t\tconst trueElement =\n\t\t\tthis.getElementAverage(\n\t\t\t\tstats.totalElementAttackPotential,\n\t\t\t\t100,\n\t\t\t\telementCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tlet ailmentCriticalBoost = 1;\n\t\tif (stats.trueCriticalStatus) {\n\t\t\tailmentCriticalBoost = stats.trueCritStatusModifier;\n\t\t} else if (stats.criticalStatus) {\n\t\t\tailmentCriticalBoost = stats.critStatusModifier;\n\t\t}\n\t\tconst trueAilment =\n\t\t\tthis.getAilmentAverage(\n\t\t\t\tstats.totalAilmentAttackPotential,\n\t\t\t\t100,\n\t\t\t\tailmentCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tconst rawAttackAveragePotentialCalc: StatDetailModel = {\n\t\t\tname: 'True Critical Raw',\n\t\t\tvalue: Number.isInteger(stats.totalAttackPotential) ?\n\t\t\t\t`${Math.round(stats.totalAttackPotential * (1.25 + stats.passiveCriticalBoostPercent / 100) * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`\n\t\t\t\t: 0,\n\t\t\textra1: stats.ailment && trueAilment ? trueAilment : null,\n\t\t\tclass1: stats.ailment && trueAilment ? stats.ailment : null,\n\t\t\textra2: stats.element && trueElement ? trueElement : null,\n\t\t\tclass2: stats.element && trueElement ? stats.element : null,\n\t\t\tcalculationTemplate:\n\t\t\t\t`<i class=\"fas fa-bullseye fa-xs\"></i> {totalAttackPotential} × {criticalBoost} × {sharpnessModifier} ÷ {weaponModifier} ≈ ${Math.round(stats.totalAttackPotential * (1.25 + stats.passiveCriticalBoostPercent / 100) * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Attack Potential',\n\t\t\t\t\tname: 'totalAttackPotential',\n\t\t\t\t\tvalue: stats.totalAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Affinity Potential',\n\t\t\t\t\tname: 'totalAffinityPotential',\n\t\t\t\t\tvalue: (affinityPotentialTotal / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Critical Boost',\n\t\t\t\t\tname: 'criticalBoost',\n\t\t\t\t\tvalue: ((stats.passiveCriticalBoostPercent + 125) / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier.toFixed(2),\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailment && trueAilment) {\n\t\t\trawAttackAveragePotentialCalc.extra1 = trueAilment;\n\t\t\trawAttackAveragePotentialCalc.class1 = stats.ailment;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalAilment} × {criticalAilmentBoost} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">30<span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueAilment}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailement Attack',\n\t\t\t\t\tname: 'totalAilment',\n\t\t\t\t\tvalue: stats.totalAilmentAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailment Critical Boost',\n\t\t\t\t\tname: 'criticalAilmentBoost',\n\t\t\t\t\tvalue: ailmentCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.extra2 = trueElement;\n\t\t\trawAttackAveragePotentialCalc.class2 = stats.element;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalElement} × {criticalElementBoost} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">10</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueElement}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Attack',\n\t\t\t\t\tname: 'totalElement',\n\t\t\t\t\tvalue: stats.totalElementAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Critical Boost',\n\t\t\t\t\tname: 'criticalElementBoost',\n\t\t\t\t\tvalue: elementCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (stats.ailment && trueAilment || stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Element Sharpness Modifier',\n\t\t\t\tname: 'elementSharpnessModifier',\n\t\t\t\tvalue: stats.effectiveElementalSharpnessModifier.toFixed(2),\n\t\t\t\tcolorClass: 'purple'\n\t\t\t});\n\t\t}\n\n\t\treturn rawAttackAveragePotentialCalc;\n\t}\n\n\tprivate getRawAttackAverage(stats: StatsModel): StatDetailModel {\n\t\tconst affinityPotentialTotal = Math.min(this.affinityTotal, 100);\n\t\tconst rawAttackAveragePotential =\n\t\t\tthis.getRawAverage(\n\t\t\t\tstats.totalAttackPotential,\n\t\t\t\taffinityPotentialTotal,\n\t\t\t\tstats.passiveCriticalBoostPercent,\n\t\t\t\tstats.weaponAttackModifier\n\t\t\t);\n\n\t\tconst auxDivider = (stats.ailment && stats.element) ? 2 : 1;\n\n\t\tlet elementCriticalBoost = 1;\n\t\tif (stats.trueCriticalElement) {\n\t\t\telementCriticalBoost = stats.trueCritElementModifier;\n\t\t} else if (stats.criticalElement) {\n\t\t\telementCriticalBoost = stats.critElementModifier;\n\t\t}\n\t\tconst trueElementPotential =\n\t\t\tthis.getElementAverage(\n\t\t\t\tstats.totalElementAttackPotential,\n\t\t\t\tMath.max(affinityPotentialTotal, 0),\n\t\t\t\telementCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tlet ailmentCriticalBoost = 1;\n\t\tif (stats.trueCriticalStatus) {\n\t\t\tailmentCriticalBoost = stats.trueCritStatusModifier;\n\t\t} else if (stats.criticalStatus) {\n\t\t\tailmentCriticalBoost = stats.critStatusModifier;\n\t\t}\n\t\tconst trueAilmentPotential =\n\t\t\tthis.getAilmentAverage(\n\t\t\t\tstats.totalAilmentAttackPotential,\n\t\t\t\tMath.max(affinityPotentialTotal, 0),\n\t\t\t\tailmentCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tconst rawAttackAveragePotentialCalc: StatDetailModel = {\n\t\t\tname: 'True Average Raw',\n\t\t\tvalue: Number.isInteger(rawAttackAveragePotential) ? Math.round(rawAttackAveragePotential * stats.effectivePhysicalSharpnessModifier) : 0,\n\t\t\tcalculationTemplate:\n\t\t\t\t`<i class=\"fas fa-bullseye fa-sm\"></i> ({totalAttackPotential} × {totalAffinityPotential} × {criticalBoost} + {totalAttackPotential} × (1 - {totalAffinityPotential}))`\n\t\t\t\t+ `<br>× {sharpnessModifier} ÷ {weaponModifier} ≈ ${rawAttackAveragePotential}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Attack Potential',\n\t\t\t\t\tname: 'totalAttackPotential',\n\t\t\t\t\tvalue: stats.totalAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Affinity Potential',\n\t\t\t\t\tname: 'totalAffinityPotential',\n\t\t\t\t\tvalue: (affinityPotentialTotal / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Critical Boost',\n\t\t\t\t\tname: 'criticalBoost',\n\t\t\t\t\tvalue: ((stats.passiveCriticalBoostPercent + 125) / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier.toFixed(2),\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailment && trueAilmentPotential) {\n\t\t\trawAttackAveragePotentialCalc.extra1 = trueAilmentPotential;\n\t\t\trawAttackAveragePotentialCalc.class1 = stats.ailment;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> ({totalAilmentPotential} × {totalAffinityPotential} × {criticalAilmentBoost} + {totalAilmentPotential} × (1 - {totalAffinityPotential}))`\n\t\t\t\t+ `<br> × {elementSharpnessModifier} ÷ <span class=\"ogreen\">30</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueAilmentPotential}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailement Attack Potential',\n\t\t\t\t\tname: 'totalAilmentPotential',\n\t\t\t\t\tvalue: stats.totalAilmentAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailment Critical Boost',\n\t\t\t\t\tname: 'criticalAilmentBoost',\n\t\t\t\t\tvalue: ailmentCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (stats.element && trueElementPotential) {\n\t\t\trawAttackAveragePotentialCalc.extra2 = trueElementPotential;\n\t\t\trawAttackAveragePotentialCalc.class2 = stats.element;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> ({totalElementPotential} × {totalAffinityPotential} × {criticalElementBoost} + {totalElementPotential} × (1 - {totalAffinityPotential}))`\n\t\t\t\t+ `<br> × {elementSharpnessModifier} ÷ <span class=\"ogreen\">10</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueElementPotential}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Attack Potential',\n\t\t\t\t\tname: 'totalElementPotential',\n\t\t\t\t\tvalue: stats.totalElementAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Critical Boost',\n\t\t\t\t\tname: 'criticalElementBoost',\n\t\t\t\t\tvalue: elementCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (stats.ailment && trueAilmentPotential || stats.element && trueElementPotential) {\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Element Sharpness Modifier',\n\t\t\t\tname: 'elementSharpnessModifier',\n\t\t\t\tvalue: stats.effectiveElementalSharpnessModifier.toFixed(2),\n\t\t\t\tcolorClass: 'purple'\n\t\t\t});\n\t\t}\n\n\t\treturn rawAttackAveragePotentialCalc;\n\t}\n\n\tprivate buildDefenseCalcs(stats: StatsModel) {\n\t\tlet defValue = '';\n\t\tfor (let i = 0; i < stats.defense.length; i++) {\n\t\t\tlet def = stats.defense[i];\n\t\t\tif (i == stats.defense.length - 1) {\n\t\t\t\tdef += 101;\n\t\t\t}\n\t\t\tdefValue += Math.round(def * (1 + stats.passiveDefensePercent / 100) + stats.passiveDefense + stats.activeDefense);\n\t\t\tif (i < stats.defense.length - 2) {\n\t\t\t\tdefValue += ' ➝ ';\n\t\t\t} else if (i < stats.defense.length - 1) {\n\t\t\t\tdefValue += ' ➟ ';\n\t\t\t}\n\t\t}\n\n\t\t// Defense [0]\n\t\tthis.defenseCalcs[0].value = defValue;\n\t\t// Health [1]\n\t\tif (stats.passiveHealth) {\n\t\t\tthis.defenseCalcs[1].value = 100 + stats.passiveHealth;\n\t\t}\n\t\t// Stamina [2]\n\t\tif (stats.passiveStamina) {\n\t\t\tthis.defenseCalcs[2].value = 100 + stats.passiveStamina;\n\t\t}\n\t\t// Fire [3]\n\t\tthis.defenseCalcs[3].value = stats.fireResist + stats.passiveFireResist;\n\t\t// Water [4]\n\t\tthis.defenseCalcs[4].value = stats.waterResist + stats.passiveWaterResist;\n\t\t// Thunder [5]\n\t\tthis.defenseCalcs[5].value = stats.thunderResist + stats.passiveThunderResist;\n\t\t// Ice [6]\n\t\tthis.defenseCalcs[6].value = stats.iceResist + stats.passiveIceResist;\n\t\t// Dragon [7]\n\t\tthis.defenseCalcs[7].value = stats.dragonResist + stats.passiveDragonResist;\n\t}\n\n\tprivate buildAmmoCapacities(stats: StatsModel) {\n\t\tif (stats.ammoCapacities) {\n\t\t\tstats.ammoCapacitiesUp = JSON.parse(JSON.stringify(stats.ammoCapacities));\n\t\t\tif (stats.ammoUp >= 1) {\n\t\t\t\tfor (const ammo of stats.ammoCapacitiesUp.ammo) {\n\t\t\t\t\tif (ammo.levels.length == 3) {\n\t\t\t\t\t\tif (ammo.name !== 'sticky' && ammo.name !== 'cluster') {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity >= 5 ? 2 : (ammo.levels[0].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity < 3 && ammo.levels[0].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (stats.ammoUp >= 2) {\n\t\t\t\tfor (const ammo of stats.ammoCapacitiesUp.ammo) {\n\t\t\t\t\tif (ammo.levels.length == 3) {\n\t\t\t\t\t\tif (ammo.name !== 'sticky' && ammo.name !== 'cluster') {\n\t\t\t\t\t\t\tammo.levels[1].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[1].capacity >= 5 ? 2 : (ammo.levels[1].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[1].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[1].capacity < 3 && ammo.levels[1].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (ammo.levels.length == 2) {\n\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t+= (ammo.levels[0].capacity >= 5 ? 2 : (ammo.levels[0].capacity > 0 ? 1 : 0));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (stats.ammoUp >= 3) {\n\t\t\t\tfor (const ammo of stats.ammoCapacitiesUp.ammo) {\n\t\t\t\t\tif (ammo.levels.length == 3) {\n\t\t\t\t\t\tif (ammo.name !== 'sticky' && ammo.name !== 'cluster') {\n\t\t\t\t\t\t\tammo.levels[2].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[2].capacity >= 5 ? 2 : (ammo.levels[2].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[2].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[2].capacity < 3 && ammo.levels[2].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (ammo.levels.length == 2) {\n\t\t\t\t\t\tammo.levels[1].capacity\n\t\t\t\t\t\t\t+= (ammo.levels[1].capacity >= 5 ? 2 : (ammo.levels[1].capacity > 0 ? 1 : 0));\n\t\t\t\t\t}\n\t\t\t\t\tif (ammo.levels.length == 1) {\n\t\t\t\t\t\tif (ammo.name == 'wyvern') {\n\t\t\t\t\t\t} else if (ammo.name !== 'dragon' && ammo.name !== 'slicing') {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity >= 5 ? 2 : (ammo.levels[0].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity < 3 && ammo.levels[0].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate buildKinsect(stats: StatsModel) {\n\t\tif (stats.kinsect) {\n\t\t\tif (stats.extraData) {\n\t\t\t\tswitch (stats.extraData.otherData[0].value) {\n\t\t\t\t\tcase 'Blunt':\n\t\t\t\t\t\tif (stats.kinsect.attackType == AttackType.Blunt) {\n\t\t\t\t\t\t\t// stats.kinsect.power += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Sever':\n\t\t\t\t\t\tif (stats.kinsect.attackType == AttackType.Sever) {\n\t\t\t\t\t\t\t// stats.kinsect.power += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Element':\n\t\t\t\t\t\tif (stats.kinsect.element) {\n\t\t\t\t\t\t\t// stats.kinsect.powerElement += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Health':\n\t\t\t\t\t\t// stats.kinsect.heal += 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Speed':\n\t\t\t\t\t\t// stats.kinsect.speed += 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Stamina':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getRawAverage(attack: number, affinity: number, criticalBoostPercent: number, weaponAttackModifier: number): number {\n\t\tconst attackWithAffinity = attack * (Math.min(affinity, 100) / 100) * (Math.min(affinity, 100) > 0 ? (criticalBoostPercent + 125) / 100 : 1.25);\n\t\tconst attackWithoutAffinity = attack * (1 - Math.min(affinity, 100) / 100);\n\t\treturn Math.round((attackWithAffinity + attackWithoutAffinity) / weaponAttackModifier);\n\t}\n\n\tprivate getAilmentAverage(attack: number, affinity: number, criticalModifier: number, sharpnessModifier: number, auxDivider: number): number {\n\t\tconst ailmentWithAffinity = attack * (Math.min(affinity, 100) / 100) * (Math.min(affinity, 100) > 0 ? criticalModifier : 1);\n\t\tconst ailmentWithoutAffinity = attack * (1 - Math.min(affinity, 100) / 100);\n\t\treturn Math.round((ailmentWithAffinity + ailmentWithoutAffinity) * sharpnessModifier / 30 / (auxDivider ? auxDivider : 1));\n\t}\n\n\tprivate getElementAverage(attack: number, affinity: number, criticalModifier: number, sharpnessModifier: number, auxDivider: number): number {\n\t\tconst elementWithAffinity = attack * (Math.min(affinity, 100) / 100) * criticalModifier;\n\t\tconst elementWithoutAffinity = attack * (1 - Math.min(affinity, 100) / 100);\n\t\treturn Math.round((elementWithAffinity + elementWithoutAffinity) * sharpnessModifier / 10 / (auxDivider ? auxDivider : 1));\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { AmmoCapacitiesModel } from '../models/ammo-capacities.model';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningModel } from '../models/awakening.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { MelodiesDetailModel, MelodiesModel } from '../models/melodies.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SetBonusModel } from '../models/set-bonus.model';\nimport { SharpnessModifierModel } from '../models/sharpness-modifier.model';\nimport { SkillReferenceModel } from '../models/skill-reference.model';\nimport { SkillModel } from '../models/skill.model';\nimport { ToolModel } from '../models/tool.model';\nimport { UpgradeModel } from '../models/upgrade.model';\nimport { WeaponModifierModel } from '../models/weapon-modifier.model';\nimport { AppDataProvider } from '../providers/app-data.provider';\nimport { AilmentType } from '../types/ailment.type';\nimport { DamageType } from '../types/damage.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\n\n@Injectable()\nexport class DataService {\n\tconstructor(\n\t\tprivate appDataProvider: AppDataProvider\n\t) { }\n\n\tgetWeapons(weaponType?: WeaponType): ItemModel[] {\n\t\tlet result = new Array<ItemModel>();\n\t\tif (weaponType) {\n\t\t\tresult = this.appDataProvider.appData.weapons.filter(w => w.weaponType == weaponType);\n\t\t} else {\n\t\t\tresult = this.appDataProvider.appData.weapons;\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetWeapon(id: number): ItemModel {\n\t\tconst weapon: ItemModel = _.find(this.appDataProvider.appData.weapons, w => w.id === id);\n\t\tif (weapon.weaponType == WeaponType.LightBowgun || weapon.weaponType == WeaponType.HeavyBowgun) {\n\t\t\tweapon.ammoCapacities = this.getAmmoCapacities(weapon.id);\n\t\t} else if (weapon.weaponType == WeaponType.HuntingHorn && weapon.otherData) {\n\t\t\tweapon.melodies = this.getMelodies(weapon.otherData.map(item => item.value).join(';'));\n\t\t}\n\t\treturn weapon;\n\t}\n\n\tgetArmors(armorType?: ItemType): ItemModel[] {\n\t\tlet result = new Array<ItemModel>();\n\t\tif (armorType) {\n\t\t\tresult = this.appDataProvider.appData.armors.filter(armor => armor.itemType);\n\t\t} else {\n\t\t\tresult = this.appDataProvider.appData.armors;\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetArmor(id: number): ItemModel {\n\t\treturn _.find(this.appDataProvider.appData.armors, armor => armor.id === id);\n\t}\n\n\tgetCharm(id: number): ItemModel {\n\t\treturn _.find(this.appDataProvider.appData.charms, charm => charm.id === id);\n\t}\n\n\tgetTool(id: number, type: ItemType): ItemModel {\n\t\tconst item = _.find(this.appDataProvider.appData.tools, tool => tool.id === id);\n\t\titem.itemType = type;\n\t\treturn item;\n\t}\n\n\tgetArmorByType(type: ItemType): ItemModel[] {\n\t\treturn _.filter(this.appDataProvider.appData.armors, armor => armor.itemType === type);\n\t}\n\n\tgetCharms(): ItemModel[] {\n\t\treturn this.appDataProvider.appData.charms;\n\t}\n\n\tgetTools(type: ItemType): ToolModel[] {\n\t\tconst items = this.appDataProvider.appData.tools.map(x => Object.assign({}, x));\n\t\t_.each(items, tool => {\n\t\t\ttool.itemType = type;\n\t\t});\n\t\treturn items;\n\t}\n\n\tgetDecorations(level?: number): DecorationModel[] {\n\t\tlet result = new Array<DecorationModel>();\n\t\tif (level) {\n\t\t\tresult = this.appDataProvider.appData.decorations.filter(d => d.level <= level);\n\t\t} else {\n\t\t\tresult = this.appDataProvider.appData.decorations;\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetSetBonuses(): SetBonusModel[] {\n\t\treturn this.appDataProvider.appData.setBonuses.filter(setBonus => setBonus.buildId);\n\t}\n\n\tgetSetBonus(id: string): SetBonusModel {\n\t\treturn _.find(this.appDataProvider.appData.setBonuses, setBonus => setBonus.id === id);\n\t}\n\n\tgetSetBonusByBuildId(buildId: number): SetBonusModel {\n\t\treturn _.find(this.appDataProvider.appData.setBonuses, setBonus => setBonus.buildId === buildId);\n\t}\n\n\tgetSkill(id: string): SkillModel {\n\t\treturn _.find(this.appDataProvider.appData.skills, skill => skill.id === id);\n\t}\n\n\tgetSkills(itemSkills: SkillReferenceModel[]): SkillModel[] {\n\t\treturn _.filter(this.appDataProvider.appData.skills, skill => {\n\t\t\treturn _.some(itemSkills, itemSkill => skill.id == itemSkill.id);\n\t\t});\n\t}\n\n\tgetWeaponModifier(weaponType: WeaponType): WeaponModifierModel {\n\t\treturn _.find(this.appDataProvider.appData.weaponModifiers, (mod: WeaponModifierModel) => {\n\t\t\treturn mod.type == weaponType;\n\t\t});\n\t}\n\n\tgetSharpnessModifier(damageType: DamageType, colorIndex: number): SharpnessModifierModel {\n\t\treturn _.find(this.appDataProvider.appData.sharpnessModifiers, mod => {\n\t\t\treturn mod.damageType == damageType && mod.colorIndex == colorIndex;\n\t\t});\n\t}\n\n\tgetDecoration(id: number): DecorationModel {\n\t\treturn _.find(this.appDataProvider.appData.decorations, decoration => decoration.id == id);\n\t}\n\n\tgetAugmentations(): AugmentationModel[] {\n\t\treturn this.appDataProvider.appData.augmentations;\n\t}\n\n\tgetAugmentation(id: number): AugmentationModel {\n\t\treturn _.find(this.appDataProvider.appData.augmentations, augmentation => augmentation.id == id);\n\t}\n\n\tgetUpgrades(): UpgradeModel[] {\n\t\treturn this.appDataProvider.appData.upgrades;\n\t}\n\n\tgetAwakenings(): AwakeningModel[] {\n\t\treturn this.appDataProvider.appData.awakenings;\n\t}\n\tgetAwakening(id: number): AwakeningModel {\n\t\treturn _.find(this.appDataProvider.appData.awakenings, awakening => awakening.id == id);\n\t}\n\n\tgetSafiElementAttack(weaponIndex: number): number {\n\t\tlet elementAttack = 0;\n\t\tconst elementAwakening: AwakeningModel = this.appDataProvider.appData.awakenings.find(x => x.id == 6);\n\t\telementAttack = elementAwakening.safiElements[weaponIndex];\n\t\treturn elementAttack;\n\t}\n\n\tgetSafiAilmentAttack(weaponIndex: number, ailmentType: number): number {\n\t\tlet ailmentAttack = 0;\n\t\tconst ailmentAwakening = this.appDataProvider.appData.awakenings.find(x => x.id == 5);\n\t\tailmentAttack = ailmentAwakening.safiAilments[weaponIndex][ailmentType];\n\t\treturn ailmentAttack;\n\t}\n\n\tgetSafiElementName(element: ElementType): string {\n\t\tlet elementName = '';\n\t\tswitch (element) {\n\t\t\tcase ElementType.Fire:\n\t\t\t\telementName = 'Hell';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Water:\n\t\t\t\telementName = 'Aqua';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Thunder:\n\t\t\t\telementName = 'Bolt';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Ice:\n\t\t\t\telementName = 'Frost';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Dragon:\n\t\t\t\telementName = 'Drak';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn elementName;\n\t}\n\n\tgetSafiAilmentName(ailment: AilmentType): string {\n\t\tlet ailmentName = '';\n\t\tswitch (ailment) {\n\t\t\tcase AilmentType.Paralysis:\n\t\t\t\tailmentName = 'Bind';\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Sleep:\n\t\t\t\tailmentName = 'Dream';\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Poison:\n\t\t\t\tailmentName = 'Venom';\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Blast:\n\t\t\t\tailmentName = 'Shatter';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn ailmentName;\n\t}\n\n\tgetSafiName(weaponType: WeaponType): string {\n\t\tlet name = '';\n\t\tswitch (weaponType) {\n\t\t\tcase WeaponType.GreatSword:\n\t\t\t\tname = 'splitter';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.LongSword:\n\t\t\t\tname = 'blade';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.SwordAndShield:\n\t\t\t\tname = 'fang';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.DualBlades:\n\t\t\t\tname = 'claws';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Hammer:\n\t\t\t\tname = 'crusher';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.HuntingHorn:\n\t\t\t\tname = 'horn';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Lance:\n\t\t\t\tname = 'snout';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Gunlance:\n\t\t\t\tname = 'buster';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.SwitchAxe:\n\t\t\t\tname = 'axe';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.ChargeBlade:\n\t\t\t\tname = 'shield';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\tname = 'spear';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\tname = 'shot';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\tname = 'cannon';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Bow:\n\t\t\t\tname = 'bow';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn name;\n\t}\n\n\tgetSafiWeaponName(weaponType: WeaponType, weaponElement: ElementType, weaponAilment: AilmentType): string {\n\t\tlet weaponName = 'Safi\\'s ';\n\n\t\tconst safiName = this.getSafiName(weaponType);\n\t\tlet elementName = '';\n\n\t\tif (weaponElement != ElementType.None) {\n\t\t\telementName = this.getSafiElementName(weaponElement);\n\t\t}\n\n\t\tlet ailmentName = '';\n\n\t\tif (weaponAilment != AilmentType.None) {\n\t\t\tailmentName = this.getSafiAilmentName(weaponAilment);\n\t\t}\n\n\t\tif (elementName != '' || ailmentName != '') {\n\t\t\tif (ailmentName == '') {\n\t\t\t\tweaponName += elementName + safiName;\n\t\t\t} else if (elementName == '') {\n\t\t\t\tweaponName += ailmentName + safiName;\n\t\t\t} else {\n\t\t\t\tweaponName += elementName + safiName + '/' + ailmentName + safiName;\n\t\t\t}\n\t\t} else {\n\t\t\tweaponName += safiName;\n\t\t}\n\t\treturn weaponName;\n\t}\n\n\tgetModifications(): ModificationModel[] {\n\t\treturn this.appDataProvider.appData.modifications;\n\t}\n\n\tgetModification(id: number): ModificationModel {\n\t\treturn _.find(this.appDataProvider.appData.modifications, modification => modification.id == id);\n\t}\n\n\tgetKinsects(): KinsectModel[] {\n\t\treturn this.appDataProvider.appData.kinsects;\n\t}\n\n\tgetKinsect(id: number): KinsectModel {\n\t\treturn _.find(this.appDataProvider.appData.kinsects, kinsect => kinsect.id == id);\n\t}\n\n\tgetWeaponTypeName(weaponType: WeaponType): string {\n\t\tswitch (weaponType) {\n\t\t\tcase WeaponType.ChargeBlade:\n\t\t\t\treturn 'Charge Blade';\n\t\t\tcase WeaponType.DualBlades:\n\t\t\t\treturn 'Dual Blades';\n\t\t\tcase WeaponType.GreatSword:\n\t\t\t\treturn 'Great Sword';\n\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\treturn 'Heavy Bowgun';\n\t\t\tcase WeaponType.HuntingHorn:\n\t\t\t\treturn 'Hunting Horn';\n\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\treturn 'Insect Glaive';\n\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\treturn 'Light Bowgun';\n\t\t\tcase WeaponType.LongSword:\n\t\t\t\treturn 'Long Sword';\n\t\t\tcase WeaponType.SwitchAxe:\n\t\t\t\treturn 'Switch Axe';\n\t\t\tcase WeaponType.SwordAndShield:\n\t\t\t\treturn 'Sword and Shield';\n\t\t\tdefault:\n\t\t\t\treturn weaponType;\n\t\t}\n\t}\n\n\tgetWeaponTypeIcon(weaponType: WeaponType): string {\n\t\treturn this.getWeaponTypeName(weaponType).toLowerCase().split(' ').join('');\n\t}\n\n\tgetEquipmentCategory(itemType: ItemType): EquipmentCategoryType {\n\t\tswitch (itemType) {\n\t\t\tcase ItemType.Weapon:\n\t\t\t\treturn EquipmentCategoryType.Weapon;\n\t\t\tcase ItemType.Charm:\n\t\t\t\treturn EquipmentCategoryType.Charm;\n\t\t\tcase ItemType.Tool1:\n\t\t\tcase ItemType.Tool2:\n\t\t\t\treturn EquipmentCategoryType.Tool;\n\t\t\tcase ItemType.Head:\n\t\t\tcase ItemType.Chest:\n\t\t\tcase ItemType.Arms:\n\t\t\tcase ItemType.Waist:\n\t\t\tcase ItemType.Legs:\n\t\t\t\treturn EquipmentCategoryType.Armor;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetElementId(element: ElementType): number {\n\t\tlet elementId = 0;\n\t\tswitch (element) {\n\t\t\tcase ElementType.Fire:\n\t\t\t\telementId = 1;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Water:\n\t\t\t\telementId = 2;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Thunder:\n\t\t\t\telementId = 3;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Ice:\n\t\t\t\telementId = 4;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Dragon:\n\t\t\t\telementId = 5;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn elementId;\n\t}\n\n\tgetAilmentId(ailment: AilmentType): number {\n\t\tlet ailmentId = 0;\n\t\tswitch (ailment) {\n\t\t\tcase AilmentType.Paralysis:\n\t\t\t\tailmentId = 1;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Sleep:\n\t\t\t\tailmentId = 2;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Poison:\n\t\t\t\tailmentId = 3;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Blast:\n\t\t\t\tailmentId = 4;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn ailmentId;\n\t}\n\n\tgetElement(elementId: number): ElementType {\n\t\tlet element = null;\n\t\tswitch (elementId) {\n\t\t\tcase 1:\n\t\t\t\telement = ElementType.Fire;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\telement = ElementType.Water;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\telement = ElementType.Thunder;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\telement = ElementType.Ice;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\telement = ElementType.Dragon;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn element;\n\t}\n\n\tgetAilment(ailmentId: number): AilmentType {\n\t\tlet ailment = null;\n\t\tswitch (ailmentId) {\n\t\t\tcase 1:\n\t\t\t\tailment = AilmentType.Paralysis;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tailment = AilmentType.Sleep;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tailment = AilmentType.Poison;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tailment = AilmentType.Blast;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn ailment;\n\t}\n\n\tgetAmmoCapacities(weaponId: number): AmmoCapacitiesModel {\n\t\treturn this.appDataProvider.appData.ammoCapacities.find(c => c.id === weaponId);\n\t}\n\n\tgetMelodies(notes: string): MelodiesModel {\n\t\tconst melody: MelodiesModel = this.appDataProvider.appData.melodies.find(c => c.notes.join(';') === notes);\n\t\treturn this.getMelodyDetails(melody);\n\t}\n\n\tgetMelodiesById(melodyId: number): MelodiesModel {\n\t\tconst melody: MelodiesModel = this.appDataProvider.appData.melodies.find(c => c.id === melodyId);\n\t\treturn this.getMelodyDetails(melody);\n\t}\n\n\tgetMelodyDetails(melody: MelodiesModel): MelodiesModel {\n\t\tmelody.melodyEffects = [];\n\t\tfor (let i = 0; i < melody.melodies.length; i++) {\n\t\t\tconst melodyEffect = new MelodiesDetailModel();\n\t\t\tmelodyEffect.melody = melody.melodies[i];\n\t\t\tmelodyEffect.effects = melody.melodiesEffect.filter(e => e.index == i);\n\t\t\tfor (const effect of melodyEffect.effects) {\n\t\t\t\teffect.name = this.appDataProvider.appData.melodyEffect.find(m => m.id == effect.id).name;\n\t\t\t}\n\t\t\tmelody.melodyEffects.push(melodyEffect);\n\t\t}\n\n\t\treturn melody;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { BuffModel } from '../models/buffs.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { MelodiesModel } from '../models/melodies.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SetBonusModel } from '../models/set-bonus.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { EldersealType } from '../types/elderseal.type';\nimport { ElementType } from '../types/element.type';\nimport { ItemType } from '../types/item.type';\nimport { SkillService } from './skill.service';\nimport { StatService } from './stat.service';\n\n@Injectable()\nexport class EquipmentService {\n\tpublic skills: EquippedSkillModel[];\n\tpublic items: ItemModel[];\n\tpublic decorations: DecorationModel[];\n\tpublic augmentations: AugmentationModel[];\n\tpublic upgradeContainer: UpgradeContainerModel;\n\tpublic awakenings: AwakeningLevelModel[];\n\tpublic awakeningSetbonus: SetBonusModel;\n\tpublic modifications: ModificationModel[];\n\tpublic kinsect: KinsectModel;\n\tpublic buffs: BuffModel;\n\n\tconstructor(\n\t\tprivate skillService: SkillService,\n\t\tprivate statService: StatService\n\t) {\n\t\tthis.items = [];\n\t\tthis.decorations = [];\n\t\tthis.augmentations = [];\n\t\tthis.awakenings = [];\n\t\tthis.awakeningSetbonus = null;\n\t\tthis.modifications = [];\n\t\tthis.buffs = new BuffModel();\n\n\t\tthis.skillService.skillsUpdated$.subscribe(skills => {\n\t\t\tthis.skills = skills;\n\t\t\tthis.statService.update(\n\t\t\t\tskills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t});\n\t}\n\n\taddItem(item: ItemModel, updateStats: boolean = true) {\n\t\t// console.log(\"addItem\",item);\n\t\tthis.items.push(item);\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddDecoration(decoration: DecorationModel, updateStats: boolean = true) {\n\t\t// console.log(\"addDecoration\");\n\t\tthis.decorations.push(decoration);\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddAugmentation(augmentation: AugmentationModel, updateStats: boolean = true) {\n\t\t// console.log(\"addAugmentation\");\n\t\tthis.augmentations.push(augmentation);\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddUpgrade(upgradeContainer: UpgradeContainerModel, updateStats: boolean = true) {\n\t\t// console.log(\"addUpgrade\");\n\t\tthis.upgradeContainer = upgradeContainer;\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs);\n\t\t}\n\t}\n\n\taddAwakenings(awakenings: AwakeningLevelModel[], updateStats: boolean = true) {\n\t\t// console.log(\"addAwakening\");\n\t\tthis.awakenings = awakenings;\n\t\tif (awakenings.length && updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\taddSetbonus(setbonus: SetBonusModel, updateStats: boolean = true) {\n\t\t// console.log(\"addSetbonus\");\n\t\tthis.awakeningSetbonus = setbonus;\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (!weapon.skills.find(skill => skill.id == setbonus.id)) {\n\t\t\tweapon.skills.push({\n\t\t\t\tid: setbonus.id,\n\t\t\t\tlevel: null\n\t\t\t});\n\t\t}\n\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddModification(modification: ModificationModel, updateStats: boolean = true) {\n\t\t// console.log(\"addModification\");\n\t\tthis.modifications.push(modification);\n\t\tif (updateStats) {\n\t\t\tif (modification.id < 4) {\n\t\t\t\tthis.updateSkills();\n\t\t\t}\n\t\t}\n\t}\n\n\taddKinsect(kinsect: KinsectModel, updateStats: boolean = true) {\n\t\t// console.log(\"addKinsect\");\n\t\tthis.kinsect = kinsect;\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\tremoveItem(item: ItemModel) {\n\t\t// console.log(\"removeItem\");\n\t\tif (item && item.itemType == ItemType.Weapon) {\n\t\t\tthis.awakenings = [];\n\t\t}\n\t\tthis.items = _.reject(this.items, i => i === item);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveDecoration(decoration: DecorationModel) {\n\t\t// console.log(\"removeDeco\");\n\t\tthis.decorations = _.reject(this.decorations, d => d === decoration);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveAugmentation(augmentation: AugmentationModel) {\n\t\t// console.log(\"RemoveAug\");\n\t\tthis.augmentations = _.reject(this.augmentations, a => a === augmentation);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveUpgrade() {\n\t\t// console.log(\"RemoveUpgrade\");\n\t\tthis.upgradeContainer = null;\n\t\tthis.updateSkills();\n\t}\n\n\tremoveAwakening() {\n\t\t// console.log(\"RemoveAwake\");\n\t\tthis.awakenings = [];\n\t\tthis.awakeningSetbonus = null;\n\t\tthis.updateSkills();\n\t}\n\n\tremoveSetbonus() {\n\t\t// console.log(\"RemoveSetbonus\");\n\t\tif (this.awakeningSetbonus && this.awakeningSetbonus.id) {\n\t\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\t\tweapon.skills.splice(weapon.skills.findIndex(skill => skill.id == this.awakeningSetbonus.id), 1);\n\t\t\tthis.awakeningSetbonus = null;\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\tremoveMelody() {\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t}\n\n\tremoveModification(modification: ModificationModel) {\n\t\t// console.log(\"RemoveModification\");\n\t\tthis.modifications = _.reject(this.modifications, a => a === modification);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveKinsect() {\n\t\t// console.log(\"RemoveKin\");\n\t\tthis.kinsect = null;\n\t}\n\n\tchangeElement(element: ElementType, elementAttack: number, updateStats: boolean = true) {\n\t\t// console.log(\"changeElement\");\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (element != ElementType.None) {\n\t\t\tweapon.element = element;\n\t\t\tweapon.elementBaseAttack = elementAttack;\n\t\t\tif (element == ElementType.Dragon) {\n\t\t\t\tweapon.elderseal = EldersealType.Average;\n\t\t\t}\n\t\t} else {\n\t\t\tweapon.element = null;\n\t\t\tweapon.elementBaseAttack = null;\n\t\t\tweapon.elderseal = null;\n\t\t}\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\tchangeAilment(ailment: AilmentType, ailmentAttack: number, updateStats: boolean = true) {\n\t\t// console.log(\"changeAilment\");\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (ailment != AilmentType.None) {\n\t\t\tweapon.ailment = ailment;\n\t\t\tweapon.ailmentBaseAttack = ailmentAttack;\n\t\t} else {\n\t\t\tweapon.ailment = null;\n\t\t\tweapon.ailmentBaseAttack = null;\n\t\t}\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\tchangeWeaponName(weaponName: string) {\n\t\t// console.log(\"changeWeaponName\");\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tweapon.name = weaponName;\n\t}\n\n\tchangeWeaponMelody(melodies: MelodiesModel) {\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tweapon.melodies = melodies;\n\t}\n\n\tupdateItemLevel() {\n\t\t// console.log(\"updateItemLevel\");\n\t\tthis.updateSkills();\n\t}\n\n\tupdateItemActive() {\n\t\t// console.log(\"updateItemActive\");\n\t\tthis.updateSkills();\n\t}\n\n\tupdateSkillMode(equippedSkills: EquippedSkillModel[]) {\n\t\t// console.log(\"UpdateSkillMode\");\n\t\tthis.statService.update(\n\t\t\tequippedSkills,\n\t\t\tthis.items,\n\t\t\tthis.augmentations,\n\t\t\tthis.upgradeContainer,\n\t\t\tthis.awakenings,\n\t\t\tthis.modifications,\n\t\t\tthis.kinsect,\n\t\t\tthis.buffs\n\t\t);\n\t}\n\n\tupdateElementBuff(value: number) {\n\t\tthis.buffs.elementBuff = value;\n\t\tthis.statService.update(\n\t\t\tthis.skills,\n\t\t\tthis.items,\n\t\t\tthis.augmentations,\n\t\t\tthis.upgradeContainer,\n\t\t\tthis.awakenings,\n\t\t\tthis.modifications,\n\t\t\tthis.kinsect,\n\t\t\tthis.buffs\n\t\t);\n\t}\n\n\tprivate updateSkills() {\n\t\tthis.skillService.updateSkills(this.items, this.decorations, this.augmentations);\n\t}\n}\n","import { Location } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { SavedSetModel } from '../models/saved-set.model';\nimport { WeaponType } from '../types/weapon.type';\nimport { BuildService } from './build.service';\nimport { StatService } from './stat.service';\n\n@Injectable()\nexport class SetService {\n\tsets: SavedSetModel[] = [];\n\tpublic setsUpdated$ = new Subject<SavedSetModel[]>();\n\tselectedSetIndex = -1;\n\n\tconstructor(\n\t\tprivate location: Location,\n\t\tprivate buildService: BuildService,\n\t\tprivate statService: StatService) {\n\t\tthis.loadSets();\n\t}\n\n\tloadSets() {\n\t\tconst stringSets = localStorage.getItem('mhwSets');\n\t\tif (stringSets) {\n\t\t\ttry {\n\t\t\t\tthis.sets = JSON.parse(stringSets);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log('LocalStorage-Error:', stringSets);\n\t\t\t}\n\t\t}\n\t}\n\n\timportSet() {\n\t\tconst buildParts = location.hash.split('&');\n\t\tconst buildId = buildParts[0];\n\t\tconst buildV = buildId.substring(0, 3);\n\t\tif (buildId.length > 0) {\n\t\t\tconst itemGroupRegex = /(i[.]*[^i]*)/g;\n\t\t\tconst itemGroups = buildId.match(itemGroupRegex);\n\t\t\tlet itemGroupsLenght = 0;\n\t\t\tif (buildV == '#v3') {\n\t\t\t\titemGroupsLenght = 9;\n\t\t\t} else if (buildV == '#v2') {\n\t\t\t\titemGroupsLenght = 9;\n\t\t\t} else if (buildId.substring(0, 3) == '#v1') {\n\t\t\t\titemGroupsLenght = 8;\n\t\t\t}\n\t\t\tif (itemGroups.length > itemGroupsLenght && itemGroups[itemGroupsLenght].length > 1) {\n\t\t\t\tconst setName = itemGroups[itemGroupsLenght].substring(1, itemGroups[itemGroupsLenght].length);\n\t\t\t\titemGroups.splice(-1, 1);\n\t\t\t\tthis.location.replaceState(this.location.path(false), buildV + itemGroups.join(''));\n\t\t\t\tthis.buildService.loadBuild(buildV + itemGroups.join(''));\n\t\t\t\tthis.save(setName + '_IMPORTED', false);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetSets(): SavedSetModel[] {\n\t\treturn this.sets;\n\t}\n\n\tsave(setName: string, overwrite: boolean = true): number {\n\t\tthis.loadSets();\n\t\tlet setItem = this.sets.find(s => s.setName === setName);\n\t\tconst stats = this.statService.stats;\n\t\tif (setItem && overwrite) {\n\t\t\tsetItem.hashString = location.hash;\n\t\t\tsetItem.hashString = setItem.hashString.replace('#v1', '#v2');\n\t\t\tsetItem.weaponType = stats.weaponType;\n\t\t\tsetItem.totalAttack = stats.totalAttack;\n\t\t\tsetItem.affinity = stats.affinity;\n\t\t\tsetItem.element = stats.element;\n\t\t\tsetItem.elementAttack = stats.totalElementAttack;\n\t\t\tsetItem.ailment = stats.ailment;\n\t\t\tsetItem.ailmentAttack = stats.totalAilmentAttack;\n\t\t\tsetItem.defense = stats.defense;\n\t\t\tsetItem.resistances = [\n\t\t\t\tstats.fireResist,\n\t\t\t\tstats.waterResist,\n\t\t\t\tstats.thunderResist,\n\t\t\t\tstats.iceResist,\n\t\t\t\tstats.dragonResist];\n\t\t\tsetItem.confirm = false;\n\t\t\tthis.selectedSetIndex = this.sets.indexOf(setItem);\n\t\t} else {\n\t\t\tsetItem = {\n\t\t\t\tsetName: setName,\n\t\t\t\thashString: location.hash.replace('#v1', '#v2'),\n\t\t\t\tweaponType: stats.weaponType,\n\t\t\t\ttotalAttack: stats.totalAttack,\n\t\t\t\taffinity: stats.affinity,\n\t\t\t\telement: stats.element,\n\t\t\t\telementAttack: stats.totalElementAttack,\n\t\t\t\tailment: stats.ailment,\n\t\t\t\tailmentAttack: stats.totalAilmentAttack,\n\t\t\t\tdefense: stats.defense,\n\t\t\t\tresistances: [\n\t\t\t\t\tstats.fireResist,\n\t\t\t\t\tstats.waterResist,\n\t\t\t\t\tstats.thunderResist,\n\t\t\t\t\tstats.iceResist,\n\t\t\t\t\tstats.dragonResist],\n\t\t\t\tconfirm: false\n\t\t\t};\n\t\t\tthis.sets.push(setItem);\n\t\t\tthis.selectedSetIndex = this.sets.length - 1;\n\t\t}\n\t\tlocalStorage.setItem('mhwSets', JSON.stringify(this.sets));\n\t\tthis.setsUpdated$.next(this.sets);\n\t\tdocument.title = setName + ' - [MHWBuilder]';\n\t\treturn this.selectedSetIndex;\n\t}\n\n\tsaveSets() {\n\t\tlocalStorage.setItem('mhwSets', JSON.stringify(this.sets));\n\t\tthis.setsUpdated$.next(this.sets);\n\t}\n\n\tsortSets() {\n\t\tthis.sets.sort((a, b) => {\n\t\t\tconst w1 = this.getWeaponTypeIndex(a.weaponType);\n\t\t\tconst w2 = this.getWeaponTypeIndex(b.weaponType);\n\n\t\t\tif (w1 > w2) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (w1 < w2) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (w1 == w2) {\n\t\t\t\treturn a.setName.localeCompare(b.setName);\n\t\t\t}\n\t\t});\n\n\t\tthis.setsUpdated$.next(this.sets);\n\t}\n\n\tremove(index: number) {\n\t\tif (this.sets[index].confirm) {\n\t\t\tthis.sets.splice(index, 1);\n\t\t\tlocalStorage.setItem('mhwSets', JSON.stringify(this.sets));\n\t\t} else {\n\t\t\tthis.sets[index].confirm = true;\n\t\t}\n\t\tthis.setsUpdated$.next(this.sets);\n\t}\n\n\tselect(set: SavedSetModel): number {\n\t\tthis.location.replaceState(this.location.path(false), set.hashString);\n\t\tthis.buildService.loadBuild(location.hash);\n\t\tthis.selectedSetIndex = this.sets.indexOf(set);\n\t\tdocument.title = set.setName + ' - [MHWBuilder]';\n\t\treturn this.selectedSetIndex;\n\t}\n\n\tprivate getWeaponTypeIndex(weaponType?: WeaponType): number {\n\t\tif (weaponType == null) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (weaponType == WeaponType.GreatSword) {\n\t\t\treturn 0;\n\t\t} else if (weaponType == WeaponType.SwordAndShield) {\n\t\t\treturn 1;\n\t\t} else if (weaponType == WeaponType.DualBlades) {\n\t\t\treturn 2;\n\t\t} else if (weaponType == WeaponType.LongSword) {\n\t\t\treturn 3;\n\t\t} else if (weaponType == WeaponType.Hammer) {\n\t\t\treturn 4;\n\t\t} else if (weaponType == WeaponType.HuntingHorn) {\n\t\t\treturn 5;\n\t\t} else if (weaponType == WeaponType.Lance) {\n\t\t\treturn 6;\n\t\t} else if (weaponType == WeaponType.Gunlance) {\n\t\t\treturn 7;\n\t\t} else if (weaponType == WeaponType.SwitchAxe) {\n\t\t\treturn 8;\n\t\t} else if (weaponType == WeaponType.ChargeBlade) {\n\t\t\treturn 9;\n\t\t} else if (weaponType == WeaponType.InsectGlaive) {\n\t\t\treturn 10;\n\t\t} else if (weaponType == WeaponType.Bow) {\n\t\t\treturn 11;\n\t\t} else if (weaponType == WeaponType.LightBowgun) {\n\t\t\treturn 12;\n\t\t} else if (weaponType == WeaponType.HeavyBowgun) {\n\t\t\treturn 13;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { Subject } from 'rxjs';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { EquippedSetBonusDetailModel, EquippedSetBonusModel } from '../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { ItemType } from '../types/item.type';\nimport { ModeType } from '../types/mode.type';\nimport { DataService } from './data.service';\n\n@Injectable()\nexport class SkillService {\n\tpublic skillsUpdated$ = new Subject<EquippedSkillModel[]>();\n\tpublic setBonusesUpdated$ = new Subject<EquippedSetBonusModel[]>();\n\n\tpublic skills: EquippedSkillModel[];\n\tpublic setBonuses: EquippedSetBonusModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService\n\t) { }\n\n\tupdateSkills(items: ItemModel[], decorations: DecorationModel[], augmentations: AugmentationModel[]) {\n\t\tconst equippedSkills = new Array<EquippedSkillModel>();\n\t\tconst equippedSetBonuses = new Array<EquippedSetBonusModel>();\n\n\t\tfor (const item of items) {\n\t\t\tfor (const decoration of decorations.filter(d => d.itemType == item.itemType)) {\n\t\t\t\tdecoration.active = item.active;\n\t\t\t}\n\t\t}\n\t\t// IMPROVEMENT: this code loops through items several times. Neftalí Michelet: Fixed :)\n\t\tthis.addItemSkills(items, equippedSkills);\n\t\tthis.addDecorationSkills(decorations, equippedSkills);\n\t\tthis.addSetSkills(items, equippedSkills, equippedSetBonuses);\n\t\tthis.addAugmentationSkills(augmentations, equippedSkills);\n\t\tthis.skills = equippedSkills;\n\t\tthis.setBonuses = equippedSetBonuses;\n\n\t\tthis.skillsUpdated$.next(this.skills);\n\t\tthis.setBonusesUpdated$.next(this.setBonuses);\n\t}\n\n\tprivate addItemSkills(items: ItemModel[], equippedSkills: EquippedSkillModel[]) {\n\t\tfor (const item of items) {\n\t\t\tif (!item.skills) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const itemSkill of item.skills) {\n\t\t\t\tif (!itemSkill.level) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet equippedSkill: EquippedSkillModel = _.find(equippedSkills, es => es.id == itemSkill.id);\n\t\t\t\tconst level = itemSkill.level * (item.equippedLevel ? item.equippedLevel : 1);\n\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\tequippedSkill = this.createEquippedSkill(itemSkill.id, level, item.itemType);\n\t\t\t\t\tequippedSkills.push(equippedSkill);\n\t\t\t\t} else {\n\t\t\t\t\tequippedSkill.equippedArmorCount += level;\n\t\t\t\t\tequippedSkill.equippedCount += level;\n\t\t\t\t\tthis.countSkillItemPart(equippedSkill, level, item.itemType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate addDecorationSkills(decorations: DecorationModel[], equippedSkills: EquippedSkillModel[]) {\n\t\tfor (const decoration of decorations) {\n\t\t\tif (!decoration.skills) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const itemSkill of decoration.skills) {\n\t\t\t\tif (!itemSkill.level) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet equippedSkill: EquippedSkillModel = _.find(equippedSkills, es => es.id == itemSkill.id);\n\t\t\t\tconst level = itemSkill.level;\n\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\tequippedSkill = this.createEquippedSkill(itemSkill.id, level, decoration.itemType, decoration.active);\n\t\t\t\t\tequippedSkills.push(equippedSkill);\n\t\t\t\t} else {\n\t\t\t\t\tif (decoration.itemType == ItemType.Tool1) {\n\t\t\t\t\t\tif (decoration.active) {\n\t\t\t\t\t\t\tequippedSkill.equippedToolActiveCount += level;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tequippedSkill.equippedTool1Count += level;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (decoration.itemType == ItemType.Tool2) {\n\t\t\t\t\t\tif (decoration.active) {\n\t\t\t\t\t\t\tequippedSkill.equippedToolActiveCount += level;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tequippedSkill.equippedTool2Count += level;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tequippedSkill.equippedArmorCount += level;\n\t\t\t\t\t}\n\t\t\t\t\tequippedSkill.equippedCount = equippedSkill.equippedArmorCount + equippedSkill.equippedToolActiveCount;\n\n\t\t\t\t\tthis.countSkillItemPart(equippedSkill, level, decoration.itemType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate addSetSkills(items: ItemModel[], equippedSkills: EquippedSkillModel[], equippedSetBonuses: EquippedSetBonusModel[]) {\n\t\tlet setBonusNames = new Array<string>();\n\t\tconst setBonusParts = [];\n\n\t\tfor (const item of items) {\n\t\t\tif (!item.skills) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const skill of item.skills) {\n\t\t\t\tif (!skill.level && skill.id.length > 1) {\n\t\t\t\t\tsetBonusNames.push(skill.id);\n\t\t\t\t\tsetBonusParts.push([skill.id, item.itemType]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst setCounts = _.countBy(setBonusNames);\n\t\tsetBonusNames = _.uniq(setBonusNames);\n\t\tfor (const setBonusName of setBonusNames) {\n\t\t\tconst setBonus = this.dataService.getSetBonus(setBonusName);\n\t\t\tconst setLevels = _.filter(setBonus.setLevels, sl => sl.pieces <= setCounts[setBonusName]);\n\t\t\tconst setParts = _.filter(setBonusParts, x => x[0].localeCompare(setBonusName) == 0);\n\n\t\t\tconst weaponCount = _.filter(setParts, x => x[1] == ItemType.Weapon).length > 0 ? 1 : 0;\n\t\t\tconst headCount = _.filter(setParts, x => x[1] == ItemType.Head).length > 0 ? 1 : 0;\n\t\t\tconst chestCount = _.filter(setParts, x => x[1] == ItemType.Chest).length > 0 ? 1 : 0;\n\t\t\tconst armsCount = _.filter(setParts, x => x[1] == ItemType.Arms).length > 0 ? 1 : 0;\n\t\t\tconst waistCount = _.filter(setParts, x => x[1] == ItemType.Waist).length > 0 ? 1 : 0;\n\t\t\tconst legsCount = _.filter(setParts, x => x[1] == ItemType.Legs).length > 0 ? 1 : 0;\n\t\t\tif (setLevels) {\n\t\t\t\tfor (const setLevel of setLevels) {\n\t\t\t\t\tlet equippedSkill = _.find(equippedSkills, es => es.id == setLevel.id);\n\n\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\tconst skill = this.dataService.getSkill(setLevel.id);\n\t\t\t\t\t\tequippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\tequippedSkill.skill = skill;\n\t\t\t\t\t\tequippedSkill.id = skill.id;\n\t\t\t\t\t\tequippedSkill.name = skill.name;\n\t\t\t\t\t\tequippedSkill.description = skill.description;\n\t\t\t\t\t\tequippedSkill.headCount = headCount;\n\t\t\t\t\t\tequippedSkill.chestCount = chestCount;\n\t\t\t\t\t\tequippedSkill.armsCount = armsCount;\n\t\t\t\t\t\tequippedSkill.waistCount = waistCount;\n\t\t\t\t\t\tequippedSkill.legsCount = legsCount;\n\t\t\t\t\t\tequippedSkill.isSetBonus = true;\n\t\t\t\t\t\tequippedSkill.equippedCount = 1;\n\t\t\t\t\t\tequippedSkill.equippedArmorCount = 1;\n\t\t\t\t\t\tequippedSkill.totalLevelCount = skill.levels.length;\n\t\t\t\t\t\tequippedSkills.push(equippedSkill);\n\n\t\t\t\t\t\tif (skill.mode == null) {\n\t\t\t\t\t\t\tif (skill.hasActiveStats) {\n\t\t\t\t\t\t\t\tskill.mode = ModeType.AllSkillActive;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tskill.mode = ModeType.Active;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (skill.raiseSkillId) {\n\t\t\t\t\t\t\tconst equippedSkillToRaise = _.find(equippedSkills, es => es.id == skill.raiseSkillId);\n\n\t\t\t\t\t\t\tif (equippedSkillToRaise) {\n\t\t\t\t\t\t\t\tequippedSkillToRaise.secretLevelCount = equippedSkillToRaise.skill.levels.length - equippedSkillToRaise.totalLevelCount;\n\t\t\t\t\t\t\t\tequippedSkillToRaise.totalLevelCount = equippedSkillToRaise.skill.levels.length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Fatalis Setbonus\n\t\t\t\t\t\tif (skill.id == 'inheritance') {\n\t\t\t\t\t\t\tfor (const equipped of equippedSkills) {\n\t\t\t\t\t\t\t\tif (equipped.skill.maxLevel) {\n\t\t\t\t\t\t\t\t\tequipped.secretLevelCount = equipped.skill.levels.length - equipped.totalLevelCount;\n\t\t\t\t\t\t\t\t\tequipped.totalLevelCount = equipped.skill.levels.length;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tequippedSkill.equippedCount = 2;\n\t\t\t\t\t\tequippedSkill.equippedArmorCount = 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst equippedSetBonus = new EquippedSetBonusModel();\n\t\t\tequippedSetBonus.id = setBonus.id;\n\t\t\tequippedSetBonus.name = setBonus.name;\n\t\t\tequippedSetBonus.equippedCount = setCounts[setBonusName];\n\t\t\tequippedSetBonus.weaponCount = weaponCount;\n\t\t\tequippedSetBonus.headCount = headCount;\n\t\t\tequippedSetBonus.chestCount = chestCount;\n\t\t\tequippedSetBonus.armsCount = armsCount;\n\t\t\tequippedSetBonus.waistCount = waistCount;\n\t\t\tequippedSetBonus.legsCount = legsCount;\n\t\t\tequippedSetBonus.details = [];\n\n\t\t\tfor (const bonusLevel of setBonus.setLevels) {\n\t\t\t\tconst detail = new EquippedSetBonusDetailModel();\n\t\t\t\tdetail.requiredCount = bonusLevel.pieces;\n\t\t\t\tdetail.skill = this.dataService.getSkill(bonusLevel.id);\n\t\t\t\tif (!detail.skill.levels[0].activeSkills) {\n\t\t\t\t\tdetail.mode = ModeType.AllSkillActive;\n\t\t\t\t}\n\t\t\t\tequippedSetBonus.details.push(detail);\n\t\t\t}\n\t\t\tequippedSetBonuses.push(equippedSetBonus);\n\t\t}\n\t}\n\n\tprivate addAugmentationSkills(augmentations: AugmentationModel[], equippedSkills: EquippedSkillModel[]) {\n\t\tconst augGroups = _.groupBy(augmentations, 'id');\n\t\tfor (const key in augGroups) {\n\t\t\tif (augGroups.hasOwnProperty(key)) {\n\t\t\t\tconst value = augGroups[key];\n\n\t\t\t\tconst level = value[0].levels[value.length - 1];\n\t\t\t\tif (level && level.skills) {\n\t\t\t\t\tfor (const skillRef of level.skills) {\n\n\t\t\t\t\t\tlet equippedSkill = _.find(equippedSkills, es => es.id == skillRef.id);\n\n\t\t\t\t\t\t// Augmentation skills (as of this writing) do not build on skills from other sources. If the augmentation skill level is higher, it overwrites.\n\t\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\t\tconst skill = this.dataService.getSkill(skillRef.id);\n\t\t\t\t\t\t\tequippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\t\tequippedSkill.skill = skill;\n\t\t\t\t\t\t\tequippedSkill.id = skill.id;\n\t\t\t\t\t\t\tequippedSkill.name = skill.name;\n\t\t\t\t\t\t\tequippedSkill.description = skill.description;\n\t\t\t\t\t\t\tequippedSkill.equippedCount = skillRef.level;\n\t\t\t\t\t\t\tequippedSkill.totalLevelCount = skill.levels.length;\n\t\t\t\t\t\t\tequippedSkills.push(equippedSkill);\n\t\t\t\t\t\t} else if (equippedSkill.equippedCount < skillRef.level) {\n\t\t\t\t\t\t\tequippedSkill.equippedCount = skillRef.level;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate countSkillItemPart(equippedSkill: EquippedSkillModel, actualCount: number, itemType?: ItemType) {\n\t\tif (itemType == ItemType.Weapon) {\n\t\t\tequippedSkill.weaponCount += actualCount;\n\t\t} else if (itemType == ItemType.Head) {\n\t\t\tequippedSkill.headCount += actualCount;\n\t\t} else if (itemType == ItemType.Chest) {\n\t\t\tequippedSkill.chestCount += actualCount;\n\t\t} else if (itemType == ItemType.Arms) {\n\t\t\tequippedSkill.armsCount += actualCount;\n\t\t} else if (itemType == ItemType.Waist) {\n\t\t\tequippedSkill.waistCount += actualCount;\n\t\t} else if (itemType == ItemType.Legs) {\n\t\t\tequippedSkill.legsCount += actualCount;\n\t\t} else if (itemType == ItemType.Charm) {\n\t\t\tequippedSkill.charmCount += actualCount;\n\t\t} else if (itemType == ItemType.Tool1 || itemType == ItemType.Tool2) {\n\t\t\tequippedSkill.toolCount += actualCount;\n\t\t}\n\t}\n\n\tcreateEquippedSkill(skillId: string, level: number, itemType?: ItemType, active?: boolean): EquippedSkillModel {\n\t\tconst skill = this.dataService.getSkill(skillId);\n\t\tconst equippedSkill = new EquippedSkillModel();\n\t\tequippedSkill.skill = skill;\n\t\tequippedSkill.id = skill.id;\n\t\tequippedSkill.name = skill.name;\n\t\tequippedSkill.description = skill.description;\n\n\t\tif (itemType == ItemType.Tool1) {\n\t\t\tif (active) {\n\t\t\t\tequippedSkill.equippedToolActiveCount = level;\n\t\t\t} else {\n\t\t\t\tequippedSkill.equippedTool1Count = level;\n\t\t\t}\n\t\t} else if (itemType == ItemType.Tool2) {\n\t\t\tif (active) {\n\t\t\t\tequippedSkill.equippedToolActiveCount = level;\n\t\t\t} else {\n\t\t\t\tequippedSkill.equippedTool2Count = level;\n\t\t\t}\n\t\t} else {\n\t\t\tequippedSkill.equippedArmorCount = level;\n\t\t}\n\n\t\tequippedSkill.equippedCount = equippedSkill.equippedArmorCount + equippedSkill.equippedToolActiveCount;\n\n\t\tequippedSkill.totalLevelCount = skill.maxLevel ? skill.maxLevel : skill.levels.length;\n\t\tthis.countSkillItemPart(equippedSkill, level, itemType);\n\t\tequippedSkill.hasActiveStats = skill.hasActiveStats;\n\n\t\tif (skill.mode == null) {\n\t\t\tif (skill.hasActiveStats) {\n\t\t\t\tskill.mode = ModeType.AllSkillActive;\n\t\t\t} else {\n\t\t\t\tskill.mode = ModeType.Active;\n\t\t\t}\n\t\t}\n\n\t\treturn equippedSkill;\n\t}\n}\n","import { ChangeDetectorRef, Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { AugmentationSlotComponent } from '../components/augmentation-slot/augmentation-slot.component';\nimport { AwakeningSlotComponent } from '../components/awakening-slot/awakening-slot.component';\nimport { DecorationSlotComponent } from '../components/decoration-slot/decoration-slot.component';\nimport { ItemSlotComponent } from '../components/item-slot/item-slot.component';\nimport { KinsectSlotComponent } from '../components/kinsect-slot/kinsect-slot.component';\nimport { ModificationSlotComponent } from '../components/modification-slot/modification-slot.component';\nimport { UpgradeSlotComponent } from '../components/upagrade-slot/upgrade-slot.component';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SetBonusModel } from '../models/set-bonus.model';\nimport { SlotEventModel } from '../models/slot-event.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { AwakeningType } from '../types/awakening.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { EquipmentService } from './equipment.service';\n\n@Injectable()\nexport class SlotService {\n\tpublic anySlotSelected$ =\n\t\tnew Subject<ItemSlotComponent | DecorationSlotComponent | AugmentationSlotComponent | UpgradeSlotComponent | AwakeningSlotComponent | ModificationSlotComponent | KinsectSlotComponent>();\n\n\tpublic itemSelected$ = new Subject<SlotEventModel<ItemSlotComponent, ItemModel>>();\n\tpublic itemSelectedNew$ = new Subject<SlotEventModel<ItemSlotComponent, ItemModel>>();\n\tpublic decorationSelected$ = new Subject<SlotEventModel<DecorationSlotComponent, DecorationModel>>();\n\tpublic augmentationSelected$ = new Subject<SlotEventModel<AugmentationSlotComponent, AugmentationModel>>();\n\tpublic upgradeSelected$ = new Subject<SlotEventModel<UpgradeSlotComponent, UpgradeContainerModel>>();\n\tpublic setbonusSelected$ = new Subject();\n\tpublic modificationSelected$ = new Subject<SlotEventModel<ModificationSlotComponent, ModificationModel>>();\n\tpublic kinsectSelected$ = new Subject<SlotEventModel<KinsectSlotComponent, KinsectModel>>();\n\tpublic itemLevelChanged$ = new Subject();\n\tpublic itemActiveChanged$ = new Subject();\n\tpublic weaponSlotSelected$ = new Subject();\n\tpublic armorSlotSelected$ = new Subject();\n\n\tpublic weaponModSelected$ = new Subject();\n\n\tweaponSlot: ItemSlotComponent;\n\theadSlot: ItemSlotComponent;\n\tchestSlot: ItemSlotComponent;\n\thandsSlot: ItemSlotComponent;\n\tlegsSlot: ItemSlotComponent;\n\tfeetSlot: ItemSlotComponent;\n\tcharmSlot: ItemSlotComponent;\n\ttool1Slot: ItemSlotComponent;\n\ttool2Slot: ItemSlotComponent;\n\n\tchangeDetector: ChangeDetectorRef;\n\n\tselectedItemSlot: ItemSlotComponent;\n\tselectedDecorationSlot: DecorationSlotComponent;\n\tselectedAugmentationSlot: AugmentationSlotComponent;\n\tselectedUpgradeSlot: UpgradeSlotComponent;\n\tselectedAwakeningSlot: AwakeningSlotComponent;\n\tselectedModificationSlot: ModificationSlotComponent;\n\tselectedKinsectSlot: KinsectSlotComponent;\n\tselectedSetbonusSlot: AwakeningSlotComponent;\n\n\tonlyIceborne: boolean;\n\n\tconstructor(\n\t\tprivate equipmentService: EquipmentService\n\t) {\n\t\tthis.onlyIceborne = true;\n\t}\n\n\tinitialize(\n\t\tweaponSlot: ItemSlotComponent,\n\t\theadSlot: ItemSlotComponent,\n\t\tchestSlot: ItemSlotComponent,\n\t\thandsSlot: ItemSlotComponent,\n\t\tlegsSlot: ItemSlotComponent,\n\t\tfeetSlot: ItemSlotComponent,\n\t\tcharmSlot: ItemSlotComponent,\n\t\ttool1Slot: ItemSlotComponent,\n\t\ttool2Slot: ItemSlotComponent,\n\t\tchangeDetector: ChangeDetectorRef\n\t) {\n\t\tthis.weaponSlot = weaponSlot;\n\t\tthis.headSlot = headSlot;\n\t\tthis.chestSlot = chestSlot;\n\t\tthis.handsSlot = handsSlot;\n\t\tthis.legsSlot = legsSlot;\n\t\tthis.feetSlot = feetSlot;\n\t\tthis.charmSlot = charmSlot;\n\t\tthis.tool1Slot = tool1Slot;\n\t\tthis.tool2Slot = tool2Slot;\n\t\tthis.changeDetector = changeDetector;\n\t}\n\n\tselectItemSlot(slot: ItemSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedItemSlot = slot;\n\n\t\tif (this.selectedItemSlot) {\n\t\t\tthis.selectedItemSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedItemSlot);\n\t\t\tif (this.selectedItemSlot && this.selectedItemSlot.item) {\n\t\t\t\tif (this.selectedItemSlot.item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\t\tthis.weaponSlotSelected$.next();\n\t\t\t\t} else if (this.selectedItemSlot.item.equipmentCategory == EquipmentCategoryType.Armor) {\n\t\t\t\t\tthis.armorSlotSelected$.next();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tselectDecorationSlot(slot: DecorationSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedDecorationSlot = slot;\n\n\t\tif (this.selectedDecorationSlot) {\n\t\t\tthis.selectedDecorationSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedDecorationSlot);\n\t\t}\n\t}\n\n\tselectAugmentationSlot(slot: AugmentationSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedAugmentationSlot = slot;\n\n\t\tif (this.selectedAugmentationSlot) {\n\t\t\tthis.selectedAugmentationSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedAugmentationSlot);\n\t\t}\n\t}\n\n\tselectUpgradeSlot(slot: UpgradeSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedUpgradeSlot = slot;\n\n\t\tif (this.selectedUpgradeSlot) {\n\t\t\tthis.selectedUpgradeSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedUpgradeSlot);\n\t\t}\n\t}\n\n\tselectSetbonusSlot(slot: AwakeningSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedSetbonusSlot = slot;\n\n\t\tif (this.selectedSetbonusSlot) {\n\t\t\tthis.selectedSetbonusSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedSetbonusSlot);\n\t\t}\n\t}\n\n\tselectModificationSlot(slot: ModificationSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedModificationSlot = slot;\n\n\t\tif (this.selectedModificationSlot) {\n\t\t\tthis.selectedModificationSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedModificationSlot);\n\t\t}\n\t}\n\n\tselectKinsectSlot(slot: KinsectSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedKinsectSlot = slot;\n\n\t\tif (this.selectedKinsectSlot) {\n\t\t\tthis.selectedKinsectSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedKinsectSlot);\n\t\t}\n\t}\n\n\tclearItemSlot(slot: ItemSlotComponent) {\n\t\tthis.clearSlotItems(slot);\n\n\t\tslot.item = null;\n\t\tthis.itemSelected$.next({ slot: slot, equipment: null });\n\t}\n\tclearArmorSlot(slot: ItemSlotComponent) {\n\t\tthis.clearSlotItems(slot);\n\n\t\tslot.item = null;\n\t\tthis.itemSelectedNew$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearDecorationSlot(slot: DecorationSlotComponent) {\n\t\tthis.equipmentService.removeDecoration(slot.decoration);\n\t\tslot.decoration = null;\n\t\tthis.decorationSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearAugmentationSlot(slot: AugmentationSlotComponent) {\n\t\tthis.equipmentService.removeAugmentation(slot.augmentation);\n\t\tthis.applySlotAugmentation();\n\t\tslot.augmentation = null;\n\t\tthis.augmentationSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearUpgradeSlot(slot: UpgradeSlotComponent) {\n\t\tthis.equipmentService.removeUpgrade();\n\t\tthis.applySlotUpgrade();\n\t\tif (slot.upgradeContainer) {\n\t\t\tthis.clearUpgradeContainer(slot.upgradeContainer);\n\t\t}\n\t\tthis.upgradeSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearAwakeningSlot(slot: AwakeningSlotComponent, update: boolean = true) {\n\t\tthis.equipmentService.removeAwakening();\n\t\tslot.awakenings = [];\n\t\tthis.clearSkillSlot(slot, false);\n\t\tif (update) {\n\t\t\tthis.weaponModSelected$.next({ slot: slot, equipment: null });\n\t\t}\n\t}\n\n\tclearSkillSlot(slot: AwakeningSlotComponent, update: boolean = true) {\n\t\tthis.equipmentService.removeSetbonus();\n\t\tslot.setbonus = null;\n\t\tif (update) {\n\t\t\tthis.weaponModSelected$.next({ slot: slot, equipment: null });\n\t\t}\n\t}\n\n\tclearModificationSlot(slot: ModificationSlotComponent) {\n\t\tthis.equipmentService.removeModification(slot.modification);\n\t\tslot.modification = null;\n\t\tthis.modificationSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearKinsectSlot(slot: KinsectSlotComponent) {\n\t\tthis.equipmentService.removeKinsect();\n\t\tslot.kinsect = null;\n\t\tthis.kinsectSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tselectItem(item: ItemModel, updateStats: boolean = true) {\n\t\tif (this.selectedItemSlot) {\n\t\t\tthis.clearSlotItems(this.selectedItemSlot);\n\n\t\t\tif (!item.equippedLevel && item.itemType == ItemType.Charm) {\n\t\t\t\titem.equippedLevel = item.levels;\n\t\t\t}\n\t\t\tif (item.itemType == ItemType.Tool1 || item.itemType == ItemType.Tool2) {\n\t\t\t\titem.active = false;\n\t\t\t} else {\n\t\t\t\titem.active = true;\n\t\t\t}\n\n\t\t\tthis.equipmentService.addItem(item, updateStats);\n\t\t\tthis.selectedItemSlot.item = item;\n\n\t\t\tif (item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\tthis.selectedItemSlot.augmentations = [];\n\n\t\t\t\tif (this.selectedItemSlot.upgradeSlot) {\n\t\t\t\t\tthis.clearUpgradeSlot(this.selectedItemSlot.upgradeSlot);\n\t\t\t\t}\n\n\t\t\t\tthis.selectedItemSlot.upgradeContainer = new UpgradeContainerModel();\n\t\t\t\tthis.selectedItemSlot.upgradeContainer.hasCustomUpgrades = item.upgradeType == 1;\n\t\t\t\tthis.selectedItemSlot.upgradeContainer.weaponType = item.weaponType;\n\n\t\t\t\tif (item.rarity == 6) {\n\t\t\t\t\tthis.selectedItemSlot.augmentations = [\n\t\t\t\t\t\tnew AugmentationModel(),\n\t\t\t\t\t\tnew AugmentationModel(),\n\t\t\t\t\t\tnew AugmentationModel()\n\t\t\t\t\t];\n\t\t\t\t} else if (item.rarity == 7) {\n\t\t\t\t\tthis.selectedItemSlot.augmentations = [\n\t\t\t\t\t\tnew AugmentationModel(),\n\t\t\t\t\t\tnew AugmentationModel()\n\t\t\t\t\t];\n\t\t\t\t} else if (item.rarity == 8) {\n\t\t\t\t\tthis.selectedItemSlot.augmentations = [\n\t\t\t\t\t\tnew AugmentationModel()\n\t\t\t\t\t];\n\t\t\t\t} else if (item.rarity == 10) {\n\t\t\t\t\tthis.selectedItemSlot.upgradeContainer.slots = 10;\n\t\t\t\t} else if (item.rarity == 11) {\n\t\t\t\t\tthis.selectedItemSlot.upgradeContainer.slots = 8;\n\t\t\t\t} else if (item.rarity == 12) {\n\t\t\t\t\tthis.selectedItemSlot.upgradeContainer.slots = 6;\n\t\t\t\t}\n\n\t\t\t\tif (item.upgradeType == 2) {\n\t\t\t\t\tthis.selectedItemSlot.awakenings = [\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel()\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tthis.selectedItemSlot.kinsect = null;\n\t\t\t\tthis.selectedItemSlot.modifications = [];\n\t\t\t\tswitch (item.weaponType) {\n\t\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\t\tthis.selectedItemSlot.kinsect = new KinsectModel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\t\t\tthis.selectedItemSlot.modifications = [\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel()\n\t\t\t\t\t\t];\n\t\t\t\t\t\tif (item.rarity >= 10) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.rarity >= 12) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\t\t\tthis.selectedItemSlot.modifications = [\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel()\n\t\t\t\t\t\t];\n\t\t\t\t\t\tif (item.rarity >= 9) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.rarity >= 10) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.rarity >= 12) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (updateStats) {\n\t\t\t\tthis.itemSelected$.next({ slot: this.selectedItemSlot, equipment: item });\n\t\t\t}\n\t\t}\n\t}\n\n\tselectArmorItemByType(item: ItemModel, closeModal?: boolean, updateStats: boolean = true) {\n\t\tlet slotAux: ItemSlotComponent;\n\t\tswitch (item.itemType) {\n\t\t\tcase ItemType.Head:\n\t\t\t\tslotAux = this.headSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Chest:\n\t\t\t\tslotAux = this.chestSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Arms:\n\t\t\t\tslotAux = this.handsSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Waist:\n\t\t\t\tslotAux = this.legsSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Legs:\n\t\t\t\tslotAux = this.feetSlot;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tlet currentId = 0;\n\t\tif (slotAux.item) {\n\t\t\tcurrentId = slotAux.item.id;\n\t\t}\n\t\tif (currentId != item.id) {\n\t\t\tthis.clearSlotItems(slotAux);\n\t\t\tthis.equipmentService.addItem(item, updateStats);\n\t\t\tslotAux.item = item;\n\t\t\tif (closeModal) {\n\t\t\t\tthis.itemSelected$.next({ slot: slotAux, equipment: item });\n\t\t\t} else {\n\t\t\t\tthis.itemSelectedNew$.next({ slot: slotAux, equipment: item });\n\t\t\t}\n\t\t} else {\n\t\t\tthis.clearArmorSlot(slotAux);\n\t\t}\n\t}\n\n\tselectDecoration(decoration: DecorationModel, updateStats: boolean = true) {\n\t\tif (this.selectedDecorationSlot) {\n\t\t\tif (this.selectedDecorationSlot.decoration) {\n\t\t\t\tthis.equipmentService.removeDecoration(this.selectedDecorationSlot.decoration);\n\t\t\t}\n\n\t\t\tdecoration.itemId = this.selectedDecorationSlot.itemId;\n\t\t\tdecoration.itemType = this.selectedDecorationSlot.itemType;\n\t\t\tthis.equipmentService.addDecoration(decoration, updateStats);\n\t\t\tthis.selectedDecorationSlot.decoration = decoration;\n\t\t\tthis.decorationSelected$.next({ slot: this.selectedDecorationSlot, equipment: decoration });\n\t\t}\n\t}\n\n\tselectAugmentation(augmentation: AugmentationModel, updateStats: boolean = true) {\n\t\tif (this.selectedAugmentationSlot) {\n\t\t\tif (this.selectedAugmentationSlot.augmentation) {\n\t\t\t\tthis.equipmentService.removeAugmentation(this.selectedAugmentationSlot.augmentation);\n\t\t\t}\n\n\t\t\tthis.equipmentService.addAugmentation(augmentation, updateStats);\n\t\t\tthis.applySlotAugmentation();\n\t\t\tthis.selectedAugmentationSlot.augmentation = augmentation;\n\t\t\tthis.augmentationSelected$.next({ slot: this.selectedAugmentationSlot, equipment: augmentation });\n\t\t}\n\t}\n\n\tselectUpgradeContainer(upgradeContainer: UpgradeContainerModel, updateStats: boolean = true) {\n\t\tif (this.selectedUpgradeSlot) {\n\t\t\tif (this.selectedUpgradeSlot.upgradeContainer) {\n\t\t\t\tthis.equipmentService.removeUpgrade();\n\t\t\t}\n\n\t\t\tthis.equipmentService.addUpgrade(upgradeContainer, updateStats);\n\n\t\t\tthis.applySlotUpgrade();\n\n\t\t\tthis.selectedUpgradeSlot.upgradeContainer = upgradeContainer;\n\t\t\tthis.upgradeSelected$.next({ slot: this.selectedUpgradeSlot, equipment: upgradeContainer });\n\t\t}\n\t}\n\n\tselectAwakenings(awakenings: AwakeningLevelModel[], updateStats: boolean = true) {\n\t\tif (this.selectedAwakeningSlot) {\n\t\t} else {\n\t\t\tthis.selectedAwakeningSlot = this.weaponSlot.awakeningSlot;\n\t\t}\n\t\tthis.equipmentService.addAwakenings(awakenings, updateStats);\n\t\tthis.applySlotAwakening();\n\n\t\tthis.selectedAwakeningSlot.awakenings = awakenings;\n\t\tthis.weaponModSelected$.next({ slot: this.selectedAwakeningSlot, equipment: awakenings });\n\t}\n\n\tselectSetbonus(setbonus: SetBonusModel, updateStats: boolean = true) {\n\t\tif (this.selectedSetbonusSlot) {\n\t\t\tif (this.selectedSetbonusSlot.setbonus) {\n\t\t\t\tthis.equipmentService.removeSetbonus();\n\t\t\t}\n\t\t\tthis.equipmentService.addSetbonus(setbonus, updateStats);\n\t\t\tthis.selectedSetbonusSlot.setbonus = setbonus;\n\t\t\tthis.setbonusSelected$.next({ slot: this.selectedSetbonusSlot, equipment: setbonus });\n\t\t}\n\t}\n\n\tselectModification(modification: ModificationModel, updateStats: boolean = true) {\n\t\tif (this.selectedModificationSlot) {\n\t\t\tif (this.selectedModificationSlot.modification) {\n\t\t\t\tthis.equipmentService.removeModification(this.selectedModificationSlot.modification);\n\t\t\t}\n\n\t\t\tthis.equipmentService.addModification(modification);\n\t\t\tthis.selectedModificationSlot.modification = modification;\n\t\t\tthis.modificationSelected$.next({ slot: this.selectedModificationSlot, equipment: modification });\n\t\t}\n\t}\n\n\tselectKinsect(kinsect: KinsectModel, updateStats: boolean = true) {\n\t\tif (this.selectedKinsectSlot) {\n\t\t\tif (this.selectedKinsectSlot.kinsect) {\n\t\t\t\tthis.equipmentService.removeKinsect();\n\t\t\t}\n\t\t\tthis.equipmentService.addKinsect(kinsect, updateStats);\n\t\t\tthis.selectedKinsectSlot.kinsect = kinsect;\n\t\t\tthis.kinsectSelected$.next({ slot: this.selectedKinsectSlot, equipment: kinsect });\n\t\t}\n\t}\n\n\tupdateItemLevel() {\n\t\tthis.itemLevelChanged$.next();\n\t\tthis.equipmentService.updateItemLevel();\n\t}\n\n\tselectWeaponElement(element: ElementType, elementAttack: number) {\n\t\tthis.equipmentService.changeElement(element, elementAttack);\n\t\tthis.weaponModSelected$.next(element);\n\t}\n\n\tselectWeaponAilment(ailment: AilmentType, ailmentAttack: number) {\n\t\tthis.equipmentService.changeAilment(ailment, ailmentAttack);\n\t\tthis.weaponModSelected$.next(ailment);\n\t}\n\n\tchangeWeaponName(weaponName: string) {\n\t\tthis.equipmentService.changeWeaponName(weaponName);\n\t}\n\n\tactiveItemTool(itemType: ItemType, active: boolean) {\n\t\tif (active) {\n\t\t\tif (itemType == ItemType.Tool1 && this.tool2Slot.item) {\n\t\t\t\tthis.tool2Slot.item.active = false;\n\t\t\t}\n\t\t\tif (itemType == ItemType.Tool2 && this.tool1Slot.item) {\n\t\t\t\tthis.tool1Slot.item.active = false;\n\t\t\t}\n\t\t}\n\t\tthis.itemActiveChanged$.next();\n\t\tthis.equipmentService.updateItemActive();\n\t}\n\n\tprivate clearUpgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tupgradeContainer.used = 0;\n\t\tfor (const detail of upgradeContainer.upgradeDetails) {\n\t\t\tdetail.level = 0;\n\t\t\tdetail.totalSlots = 0;\n\t\t\tdetail.requiredSlots = 0;\n\n\t\t\tdetail.passiveAttack = 0;\n\t\t\tdetail.passiveAffinity = 0;\n\t\t\tdetail.passiveDefense = 0;\n\t\t\tdetail.slotLevel = 0;\n\t\t\tdetail.healOnHitPercent = 0;\n\t\t\tdetail.passiveElement = 0;\n\t\t\tdetail.passiveAilment = 0;\n\t\t}\n\t\tupgradeContainer.customUpgradeIds = [0, 0, 0, 0, 0, 0, 0];\n\t}\n\n\tprivate applySlotAugmentation() {\n\t\tconst slotAugs = this.equipmentService.augmentations.filter(aug => aug.id == 4);\n\t\tconst augDecorationSlot = this.weaponSlot.item.slots.find(slot => slot.augmentation);\n\n\t\tif (slotAugs && slotAugs.length) {\n\t\t\tthis.changeDetector.detectChanges();\n\n\t\t\tif (augDecorationSlot) {\n\t\t\t\taugDecorationSlot.level = slotAugs[0].levels[slotAugs.length - 1].slotLevel;\n\t\t\t\tconst decoSlot = this.weaponSlot.decorationSlots.last;\n\t\t\t\tif (decoSlot && decoSlot.decoration && augDecorationSlot.level < decoSlot.decoration.level) {\n\t\t\t\t\tthis.clearDecorationSlot(decoSlot);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!this.weaponSlot.item.slots) {\n\t\t\t\t\tthis.weaponSlot.item.slots = [];\n\t\t\t\t}\n\t\t\t\tthis.weaponSlot.item.slots.push({ level: slotAugs[0].levels[slotAugs.length - 1].slotLevel, augmentation: true });\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.weaponSlot.item.slots.some(decorationSlot => decorationSlot.augmentation)) {\n\t\t\t\tthis.weaponSlot.item.slots = this.weaponSlot.item.slots.filter(decorationSlot => !(decorationSlot === augDecorationSlot)); // Was Reject\n\t\t\t\tthis.equipmentService.removeDecoration(this.weaponSlot.decorationSlots.last.decoration);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate applySlotUpgrade() {\n\t\tconst upgradeContainer = this.equipmentService.upgradeContainer;\n\t\tif (upgradeContainer && upgradeContainer.upgradeDetails && upgradeContainer.upgradeDetails.length > 0) {\n\t\t\tthis.applySlotIncrement(upgradeContainer.upgradeDetails[3].level, ItemType.Upgrade);\n\t\t} else {\n\t\t\tthis.applySlotIncrement(0, ItemType.Upgrade);\n\t\t}\n\t}\n\n\tprivate applySlotAwakening() {\n\t\tconst slotAwakening = this.equipmentService.awakenings.find(x => x.type == AwakeningType.Slot);\n\t\tif (slotAwakening && slotAwakening.level - 1 > 0) {\n\t\t\tthis.applySlotIncrement(slotAwakening.level - 1, ItemType.Awakening);\n\t\t} else {\n\t\t\tthis.applySlotIncrement(0, ItemType.Awakening);\n\t\t}\n\t}\n\n\tprivate applySlotIncrement(extraSlots: number, itemType: ItemType) {\n\t\tconst decoSlotsIncremented = this.weaponSlot.item.slots.filter(x => x.slotsAdded && x.slotsAdded.some(y => y.itemType == itemType));\n\t\tlet totalAdded = 0;\n\t\tif (decoSlotsIncremented) {\n\t\t\tfor (const decoSlot of decoSlotsIncremented) {\n\t\t\t\tif (decoSlot.slotsAdded.length) {\n\t\t\t\t\tfor (const added of decoSlot.slotsAdded) {\n\t\t\t\t\t\tif (added.itemType == itemType) {\n\t\t\t\t\t\t\ttotalAdded += added.level;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (totalAdded != extraSlots) {\n\t\t\t\tthis.slotsIncrementRecursive(extraSlots - totalAdded, itemType);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate slotsIncrementRecursive(extraSlots: number, itemType: ItemType) {\n\t\tif (extraSlots > 0) {\n\t\t\tfor (const slot of this.weaponSlot.item.slots) {\n\t\t\t\tif (slot.level < 4) {\n\t\t\t\t\tconst toAdd = Math.min(4 - slot.level, extraSlots);\n\n\t\t\t\t\tif (!slot.slotsAdded) {\n\t\t\t\t\t\tslot.slotsAdded = [];\n\t\t\t\t\t}\n\t\t\t\t\tconst added = slot.slotsAdded.find(x => x.itemType == itemType);\n\t\t\t\t\tif (added) {\n\t\t\t\t\t\tadded.level += toAdd;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tslot.slotsAdded.push({ level: toAdd, itemType: itemType });\n\t\t\t\t\t}\n\n\t\t\t\t\tslot.level += toAdd;\n\t\t\t\t\textraSlots -= toAdd;\n\t\t\t\t}\n\t\t\t\tif (extraSlots == 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extraSlots > 0 && this.weaponSlot.item.slots.length < 3) {\n\t\t\t\tif (!this.weaponSlot.item.slots) {\n\t\t\t\t\tthis.weaponSlot.item.slots = [];\n\t\t\t\t}\n\t\t\t\tthis.weaponSlot.item.slots.push({ level: 0 });\n\t\t\t\tthis.slotsIncrementRecursive(extraSlots, itemType);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = this.weaponSlot.item.slots.length - 1; i >= 0; i--) {\n\t\t\t\tconst slot = this.weaponSlot.item.slots[i];\n\t\t\t\tconst toRemove = Math.min(slot.level, -extraSlots);\n\t\t\t\tif (slot.slotsAdded) {\n\t\t\t\t\tconst added = slot.slotsAdded.find(x => x.itemType == itemType);\n\t\t\t\t\tif (added) {\n\t\t\t\t\t\tadded.level -= toRemove;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst decoSlot = this.weaponSlot.decorationSlots.toArray()[i];\n\t\t\t\tif (decoSlot && decoSlot.decoration && decoSlot.decoration.level > slot.level - toRemove) {\n\t\t\t\t\tthis.clearDecorationSlot(decoSlot);\n\t\t\t\t}\n\t\t\t\tslot.level -= toRemove;\n\t\t\t\textraSlots += toRemove;\n\t\t\t\tif (slot.level == 0) {\n\t\t\t\t\tthis.weaponSlot.item.slots.pop();\n\t\t\t\t}\n\t\t\t\tif (extraSlots == 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate clearSlotItems(slot: ItemSlotComponent) {\n\t\tif (slot.item) {\n\t\t\tthis.equipmentService.removeItem(slot.item);\n\n\t\t\tslot.decorationSlots.forEach(ds => {\n\t\t\t\tthis.equipmentService.removeDecoration(ds.decoration);\n\t\t\t});\n\n\t\t\tslot.augmentationSlots.forEach(as => {\n\t\t\t\tthis.equipmentService.removeAugmentation(as.augmentation);\n\t\t\t});\n\n\t\t\tslot.modificationSlots.forEach(md => {\n\t\t\t\tthis.equipmentService.removeModification(md.modification);\n\t\t\t});\n\n\t\t\tif (slot.awakeningSlot) {\n\t\t\t\tthis.equipmentService.removeAwakening();\n\t\t\t\tslot.awakeningSlot.setbonus = null;\n\t\t\t}\n\t\t}\n\t\tif (slot.upgradeContainer) {\n\t\t\tslot.upgradeContainer.slots = 0;\n\t\t\tslot.upgradeContainer.used = 0;\n\t\t\tslot.upgradeContainer.hasCustomUpgrades = false;\n\t\t\tthis.clearUpgradeContainer(slot.upgradeContainer);\n\t\t\tthis.equipmentService.upgradeContainer = slot.upgradeContainer;\n\t\t}\n\t}\n\n\tprivate clearSlotSelect() {\n\t\tif (this.selectedItemSlot) {\n\t\t\tthis.selectedItemSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedDecorationSlot) {\n\t\t\tthis.selectedDecorationSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedAugmentationSlot) {\n\t\t\tthis.selectedAugmentationSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedUpgradeSlot) {\n\t\t\tthis.selectedUpgradeSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedSetbonusSlot) {\n\t\t\tthis.selectedSetbonusSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedModificationSlot) {\n\t\t\tthis.selectedModificationSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedKinsectSlot) {\n\t\t\tthis.selectedKinsectSlot.selected = false;\n\t\t}\n\n\t\tthis.selectedItemSlot = null;\n\t\tthis.selectedDecorationSlot = null;\n\t\tthis.selectedAugmentationSlot = null;\n\t\tthis.selectedUpgradeSlot = null;\n\t\tthis.selectedSetbonusSlot = null;\n\t\tthis.selectedModificationSlot = null;\n\t\tthis.selectedKinsectSlot = null;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { Subject } from 'rxjs';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { AwakeningModel } from '../models/awakening.model';\nimport { BuffModel } from '../models/buffs.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SkillLevelModel } from '../models/skill-level.model';\nimport { StatsModel } from '../models/stats.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { WeaponModifierModel } from '../models/weapon-modifier.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { AmmoType } from '../types/ammo.type';\nimport { AwakeningType } from '../types/awakening.type';\nimport { DamageType } from '../types/damage.type';\nimport { EldersealType } from '../types/elderseal.type';\nimport { ElementType } from '../types/element.type';\nimport { ItemType } from '../types/item.type';\nimport { ModeType } from '../types/mode.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { CalculationService } from './calculation.service';\nimport { DataService } from './data.service';\n\n@Injectable()\nexport class StatService {\n\tpublic statsUpdated$ = new Subject<StatsModel>();\n\n\treadonly defaultElementAttackIncreaseCap = 10.0;\n\n\tstats = new StatsModel();\n\tweaponModifier: WeaponModifierModel;\n\n\tawakeningsData: AwakeningModel[] = [];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate calcService: CalculationService\n\t) {\n\t\tthis.awakeningsData = this.dataService.getAwakenings();\n\t}\n\n\tupdate(\n\t\tskills: EquippedSkillModel[],\n\t\titems: ItemModel[],\n\t\taugmentations: AugmentationModel[],\n\t\tupgradeContainer: UpgradeContainerModel,\n\t\tawakenings: AwakeningLevelModel[],\n\t\tmodifications: ModificationModel[],\n\t\tkinsect: KinsectModel,\n\t\tbuffs: BuffModel\n\t) {\n\n\t\tthis.stats = new StatsModel();\n\n\t\t// ---------------------------- Weapon\n\t\tconst weapon = items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (weapon) {\n\t\t\tthis.weaponModifier = this.dataService.getWeaponModifier(weapon.weaponType);\n\n\t\t\tswitch (weapon.weaponType) {\n\t\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\t\tthis.stats.ammoCapacities = weapon.ammoCapacities;\n\t\t\t\t\tbreak;\n\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\tthis.stats.kinsect = kinsect;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.stats.weaponType = weapon.weaponType;\n\t\t}\n\t\t// ---------------------------- Awakenings\n\t\tif (weapon && awakenings.length) {\n\t\t\tthis.updateAwakenings(weapon, awakenings);\n\t\t}\n\t\t// ---------------------------- Upgrades\n\t\tif (upgradeContainer) {\n\t\t\tthis.updateUpgrades(upgradeContainer);\n\t\t}\n\t\t// ----------------------------\n\t\tthis.updateItemStats(items, buffs);\n\t\tthis.updateSkillStats(skills);\n\t\tthis.updateAugmentations(augmentations);\n\n\t\tthis.updateModifications(modifications);\n\n\t\tthis.calculateAttack(weapon);\n\n\t\tthis.statsUpdated$.next(this.stats);\n\n\t\tthis.calcService.updateCalcs(this.stats);\n\t}\n\n\tprivate updateItemStats(items: ItemModel[], buffs: BuffModel) {\n\t\tfor (const item of items) {\n\t\t\tif (item.itemType != ItemType.Tool1 && item.itemType != ItemType.Tool2) {\n\t\t\t\tif (item.baseAttack) {\n\t\t\t\t\tthis.stats.attack += item.baseAttack;\n\t\t\t\t\tthis.stats.attack = this.nearestTen(this.stats.attack * 10) / 10;\n\t\t\t\t}\n\t\t\t\tif (item.baseAffinityPercent) { this.stats.affinity += item.baseAffinityPercent; }\n\t\t\t\tif (item.itemType == ItemType.Weapon) {\n\t\t\t\t\tif (item.defense) {\n\t\t\t\t\t\tfor (let i = 0; i < this.stats.defense.length; i++) {\n\t\t\t\t\t\t\tthis.stats.defense[i] += item.defense[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (item.defense) {\n\t\t\t\t\t\tfor (let i = 0; i < this.stats.defense.length; i++) {\n\t\t\t\t\t\t\tthis.stats.defense[i] += item.defense[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (item.fireResist) { this.stats.fireResist += item.fireResist; }\n\t\t\t\tif (item.waterResist) { this.stats.waterResist += item.waterResist; }\n\t\t\t\tif (item.thunderResist) { this.stats.thunderResist += item.thunderResist; }\n\t\t\t\tif (item.iceResist) { this.stats.iceResist += item.iceResist; }\n\t\t\t\tif (item.dragonResist) { this.stats.dragonResist += item.dragonResist; }\n\t\t\t\tif (item.element) { this.stats.element = item.element; }\n\t\t\t\tif (item.elementBaseAttack) { this.stats.baseElementAttack += item.elementBaseAttack; }\n\t\t\t\tif (item.ailment) { this.stats.ailment = item.ailment; }\n\t\t\t\tif (item.ailmentBaseAttack) { this.stats.baseAilmentAttack += item.ailmentBaseAttack; }\n\t\t\t\tif (item.elderseal) { this.stats.elderseal = item.elderseal; }\n\t\t\t}\n\t\t}\n\n\t\tthis.stats.fireResist += (buffs.elementBuff * 5);\n\t\tthis.stats.waterResist += (buffs.elementBuff * 5);\n\t\tthis.stats.thunderResist += (buffs.elementBuff * 5);\n\t\tthis.stats.iceResist += (buffs.elementBuff * 5);\n\t\tthis.stats.dragonResist += (buffs.elementBuff * 5);\n\t}\n\n\tprivate updateSkillStats(equippedSkills: EquippedSkillModel[]) {\n\t\tfor (const equippedSkill of equippedSkills) {\n\t\t\tlet level: SkillLevelModel;\n\n\t\t\tif (equippedSkill.equippedCount) {\n\t\t\t\tconst levelIndex = Math.min(equippedSkill.equippedCount, equippedSkill.skill.levels.length) - 1;\n\t\t\t\tlevel = equippedSkill.skill.levels[levelIndex];\n\t\t\t}\n\t\t\tif (level) {\n\t\t\t\tif (equippedSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tconst skillUpgrade = equippedSkills.find(x => x.id == 'true' + equippedSkill.id.substring(0, 1).toUpperCase() + equippedSkill.id.substring(1, equippedSkill.id.length));\n\t\t\t\t\tif (skillUpgrade == null || skillUpgrade.skill.mode == ModeType.Active) {\n\t\t\t\t\t\tif (level.activeElementAttack) { this.stats.activeElementAttack += level.activeElementAttack; }\n\t\t\t\t\t\tif (level.activeAilmentAttack) { this.stats.activeAilmentAttack += level.activeAilmentAttack; }\n\t\t\t\t\t\tif (level.activeAilmentAttackBuildUpPercent) { this.stats.activeAilmentAttackBuildUpPercent += level.activeAilmentAttackBuildUpPercent; }\n\t\t\t\t\t\tif (level.activeAttack) { this.stats.activeAttack += level.activeAttack; }\n\t\t\t\t\t\tif (level.activeAttackPercent) { this.stats.activeAttackPercent += level.activeAttackPercent; }\n\t\t\t\t\t\tif (level.activeAffinity) { this.stats.activeAffinity += level.activeAffinity; }\n\t\t\t\t\t\tif (level.activeWeakPointAffinity) { this.stats.weakPointAffinity += level.activeWeakPointAffinity; }\n\t\t\t\t\t\tif (level.activeDefense) { this.stats.activeDefense += level.activeDefense; }\n\t\t\t\t\t\tif (equippedSkill.skill.id == 'frostcraft') {\n\t\t\t\t\t\t\tthis.stats.activeAttackPercent += this.weaponModifier.frostcraft[2];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (equippedSkill.skill.mode == ModeType.Active || equippedSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tif (level.passiveAttack) { this.stats.passiveAttack += level.passiveAttack; }\n\t\t\t\t\tif (level.elementlessBoostPercent) { this.stats.elementlessBoostPercent += level.elementlessBoostPercent; }\n\t\t\t\t\tif (level.passiveAffinity) { this.stats.passiveAffinity += level.passiveAffinity; }\n\t\t\t\t\tif (level.weakPointAffinity) { this.stats.weakPointAffinity += level.weakPointAffinity; }\n\t\t\t\t\tif (level.passiveSharpness) { this.stats.passiveSharpness += level.passiveSharpness; }\n\n\t\t\t\t\tif (level.passiveCriticalBoostPercent) { this.stats.passiveCriticalBoostPercent += level.passiveCriticalBoostPercent; }\n\t\t\t\t\tif (level.criticalElement) { this.stats.criticalElement = true; }\n\t\t\t\t\tif (level.criticalStatus) { this.stats.criticalStatus = true; }\n\t\t\t\t\tif (level.trueCriticalElement) { this.stats.trueCriticalElement = true; }\n\t\t\t\t\tif (level.trueCriticalStatus) { this.stats.trueCriticalStatus = true; }\n\n\t\t\t\t\tif (level.passiveFireAttack) { this.stats.passiveFireAttack += level.passiveFireAttack; }\n\t\t\t\t\tif (level.passiveWaterAttack) { this.stats.passiveWaterAttack += level.passiveWaterAttack; }\n\t\t\t\t\tif (level.passiveThunderAttack) { this.stats.passiveThunderAttack += level.passiveThunderAttack; }\n\t\t\t\t\tif (level.passiveIceAttack) { this.stats.passiveIceAttack += level.passiveIceAttack; }\n\t\t\t\t\tif (level.passiveDragonAttack) { this.stats.passiveDragonAttack += level.passiveDragonAttack; }\n\n\t\t\t\t\tif (level.passiveFireAttackPercent) { this.stats.passiveFireAttackPercent += level.passiveFireAttackPercent; }\n\t\t\t\t\tif (level.passiveWaterAttackPercent) { this.stats.passiveWaterAttackPercent += level.passiveWaterAttackPercent; }\n\t\t\t\t\tif (level.passiveThunderAttackPercent) { this.stats.passiveThunderAttackPercent += level.passiveThunderAttackPercent; }\n\t\t\t\t\tif (level.passiveIceAttackPercent) { this.stats.passiveIceAttackPercent += level.passiveIceAttackPercent; }\n\t\t\t\t\tif (level.passiveDragonAttackPercent) { this.stats.passiveDragonAttackPercent += level.passiveDragonAttackPercent; }\n\n\t\t\t\t\tif (level.passivePoisonAttack) { this.stats.passivePoisonAttack += level.passivePoisonAttack; }\n\t\t\t\t\tif (level.passiveSleepAttack) { this.stats.passiveSleepAttack += level.passiveSleepAttack; }\n\t\t\t\t\tif (level.passiveParalysisAttack) { this.stats.passiveParalysisAttack += level.passiveParalysisAttack; }\n\t\t\t\t\tif (level.passiveBlastAttack) { this.stats.passiveBlastAttack += level.passiveBlastAttack; }\n\t\t\t\t\tif (level.passiveStunAttack) { this.stats.passiveStunAttack += level.passiveStunAttack; }\n\n\t\t\t\t\tif (level.passivePoisonBuildupPercent) { this.stats.passivePoisonBuildupPercent += level.passivePoisonBuildupPercent; }\n\t\t\t\t\tif (level.passiveSleepBuildupPercent) { this.stats.passiveSleepBuildupPercent += level.passiveSleepBuildupPercent; }\n\t\t\t\t\tif (level.passiveParalysisBuildupPercent) { this.stats.passiveParalysisBuildupPercent += level.passiveParalysisBuildupPercent; }\n\t\t\t\t\tif (level.passiveBlastBuildupPercent) { this.stats.passiveBlastBuildupPercent += level.passiveBlastBuildupPercent; }\n\t\t\t\t\tif (level.passiveStunBuildupPercent) { this.stats.passiveStunBuildupPercent += level.passiveStunBuildupPercent; }\n\n\t\t\t\t\tif (level.passiveDefense) { this.stats.passiveDefense += level.passiveDefense; }\n\t\t\t\t\tif (level.passiveDefensePercent) { this.stats.passiveDefensePercent += level.passiveDefensePercent; }\n\t\t\t\t\tif (level.passiveHealth) { this.stats.passiveHealth += level.passiveHealth; }\n\t\t\t\t\tif (level.passiveStamina) { this.stats.passiveStamina += level.passiveStamina; }\n\n\t\t\t\t\tif (level.passiveFireResist) { this.stats.passiveFireResist += level.passiveFireResist; }\n\t\t\t\t\tif (level.passiveWaterResist) { this.stats.passiveWaterResist += level.passiveWaterResist; }\n\t\t\t\t\tif (level.passiveThunderResist) { this.stats.passiveThunderResist += level.passiveThunderResist; }\n\t\t\t\t\tif (level.passiveIceResist) { this.stats.passiveIceResist += level.passiveIceResist; }\n\t\t\t\t\tif (level.passiveDragonResist) { this.stats.passiveDragonResist += level.passiveDragonResist; }\n\n\t\t\t\t\tif (level.passiveElementResistPercent) { this.stats.passiveElementResistPercent = level.passiveElementResistPercent; }\n\n\t\t\t\t\tif (level.hiddenElementUp) { this.stats.elementAttackMultiplier = level.hiddenElementUp; }\n\t\t\t\t\tif (level.ammoUp) { this.stats.ammoUp += level.ammoUp; }\n\t\t\t\t\tif (level.eldersealLevelBoost) { this.stats.eldersealLevelBoost = level.eldersealLevelBoost; }\n\t\t\t\t}\n\t\t\t\tif (equippedSkill.skill.id == 'hastenRecovery') {\n\t\t\t\t\tthis.stats.hastenRecovery = 0;\n\t\t\t\t}\n\t\t\t\tif (equippedSkill.skill.id == 'frostcraft') {\n\t\t\t\t\tthis.stats.frostcraft = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.stats.passiveElementResistPercent) {\n\t\t\tthis.stats.passiveFireResist += (this.stats.fireResist + this.stats.passiveFireResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveWaterResist += (this.stats.waterResist + this.stats.passiveWaterResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveThunderResist += (this.stats.thunderResist + this.stats.passiveThunderResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveIceResist += (this.stats.iceResist + this.stats.passiveIceResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveDragonResist += (this.stats.dragonResist + this.stats.passiveDragonResist) * this.stats.passiveElementResistPercent / 100;\n\t\t}\n\n\t\tconst elementConversionSkill = equippedSkills.find(skill => skill.id == 'elementConversion');\n\t\tif (elementConversionSkill && elementConversionSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\tconst sumElementalRes =\n\t\t\t\tthis.stats.fireResist + this.stats.passiveFireResist\n\t\t\t\t+ this.stats.waterResist + this.stats.passiveWaterResist\n\t\t\t\t+ this.stats.thunderResist + this.stats.passiveThunderResist\n\t\t\t\t+ this.stats.iceResist + this.stats.passiveIceResist\n\t\t\t\t+ this.stats.dragonResist + this.stats.passiveDragonResist;\n\t\t\tlet elementalBonus = 0;\n\t\t\tif (sumElementalRes >= 15) {\n\t\t\t\tif (sumElementalRes < 30) {\n\t\t\t\t\telementalBonus = 10;\n\t\t\t\t} else if (sumElementalRes < 40) {\n\t\t\t\t\telementalBonus = 20;\n\t\t\t\t} else {\n\t\t\t\t\telementalBonus = Math.floor((sumElementalRes - 30) / 20) * 10 + 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.stats.baseElementAttack += elementalBonus;\n\t\t}\n\t}\n\n\tprivate updateAugmentations(augmentations: AugmentationModel[]) {\n\t\tconst augGroups = _.groupBy(augmentations, 'id');\n\n\t\tfor (const key in augGroups) {\n\t\t\tif (augGroups.hasOwnProperty(key)) {\n\t\t\t\tconst value = augGroups[key];\n\n\t\t\t\tconst level = value[0].levels[value.length - 1];\n\t\t\t\tif (level) {\n\t\t\t\t\tif (level.passiveAttack) { this.stats.passiveAttack += level.passiveAttack; }\n\t\t\t\t\tif (level.passiveAffinity) { this.stats.passiveAffinity += level.passiveAffinity; }\n\t\t\t\t\tif (level.passiveDefense) { this.stats.passiveDefense += level.passiveDefense; }\n\t\t\t\t\tif (level.healOnHitPercent) { this.stats.healOnHitPercent += level.healOnHitPercent; }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateUpgrades(upgradeContainer: UpgradeContainerModel) {\n\t\tconst attackModifier = this.weaponModifier.attackModifier;\n\n\t\tfor (const detail of upgradeContainer.upgradeDetails) {\n\t\t\tif (detail.passiveAttack) {\n\t\t\t\tthis.stats.upgradeAttack += detail.passiveAttack;\n\t\t\t}\n\t\t\tif (detail.passiveAffinity) {\n\t\t\t\tthis.stats.affinity += detail.passiveAffinity;\n\t\t\t\tthis.stats.upgradeAffinity += detail.passiveAffinity;\n\t\t\t}\n\t\t\tif (detail.passiveDefense) { this.stats.passiveDefense += detail.passiveDefense; }\n\t\t\tif (detail.healOnHitPercent) { this.stats.healOnHitPercent += detail.healOnHitPercent; }\n\t\t\tif (detail.passiveElement) {\n\t\t\t\tthis.stats.baseElementAttack += detail.passiveElement;\n\t\t\t\tthis.stats.upgradeElementAttack += detail.passiveElement;\n\t\t\t}\n\t\t\tif (detail.passiveAilment) {\n\t\t\t\tthis.stats.baseAilmentAttack += detail.passiveAilment;\n\t\t\t\tthis.stats.upgradeAilmentAttack += detail.passiveAilment;\n\t\t\t}\n\t\t}\n\n\t\tlet upgradePassiveAttack = 0;\n\t\tlet upgradePassiveAffinity = 0;\n\t\tlet upgradePassiveAilmentElement = 0;\n\t\tlet upgradePassiveDefense = 0;\n\n\t\tlet weaponIndex = 0;\n\t\tfor (const item in WeaponType) {\n\t\t\tif (isNaN(Number(item))) {\n\t\t\t\tif (item == upgradeContainer.weaponType) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tweaponIndex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst upgrades = this.dataService.getUpgrades();\n\t\tfor (const [i, customId] of upgradeContainer.customUpgradeIds.entries()) {\n\t\t\tif (customId > 0) {\n\t\t\t\tconst value = upgrades.find(x => x.id == customId).WeaponCustomUpgrades[weaponIndex][i];\n\t\t\t\tupgradeContainer.customUpgradeValues[i] = value;\n\t\t\t\tswitch (customId) {\n\t\t\t\t\tcase 1: // Attack\n\t\t\t\t\t\tupgradePassiveAttack += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2: // Affinity\n\t\t\t\t\t\tupgradePassiveAffinity += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3: // Defense\n\t\t\t\t\t\tupgradePassiveDefense += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6: // Element / Ailment\n\t\t\t\t\t\tupgradePassiveAilmentElement += value * 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 7: // Sharpness\n\t\t\t\t\t\tthis.stats.extraSharpness += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.stats.upgradeAttack += upgradePassiveAttack;\n\t\tthis.stats.affinity += upgradePassiveAffinity;\n\t\tthis.stats.upgradeAffinity += upgradePassiveAffinity;\n\t\tthis.stats.passiveDefense += upgradePassiveDefense;\n\n\t\tthis.stats.baseElementAttack += upgradePassiveAilmentElement;\n\t\tthis.stats.upgradeElementAttack += upgradePassiveAilmentElement;\n\t\tthis.stats.baseAilmentAttack += upgradePassiveAilmentElement;\n\t\tthis.stats.upgradeAilmentAttack += upgradePassiveAilmentElement;\n\t}\n\n\tprivate updateAwakenings(weapon: ItemModel, awakenings: AwakeningLevelModel[]) {\n\t\tlet weaponIndex = 0;\n\t\tfor (const type in WeaponType) {\n\t\t\tif (isNaN(Number(type))) {\n\t\t\t\tif (type == weapon.weaponType) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tweaponIndex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst attackModifier = this.weaponModifier.attackModifier;\n\n\t\tconst awakeningAttack: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Attack).awakenings[weaponIndex];\n\t\tconst awakeningAffinity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Affinity).awakenings[0];\n\t\tconst awakeningDefense: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Defense).awakenings[0];\n\t\tconst awakeningSlot: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Slot).awakenings[0];\n\t\tconst awakeningAilment: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Ailment).awakenings[weaponIndex];\n\t\tconst awakeningElement: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Element).awakenings[weaponIndex];\n\t\tconst awakeningSharpness: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Sharpness).awakenings[0];\n\n\t\tfor (const awakening of awakenings) {\n\t\t\tif (awakening.level > 0) {\n\t\t\t\tswitch (awakening.type) {\n\t\t\t\t\tcase AwakeningType.Attack:\n\t\t\t\t\t\tthis.stats.awakeningAttack += awakeningAttack[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Affinity:\n\t\t\t\t\t\tthis.stats.affinity += awakeningAffinity[awakening.level - 1];\n\t\t\t\t\t\tthis.stats.awakeningAffinity += awakeningAffinity[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Defense:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Slot:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Ailment:\n\t\t\t\t\t\tthis.stats.baseAilmentAttack += awakeningAilment[awakening.level - 1];\n\t\t\t\t\t\tthis.stats.awakeningAilmentAttack += awakeningAilment[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Element:\n\t\t\t\t\t\tthis.stats.baseElementAttack += awakeningElement[awakening.level - 1];\n\t\t\t\t\t\tthis.stats.awakeningElementAttack += awakeningElement[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Sharpness:\n\t\t\t\t\t\tthis.stats.extraSharpness += awakeningSharpness[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst defense = awakenings.find(x => x.type == AwakeningType.Defense);\n\t\tif (defense) {\n\t\t\tthis.stats.passiveDefense += awakeningDefense[defense.level - 1];\n\t\t}\n\t\tconst slot = awakenings.find(x => x.type == AwakeningType.Slot);\n\t\tif (slot) {\n\t\t\tthis.stats.extraSlot += awakeningSlot[slot.level - 1];\n\t\t}\n\n\t\tif (weapon.weaponType == WeaponType.HuntingHorn) {\n\t\t\tlet melodyId = weapon.id;\n\n\t\t\tconst attackMelody = awakenings.find(x => x.type == AwakeningType.AttackMelody);\n\t\t\tif (attackMelody && attackMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.AttackMelody).awakenings[0][attackMelody.level - 1];\n\t\t\t}\n\t\t\tconst staminaMelody = awakenings.find(x => x.type == AwakeningType.StaminaMelody);\n\t\t\tif (staminaMelody && staminaMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.StaminaMelody).awakenings[0][staminaMelody.level - 1];\n\t\t\t}\n\t\t\tconst elementalMelody = awakenings.find(x => x.type == AwakeningType.ElementalMelody);\n\t\t\tif (elementalMelody && elementalMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.ElementalMelody).awakenings[0][elementalMelody.level - 1];\n\t\t\t}\n\t\t\tconst statusMelody = awakenings.find(x => x.type == AwakeningType.StatusMelody);\n\t\t\tif (statusMelody && statusMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.StatusMelody).awakenings[0][statusMelody.level - 1];\n\t\t\t}\n\t\t\tconst earplugsMelody = awakenings.find(x => x.type == AwakeningType.EarplugsMelody);\n\t\t\tif (earplugsMelody && earplugsMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.EarplugsMelody).awakenings[0][earplugsMelody.level - 1];\n\t\t\t}\n\n\t\t\tweapon.melodies = this.dataService.getMelodiesById(melodyId);\n\t\t}\n\n\t\tif (weapon.ammoCapacities) {\n\t\t\tweapon.ammoCapacities = JSON.parse(JSON.stringify(this.dataService.getAmmoCapacities(weapon.id)));\n\n\t\t\tconst awakeningNormalCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.NormalCapacity).awakenings[0];\n\t\t\tconst awakeningPierceCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.PierceCapacity).awakenings[0];\n\t\t\tconst awakeningSpreadCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.SpreadCapacity).awakenings[0];\n\t\t\tconst awakeningElementalCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.ElementalCapacity).awakenings[0];\n\n\t\t\tconst normalCapacity = awakenings.find(x => x.type == AwakeningType.NormalCapacity);\n\t\t\tif (normalCapacity && normalCapacity.level >= 4) {\n\t\t\t\tconst normalAmmo = awakeningNormalCapacity[normalCapacity.level - 1];\n\t\t\t\tconst ammo = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.normal);\n\t\t\t\tif (ammo) {\n\t\t\t\t\tfor (const level of ammo.levels) {\n\t\t\t\t\t\tif (level.capacity > 0) {\n\t\t\t\t\t\t\tlevel.capacity += normalAmmo;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst pierceCapacity = awakenings.find(x => x.type == AwakeningType.PierceCapacity);\n\t\t\tif (pierceCapacity && pierceCapacity.level >= 4) {\n\t\t\t\tconst pierceAmmo = awakeningPierceCapacity[pierceCapacity.level - 1];\n\t\t\t\tconst ammo = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.pierce);\n\t\t\t\tif (ammo) {\n\t\t\t\t\tfor (const level of ammo.levels) {\n\t\t\t\t\t\tif (level.capacity > 0) {\n\t\t\t\t\t\t\tlevel.capacity += pierceAmmo;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst spreadCapacity = awakenings.find(x => x.type == AwakeningType.SpreadCapacity);\n\t\t\tif (spreadCapacity && spreadCapacity.level >= 4) {\n\t\t\t\tconst spreadAmmo = awakeningSpreadCapacity[spreadCapacity.level - 1];\n\t\t\t\tconst ammo = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.spread);\n\t\t\t\tif (ammo) {\n\t\t\t\t\tfor (const level of ammo.levels) {\n\t\t\t\t\t\tif (level.capacity > 0) {\n\t\t\t\t\t\t\tlevel.capacity += spreadAmmo;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst elementalCapacity = awakenings.find(x => x.type == AwakeningType.ElementalCapacity);\n\t\t\tif (elementalCapacity && elementalCapacity.level >= 4) {\n\t\t\t\tconst elementalAmmo = awakeningElementalCapacity[elementalCapacity.level - 1];\n\n\t\t\t\tconst fire = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.flaming);\n\t\t\t\tconst water = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.water);\n\t\t\t\tconst thunder = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.thunder);\n\t\t\t\tconst ice = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.freeze);\n\t\t\t\tconst dragon = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.dragon);\n\n\t\t\t\tif (fire && fire.levels[0].capacity > 0) {\n\t\t\t\t\tfire.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (water && water.levels[0].capacity > 0) {\n\t\t\t\t\twater.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (thunder && thunder.levels[0].capacity > 0) {\n\t\t\t\t\tthunder.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (ice && ice.levels[0].capacity > 0) {\n\t\t\t\t\tice.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (dragon && dragon.levels[0].capacity > 0) {\n\t\t\t\t\tdragon.levels[0].capacity = Math.min(dragon.levels[0].capacity + elementalAmmo, 3); // Dragon Max = 3\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateModifications(modifications: ModificationModel[]) {\n\t\tconst modGroups = _.groupBy(modifications, 'id');\n\n\t\tfor (const key in modGroups) {\n\t\t\tif (modGroups.hasOwnProperty(key)) {\n\t\t\t\tconst value = modGroups[key];\n\n\t\t\t\tconst level = value[0].levels[value.length - 1];\n\t\t\t\tif (level) {\n\t\t\t\t\tif (level.recoil) { this.stats.recoil += level.recoil; }\n\t\t\t\t\tif (level.reload) { this.stats.reload += level.reload; }\n\t\t\t\t\tif (level.deviation) { this.stats.deviation += level.deviation; }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate calculateAttack(weapon: ItemModel) {\n\t\tswitch (this.stats.element) {\n\t\t\tcase ElementType.Fire:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveFireAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveFireAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Water:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveWaterAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveWaterAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Thunder:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveThunderAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveThunderAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Ice:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveIceAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveIceAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Dragon:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveDragonAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveDragonAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (this.stats.ailment) {\n\t\t\tcase AilmentType.Poison:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passivePoisonAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passivePoisonBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passivePoisonBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Sleep:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveSleepAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveSleepBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveSleepBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Paralysis:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveParalysisAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveParalysisBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveParalysisBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Blast:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveBlastAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveBlastBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveBlastBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Stun:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveStunAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveStunBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveStunBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (weapon) {\n\t\t\tthis.stats.sharpnessDataNeeded = weapon.sharpnessDataNeeded;\n\t\t\tthis.stats.elementHidden = weapon.elementHidden;\n\t\t\tthis.stats.ailmentHidden = weapon.ailmentHidden;\n\t\t\tthis.stats.extraData = {\n\t\t\t\tweaponType: weapon.weaponType,\n\t\t\t\totherData: weapon.otherData\n\t\t\t};\n\n\t\t\tif (this.weaponModifier) {\n\t\t\t\tthis.stats.weaponAttackModifier = this.weaponModifier.attackModifier;\n\t\t\t\tthis.stats.critElementModifier = this.weaponModifier.critElementModifier;\n\t\t\t\tthis.stats.trueCritElementModifier = this.weaponModifier.trueCritElementModifier;\n\t\t\t\tthis.stats.critStatusModifier = this.weaponModifier.critStatusModifier;\n\t\t\t\tthis.stats.trueCritStatusModifier = this.weaponModifier.trueCritStatusModifier;\n\n\t\t\t\tif (this.stats.hastenRecovery != null) {\n\t\t\t\t\tthis.stats.hastenRecovery = this.weaponModifier.hastenRecovery;\n\t\t\t\t}\n\t\t\t\tif (this.stats.frostcraft != null) {\n\t\t\t\t\tthis.stats.frostcraft = this.weaponModifier.frostcraft;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (weapon && weapon.sharpnessLevelsBar.length && !isNaN(weapon.sharpnessLevelsBar[0])) {\n\t\t\tthis.stats.sharpnessLevelsBar = JSON.parse(JSON.stringify(weapon.sharpnessLevelsBar));\n\t\t\tif (weapon.sharpnessLevelsBar && !isNaN(weapon.sharpnessLevelsBar[0])) {\n\t\t\t\t// Extra Sharpness\n\t\t\t\tif (this.stats.extraSharpness > 0) {\n\t\t\t\t\tconst extraSharpness = this.stats.extraSharpness / 10;\n\n\t\t\t\t\tconst total = this.stats.sharpnessLevelsBar.reduce((a, b) => a + b, 0);\n\t\t\t\t\tlet maxHandicraft = 40 + 5 - total;\n\t\t\t\t\tlet currentSharpnessIndex = 0;\n\t\t\t\t\tfor (let i = this.stats.sharpnessLevelsBar.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tif (maxHandicraft > 0) {\n\t\t\t\t\t\t\tconst toSubstract = Math.min(this.stats.sharpnessLevelsBar[i], maxHandicraft);\n\t\t\t\t\t\t\tif (toSubstract < this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\t\tcurrentSharpnessIndex = i;\n\t\t\t\t\t\t\t} else if (toSubstract == this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\t\tcurrentSharpnessIndex = i - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmaxHandicraft -= toSubstract;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.stats.sharpnessLevelsBar[i] == 0) {\n\t\t\t\t\t\t\tcurrentSharpnessIndex = i - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet extraSharpnessAdd = extraSharpness;\n\t\t\t\t\tfor (let i = currentSharpnessIndex; i < this.stats.sharpnessLevelsBar.length; i++) {\n\t\t\t\t\t\tlet toAdd = 0;\n\t\t\t\t\t\tif (i < 6) {\n\t\t\t\t\t\t\ttoAdd = Math.min(12 - this.stats.sharpnessLevelsBar[i], extraSharpnessAdd);\n\t\t\t\t\t\t\tthis.stats.sharpnessLevelsBar[i] += toAdd;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoAdd = extraSharpnessAdd;\n\t\t\t\t\t\t\tthis.stats.sharpnessLevelsBar[i] += toAdd;\n\t\t\t\t\t\t}\n\t\t\t\t\t\textraSharpnessAdd -= toAdd;\n\t\t\t\t\t\tif (extraSharpnessAdd == 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet extraSharpnessRemove = extraSharpness;\n\t\t\t\t\tfor (let i = 0; i < this.stats.sharpnessLevelsBar.length; i++) {\n\t\t\t\t\t\tconst toRemove = Math.min(this.stats.sharpnessLevelsBar[i] - 1, extraSharpnessRemove);\n\t\t\t\t\t\tthis.stats.sharpnessLevelsBar[i] -= toRemove;\n\t\t\t\t\t\textraSharpnessRemove -= toRemove;\n\t\t\t\t\t\tif (extraSharpnessRemove == 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t// Handicraft\n\t\t\t\tlet levelsToSubstract = 5 - (this.stats.passiveSharpness / 10);\n\t\t\t\tlet colorIndex = this.stats.sharpnessLevelsBar.length - 1;\n\t\t\t\tfor (let i = this.stats.sharpnessLevelsBar.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (levelsToSubstract > 0) {\n\t\t\t\t\t\tconst toSubstract = Math.min(this.stats.sharpnessLevelsBar[i], levelsToSubstract);\n\t\t\t\t\t\tif (toSubstract < this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\tcolorIndex = i;\n\t\t\t\t\t\t} else if (toSubstract == this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\tcolorIndex = i - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlevelsToSubstract -= toSubstract;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.stats.sharpnessLevelsBar[i] == 0) {\n\t\t\t\t\t\tcolorIndex = i - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst sharpnessModifier = this.dataService.getSharpnessModifier(DamageType.Physical, colorIndex);\n\t\t\t\tif (sharpnessModifier) {\n\t\t\t\t\tthis.stats.effectivePhysicalSharpnessModifier = sharpnessModifier.value;\n\t\t\t\t}\n\t\t\t\tconst ElementalSharpnessModifier = this.dataService.getSharpnessModifier(DamageType.Elemental, colorIndex);\n\t\t\t\tif (ElementalSharpnessModifier) {\n\t\t\t\t\tthis.stats.effectiveElementalSharpnessModifier = ElementalSharpnessModifier.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst elementAttackIncreaseCap = weapon ? weapon.elementAttackIncreaseCapOverride || this.defaultElementAttackIncreaseCap : this.defaultElementAttackIncreaseCap;\n\t\tconst ailmentAttackIncreaseCap = weapon ? weapon.elementAttackIncreaseCapOverride || this.defaultElementAttackIncreaseCap : this.defaultElementAttackIncreaseCap;\n\n\t\tif (this.stats.elementHidden) {\n\t\t\tthis.stats.effectiveElementAttack = this.nearestTen(Math.round(this.stats.baseElementAttack * this.stats.elementAttackMultiplier));\n\t\t} else {\n\t\t\tthis.stats.effectiveElementAttack = this.stats.baseElementAttack;\n\t\t}\n\n\t\tif (this.stats.ailmentHidden) {\n\t\t\tthis.stats.effectiveAilmentAttack = this.nearestTen(Math.round(this.stats.baseAilmentAttack * this.stats.elementAttackMultiplier));\n\n\t\t} else {\n\t\t\tthis.stats.effectiveAilmentAttack = this.stats.baseAilmentAttack;\n\t\t}\n\n\t\tthis.stats.elementCap = this.nearestTen(Math.round(this.stats.effectiveElementAttack + (this.stats.effectiveElementAttack * elementAttackIncreaseCap)));\n\t\tthis.stats.ailmentCap = this.nearestTen(Math.round(this.stats.effectiveAilmentAttack + (this.stats.effectiveAilmentAttack * ailmentAttackIncreaseCap)));\n\n\t\t// this.stats.totalElementAttack = Math.min(this.stats.effectiveElementAttack + this.stats.effectivePassiveElementAttack, this.stats.elementCap);\n\t\t// this.stats.totalAilmentAttack = Math.min(this.stats.effectiveAilmentAttack + this.stats.effectivePassiveAilmentAttack, this.stats.ailmentCap);\n\t\t// this.stats.elementCapped = this.stats.totalElementAttack > 0 && (this.stats.effectiveElementAttack + this.stats.effectivePassiveElementAttack) > this.stats.elementCap;\n\t\t// this.stats.ailmentCapped = this.stats.totalAilmentAttack > 0 && (this.stats.effectiveAilmentAttack + this.stats.effectivePassiveAilmentAttack) > this.stats.ailmentCap;\n\n\t\tthis.stats.totalElementAttack =\n\t\t\tthis.stats.effectiveElementAttack\n\t\t\t+ this.stats.effectivePassiveElementAttack;\n\t\tthis.stats.totalElementAttackPotential =\n\t\t\tthis.stats.effectiveElementAttack\n\t\t\t+ this.stats.effectivePassiveElementAttack\n\t\t\t+ this.stats.activeElementAttack;\n\t\tthis.stats.totalElementAttackPotential = this.nearestTen(this.stats.totalElementAttackPotential * 10) / 10;\n\n\t\tthis.stats.totalAilmentAttack =\n\t\t\tthis.stats.effectiveAilmentAttack * (1 + this.stats.effectivePassiveAilmentBuildupPercent / 100)\n\t\t\t+ this.stats.effectivePassiveAilmentAttack;\n\t\tthis.stats.totalAilmentAttackPotential =\n\t\t\tthis.stats.effectiveAilmentAttack * (1 + this.stats.effectivePassiveAilmentBuildupPercent / 100 + this.stats.activeAilmentAttackBuildUpPercent / 100)\n\t\t\t+ this.stats.effectivePassiveAilmentAttack\n\t\t\t+ this.stats.activeAilmentAttack;\n\t\tthis.stats.totalAilmentAttack = this.nearestTen(this.stats.totalAilmentAttack * 10) / 10;\n\t\tthis.stats.totalAilmentAttackPotential = this.nearestTen(this.stats.totalAilmentAttackPotential * 10) / 10;\n\n\t\tconst rawAttack = this.stats.attack / this.stats.weaponAttackModifier;\n\t\tconst elementless = 1 + this.stats.elementlessBoostPercent / 100;\n\t\tconst attackPercent = 1 + this.stats.activeAttackPercent / 100;\n\t\tif (this.checkElementless()) {\n\t\t\tthis.stats.totalAttack =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.round(\n\t\t\t\t\t\tMath.round(rawAttack * elementless)\n\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t) * this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.totalAttackPotential =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.round(\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tMath.round(rawAttack * elementless)\n\t\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t) * attackPercent\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t\t+ this.stats.activeAttack\n\t\t\t\t\t)\n\t\t\t\t\t* this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.elementless = true;\n\t\t} else {\n\t\t\tthis.stats.totalAttack =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.floor(\n\t\t\t\t\t\trawAttack\n\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t) * this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.totalAttackPotential =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.floor(\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\trawAttack\n\t\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t) * attackPercent\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t\t+ this.stats.activeAttack\n\t\t\t\t\t)\n\t\t\t\t\t* this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.elementless = false;\n\t\t}\n\n\t\tif (this.stats.elderseal && this.stats.eldersealLevelBoost) {\n\t\t\tconst eldersealTypes = Object.keys(EldersealType);\n\t\t\tconst currentIndex = eldersealTypes.indexOf(this.stats.elderseal);\n\t\t\tconst newIndex = Math.min(currentIndex + this.stats.eldersealLevelBoost, eldersealTypes.length - 1);\n\t\t\tthis.stats.elderseal = eldersealTypes[newIndex];\n\t\t}\n\t}\n\n\tprivate checkElementless() {\n\t\tif (this.stats.elementlessBoostPercent > 0 && this.stats.totalElementAttack == 0 && this.stats.totalAilmentAttack == 0) {\n\t\t\tif (this.stats.ammoCapacities) {\n\t\t\t\tconst flaming = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'flaming');\n\t\t\t\tconst water = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'water');\n\t\t\t\tconst freeze = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'freeze');\n\t\t\t\tconst thunder = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'thunder');\n\t\t\t\tconst dragon = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'dragon');\n\t\t\t\tif (\n\t\t\t\t\t(flaming.length == 0 || flaming[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (water.length == 0 || water[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (freeze.length == 0 || freeze[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (thunder.length == 0 || thunder[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (dragon.length == 0 || dragon[0].levels[0].capacity == 0)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate nearestTen(value: number): number {\n\t\treturn Math.round(value / 10) * 10;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { EquippedSetBonusModel } from '../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SkillModel } from '../models/skill.model';\nimport { StatDetailModel } from '../models/stat-detail.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\n\n@Injectable()\nexport class TooltipService {\n\tpublic itemChanged$ = new Subject<ItemModel>();\n\tpublic decorationChanged$ = new Subject<DecorationModel>();\n\tpublic augmentationChanged$ = new Subject<AugmentationModel>();\n\tpublic upgradeContainerChanged$ = new Subject<UpgradeContainerModel>();\n\tpublic modificationChanged$ = new Subject<ModificationModel>();\n\tpublic kinsectChanged$ = new Subject<KinsectModel>();\n\tpublic equippedSkillChanged$ = new Subject<EquippedSkillModel>();\n\tpublic equippedSetBonusChanged$ = new Subject<EquippedSetBonusModel>();\n\tpublic skillChanged$ = new Subject<SkillModel>();\n\tpublic calcChanged$ = new Subject<StatDetailModel>();\n\n\tpublic item: ItemModel;\n\tpublic decoration: DecorationModel;\n\tpublic augmentation: AugmentationModel;\n\tpublic upgradeContainer: UpgradeContainerModel;\n\tpublic modification: ModificationModel;\n\tpublic kinsect: KinsectModel;\n\tpublic equippedSkill: EquippedSkillModel;\n\tpublic equippedSetBonus: EquippedSetBonusModel;\n\tpublic skill: SkillModel;\n\tpublic calc: StatDetailModel;\n\n\tsetItem(item: ItemModel) {\n\t\tif (item != this.item) {\n\t\t\tthis.reset();\n\t\t\tthis.item = item;\n\t\t\tthis.itemChanged$.next(item);\n\t\t}\n\t}\n\n\tsetDecoration(decoration: DecorationModel) {\n\t\tif (decoration != this.decoration) {\n\t\t\tthis.reset();\n\t\t\tthis.decoration = decoration;\n\t\t\tthis.decorationChanged$.next(decoration);\n\t\t}\n\t}\n\n\tsetAugmentation(augmentation: AugmentationModel) {\n\t\tif (augmentation != this.augmentation) {\n\t\t\tthis.reset();\n\t\t\tthis.augmentation = augmentation;\n\t\t\tthis.augmentationChanged$.next(augmentation);\n\t\t}\n\t}\n\n\tsetUpgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tif (upgradeContainer != this.upgradeContainer) {\n\t\t\tthis.reset();\n\t\t\tthis.upgradeContainer = upgradeContainer;\n\t\t\tthis.upgradeContainerChanged$.next(upgradeContainer);\n\t\t}\n\t}\n\n\tsetModification(modification: ModificationModel) {\n\t\tif (modification != this.modification) {\n\t\t\tthis.reset();\n\t\t\tthis.modification = modification;\n\t\t\tthis.modificationChanged$.next(modification);\n\t\t}\n\t}\n\n\tsetKinsect(kinsect: KinsectModel) {\n\t\tif (kinsect != this.kinsect) {\n\t\t\tthis.reset();\n\t\t\tthis.kinsect = kinsect;\n\t\t\tthis.kinsectChanged$.next(kinsect);\n\t\t}\n\t}\n\n\tsetEquippedSkill(equippedSkill: EquippedSkillModel) {\n\t\tif (equippedSkill != this.equippedSkill) {\n\t\t\tthis.reset();\n\t\t\tthis.equippedSkill = equippedSkill;\n\t\t\tthis.equippedSkillChanged$.next(equippedSkill);\n\t\t}\n\t}\n\n\tsetEquippedSetBonus(equippedSetBonus: EquippedSetBonusModel) {\n\t\tif (equippedSetBonus != this.equippedSetBonus) {\n\t\t\tthis.reset();\n\t\t\tthis.equippedSetBonus = equippedSetBonus;\n\t\t\tthis.equippedSetBonusChanged$.next(equippedSetBonus);\n\t\t}\n\t}\n\n\tsetSkill(skill: SkillModel) {\n\t\tif (skill != this.skill) {\n\t\t\tthis.reset();\n\t\t\tthis.skill = skill;\n\t\t\tthis.skillChanged$.next(skill);\n\t\t}\n\t}\n\n\tsetCalc(calc: StatDetailModel) {\n\t\tif (calc != this.calc) {\n\t\t\tthis.reset();\n\t\t\tthis.calc = calc;\n\t\t\tthis.calcChanged$.next(calc);\n\t\t}\n\t}\n\n\tprivate reset() {\n\t\tthis.item = null;\n\t\tthis.decoration = null;\n\t\tthis.augmentation = null;\n\t\tthis.upgradeContainer = null;\n\t\tthis.modification = null;\n\t\tthis.kinsect = null;\n\t\tthis.equippedSkill = null;\n\t\tthis.equippedSetBonus = null;\n\t\tthis.skill = null;\n\t\tthis.calc = null;\n\t}\n}\n","export enum AilmentType {\n\tNone = 'None',\n\tParalysis = 'Paralysis',\n\tSleep = 'Sleep',\n\tPoison = 'Poison',\n\tBlast = 'Blast',\n\tStun = 'Stun'\n}\n","export enum AmmoType {\n\tnormal = 'normal',\n\tpierce = 'pierce',\n\tspread = 'spread',\n\tsticky = 'sticky',\n\tcluster = 'cluster',\n\trecover = 'recover',\n\tpoison = 'poison',\n\tparalysis = 'paralysis',\n\tsleep = 'sleep',\n\texhaust = 'exahust',\n\tflaming = 'flaming',\n\twater = 'water',\n\tfreeze = 'freeze',\n\tthunder = 'thunder',\n\tdragon = 'dragon',\n\tslicing = 'slicing',\n\twyvern = 'wyvern',\n\tdemon = 'demon',\n\tarmor = 'armor',\n\ttranq = 'tranq'\n}\n","export enum AttackType {\n\tSever = 'Sever',\n\tBlunt = 'Blunt'\n}\n","export enum AwakeningType {\n\tNone = 'None',\n\tAttack = 'Attack',\n\tAffinity = 'Affinity',\n\tDefense = 'Defense',\n\tSlot = 'Slot',\n\tAilment = 'Ailment',\n\tElement = 'Element',\n\tSharpness = 'Sharpness',\n\tNormalCapacity = 'NormalCapacity',\n\tPierceCapacity = 'PierceCapacity',\n\tSpreadCapacity = 'SpreadCapacity',\n\tElementalCapacity = 'ElementalCapacity',\n\tAttackMelody = 'AttackMelody',\n\tStaminaMelody = 'StaminaMelody',\n\tElementalMelody = 'ElementalMelody',\n\tStatusMelody = 'StatusMelody',\n\tEarplugsMelody = 'EarplugsMelody'\n}\n","export enum DamageType {\n\tPhysical = 'Physical',\n\tElemental = 'Elemental'\n}\n","export enum DeviationType {\n\tNA = 'NA',\n\tNone = 'None',\n\tLow = 'Low',\n\tAverage = 'Average',\n\tHigh = 'High'\n}\n\nexport enum RecoilType {\n\tAutoReload = 0,\n\tVeryLow = 1,\n\tLow = 2,\n\tAverage = 3,\n\tHigh = 4,\n\tVeryHigh = 5,\n\tWyvern = 6\n}\nexport enum ReloadType {\n\tVerySlow = 1,\n\tSlow = 2,\n\tNormal = 3,\n\tFast = 4,\n\tVeryFast = 5\n}\n\n","export enum EldersealType {\n\tLow = 'Low',\n\tAverage = 'Average',\n\tHigh = 'High'\n}\n","export enum ElementType {\n\tNone = 'None',\n\tFire = 'Fire',\n\tWater = 'Water',\n\tThunder = 'Thunder',\n\tIce = 'Ice',\n\tDragon = 'Dragon'\n}\n","export enum EquipmentCategoryType {\n\tWeapon = 'Weapon',\n\tArmor = 'Armor',\n\tCharm = 'Charm',\n\tTool = 'Tool',\n\tKinsect = 'Kinsect'\n}\n","export enum ItemType {\n\tWeapon = 'Weapon',\n\tHead = 'Head',\n\tChest = 'Chest',\n\tArms = 'Arms',\n\tWaist = 'Waist',\n\tLegs = 'Legs',\n\tCharm = 'Charm',\n\tTool1 = 'Tool1',\n\tTool2 = 'Tool2',\n\tDecoration = 'Decoration',\n\tAugmentation = 'Augmentation',\n\tUpgrade = 'Upgrade',\n\tAwakening = 'Awakening',\n\tModification = 'Modification',\n\tKinsect = 'Kinsect'\n}\n","export enum ModeType {\n\tActive = 1,\n\tInactive = 2,\n\tAllSkillActive = 3\n}\n","export enum PointerType {\n\tMouse = 'mouse',\n\tTouch = 'touch',\n\tPen = 'pen'\n}\n","export enum WeaponType {\n\tGreatSword = 'GreatSword',\n\tLongSword = 'LongSword',\n\tSwordAndShield = 'SwordAndShield',\n\tDualBlades = 'DualBlades',\n\tHammer = 'Hammer',\n\tHuntingHorn = 'HuntingHorn',\n\tLance = 'Lance',\n\tGunlance = 'Gunlance',\n\tSwitchAxe = 'SwitchAxe',\n\tChargeBlade = 'ChargeBlade',\n\tInsectGlaive = 'InsectGlaive',\n\tLightBowgun = 'LightBowgun',\n\tHeavyBowgun = 'HeavyBowgun',\n\tBow = 'Bow'\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}