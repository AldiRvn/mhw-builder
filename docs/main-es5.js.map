{"version":3,"sources":["webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/ammo-capacities/ammo-capacities.component.ts","webpack:///src/app/components/ammo-capacities/ammo-capacities.component.html","webpack:///src/app/components/armor-list/armor-list.component.ts","webpack:///src/app/components/armor-list/armor-list.component.html","webpack:///src/app/components/augmentation-slot/augmentation-slot.component.ts","webpack:///src/app/components/augmentation-slot/augmentation-slot.component.html","webpack:///src/app/components/augmentations-list/augmentations-list.component.ts","webpack:///src/app/components/augmentations-list/augmentations-list.component.html","webpack:///src/app/components/awakening-slot/awakening-slot.component.ts","webpack:///src/app/components/awakening-slot/awakening-slot.component.html","webpack:///src/app/components/calc-details/calc-details.component.ts","webpack:///src/app/components/calc-details/calc-details.component.html","webpack:///src/app/components/charm-list/charm-list.component.ts","webpack:///src/app/components/charm-list/charm-list.component.html","webpack:///src/app/components/common-details/common-details.component.ts","webpack:///src/app/components/common-details/common-details.component.html","webpack:///src/app/components/common/common.module.ts","webpack:///src/app/components/common/dropdown/dropdown.component.ts","webpack:///src/app/components/common/dropdown/dropdown.component.html","webpack:///src/app/components/common/modal/modal.component.ts","webpack:///src/app/components/common/modal/modal.component.html","webpack:///src/app/components/decoration-details/decoration-details.component.ts","webpack:///src/app/components/decoration-details/decoration-details.component.html","webpack:///src/app/components/decoration-list/decoration-list.component.ts","webpack:///src/app/components/decoration-list/decoration-list.component.html","webpack:///src/app/components/decoration-slot/decoration-slot.component.ts","webpack:///src/app/components/decoration-slot/decoration-slot.component.html","webpack:///src/app/components/equipped-buffs/equipped-buffs.component.ts","webpack:///src/app/components/equipped-buffs/equipped-buffs.component.html","webpack:///src/app/components/equipped-skills/equipped-skills.component.ts","webpack:///src/app/components/equipped-skills/equipped-skills.component.html","webpack:///src/app/components/equipped-stats/equipped-stats.component.ts","webpack:///src/app/components/equipped-stats/equipped-stats.component.html","webpack:///src/app/components/item-details/item-details.component.ts","webpack:///src/app/components/item-details/item-details.component.html","webpack:///src/app/components/item-slot/item-slot.component.ts","webpack:///src/app/components/item-slot/item-slot.component.html","webpack:///src/app/components/kinsect-details/kinsect-details.component.ts","webpack:///src/app/components/kinsect-details/kinsect-details.component.html","webpack:///src/app/components/kinsect-list/kinsect-list.component.ts","webpack:///src/app/components/kinsect-list/kinsect-list.component.html","webpack:///src/app/components/kinsect-slot/kinsect-slot.component.ts","webpack:///src/app/components/kinsect-slot/kinsect-slot.component.html","webpack:///src/app/components/melodies/melodies.component.ts","webpack:///src/app/components/melodies/melodies.component.html","webpack:///src/app/components/modification-slot/modification-slot.component.ts","webpack:///src/app/components/modification-slot/modification-slot.component.html","webpack:///src/app/components/modifications-list/modifications-list.component.ts","webpack:///src/app/components/modifications-list/modifications-list.component.html","webpack:///src/app/components/set-bonus-details/set-bonus-details.component.ts","webpack:///src/app/components/set-bonus-details/set-bonus-details.component.html","webpack:///src/app/components/set-list/set-list.component.ts","webpack:///src/app/components/set-list/set-list.component.html","webpack:///src/app/components/setbonus-list/setbonus-list.component.ts","webpack:///src/app/components/setbonus-list/setbonus-list.component.html","webpack:///src/app/components/sharpness-bar/sharpness-bar.component.ts","webpack:///src/app/components/sharpness-bar/sharpness-bar.component.html","webpack:///src/app/components/skill-details/skill-details.component.ts","webpack:///src/app/components/skill-details/skill-details.component.html","webpack:///src/app/components/tool-list/tool-list.component.ts","webpack:///src/app/components/tool-list/tool-list.component.html","webpack:///src/app/components/tooltip/tooltip.component.ts","webpack:///src/app/components/tooltip/tooltip.component.html","webpack:///src/app/components/upagrade-slot/upgrade-slot.component.ts","webpack:///src/app/components/upagrade-slot/upgrade-slot.component.html","webpack:///src/app/components/upgrade-details/upgrade-details.component.ts","webpack:///src/app/components/upgrade-details/upgrade-details.component.html","webpack:///src/app/components/upgrades-list/upgrades-list.component.ts","webpack:///src/app/components/upgrades-list/upgrades-list.component.html","webpack:///src/app/components/weapon-list/weapon-list.component.ts","webpack:///src/app/components/weapon-list/weapon-list.component.html","webpack:///src/app/data/data.module.ts","webpack:///src/app/data/loaders/ammo-capacities.loader.ts","webpack:///src/app/data/loaders/armor.loader.ts","webpack:///src/app/data/loaders/augmentations.loader.ts","webpack:///src/app/data/loaders/awakenings.loader.ts","webpack:///src/app/data/loaders/charms.loader.ts","webpack:///src/app/data/loaders/data.loader.ts","webpack:///src/app/data/loaders/decorations.loader.ts","webpack:///src/app/data/loaders/kinsects.loader.ts","webpack:///src/app/data/loaders/melodies.loader.ts","webpack:///src/app/data/loaders/melodyEffect.loader.ts","webpack:///src/app/data/loaders/modifications.loader.ts","webpack:///src/app/data/loaders/set-bonuses.loader.ts","webpack:///src/app/data/loaders/sharpness-modifiers.loader.ts","webpack:///src/app/data/loaders/skills.loader.ts","webpack:///src/app/data/loaders/tools.loader.ts","webpack:///src/app/data/loaders/upgrades.loader.ts","webpack:///src/app/data/loaders/weapon-modifiers.loader.ts","webpack:///src/app/data/loaders/weapons.loader.ts","webpack:///src/app/data/parsers/data-parser.ts","webpack:///src/app/data/parsers/melodies-effect.parser.ts","webpack:///src/app/data/parsers/melodies.parser.ts","webpack:///src/app/data/parsers/other-data.parser.ts","webpack:///src/app/data/parsers/skill-references.parser.ts","webpack:///src/app/data/parsers/slots.parser.ts","webpack:///src/app/data/parsers/tags.parser.ts","webpack:///src/app/data/parsers/values.parser.ts","webpack:///src/app/models/ammo-capacities.model.ts","webpack:///src/app/models/app-data.model.ts","webpack:///src/app/models/augmentation.model.ts","webpack:///src/app/models/awakening-level.model.ts","webpack:///src/app/models/buffs.model.ts","webpack:///src/app/models/build.model.ts","webpack:///src/app/models/common.model.ts","webpack:///src/app/models/decoration.model.ts","webpack:///src/app/models/equipped-set-bonus.model.ts","webpack:///src/app/models/equipped-skill.model.ts","webpack:///src/app/models/extra-data.model.ts","webpack:///src/app/models/item.model.ts","webpack:///src/app/models/kinsect.model.ts","webpack:///src/app/models/melodies.model.ts","webpack:///src/app/models/modification.model.ts","webpack:///src/app/models/sharpness-bar.model.ts","webpack:///src/app/models/skill.model.ts","webpack:///src/app/models/stat-detail.model.ts","webpack:///src/app/models/stats.model.ts","webpack:///src/app/models/upgrade-container.model.ts","webpack:///src/app/models/upgrade.model.ts","webpack:///src/app/pipes/numberArr.pipe.ts","webpack:///src/app/providers/app-data.provider.ts","webpack:///src/app/services/build.service.ts","webpack:///src/app/services/calculation.service.ts","webpack:///src/app/services/data.service.ts","webpack:///src/app/services/equipment.service.ts","webpack:///src/app/services/set.service.ts","webpack:///src/app/services/skill.service.ts","webpack:///src/app/services/slot.service.ts","webpack:///src/app/services/stat.service.ts","webpack:///src/app/services/tooltip.service.ts","webpack:///src/app/types/ailment.type.ts","webpack:///src/app/types/ammo.type.ts","webpack:///src/app/types/attack.type.ts","webpack:///src/app/types/awakening.type.ts","webpack:///src/app/types/damage.type.ts","webpack:///src/app/types/deviation.type.ts","webpack:///src/app/types/elderseal.type.ts","webpack:///src/app/types/element.type.ts","webpack:///src/app/types/equipment-category.type.ts","webpack:///src/app/types/item.type.ts","webpack:///src/app/types/mode.type.ts","webpack:///src/app/types/pointer.type.ts","webpack:///src/app/types/weapon.type.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","slotService","dataService","buildService","changeDetector","location","equipmentCategoryTypes","itemTypes","equipmentVisible","statsVisible","tabsVisible","attackDefenseVisible","skillsVisible","buffsVisible","detailsVisible","respondToResize","initialize","weaponSlot","headSlot","chestSlot","armsSlot","waistSlot","legsSlot","charmSlot","tool1Slot","tool2Slot","buildIdUpdated$","subscribe","buildId","replaceState","path","anySlotSelected$","slot","itemListModal","title","slotName","isOpen","itemSelected$","item","decorationSelected$","decoration","augmentationSelected$","augmentation","upgradeSelected$","upgrade","setbonusSelected$","setBonus","modificationSelected$","modification","kinsectSelected$","kinsect","hash","loadBuild","window","innerWidth","event","key","document","getElementById","focus","pointerType","Mouse","tooltipComponent","move","clientX","clientY","close","open","changeLogModal","setListModal","confirm","contributorsModal","moveTooltip","equipmentSelected","statsSelected","skillsSelected","openSaveModal","clearAllItems","openContributors","openChangeLog","selector","templateUrl","styleUrls","static","AppModule","provide","useClass","useFactory","appDataProviderFactory","deps","multi","declarations","imports","providers","bootstrap","provider","load","toPromise","AmmoCapacitiesComponent","statService","recoilSuppresorMod","reloadAssistMod","deviationSuppresorMod","closeRangeUpMod","rangeAttackUpMod","shieldMod","showAmmoModsInfo","deviationTypes","recoilType","reloadType","statsUpdated$","stats","setRecoil","Math","abs","recoil","setReload","reload","setDeviation","deviation","levels","every","v","capacity","val","max","ArmorListComponent","equipmentCategoryType","searchLength","headId","bodyId","armsId","waistId","legsId","showFilterContainer","showSortContainer","itemsAll","getArmors","sort","a","b","getItemTypeIndex","itemType","getArmorIds","itemSelectedNew$","refreshList","armorSlotSelected$","setTimeout","searchBox","nativeElement","select","itemList","refresh","items","virtualItems","itemsWorld","filter","f","itemsIceborne","applyIceborneFilter","applyItemFilter","query","length","toLowerCase","trim","alphaIndex","indexOf","replace","betaIndex","gammaIndex","queryParts","split","filteredItems","itemName","name","skills","getSkills","nameMatch","includes","skillMatch","some","skill","tagMatch","queryPart","tags","tag","i","abgQuery","push","query2Match","resetSearchResults","value","armorTypeSort","itemTypeFilters","onlyIceborne","concat","newItem","Object","assign","selectArmorItemByType","itemTypeFilter","existFilter","index","splice","search","itemSkill","find","s","result","level","itemId","Head","Chest","Arms","Waist","Legs","handsSlot","feetSlot","type","item1","item2","defense","resistance1","resistance2","fireResist","waterResist","thunderResist","iceResist","dragonResist","slotValue1","slotValue2","slots","_itemTypeFilters","loadItems","_onlyIceborne","AugmentationSlotComponent","tooltipService","Augmentation","selectAugmentationSlot","stopPropagation","clearAugmentationSlot","clearTooltipAugmentation","setAugmentation","clicked","setTooltipAugmentation","clearClicked","AugmentationsListComponent","augmentations","getAugmentations","newAugmentation","selectAugmentation","AwakeningSlotComponent","Awakening","weaponIndex","elementTypes","ailmentTypes","awakeningTypes","weaponTypes","elementValues","map","ailmentValues","pop","awakeningValues","JSON","parse","stringify","getAwakenings","selectSetbonusSlot","even","setbonus","clearSkillSlot","awakenins","selectedElement","weaponElement","elementAttack","getSafiElementAttack","changeWeaponName","selectWeaponElement","selectedAilment","weaponAilment","ailmentType","Poison","Blast","ailmentAttack","getSafiAilmentAttack","selectWeaponAilment","getSafiWeaponName","weaponType","selectedAwakening","awakeningLevel","short","maxLevel","min","minLevel","selectAwakenings","awakenings","None","element","assetPath","ailment","_awakeningsLevel","_weaponElement","_weaponAilment","_weaponType","isNaN","Number","initAwakeningValues","HuntingHorn","LightBowgun","HeavyBowgun","Bow","clearSkillClicked","CalcDetailsComponent","setCalc","detailTemplate","calc","calculationTemplate","template","calculationVariables","join","colorClass","_calc","generateTemplate","clearCalc","CharmListComponent","getCharms","selectItem","_itemType","CommonDetailsComponent","CommonModule","DropdownComponent","descendants","ModalComponent","DecorationDetailsComponent","setDecoration","_decoration","loadSkills","Array","clearTooltipItem","DecorationListComponent","decorationSelected","decorationList","decorations","virtualDecorations","getDecorations","decorationLevel","priority","filteredDecorations","d","newDecoration","selectDecoration","getSkill","_decorationLevel","DecorationSlotComponent","Decoration","clearDecorationSlot","selectDecorationSlot","setTooltipItem","showOnClickTooltipItem","EquippedBuffsComponent","equipementService","elementBuffActive","updateElementBuff","buffElementLarge","EquippedSkillsComponent","skillService","equipmentService","skillsUpdated$","skillsBackup","skill1","skill2","isSetBonus","equippedCount","totalLevelCount","localeCompare","setBonusesUpdated$","setBonuses","tool1Count","tool2Count","equippedArmorCount","equippedToolActiveCount","requiredCount","equippedSkill","setEquippedSkill","equippedSetBonus","setEquippedSetBonus","mode","AllSkillActive","Active","Inactive","hasActiveStats","updateSkillMode","detail","activeSkills","skillExtra","es","createEquippedSkill","isNatureBonus","skillIndex","findIndex","x","EquippedStatsComponent","calculationService","attackCalcs","defenseCalcs","attackCalcsUpdated$","calcs","ammoUpdated$","ammo","ammoCapacities","kinsectUpdated$","sharpnessUpdated$","sharp","sharpnessBar","sharpnessBarComponent","handicraftLevel","extraDataUpdated$","extraData","defenseCalcsUpdated$","attackVisible","ammoVisible","kinsectVisible","defenseVisible","info","clearCalcDetails","setSharpTooltip","setExtraDatailsTooltip","otherData","other","variable","displayName","data","otherDetail","sharpDetail","tooltipTemplate","sharpnessDataNeeded","clearSharpDetails","ItemDetailsComponent","rarity","Weapon","getWeaponTypeName","baseAttack","baseAffinityPercent","color","ailmentHidden","ailmentBaseAttack","elementHidden","elementBaseAttack","elderseal","auxDetail","ChargeBlade","SwitchAxe","Gunlance","InsectGlaive","Charm","Tool1","Tool2","duration","recharge","equipmentCategory","Armor","monsters","setItem","_item","setupStats","ItemSlotComponent","modifications","selectItemSlot","equippedLevel","updateItemLevel","active","activeItemTool","getEquipmentCategory","Tool","clearItemSlot","equipmentSlotClicked","equipmentClearClicked","KinsectDetailsComponent","icon","attackType","dustEffect","class1","power","powerDetail","elementPower","speed","heal","_kinsect","KinsectListComponent","sortType","loadKinsects","kinsects","getKinsects","kinsectsWorld","kinsectsIceborne","toLocaleLowerCase","filteredKinsects","k","toString","virtualKinsects","newKinsect","selectKinsect","property","setOnlyIceborne","KinsectSlotComponent","Kinsect","elements","selectKinsectSlot","clearKinsectSlot","clearTooltipKinsect","setKinsect","setTooltipKinsect","MelodiesComponent","note","parseInt","substring","ModificationSlotComponent","Modification","selectModificationSlot","clearModificationSlot","clearTooltipModification","setModification","setTooltipModification","ModificationsListComponent","getModifications","newModification","selectModification","SetBonusDetailsComponent","equipped","clearSetBonus","SetListComponent","setService","sets","selectedSetIndex","loading","hideFilterContainer","setsUpdated$","weaponTypeFilter","getSets","importSet","setName","save","saveSets","sortSets","remove","set","saveBox","dateNow","Date","toLocaleDateString","year","month","day","fileName","fileString","blob","Blob","navigator","msSaveOrOpenBlob","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","downloadHtmlFile","downloadJsonFile","SetbonusListComponent","setbonusSelected","setbonusList","setbonuses","virtualSetbonuses","getSetBonuses","filteredSetbonuses","newSetbonus","selectSetbonus","setLevels","pieces","SharpnessBarComponent","_handicraftLevel","_sharpnessLevels","total","reduce","maxHandicraftLevels","sharps","maxColorSharp","levelsToSubstract","levelsToAdd","sharpnessEmpty","last","maxLevelSharp","toSubstract","aux","sharpnessAux","colorIndex","first","toSubstract2","reverse","empty","widthModifier","levelsMissing","dataNeeded","sharpsFiltered","sharpnessLevels","generateSharpnessBar","SkillDetailsComponent","clearSkill","ToolListComponent","itemSelected","getTools","applyToolFilter","typeSort","TooltipComponent","renderer","mouseXOffset","mouseYOffset","itemChanged$","hide","reset","show","decorationChanged$","augmentationChanged$","augLevel","description","common","upgradeContainerChanged$","upgradeContainer","modificationChanged$","modLevel","kinsectChanged$","equippedSkillChanged$","equippedSetBonusChanged$","skillChanged$","calcChanged$","visible","y","newTop","newRight","newLeft","container","offsetWidth","scrollWidth","innerHeight","scrollHeight","setStyle","UpgradeSlotComponent","Upgrade","selectUpgradeSlot","clearUpgradeSlot","setUpgradeContainer","setTooltipUpgrade","clearTooltipUpgrade","UpgradeDetailsComponent","upgradeDetails","upgradePassiveAttack","upgradePassiveAffinity","upgradePassiveAilmentElement","upgradePassiveDefense","customUpgradeIds","entries","customId","customUpgradeValues","_upgradeContainer","UpgradesListComponent","upgrades","getUpgrades","newUpg","selectUpgradeContainer","used","selectUpgLevel","verifyUpgrades","augIndex","auxUpg","auxOverrideValue","WeaponLevels","auxDown","totalSlots","overrideUpgrageLevel","updatePassiveStats","clearPassiveStats","auxLevel","upgradeLevel","passiveAttack","passiveAffinity","passiveDefense","slotLevel","healOnHitPercent","passiveAilment","passiveElement","aug","requiredSlots","upgIndex","levelIndex","augId","customUpgrade","customUpgrades","values","augType","cUpg","newDetail","WeaponCustomUpgrades","maximum","acumulator","currentValue","selectUpgrade","WeaponListComponent","getWeapons","weaponSlotSelected$","match","monstersMatch","applyWeaponFilter","weaponTypeSort","getAmmoCapacities","melodies","getMelodies","monster","sharp1","sharp2","sharpnessLevelsBar","DataModule","AmmoCapacitiesLoader","http","ArmorLoader","content","parseTextContent","columnName","parser","AugmentationsLoader","AwakeningsLoader","CharmsLoader","charm","DataLoader","defaultLocale","delimeter","_","resourceName","withLocale","ext","observer","getResources","results","r","txVal","newVal","next","complete","localeData","json","resources","locale","getLocale","loadJsonResource","loadTextResource","fromLocale","get","getPath","pipe","responseType","localStorage","getItem","languages","columnParsers","rows","headerColumns","row","rowValues","j","columnHeader","rowValue","columnParser","p","DecorationsLoader","KinsectsLoader","MelodiesLoader","MelodyEffectLoader","melodyEffect","ModificationsLoader","SetBonusesLoader","SharpnessModifiersLoader","SkillsLoader","ToolsLoader","tool","UpgradesLoader","WeaponModifiersLoader","WeaponsLoader","forEach","over","sharpnessMaxLevel","sharpnessMaxColorIndex","DataParser","MelodiesEffectParser","effects","melodiesEffect","count","effect","melody","MelodiesParser","notes","OtherDataParser","otherLevels","parts","SkillReferencesParser","skillRefs","SlotsParser","TagsParser","ValuesParser","AmmoCapacitiesModel","AmmoTypeModel","AmmoLevelModel","AppDataModel","weaponModifiers","sharpnessModifiers","weapons","armors","charms","tools","AugmentationModel","AwakeningLevelModel","BuffModel","attackBuff","deffenseBuff","elementBuff","BuildModel","BuildItemModel","CommonModel","CommonLevelModel","DecorationModel","EquippedSetBonusModel","weaponCount","headCount","chestCount","armsCount","waistCount","legsCount","EquippedSetBonusDetailModel","EquippedSkillModel","charmCount","toolCount","equippedTool1Count","equippedTool2Count","secretLevelCount","ExtraDataModel","ItemModel","KinsectModel","MelodiesModel","MelodiesDetailModel","ModificationModel","SharpnessBarModel","SkillModel","StatDetailModel","StatsModel","totalAttack","attack","upgradeAttack","awakeningAttack","activeAttack","activeAttackPercent","elementless","elementlessBoostPercent","passiveSharpness","extraSharpness","effectivePhysicalSharpnessModifier","effectiveElementalSharpnessModifier","extraSlot","weaponAttackModifier","critElementModifier","trueCritElementModifier","critStatusModifier","trueCritStatusModifier","affinity","upgradeAffinity","awakeningAffinity","activeAffinity","weakPointAffinity","passiveCriticalBoostPercent","criticalElement","criticalStatus","trueCriticalElement","trueCriticalStatus","baseElementAttack","upgradeElementAttack","awakeningElementAttack","effectiveElementAttack","elementCap","elementCapped","totalElementAttack","totalElementAttackPotential","baseAilmentAttack","upgradeAilmentAttack","awakeningAilmentAttack","effectiveAilmentAttack","ailmentCap","ailmentCapped","totalAilmentAttack","totalAilmentAttackPotential","elementAttackMultiplier","passiveFireAttack","passiveFireAttackPercent","passiveWaterAttack","passiveWaterAttackPercent","passiveThunderAttack","passiveThunderAttackPercent","passiveIceAttack","passiveIceAttackPercent","passiveDragonAttack","passiveDragonAttackPercent","passivePoisonAttack","passivePoisonBuildupPercent","passiveSleepAttack","passiveSleepBuildupPercent","passiveParalysisAttack","passiveParalysisBuildupPercent","passiveBlastAttack","passiveBlastBuildupPercent","passiveStunAttack","passiveStunBuildupPercent","effectivePassiveElementAttack","effectivePassiveAilmentAttack","effectivePassiveAilmentBuildupPercent","activeElementAttack","activeAilmentAttack","activeAilmentAttackBuildUpPercent","eldersealLevelBoost","passiveDefensePercent","activeDefense","passiveHealth","passiveStamina","passiveFireResist","passiveWaterResist","passiveThunderResist","passiveIceResist","passiveDragonResist","ammoCapacitiesUp","ammoUp","UpgradeContainerModel","hasCustomUpgrades","UpgradeModel","UpgradeLevelModel","NumbersArrPipe","args","res","AppDataProvider","weaponLoader","armorLoader","charmsLoader","decorationsLoader","augmentationsLoader","modificationsLoader","kinsectsLoader","skillsLoader","setBonusesLoader","sharpnessModifiersLoader","weaponModifiersLoader","ammoCapacitiesLoader","melodiesLoader","melodyEffectLoader","toolsLoader","upgradesLoader","awakeningsLoader","appData","all","results2","BuildService","loadingBuild","subscribeSlotEvents","updateBuildId","itemLevelChanged$","weaponModSelected$","buildHash","buildParts","build","parseBuildId","loadBuildSlot","head","chest","hands","legs","feet","tool1","tool2","weapon","detectChanges","itemGroupRegex","itemRegex","decoRegex","augRegex","upgRegex","custRegex","awkRegex","setbRegex","kinsectRegex","kinsectElementRegex","elementRegex","ailmentRegex","modRegex","levelRegex","itemGroups","itemGroup","buildItem","decos","decorationIds","deco","augs","augmentationIds","upgs","upgradeLevels","customs","customLevelIds","awks","awk","awkAux","setb","setbonusId","elementId","ailmentId","mods","modificationIds","mod","kinsectId","kinsectElement","kinsectElementId","updateStats","getWeapon","getArmor","getCharm","getTool","types","getElement","upgradeType","getAilment","awakeningLevels","getAwakening","awakeningSlot","getSetBonusByBuildId","getAugmentation","augmentationSlots","toArray","newAug","upgradeSlot","overrideValue","getKinsect","kinsectSlot","modId","getModification","modificationSlots","decorationId","getDecoration","decorationSlots","getItemBuildString","awakening","awakeningSetbonus","elementIndex","hasOwnProperty","getElementId","getAilmentId","CalculationService","affinityTotal","buildAttackCalcs","buildDefenseCalcs","buildAmmoCapacities","buildKinsect","getSharpnessBar","getExtraData","getAttack","getAttackPotential","getAffinity","getAffinityPotential","getCriticalBoost","ailmentCalc","getAilmentAttack","elementCalc","getElementAttack","getElderseal","hastenRecovery","frostcraft","getRawAttack","getRawAttackCritical","getRawAttackAverage","attackCalc","round","getElementlessVariable","getAwakeningVariable","attackPotentialCalc","totalAttackPotential","toFixed","affinityValue","affinityCalc","affinityPotentialCalc","critBoostValue","critBoostCalc","ailmentAttackCalc","valueColor","elementAttackCalc","affinityPotentialTotal","auxDivider","trueElement","getElementAverage","trueAilment","getAilmentAverage","rawAttackAveragePotentialCalc","isInteger","extra1","extra2","class2","elementCriticalBoost","ailmentCriticalBoost","rawAttackAveragePotential","getRawAverage","trueElementPotential","trueAilmentPotential","defValue","def","Blunt","Sever","criticalBoostPercent","attackWithAffinity","attackWithoutAffinity","criticalModifier","sharpnessModifier","ailmentWithAffinity","ailmentWithoutAffinity","elementWithAffinity","elementWithoutAffinity","DataService","appDataProvider","w","armorType","armor","itemSkills","damageType","elementAwakening","safiElements","ailmentAwakening","safiAilments","elementName","Fire","Water","Thunder","Ice","Dragon","ailmentName","Paralysis","Sleep","GreatSword","LongSword","SwordAndShield","DualBlades","Hammer","Lance","weaponName","safiName","getSafiName","getSafiElementName","getSafiAilmentName","weaponId","c","getMelodyDetails","melodyId","melodyEffects","m","EquipmentService","buffs","update","updateSkills","Average","equippedSkills","SetService","loadSets","stringSets","err","console","log","buildV","itemGroupsLenght","overwrite","hashString","resistances","w1","getWeaponTypeIndex","w2","SkillService","equippedSetBonuses","addItemSkills","addDecorationSkills","addSetSkills","addAugmentationSkills","countSkillItemPart","setBonusNames","setBonusParts","setCounts","setBonusName","getSetBonus","sl","setParts","setLevel","raiseSkillId","equippedSkillToRaise","details","bonusLevel","augGroups","skillRef","actualCount","skillId","SlotService","itemActiveChanged$","clearSlotSelect","selectedItemSlot","selected","selectedDecorationSlot","selectedAugmentationSlot","selectedUpgradeSlot","selectedSetbonusSlot","selectedModificationSlot","selectedKinsectSlot","clearSlotItems","equipment","removeDecoration","removeAugmentation","applySlotAugmentation","removeUpgrade","applySlotUpgrade","clearUpgradeContainer","removeAwakening","removeSetbonus","removeModification","removeKinsect","addItem","closeModal","slotAux","currentId","clearArmorSlot","addDecoration","addAugmentation","addUpgrade","selectedAwakeningSlot","addAwakenings","applySlotAwakening","addSetbonus","addModification","addKinsect","changeElement","changeAilment","updateItemActive","slotAugs","augDecorationSlot","decoSlot","decorationSlot","applySlotIncrement","slotAwakening","Slot","extraSlots","decoSlotsIncremented","slotsAdded","totalAdded","added","slotsIncrementRecursive","toAdd","toRemove","removeItem","ds","as","md","StatService","calcService","defaultElementAttackIncreaseCap","awakeningsData","weaponModifier","getWeaponModifier","updateAwakenings","updateUpgrades","updateItemStats","updateSkillStats","updateAugmentations","updateModifications","calculateAttack","updateCalcs","nearestTen","skillUpgrade","toUpperCase","activeWeakPointAffinity","passiveElementResistPercent","hiddenElementUp","elementConversionSkill","sumElementalRes","elementalBonus","floor","attackModifier","Attack","Affinity","awakeningDefense","Defense","awakeningAilment","Ailment","awakeningElement","Element","awakeningSharpness","Sharpness","attackMelody","AttackMelody","staminaMelody","StaminaMelody","elementalMelody","ElementalMelody","statusMelody","StatusMelody","earplugsMelody","EarplugsMelody","getMelodiesById","awakeningNormalCapacity","NormalCapacity","awakeningPierceCapacity","PierceCapacity","awakeningSpreadCapacity","SpreadCapacity","awakeningElementalCapacity","ElementalCapacity","normalCapacity","normalAmmo","normal","pierceCapacity","pierceAmmo","pierce","spreadCapacity","spreadAmmo","spread","elementalCapacity","elementalAmmo","fire","flaming","water","thunder","ice","freeze","dragon","modGroups","Stun","maxHandicraft","currentSharpnessIndex","extraSharpnessAdd","extraSharpnessRemove","getSharpnessModifier","Physical","ElementalSharpnessModifier","Elemental","elementAttackIncreaseCap","elementAttackIncreaseCapOverride","ailmentAttackIncreaseCap","rawAttack","attackPercent","checkElementless","eldersealTypes","currentIndex","newIndex","TooltipService","AilmentType","AmmoType","AttackType","AwakeningType","DamageType","DeviationType","RecoilType","ReloadType","EldersealType","ElementType","EquipmentCategoryType","ItemType","ModeType","PointerType","WeaponType","environment","production","bootstrapModule","catch","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Location } from '@angular/common';\nimport { AfterViewInit, ChangeDetectorRef, Component, HostListener, OnInit, ViewChild } from '@angular/core';\nimport { AugmentationSlotComponent } from './components/augmentation-slot/augmentation-slot.component';\nimport { ModalComponent } from './components/common/modal/modal.component';\nimport { DecorationSlotComponent } from './components/decoration-slot/decoration-slot.component';\nimport { EquippedSkillsComponent } from './components/equipped-skills/equipped-skills.component';\nimport { EquippedStatsComponent } from './components/equipped-stats/equipped-stats.component';\nimport { ItemSlotComponent } from './components/item-slot/item-slot.component';\nimport { TooltipComponent } from './components/tooltip/tooltip.component';\nimport { BuildService } from './services/build.service';\nimport { DataService } from './services/data.service';\nimport { SlotService } from './services/slot.service';\nimport { EquipmentCategoryType } from './types/equipment-category.type';\nimport { ItemType } from './types/item.type';\nimport { PointerType } from './types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-root',\n\ttemplateUrl: './app.component.html',\n\tstyleUrls: ['./app.component.scss']\n})\n\nexport class AppComponent implements OnInit, AfterViewInit {\n\tpublic equipmentCategoryTypes = EquipmentCategoryType;\n\tpublic itemTypes = ItemType;\n\n\t@ViewChild(EquippedStatsComponent, { static: true }) equippedStatsComponent: EquippedStatsComponent;\n\t@ViewChild(EquippedSkillsComponent, { static: true }) equippedSkillsComponent: EquippedSkillsComponent;\n\t@ViewChild(TooltipComponent, { static: true }) tooltipComponent: TooltipComponent;\n\t@ViewChild('weaponSlot', { static: true }) weaponSlot: ItemSlotComponent;\n\t@ViewChild('headSlot', { static: true }) headSlot: ItemSlotComponent;\n\t@ViewChild('chestSlot', { static: true }) chestSlot: ItemSlotComponent;\n\t@ViewChild('armsSlot', { static: true }) armsSlot: ItemSlotComponent;\n\t@ViewChild('waistSlot', { static: true }) waistSlot: ItemSlotComponent;\n\t@ViewChild('legsSlot', { static: true }) legsSlot: ItemSlotComponent;\n\t@ViewChild('charmSlot', { static: true }) charmSlot: ItemSlotComponent;\n\t@ViewChild('tool1Slot', { static: true }) tool1Slot: ItemSlotComponent;\n\t@ViewChild('tool2Slot', { static: true }) tool2Slot: ItemSlotComponent;\n\n\t@ViewChild('itemListModal', { static: true }) itemListModal: ModalComponent;\n\t@ViewChild('changeLogModal', { static: true }) changeLogModal: ModalComponent;\n\t@ViewChild('setListModal', { static: true }) setListModal: ModalComponent;\n\t@ViewChild('contributorsModal', { static: true }) contributorsModal: ModalComponent;\n\n\tequipmentVisible = true;\n\tstatsVisible = true;\n\n\ttabsVisible = false;\n\tattackDefenseVisible = true;\n\tskillsVisible = true;\n\tbuffsVisible = true;\n\tdetailsVisible = true;\n\n\tmodalTitle: string;\n\n\tselectedEquipmentSlot: ItemSlotComponent;\n\tselectedDecorationSlot: DecorationSlotComponent;\n\tselectedAugmentationSlot: AugmentationSlotComponent;\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.respondToResize();\n\t}\n\n\tconstructor(\n\t\tpublic slotService: SlotService,\n\t\tpublic dataService: DataService,\n\t\tprivate buildService: BuildService,\n\t\tprivate changeDetector: ChangeDetectorRef,\n\t\tprivate location: Location\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.slotService.initialize(\n\t\t\tthis.weaponSlot,\n\t\t\tthis.headSlot,\n\t\t\tthis.chestSlot,\n\t\t\tthis.armsSlot,\n\t\t\tthis.waistSlot,\n\t\t\tthis.legsSlot,\n\t\t\tthis.charmSlot,\n\t\t\tthis.tool1Slot,\n\t\t\tthis.tool2Slot,\n\t\t\tthis.changeDetector\n\t\t);\n\n\t\tthis.respondToResize();\n\n\t\tthis.buildService.initialize(this.changeDetector);\n\n\t\tthis.buildService.buildIdUpdated$.subscribe(buildId => {\n\t\t\tthis.location.replaceState(this.location.path(false), '#' + buildId);\n\t\t});\n\n\t\tthis.slotService.anySlotSelected$.subscribe(slot => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.title = `Select ${slot.slotName}`;\n\t\t\t\tthis.itemListModal.isOpen = slot != null;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.itemSelected$.subscribe(item => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !item;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.decorationSelected$.subscribe(decoration => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !decoration;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.augmentationSelected$.subscribe(augmentation => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !augmentation;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.upgradeSelected$.subscribe(upgrade => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !upgrade;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.setbonusSelected$.subscribe(setBonus => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !setBonus;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.modificationSelected$.subscribe(modification => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !modification;\n\t\t\t}\n\t\t});\n\n\t\tthis.slotService.kinsectSelected$.subscribe(kinsect => {\n\t\t\tif (this.itemListModal) {\n\t\t\t\tthis.itemListModal.isOpen = !kinsect;\n\t\t\t}\n\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\tif (location.hash) {\n\t\t\tthis.buildService.loadBuild(location.hash);\n\t\t}\n\t}\n\n\trespondToResize() {\n\t\tif (window.innerWidth <= 768) {\n\t\t\tif (!this.equipmentVisible && this.statsVisible) {\n\t\t\t\tthis.equipmentVisible = false;\n\t\t\t\tthis.statsVisible = true;\n\t\t\t\tthis.attackDefenseVisible = true;\n\t\t\t\tthis.skillsVisible = false;\n\t\t\t\tthis.buffsVisible = true;\n\t\t\t} else {\n\t\t\t\tthis.equipmentVisible = true;\n\t\t\t\tthis.statsVisible = false;\n\t\t\t\tthis.attackDefenseVisible = false;\n\t\t\t\tthis.skillsVisible = false;\n\t\t\t\tthis.buffsVisible = false;\n\t\t\t}\n\t\t\tthis.tabsVisible = true;\n\t\t} else {\n\t\t\tthis.equipmentVisible = true;\n\t\t\tthis.statsVisible = true;\n\t\t\tthis.attackDefenseVisible = true;\n\t\t\tthis.skillsVisible = true;\n\t\t\tthis.buffsVisible = true;\n\t\t\tthis.tabsVisible = false;\n\t\t}\n\t}\n\n\tequipmentSelected() {\n\t\tthis.equipmentVisible = true;\n\t\tthis.statsVisible = false;\n\t}\n\n\tstatsSelected() {\n\t\tthis.equipmentVisible = false;\n\t\tthis.statsVisible = true;\n\t\tthis.attackDefenseVisible = true;\n\t\tthis.skillsVisible = false;\n\t\tthis.detailsVisible = true;\n\t\tthis.buffsVisible = true;\n\t}\n\tskillsSelected() {\n\t\tthis.equipmentVisible = false;\n\t\tthis.statsVisible = true;\n\t\tthis.attackDefenseVisible = false;\n\t\tthis.skillsVisible = true;\n\t\tthis.detailsVisible = false;\n\t\tthis.buffsVisible = false;\n\t}\n\n\t@HostListener('document:keydown', ['$event']) onKeydownHandler(event: KeyboardEvent) {\n\t\tif (event.key === 'Enter') {\n\t\t\tdocument.getElementById('dummy').focus();\n\t\t}\n\t}\n\n\tmoveTooltip(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipComponent.move(event.clientX, event.clientY);\n\t\t}\n\t}\n\n\topenItemListModal() {\n\t\tif (this.itemListModal.isOpen) {\n\t\t\tthis.itemListModal.close();\n\t\t} else {\n\t\t\tthis.itemListModal.open();\n\t\t}\n\t}\n\n\topenChangeLog() {\n\t\tthis.changeLogModal.open();\n\t}\n\n\topenSaveModal() {\n\t\tthis.setListModal.open();\n\t}\n\n\tclearAllItems() {\n\t\tif (confirm('Are you sure you want to clear all items?')) {\n\t\t\tthis.buildService.loadBuild('#v3iiiiiiiii');\n\t\t} else {\n\t\t}\n\t}\n\n\topenContributors() {\n\t\tthis.contributorsModal.open();\n\t}\n}\n","<div class=\"container\" (pointermove)=\"moveTooltip($event)\">\n\t<div class=\"tab-container\">\n\t\t<div class=\"tab\" (click)=\"equipmentSelected()\" [class.selected]=\"equipmentVisible\">Equipment</div>\n\t\t<div class=\"tab\" (click)=\"statsSelected()\" [class.selected]=\"attackDefenseVisible && statsVisible\">Stats</div>\n\t\t<div class=\"tab\" (click)=\"skillsSelected()\" [class.selected]=\"skillsVisible && statsVisible\">Skills</div>\n\t\t<div class=\"tab\" (click)=\"openSaveModal()\">\n\t\t\t<i class=\"fas fa-save fa-lg\"></i>\n\t\t</div>\n\t</div>\n\n\t<div class=\"equipment-container\" [hidden]=\"!equipmentVisible\">\n\t\t<div class=\"equipment-slots-container\">\n\t\t\t<mhw-builder-item-slot #weaponSlot slotName=\"Weapon\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #headSlot slotName=\"Head\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #chestSlot slotName=\"Chest\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #armsSlot slotName=\"Arms\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #waistSlot slotName=\"Waist\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #legsSlot slotName=\"Legs\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #charmSlot slotName=\"Charm\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #tool1Slot slotName=\"Tool1\"></mhw-builder-item-slot>\n\t\t\t<mhw-builder-item-slot #tool2Slot slotName=\"Tool2\"></mhw-builder-item-slot>\n\t\t</div>\n\t</div>\n\t<div class=\"stats-container\" [hidden]=\"!statsVisible\">\n\t\t<div class=\"control-buttons\">\n\t\t\t<button type=\"button\" (click)=\"clearAllItems()\" title=\"Clear\">\n\t\t\t\t<i class=\"fas fa-eraser fa-lg\"></i>\n\t\t\t</button>\n\t\t\t<button type=\"button\" (click)=\"openSaveModal()\" title=\"Save\">\n\t\t\t\t<i class=\"fas fa-save fa-lg\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<mhw-builder-equipped-stats [hidden]=\"!attackDefenseVisible\"></mhw-builder-equipped-stats>\n\t\t<mhw-builder-equipped-skills [hidden]=\"!skillsVisible\"></mhw-builder-equipped-skills>\n\t\t<ng-container *ngIf=\"weaponSlot?.item?.melodies && attackDefenseVisible\">\n\t\t\t<br />\n\t\t\t<h4>\n\t\t\t\tMelodies\n\t\t\t\t<span [hidden]=\"!detailsVisible\" (click)=\"detailsVisible = !detailsVisible\"><i\n\t\t\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t\t\t<span [hidden]=\"detailsVisible\" (click)=\"detailsVisible = !detailsVisible\"><i\n\t\t\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t\t\t</h4>\n\t\t\t<div [hidden]=\"!detailsVisible\">\n\t\t\t\t<hr>\n\t\t\t\t<mhw-builder-melodies [weaponMelodies]=\"weaponSlot.item.melodies\"></mhw-builder-melodies>\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<mhw-builder-equipped-buffs [hidden]=\"!buffsVisible\">\n\n\t\t</mhw-builder-equipped-buffs>\n\t</div>\n\n\t<mhw-builder-tooltip></mhw-builder-tooltip>\n\n\t<div class=\"signature\">\n\t\tBy TurkeyTickle & Neftalimich -\n\t\t<button type=\"button\" (click)=\"openContributors()\">Info</button>\n\t\t<a href=\"https://github.com/neftalimich/mhw-builder\" target=\"_blank\" rel=\"noreferrer\" title=\"github\">\n\t\t\t<i class=\"fab fa-github\"></i>\n\t\t</a>\n\t\t<a href=\"https://discord.gg/4s7yqFg\" target=\"_blank\" rel=\"noreferrer\" title=\"discord\">\n\t\t\t<i class=\"fab fa-discord\"></i>\n\t\t</a>\n\t\t<a href=\"https://twitter.com/mhw_builder\" target=\"_blank\" rel=\"noreferrer\" title=\"twitter\">\n\t\t\t<i class=\"fab fa-twitter\"></i>\n\t\t</a>\n\t</div>\n\n\t<div class=\"version-info\">\n\t\t<button type=\"button\" id=\"dummy\" aria-label=\"dummy\"></button>\n\t\t<button type=\"button\" (click)=\"openChangeLog()\">ChangeLog</button>\n\t</div>\n\n\t<mhw-builder-modal #setListModal title=\"Saved Sets List\">\n\t\t<mhw-builder-set-list></mhw-builder-set-list>\n\t</mhw-builder-modal>\n\n\t<mhw-builder-modal #contributorsModal title=\"Information\">\n\t\t<div style=\"padding:16px;\">\n\t\t\t<h3>\n\t\t\t\t<a href=\"https://github.com/TurkeyTickle/mhw-builder\" target=\"_blank\" rel=\"noreferrer\">TurkeyTickle\n\t\t\t\t\tGithub (v1.0)</a>\n\t\t\t</h3>\n\t\t\t<h3>\n\t\t\t\t<a href=\"https://www.github.com/neftalimich/mhw-builder\" target=\"_blank\" rel=\"noreferrer\">Neftalí\n\t\t\t\t\tMichelet Github (v2.0)</a>\n\t\t\t</h3>\n\t\t\t<p>\n\t\t\t\t<a href=\"https://twitter.com/mhw_builder\" target=\"_blank\" rel=\"noreferrer\">MHW Builder Twitter</a>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<a href=\"https://paypal.me/neftalimich\" target=\"_blank\" rel=\"noreferrer\">Donations 🙏</a>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<a href=\"http://honeyhunterworld.com/mhwbi/\" target=\"_blank\" rel=\"noreferrer\">Honey Hunter World</a>\n\t\t\t</p>\n\t\t</div>\n\t</mhw-builder-modal>\n\n\t<mhw-builder-modal #itemListModal>\n\t\t<mhw-builder-weapon-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Weapon\"\n\t\t\t[itemType]=\"slotService.selectedItemSlot?.slotName\" [onlyIceborne]=\"slotService.onlyIceborne\">\n\t\t</mhw-builder-weapon-list>\n\n\t\t<mhw-builder-armor-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Armor\"\n\t\t\t[itemTypeFilters]=\"[slotService.selectedItemSlot?.slotName]\" [onlyIceborne]=\"slotService.onlyIceborne\">\n\t\t</mhw-builder-armor-list>\n\n\t\t<mhw-builder-charm-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Charm\"\n\t\t\t[itemType]=\"slotService.selectedItemSlot?.slotName\"></mhw-builder-charm-list>\n\n\t\t<mhw-builder-tool-list\n\t\t\t*ngIf=\"slotService.selectedItemSlot && dataService.getEquipmentCategory(slotService.selectedItemSlot.slotName) == equipmentCategoryTypes.Tool\"\n\t\t\t[itemType]=\"slotService.selectedItemSlot?.slotName\"></mhw-builder-tool-list>\n\n\t\t<mhw-builder-decoration-list *ngIf=\"slotService.selectedDecorationSlot\"\n\t\t\t[decorationLevel]=\"slotService.selectedDecorationSlot?.level\"></mhw-builder-decoration-list>\n\t\t<mhw-builder-augmentations-list *ngIf=\"slotService.selectedAugmentationSlot\"></mhw-builder-augmentations-list>\n\t\t<mhw-builder-upgrades-list *ngIf=\"slotService.selectedUpgradeSlot\"\n\t\t\t[upgradeContainer]=\"slotService.selectedUpgradeSlot?.upgradeContainer\"></mhw-builder-upgrades-list>\n\t\t<mhw-builder-setbonus-list *ngIf=\"slotService.selectedSetbonusSlot\"></mhw-builder-setbonus-list>\n\t\t<mhw-builder-modifications-list *ngIf=\"slotService.selectedModificationSlot\"></mhw-builder-modifications-list>\n\t\t<mhw-builder-kinsect-list *ngIf=\"slotService.selectedKinsectSlot\"></mhw-builder-kinsect-list>\n\t</mhw-builder-modal>\n\n\t<mhw-builder-modal #changeLogModal title=\"Change Log\">\n\t\t<div style=\"padding:16px;\">\n\t\t\t<h3>2020-07-12 Alatreon (Version 3.1.8)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Alatreon.</li>\n\t\t\t\t<li>Buffs Alpha</li>\n\t\t\t</ul>\n\t\t\t<h3>2020-01-01 ICEBORNE (Version 3.0.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Safi'Jiiva Weapons and Awakenings.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-10-14 ICEBORNE (Version 2.7.5)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Now you can select multiple distinct armor pieces using the filter.</li>\n\t\t\t\t<li>Bug fixes.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-10-10 ICEBORNE (Version 2.7.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>New Rajang Weapons/Armor added.</li>\n\t\t\t\t<li>New Custom upgrades updated.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-09-22 ICEBORNE (Version 2.6.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>New Weapons Augment System added.</li>\n\t\t\t\t<li>New Weapons Custom Upgrade System added.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-09-22 ICEBORNE (Version 2.5.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Tools Slots Added.</li>\n\t\t\t\t<li>Active/Inactive Tools Slot.</li>\n\t\t\t\t<li>Equipped Skills Desing Improvement.</li>\n\t\t\t\t<li>Iceborne Armor Pack 1.</li>\n\t\t\t\t<li>Iceborne Weapon Pack 1. (Thanks HoneyTear)</li>\n\t\t\t\t<li>New Charms.</li>\n\t\t\t\t<li>New & Updated Skills Pack 1.</li>\n\t\t\t\t<li>Etc.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-03-20 (Version 2.3)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Download Set List HTML + AngularJS.</li>\n\t\t\t\t<li>Filters</li>\n\t\t\t\t<li>Bug Fixes</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-03-19 (Version 2.2.5)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Kinsect Slot.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-03-15 (Version 2.2.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>HBG/LBG Modifications Slot Added.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-01-11 (Version 2.1.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Save sets list.</li>\n\t\t\t</ul>\n\t\t\t<h3>2019-01-01 (Version 2.0.0)</h3>\n\t\t\t<ul>\n\t\t\t\t<li>Tons of improvements.</li>\n\t\t\t</ul>\n\t\t</div>\n\t</mhw-builder-modal>\n</div>","import { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { VirtualScrollerModule } from 'ngx-virtual-scroller';\nimport { AppComponent } from './app.component';\nimport { AmmoCapacitiesComponent } from './components/ammo-capacities/ammo-capacities.component';\nimport { ArmorListComponent } from './components/armor-list/armor-list.component';\nimport { AugmentationSlotComponent } from './components/augmentation-slot/augmentation-slot.component';\nimport { AugmentationsListComponent } from './components/augmentations-list/augmentations-list.component';\nimport { AwakeningSlotComponent } from './components/awakening-slot/awakening-slot.component';\nimport { CalcDetailsComponent } from './components/calc-details/calc-details.component';\nimport { CharmListComponent } from './components/charm-list/charm-list.component';\nimport { CommonDetailsComponent } from './components/common-details/common-details.component';\nimport { CommonModule } from './components/common/common.module';\nimport { DecorationDetailsComponent } from './components/decoration-details/decoration-details.component';\nimport { DecorationListComponent } from './components/decoration-list/decoration-list.component';\nimport { DecorationSlotComponent } from './components/decoration-slot/decoration-slot.component';\nimport { EquippedSkillsComponent } from './components/equipped-skills/equipped-skills.component';\nimport { EquippedStatsComponent } from './components/equipped-stats/equipped-stats.component';\nimport { EquippedBuffsComponent } from './components/equipped-buffs/equipped-buffs.component';\nimport { ItemDetailsComponent } from './components/item-details/item-details.component';\nimport { ItemSlotComponent } from './components/item-slot/item-slot.component';\nimport { KinsectDetailsComponent } from './components/kinsect-details/kinsect-details.component';\nimport { KinsectListComponent } from './components/kinsect-list/kinsect-list.component';\nimport { KinsectSlotComponent } from './components/kinsect-slot/kinsect-slot.component';\nimport { MelodiesComponent } from './components/melodies/melodies.component';\nimport { ModificationSlotComponent } from './components/modification-slot/modification-slot.component';\nimport { ModificationsListComponent } from './components/modifications-list/modifications-list.component';\nimport { SetBonusDetailsComponent } from './components/set-bonus-details/set-bonus-details.component';\nimport { SetListComponent } from './components/set-list/set-list.component';\nimport { SetbonusListComponent } from './components/setbonus-list/setbonus-list.component';\nimport { SharpnessBarComponent } from './components/sharpness-bar/sharpness-bar.component';\nimport { SkillDetailsComponent } from './components/skill-details/skill-details.component';\nimport { ToolListComponent } from './components/tool-list/tool-list.component';\nimport { TooltipComponent } from './components/tooltip/tooltip.component';\nimport { UpgradeSlotComponent } from './components/upagrade-slot/upgrade-slot.component';\nimport { UpgradeDetailsComponent } from './components/upgrade-details/upgrade-details.component';\nimport { UpgradesListComponent } from './components/upgrades-list/upgrades-list.component';\nimport { WeaponListComponent } from './components/weapon-list/weapon-list.component';\nimport { DataModule } from './data/data.module';\nimport { NumbersArrPipe } from './pipes/numberArr.pipe';\nimport { AppDataProvider } from './providers/app-data.provider';\nimport { BuildService } from './services/build.service';\nimport { CalculationService } from './services/calculation.service';\nimport { DataService } from './services/data.service';\nimport { EquipmentService } from './services/equipment.service';\nimport { SetService } from './services/set.service';\nimport { SkillService } from './services/skill.service';\nimport { SlotService } from './services/slot.service';\nimport { StatService } from './services/stat.service';\nimport { TooltipService } from './services/tooltip.service';\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tArmorListComponent,\n\t\tWeaponListComponent,\n\t\tAugmentationsListComponent,\n\t\tUpgradesListComponent,\n\t\tModificationsListComponent,\n\t\tKinsectListComponent,\n\t\tAmmoCapacitiesComponent,\n\t\tMelodiesComponent,\n\t\tDecorationListComponent,\n\t\tCharmListComponent,\n\t\tToolListComponent,\n\t\tSetbonusListComponent,\n\t\tItemDetailsComponent,\n\t\tCommonDetailsComponent,\n\t\tUpgradeDetailsComponent,\n\t\tDecorationDetailsComponent,\n\t\tKinsectDetailsComponent,\n\t\tItemSlotComponent,\n\t\tAugmentationSlotComponent,\n\t\tUpgradeSlotComponent,\n\t\tAwakeningSlotComponent,\n\t\tModificationSlotComponent,\n\t\tKinsectSlotComponent,\n\t\tDecorationSlotComponent,\n\t\tEquippedStatsComponent,\n\t\tEquippedSkillsComponent,\n\t\tEquippedBuffsComponent,\n\t\tCalcDetailsComponent,\n\t\tSkillDetailsComponent,\n\t\tSetBonusDetailsComponent,\n\t\tTooltipComponent,\n\t\tSharpnessBarComponent,\n\t\tSetListComponent,\n\t\tNumbersArrPipe,\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tHttpClientModule,\n\t\tVirtualScrollerModule,\n\t\tDataModule,\n\t\tCommonModule\n\t],\n\tproviders: [\n\t\tLocation,\n\t\t{ provide: LocationStrategy, useClass: PathLocationStrategy },\n\t\tDataService,\n\t\tSkillService,\n\t\tTooltipService,\n\t\tEquipmentService,\n\t\tSlotService,\n\t\tStatService,\n\t\tCalculationService,\n\t\tBuildService,\n\t\tSetService,\n\t\tAppDataProvider,\n\t\t{ provide: APP_INITIALIZER, useFactory: appDataProviderFactory, deps: [AppDataProvider], multi: true }\n\t],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule { }\n\nexport function appDataProviderFactory(provider: AppDataProvider) {\n\treturn () => provider.load().toPromise();\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { StatService } from 'src/app/services/stat.service';\nimport { AmmoCapacitiesModel, AmmoLevelModel } from '../../models/ammo-capacities.model';\nimport { DeviationType, RecoilType, ReloadType } from '../../types/deviation.type';\n\n@Component({\n\tselector: 'mhw-builder-ammo-capacities',\n\ttemplateUrl: './ammo-capacities.component.html',\n\tstyleUrls: ['./ammo-capacities.component.scss']\n})\nexport class AmmoCapacitiesComponent implements OnInit {\n\n\t@Input() ammoCapacities: AmmoCapacitiesModel;\n\n\trecoilSuppresorMod = 0;\n\treloadAssistMod = 0;\n\tdeviationSuppresorMod = 0;\n\tcloseRangeUpMod = 0;\n\trangeAttackUpMod = 0;\n\tshieldMod = 0;\n\n\tshowAmmoModsInfo = false;\n\n\tdeviationTypes = DeviationType;\n\trecoilType = RecoilType;\n\treloadType = ReloadType;\n\n\tconstructor(private statService: StatService) {\n\t\tthis.statService.statsUpdated$.subscribe(stats => {\n\t\t\tthis.recoilSuppresorMod = 0;\n\t\t\tthis.reloadAssistMod = 0;\n\t\t\tthis.deviationSuppresorMod = 0;\n\t\t\tthis.setRecoil(Math.abs(stats.recoil));\n\t\t\tthis.setReload(Math.abs(stats.reload));\n\t\t\tthis.setDeviation(Math.abs(stats.deviation));\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n\tallZero(levels: AmmoLevelModel[]) {\n\t\treturn levels.every(v => v.capacity == 0);\n\t}\n\n\tsetRecoil(val: number) {\n\t\tif (this.recoilSuppresorMod == val) {\n\t\t\tthis.recoilSuppresorMod = Math.max(this.recoilSuppresorMod - 1, 0);\n\t\t} else {\n\t\t\tthis.recoilSuppresorMod = val;\n\t\t}\n\t}\n\tsetReload(val: number) {\n\t\tif (this.reloadAssistMod == val) {\n\t\t\tthis.reloadAssistMod = Math.max(this.reloadAssistMod - 1, 0);\n\t\t} else {\n\t\t\tthis.reloadAssistMod = val;\n\t\t}\n\t}\n\tsetDeviation(val: number) {\n\t\tif (this.deviationSuppresorMod == val) {\n\t\t\tthis.deviationSuppresorMod = Math.max(this.deviationSuppresorMod - 1, 0);\n\t\t} else {\n\t\t\tthis.deviationSuppresorMod = val;\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<div *ngIf=\"showAmmoModsInfo\" class=\"\">\n\t\t<button type=\"button\" (click)=\"setRecoil(1)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 0}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 1\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setRecoil(2)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 1}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 2\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setRecoil(3)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 2}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 3\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setRecoil(4)\" [ngClass]=\"{'recoil':recoilSuppresorMod > 3}\">\n\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90\"></i> 4\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(1)\" [ngClass]=\"{'reload':reloadAssistMod > 0}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 1\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(2)\" [ngClass]=\"{'reload':reloadAssistMod > 1}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 2\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(3)\" [ngClass]=\"{'reload':reloadAssistMod > 2}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 3\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setReload(4)\" [ngClass]=\"{'reload':reloadAssistMod > 3}\">\n\t\t\t<i class=\"fas fa-angle-double-up\"></i> 4\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(1)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 0}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 1\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(2)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 1}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 2\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(3)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 2}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 3\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"setDeviation(4)\" [ngClass]=\"{'deviation':deviationSuppresorMod > 3}\">\n\t\t\t<i class=\"fas fa-compress-arrows-alt\"></i> 4\n\t\t</button>\n\t</div>\n\t<table *ngIf=\"ammoCapacities?.deviation\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th style=\"text-align:left;\">\n\t\t\t\t\tDeviation {{ammoCapacities.deviation[deviationSuppresorMod]}}\n\t\t\t\t\t<span *ngIf=\"deviationSuppresorMod >= ammoCapacities.deviation.length\">\n\t\t\t\t\t\t{{ammoCapacities.deviation[ ammoCapacities.deviation.length-1]}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<br />\n\t\t\t\t\t{{ammoCapacities.specialAmmo}}\n\t\t\t\t\t<button>\n\t\t\t\t\t\t<i class=\"fas fa-cog\" [ngClass]=\"{'sharp-2': showAmmoModsInfo}\" (click)=\"showAmmoModsInfo =! showAmmoModsInfo\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</th>\n\t\t\t\t<th class=\"text-right\">Lv 1</th>\n\t\t\t\t<th class=\"text-right\">Lv 2</th>\n\t\t\t\t<th class=\"text-right\">Lv 3</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<ng-container *ngFor=\"let ammo of ammoCapacities.ammo\">\n\t\t\t\t<tr *ngIf=\"!allZero(ammo.levels)\">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<img [src]=\"'assets/images/ammo/ammo-'+ammo.name+'-icon.png'\" alt=\"Bullet\" /> {{ammo.name|titlecase}}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td *ngFor=\"let level of ammo.levels\" class=\"text-right\">\n\t\t\t\t\t\t<div *ngIf=\"!showAmmoModsInfo\" class=\"\">\n\t\t\t\t\t\t\t<span style=\"font-weight:bold;\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-sign-out-alt fa-rotate-90 recoil\" *ngIf=\"level.type == 1\"></i>\n\t\t\t\t\t\t\t\t<i class=\"fas fa-angle-double-up sharp-2\" *ngIf=\"level.type == 2\"></i>\n\t\t\t\t\t\t\t\t{{level.capacity}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"showAmmoModsInfo && level.capacity > 0\" class=\"\">\n\t\t\t\t\t\t\t<span *ngIf=\"recoilSuppresorMod<level.recoil.length\" class=\"recoil\">\n\t\t\t\t\t\t\t\t<!--{{level.recoil[recoilSuppresorMod]}}-->\n\t\t\t\t\t\t\t\t{{recoilType[level.recoil[recoilSuppresorMod]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngIf=\"recoilSuppresorMod>=level.recoil.length\" class=\"recoil\">\n\t\t\t\t\t\t\t\t{{recoilType[level.recoil[level.recoil.length-1]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span *ngIf=\"reloadAssistMod<level.reload.length\" class=\"reload\">\n\t\t\t\t\t\t\t\t<!--{{level.reload[reloadAssistMod]}}-->\n\t\t\t\t\t\t\t\t{{reloadType[level.reload[reloadAssistMod]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngIf=\"reloadAssistMod>=level.reload.length\" class=\"reload\">\n\n\t\t\t\t\t\t\t\t<!--{{level.reload[level.reload.length-1]}}-->\n\t\t\t\t\t\t\t\t{{reloadType[level.reload[level.reload.length-1]]}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td *ngIf=\"(ammo.levels).length < 3\">\n\t\t\t\t\t\t-\n\t\t\t\t\t</td>\n\t\t\t\t\t<td *ngIf=\"(ammo.levels).length < 2\">\n\t\t\t\t\t\t-\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</ng-container>\n\t\t</tbody>\n\t</table>\n\t<div class=\"no-data-warning\" *ngIf=\"ammoCapacities?.missingData && showAmmoModsInfo\">\n\t\tAmmo capacity data is missing!\n\t</div>\n\t<div class=\"no-data-warning\" *ngIf=\"ammoCapacities?.missingMods && showAmmoModsInfo\">\n\t\tAmmo mods data is missing!\n\t</div>\n</div>\n","import { Component, ElementRef, HostListener, Input, OnInit, ViewChild } from '@angular/core';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\n\n@Component({\n\tselector: 'mhw-builder-armor-list',\n\ttemplateUrl: './armor-list.component.html',\n\tstyleUrls: ['./armor-list.component.scss']\n})\nexport class ArmorListComponent implements OnInit {\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\tprivate _itemTypeFilters: ItemType[];\n\tprivate _onlyIceborne: boolean;\n\tprivate searchLength = 0;\n\n\t@Input()\n\tset itemTypeFilters(itemTypeFilters: ItemType[]) {\n\t\tthis._itemTypeFilters = itemTypeFilters;\n\t\tthis.loadItems();\n\t\tthis.search({ key: 'Filter' }, this.searchBox.nativeElement.value);\n\t}\n\tget itemTypeFilters(): ItemType[] { return this._itemTypeFilters; }\n\n\t@Input()\n\tset onlyIceborne(onlyIceborne: boolean) {\n\t\tthis._onlyIceborne = onlyIceborne;\n\t\tthis.search({ key: 'Filter' }, this.searchBox.nativeElement.value);\n\t\tthis.armorTypeSort = '';\n\t}\n\tget onlyIceborne(): boolean { return this._onlyIceborne; }\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titemsAll: ItemModel[];\n\titemsWorld: ItemModel[];\n\titemsIceborne: ItemModel[];\n\tfilteredItems: ItemModel[];\n\tvirtualItems: ItemModel[];\n\tarmorTypeSort: string;\n\n\theadId = 0;\n\tbodyId = 0;\n\tarmsId = 0;\n\twaistId = 0;\n\tlegsId = 0;\n\n\tshowFilterContainer = true;\n\tshowSortContainer = true;\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService\n\t) {\n\t\tthis.itemsAll = this.dataService.getArmors();\n\t\tthis.itemsAll.sort((a, b) => {\n\t\t\treturn (this.getItemTypeIndex(a.itemType) > this.getItemTypeIndex(b.itemType)) ?\n\t\t\t\t1 : ((this.getItemTypeIndex(b.itemType) > this.getItemTypeIndex(a.itemType)) ?\n\t\t\t\t\t-1 : 0);\n\t\t});\n\n\t\tthis.slotService.itemSelected$.subscribe(item => {\n\t\t\tthis.getArmorIds();\n\t\t});\n\t\tthis.slotService.itemSelectedNew$.subscribe(item => {\n\t\t\tthis.getArmorIds();\n\t\t});\n\t}\n\n\tngOnInit(): void {\n\t\tthis.slotService.armorSlotSelected$.subscribe(slot => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.searchBox.nativeElement.focus();\n\t\t\t\tthis.searchBox.nativeElement.select();\n\t\t\t}, 250);\n\t\t});\n\t\tthis.getArmorIds();\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tonItemListUpdate(items: ItemModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tloadItems() {\n\t\tthis.itemsWorld = this.itemsAll.filter(f => f.id < 1000);\n\t\tthis.itemsIceborne = this.itemsAll.filter(f => f.id >= 1000);\n\n\t\tthis.applyIceborneFilter();\n\t\tthis.applyItemFilter();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(event, query: string) {\n\t\tif (query.length < this.searchLength || (event && (event.key === 'FilterHard' || event.key === 'Backspace' || event.key === 'Delete'))) {\n\t\t\tthis.applyIceborneFilter();\n\t\t}\n\n\t\tif (query) {\n\t\t\tif (query.length > 2) {\n\t\t\t\tquery = query.toLowerCase().trim();\n\n\t\t\t\tconst alphaIndex = query.indexOf('alpha');\n\t\t\t\tif (alphaIndex > -1) {\n\t\t\t\t\tquery = query.replace('alpha', '');\n\t\t\t\t}\n\t\t\t\tconst betaIndex = query.indexOf('beta');\n\t\t\t\tif (betaIndex > -1) {\n\t\t\t\t\tquery = query.replace('beta', '');\n\t\t\t\t}\n\t\t\t\tconst gammaIndex = query.indexOf('gamma');\n\t\t\t\tif (gammaIndex > -1) {\n\t\t\t\t\tquery = query.replace('gamma', '');\n\t\t\t\t}\n\t\t\t\tquery = query.trim();\n\n\t\t\t\tconst queryParts = query.split(' ');\n\n\t\t\t\tif ((query.length !== this.searchLength || event && event.key === 'FilterSoft') && (alphaIndex > -1 || betaIndex > -1 || gammaIndex > -1)) {\n\t\t\t\t\tthis.applyIceborneFilter();\n\t\t\t\t}\n\n\t\t\t\tif (this.filteredItems) {\n\t\t\t\t\tfor (const item of this.filteredItems) {\n\t\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\t\t\t\t\t\tconst skills = this.dataService.getSkills(item.skills);\n\n\t\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\t\t\t\t\t\tconst skillMatch = skills.some(skill => skill.name.toLowerCase().includes(query));\n\n\t\t\t\t\t\tconst tagMatch = queryParts.some(queryPart => {\n\t\t\t\t\t\t\treturn item.tags.some(tag => tag.toLowerCase().includes(queryPart));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!nameMatch && !skillMatch && !tagMatch) {\n\t\t\t\t\t\t\tthis.filteredItems = this.filteredItems.filter(i => i.name != item.name);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (alphaIndex > -1 || betaIndex > -1 || gammaIndex > -1) {\n\t\t\t\t\t\t\tconst abgQuery = [];\n\n\t\t\t\t\t\t\tif (alphaIndex > -1) {\n\t\t\t\t\t\t\t\tabgQuery.push('α');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (betaIndex > -1) {\n\t\t\t\t\t\t\t\tabgQuery.push('β');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (gammaIndex > -1) {\n\t\t\t\t\t\t\t\tabgQuery.push('γ');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst query2Match = abgQuery.some(queryPart => {\n\t\t\t\t\t\t\t\treturn itemName.includes(queryPart);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!query2Match) {\n\t\t\t\t\t\t\t\tthis.filteredItems = this.filteredItems.filter(i => i.name != item.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.applyItemFilter();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t\tthis.searchLength = query.length;\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.applyIceborneFilter();\n\t\tthis.applyItemFilter();\n\t\tthis.armorTypeSort = '';\n\t}\n\n\tapplyItemFilter() {\n\t\tif (this.filteredItems && this.itemTypeFilters) {\n\t\t\tthis.filteredItems = this.filteredItems.filter(item => {\n\t\t\t\tfor (const itemType of this.itemTypeFilters) {\n\t\t\t\t\tif (item.itemType == itemType) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t}\n\n\tapplyIceborneFilter() {\n\t\tif (this.onlyIceborne) {\n\t\t\tthis.filteredItems = this.itemsIceborne;\n\t\t} else {\n\t\t\tthis.filteredItems = this.itemsIceborne.concat(this.itemsWorld);\n\t\t}\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tconst newItem = Object.assign({}, item);\n\t\tif (this.itemTypeFilters.length == 1) {\n\t\t\tthis.slotService.selectArmorItemByType(newItem, true);\n\t\t} else {\n\t\t\tthis.slotService.selectArmorItemByType(newItem);\n\t\t}\n\t}\n\n\taddItemTypeFilter(itemTypeFilter: ItemType) {\n\t\tconst existFilter = this.itemTypeFilters.filter(f => f == itemTypeFilter);\n\t\tif (existFilter.length > 0) {\n\t\t\tconst index = this.itemTypeFilters.indexOf(existFilter[0], 0);\n\t\t\tif (index > -1) {\n\t\t\t\tthis.itemTypeFilters.splice(index, 1);\n\t\t\t}\n\t\t\tthis.search({ key: 'FilterSoft' }, this.searchBox.nativeElement.value);\n\t\t} else {\n\t\t\tthis.itemTypeFilters.push(itemTypeFilter);\n\t\t\tthis.search({ key: 'FilterHard' }, this.searchBox.nativeElement.value);\n\t\t}\n\t}\n\n\tgetSkillCount(item: ItemModel, skill: SkillModel): string {\n\t\tconst itemSkill = item.skills.find(s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\titemTypeIsSelected(itemType: ItemType) {\n\t\tif (this.itemTypeFilters.filter(f => f == itemType).length > 0) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\titemIsSelected(id: number, itemType: ItemType) {\n\t\tlet itemId = 0;\n\n\t\tswitch (itemType) {\n\t\t\tcase ItemType.Head:\n\t\t\t\titemId = this.headId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Chest:\n\t\t\t\titemId = this.bodyId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Arms:\n\t\t\t\titemId = this.armsId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Waist:\n\t\t\t\titemId = this.waistId;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Legs:\n\t\t\t\titemId = this.legsId;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn id == itemId;\n\t}\n\n\tgetArmorIds() {\n\t\tif (this.slotService.headSlot.item) {\n\t\t\tthis.headId = this.slotService.headSlot.item.id;\n\t\t} else {\n\t\t\tthis.headId = 0;\n\t\t}\n\t\tif (this.slotService.chestSlot.item) {\n\t\t\tthis.bodyId = this.slotService.chestSlot.item.id;\n\t\t} else {\n\t\t\tthis.bodyId = 0;\n\t\t}\n\t\tif (this.slotService.handsSlot.item) {\n\t\t\tthis.armsId = this.slotService.handsSlot.item.id;\n\t\t} else {\n\t\t\tthis.armsId = 0;\n\t\t}\n\t\tif (this.slotService.legsSlot.item) {\n\t\t\tthis.waistId = this.slotService.legsSlot.item.id;\n\t\t} else {\n\t\t\tthis.waistId = 0;\n\t\t}\n\t\tif (this.slotService.feetSlot.item) {\n\t\t\tthis.legsId = this.slotService.feetSlot.item.id;\n\t\t} else {\n\t\t\tthis.legsId = 0;\n\t\t}\n\t}\n\n\tgetItemTypeIndex(type: ItemType): number {\n\t\tif (type == ItemType.Head) {\n\t\t\treturn 1;\n\t\t} else if (type == ItemType.Chest) {\n\t\t\treturn 2;\n\t\t} else if (type == ItemType.Arms) {\n\t\t\treturn 3;\n\t\t} else if (type == ItemType.Waist) {\n\t\t\treturn 4;\n\t\t} else if (type == ItemType.Legs) {\n\t\t\treturn 5;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tsortByDefense() {\n\t\tthis.armorTypeSort = 'DEF';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.defense[2] > item2.defense[2]) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.defense[2] < item2.defense[2]) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortByResistance(type: string) {\n\t\tthis.armorTypeSort = type;\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet resistance1 = 0;\n\t\t\tlet resistance2 = 0;\n\t\t\tif (type == 'FIR') {\n\t\t\t\tresistance1 = item1.fireResist;\n\t\t\t\tresistance2 = item2.fireResist;\n\t\t\t} else if (type == 'WAT') {\n\t\t\t\tresistance1 = item1.waterResist;\n\t\t\t\tresistance2 = item2.waterResist;\n\t\t\t} else if (type == 'THU') {\n\t\t\t\tresistance1 = item1.thunderResist;\n\t\t\t\tresistance2 = item2.thunderResist;\n\t\t\t} else if (type == 'ICE') {\n\t\t\t\tresistance1 = item1.iceResist;\n\t\t\t\tresistance2 = item2.iceResist;\n\t\t\t} else if (type == 'DRA') {\n\t\t\t\tresistance1 = item1.dragonResist;\n\t\t\t\tresistance2 = item2.dragonResist;\n\t\t\t}\n\t\t\tif (resistance1 > resistance2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (resistance1 < resistance2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortBySlots() {\n\t\tthis.armorTypeSort = 'SLOT';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet slotValue1 = 0;\n\t\t\tlet slotValue2 = 0;\n\n\t\t\tif (item1.slots.length > 0) {\n\t\t\t\tslotValue1 += item1.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item1.slots.length > 1) {\n\t\t\t\tslotValue1 += item1.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item1.slots.length > 2) {\n\t\t\t\tslotValue1 += item1.slots[2].level;\n\t\t\t}\n\t\t\tif (item2.slots.length > 0) {\n\t\t\t\tslotValue2 += item2.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item2.slots.length > 1) {\n\t\t\t\tslotValue2 += item2.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item2.slots.length > 2) {\n\t\t\t\tslotValue2 += item2.slots[2].level;\n\t\t\t}\n\n\t\t\tif (slotValue1 > slotValue2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (slotValue1 < slotValue2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search($event, searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\t\t<button type=\"button\" class=\"iceborne-button\" (click)=\"onlyIceborne = !onlyIceborne\" title=\"Only Iceborne\">\n\t\t\t<i class=\"fas fa-toggle-on\" [hidden]=\"!onlyIceborne\"></i>\n\t\t\t<i class=\"fas fa-toggle-off\" [hidden]=\"onlyIceborne\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"showFilterContainer=!showFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"filter-container\" *ngIf=\"showFilterContainer\">\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Head')\"\n\t\t\t(click)=\"addItemTypeFilter('Head')\" title=\"Head\">\n\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"headId == 0\" alt=\"Head\">\n\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"headId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"head\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Chest')\"\n\t\t\t(click)=\"addItemTypeFilter('Chest')\" title=\"Chest\">\n\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"bodyId == 0\" alt=\"Chest\">\n\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"bodyId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Chest\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Arms')\"\n\t\t\t(click)=\"addItemTypeFilter('Arms')\" title=\"Arms\">\n\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"armsId == 0\" alt=\"Arms\">\n\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"armsId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Arms\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Waist')\"\n\t\t\t(click)=\"addItemTypeFilter('Waist')\" title=\"Waist\">\n\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"waistId == 0\" alt=\"Waist\">\n\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"waistId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Waist\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"armor-filter\" [class.selected]=\"itemTypeIsSelected('Legs')\"\n\t\t\t(click)=\"addItemTypeFilter('Legs')\" title=\"Legs\">\n\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"legsId == 0\" alt=\"Legs\">\n\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"legsId != 0\" class=\"armor-icon info-opaque\"\n\t\t\t\talt=\"Legs\">\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'DEF'\" (click)=\"sortByDefense()\">\n\t\t\t<span>DEF</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'FIR'\"\n\t\t\t(click)=\"sortByResistance('FIR')\">\n\t\t\t<span>FIR</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'WAT'\"\n\t\t\t(click)=\"sortByResistance('WAT')\">\n\t\t\t<span>WAT</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'THU'\"\n\t\t\t(click)=\"sortByResistance('THU')\">\n\t\t\t<span>THU</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'ICE'\"\n\t\t\t(click)=\"sortByResistance('ICE')\">\n\t\t\t<span>ICE</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'DRA'\"\n\t\t\t(click)=\"sortByResistance('DRA')\">\n\t\t\t<span>DRA</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"armorTypeSort == 'SLOT'\" (click)=\"sortBySlots()\">\n\t\t\t<span>SLOT</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"itemsAll\" [items]=\"filteredItems\"\n\t\t(vsUpdate)=\"onItemListUpdate($event)\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\"\n\t\t\t[class.itemSelected]=\"itemIsSelected(item.id, item.itemType)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"'vColor-' + item.vColor\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"slots\">\n\t\t\t\t\t<div *ngIf=\"item.slots[0]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[1]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[2]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"type\">\n\t\t\t\t\t<span class=\"typeName\">{{item.itemType}}</span>\n\t\t\t\t\t<img [src]=\"'assets/images/armor/' + (item.itemType | lowercase) + '-icon.png'\" alt=\"item type\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"item.rarity\" [ngClass]=\"'rarity-'+item?.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{item.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/defense-icon.png\" alt=\"defense\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">\n\t\t\t\t\t\t<span *ngFor=\"let def of item.defense; let i = index\">\n\t\t\t\t\t\t\t{{def}}\n\t\t\t\t\t\t\t<span *ngIf=\"i < item.defense.length - 2\">\n\t\t\t\t\t\t\t\t|\n\t\t\t\t\t\t\t\t<!--➝-->\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngIf=\"i == item.defense.length -2\">\n\t\t\t\t\t\t\t\t|\n\t\t\t\t\t\t\t\t<!--➟-->\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/fire-icon.png\" alt=\"fire\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.fireResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/water-icon.png\" alt=\"water\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.waterResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/ice-icon.png\" alt=\"ice\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.iceResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/thunder-icon.png\" alt=\"thunder\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.thunderResist}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/dragon-icon.png\" alt=\"dragon\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.dragonResist}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-augmentation-slot',\n\ttemplateUrl: './augmentation-slot.component.html',\n\tstyleUrls: ['./augmentation-slot.component.scss']\n})\nexport class AugmentationSlotComponent implements OnInit {\n\tslotName = ItemType.Augmentation;\n\n\taugmentation: AugmentationModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void { }\n\n\tclicked() {\n\t\tthis.slotService.selectAugmentationSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearAugmentationSlot(this);\n\t\tthis.clearTooltipAugmentation();\n\t}\n\n\tsetTooltipAugmentation(event: PointerEvent, augmentation: AugmentationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setAugmentation(augmentation);\n\t\t}\n\t}\n\n\tclearTooltipAugmentation() {\n\t\tthis.tooltipService.setAugmentation(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clicked()\" [class.selected]=\"selected\" (pointerenter)=\"setTooltipAugmentation($event, augmentation)\" (pointerleave)=\"clearTooltipAugmentation()\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/augment-icon.png'\" alt=\"augment\"></div>\n\t<div class=\"selected-augmentation\">\n\t\t<span class=\"hidden-xs\">{{augmentation?.name}}</span>\n\t\t<span class=\"visible-xs\">{{augmentation?.code}}</span>\n\t</div>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-augmentations-list',\n\ttemplateUrl: './augmentations-list.component.html',\n\tstyleUrls: ['./augmentations-list.component.scss']\n})\nexport class AugmentationsListComponent implements OnInit {\n\taugmentations: AugmentationModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.loadItems();\n\t}\n\n\tloadItems() {\n\t\tthis.augmentations = this.dataService.getAugmentations();\n\t}\n\n\tselectAugmentation(augmentation: AugmentationModel) {\n\t\tconst newAugmentation = Object.assign({}, augmentation);\n\t\tthis.slotService.selectAugmentation(newAugmentation);\n\t}\n\n\tsetTooltipAugmentation(event: PointerEvent, augmentation: AugmentationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setAugmentation(augmentation);\n\t\t}\n\t}\n\n\tclearTooltipAugmentation() {\n\t\tthis.tooltipService.setAugmentation(null);\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"items-container\">\n\t\t<ul>\n\t\t\t<li *ngFor=\"let aug of augmentations\" (click)=\"selectAugmentation(aug)\" (pointerenter)=\"setTooltipAugmentation($event, aug)\" (pointerleave)=\"clearTooltipAugmentation()\">\n\t\t\t\t<div class=\"info-container\">\n\t\t\t\t\t<div class=\"name-container\">\n\t\t\t\t\t\t{{aug.name}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t\t<div class=\"description-value\">\n\t\t\t\t\t\t\t{{aug.description}}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<div *ngFor=\"let level of aug.levels\">\n\t\t\t\t\t\t\t\t{{level.description}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { AwakeningModel } from 'src/app/models/awakening.model';\nimport { AwakeningLevelModel } from '../../models/awakening-level.model';\nimport { KeyValuePair } from '../../models/common/key-value-pair.model';\nimport { SetBonusModel } from '../../models/set-bonus.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { AilmentType } from '../../types/ailment.type';\nimport { AwakeningType } from '../../types/awakening.type';\nimport { ElementType } from '../../types/element.type';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\nimport { WeaponType } from '../../types/weapon.type';\nimport { DropdownComponent } from '../common/dropdown/dropdown.component';\n\n@Component({\n\tselector: 'mhw-builder-awakening-slot',\n\ttemplateUrl: './awakening-slot.component.html',\n\tstyleUrls: ['./awakening-slot.component.scss']\n})\nexport class AwakeningSlotComponent implements OnInit {\n\tslotName = ItemType.Awakening;\n\tsetbonus: SetBonusModel;\n\n\tpublic selected: boolean;\n\n\tprivate _awakeningsLevel: AwakeningLevelModel[];\n\tprivate _weaponElement: ElementType;\n\tprivate _weaponAilment: AilmentType;\n\tprivate _weaponType: WeaponType;\n\n\tweaponIndex = 0;\n\telementTypes = ElementType;\n\tailmentTypes = AilmentType;\n\tawakeningTypes = AwakeningType;\n\tweaponTypes = WeaponType;\n\n\telementValues: KeyValuePair<string, string>[];\n\tailmentValues: KeyValuePair<string, string>[];\n\tawakeningValues: AwakeningModel[];\n\n\t@Input()\n\tset awakenings(awakenings: AwakeningLevelModel[]) {\n\t\tthis._awakeningsLevel = awakenings;\n\t}\n\tget awakenings(): AwakeningLevelModel[] {\n\t\treturn this._awakeningsLevel;\n\t}\n\n\t@Input()\n\tset weaponElement(weaponElement: ElementType) {\n\t\tif (!weaponElement) {\n\t\t\tweaponElement = ElementType.None;\n\t\t}\n\t\tthis._weaponElement = weaponElement;\n\t}\n\tget weaponElement(): ElementType {\n\t\treturn this._weaponElement;\n\t}\n\n\t@Input()\n\tset weaponAilment(weaponAilment: AilmentType) {\n\t\tif (!weaponAilment) {\n\t\t\tweaponAilment = AilmentType.None;\n\t\t}\n\t\tthis._weaponAilment = weaponAilment;\n\t}\n\tget weaponAilment(): AilmentType {\n\t\treturn this._weaponAilment;\n\t}\n\n\t@Input()\n\tset weaponType(weaponType: WeaponType) {\n\t\tthis._weaponType = weaponType;\n\n\t\tthis.weaponIndex = 0;\n\t\tfor (const item in WeaponType) {\n\t\t\tif (isNaN(Number(item))) {\n\t\t\t\tif (item == weaponType) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tthis.weaponIndex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.initAwakeningValues();\n\t\tif (weaponType != WeaponType.HuntingHorn) {\n\t\t\tthis.awakeningValues.splice(12, 5);\n\t\t}\n\t\tif (weaponType != WeaponType.LightBowgun && weaponType != WeaponType.HeavyBowgun) {\n\t\t\tthis.awakeningValues.splice(8, 4);\n\t\t}\n\t\tif (weaponType == WeaponType.Bow || weaponType == WeaponType.LightBowgun || weaponType == WeaponType.HeavyBowgun) {\n\t\t\tthis.awakeningValues.splice(7, 1);\n\t\t}\n\t}\n\tget weaponType(): WeaponType {\n\t\treturn this._weaponType;\n\t}\n\n\t@ViewChild(DropdownComponent, { static: true }) elementDropdown: DropdownComponent;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate dataService: DataService,\n\t\tprivate tooltipService: TooltipService\n\t) {\n\t}\n\n\tngOnInit(): void {\n\t\tthis.elementValues = [];\n\t\tObject.keys(ElementType).map(key => {\n\t\t\tthis.elementValues.push({ key: key, value: key });\n\t\t});\n\t\tthis.ailmentValues = [];\n\t\tObject.keys(AilmentType).map(key => {\n\t\t\tthis.ailmentValues.push({ key: key, value: key });\n\t\t});\n\t\tthis.ailmentValues.pop();\n\t}\n\n\tinitAwakeningValues() {\n\t\tthis.awakeningValues = JSON.parse(JSON.stringify(this.dataService.getAwakenings()));\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectSetbonusSlot(this);\n\t}\n\n\tclearAwakeninsClicked(even: Event) { }\n\n\tclearSkillClicked(event: Event) {\n\t\tthis.setbonus = null;\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearSkillSlot(this);\n\t}\n\n\tsetTooltipAwakening(event: PointerEvent, awakenins: AwakeningLevelModel[]) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t}\n\t}\n\n\tclearTooltipAwakening() {\n\t}\n\n\tselectElement(selectedElement: ElementType) {\n\t\tthis.weaponElement = selectedElement;\n\t\tconst elementAttack = this.dataService.getSafiElementAttack(this.weaponIndex);\n\t\tthis.changeWeaponName();\n\t\tthis.slotService.selectWeaponElement(selectedElement, elementAttack);\n\t}\n\tselectAilment(selectedAilment: AilmentType) {\n\t\tthis.weaponAilment = selectedAilment;\n\t\tlet ailmentType = 0;\n\t\tif (selectedAilment == AilmentType.Poison || selectedAilment == AilmentType.Blast) {\n\t\t\tailmentType = 1;\n\t\t}\n\t\tconst ailmentAttack = this.dataService.getSafiAilmentAttack(this.weaponIndex, ailmentType);\n\t\tthis.changeWeaponName();\n\t\tthis.slotService.selectWeaponAilment(selectedAilment, ailmentAttack);\n\t}\n\n\tprivate changeWeaponName() {\n\t\tthis.slotService.changeWeaponName(this.dataService.getSafiWeaponName(this.weaponType, this.weaponElement, this.weaponAilment));\n\t}\n\n\tselectAwakeningType(selectedAwakening: AwakeningModel, awakeningLevel: AwakeningLevelModel, index: number) {\n\t\tawakeningLevel.id = selectedAwakening.id;\n\t\tawakeningLevel.type = selectedAwakening.type;\n\t\tawakeningLevel.name = selectedAwakening.name;\n\t\tawakeningLevel.short = selectedAwakening.short;\n\t\tif (index == 0) {\n\t\t\tawakeningLevel.maxLevel = Math.min(selectedAwakening.maxLevel, 6);\n\t\t} else {\n\t\t\tawakeningLevel.maxLevel = Math.min(selectedAwakening.maxLevel, 5);\n\t\t}\n\t\tawakeningLevel.minLevel = selectedAwakening.minLevel;\n\n\t\tif (awakeningLevel.level == 0) {\n\t\t\tawakeningLevel.level = awakeningLevel.maxLevel;\n\t\t} else {\n\t\t\tawakeningLevel.level = Math.min(Math.max(awakeningLevel.level, awakeningLevel.minLevel), awakeningLevel.maxLevel);\n\t\t}\n\n\t\tthis.slotService.selectAwakenings(this.awakenings);\n\t}\n\n\tselectAwakeningLevel(level: number, awakeningLevel: AwakeningLevelModel) {\n\t\tif (awakeningLevel.type != AwakeningType.None) {\n\t\t\tif (awakeningLevel.level == level && awakeningLevel.minLevel < level) {\n\t\t\t\tawakeningLevel.level -= 1;\n\t\t\t} else {\n\t\t\t\tawakeningLevel.level = level;\n\t\t\t}\n\t\t}\n\t\tthis.slotService.selectAwakenings(this.awakenings);\n\t}\n\n\tgetMin(a: number, b: number): number {\n\t\treturn Math.min(a, b);\n\t}\n\n\tgetElementIcon(element: ElementType): string {\n\t\tlet assetPath;\n\t\tif (element && element != ElementType.None) {\n\t\t\tassetPath = `${element.toLowerCase()}-icon`;\n\t\t}\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n\n\tgetAilmentIcon(ailment: AilmentType): string {\n\t\tlet assetPath;\n\t\tif (ailment && ailment != AilmentType.None) {\n\t\t\tassetPath = `${ailment.toLowerCase()}-icon`;\n\t\t}\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"elementAilment\" *ngIf=\"weaponType != weaponTypes.LightBowgun && weaponType != weaponTypes.HeavyBowgun\">\n\t\t<div class=\"element-slot\" (click)=\"elementDropdown.toggle($event)\">\n\t\t\t<div class=\"element selected-element\">\n\t\t\t\t<div *ngIf=\"weaponElement && weaponElement != elementTypes.None\" class=\"image-container\">\n\t\t\t\t\t<img *ngIf=\"weaponElement\" [src]=\"getElementIcon(weaponElement)\">\n\t\t\t\t</div>\n\t\t\t\t<span *ngIf=\"weaponElement && weaponElement != elementTypes.None\">\n\t\t\t\t\t{{weaponElement}}\n\t\t\t\t</span>\n\t\t\t\t<span *ngIf=\"!weaponElement || weaponElement == elementTypes.None\">\n\t\t\t\t\tElement Type\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<mhw-builder-dropdown #elementDropdown>\n\t\t\t\t<div class=\"element\" *ngFor=\"let e of elementValues\" (click)=\"selectElement(e.value)\">\n\t\t\t\t\t<div class=\"image-container\">\n\t\t\t\t\t\t<img *ngIf=\"e.value != elementTypes.None\" [src]=\"getElementIcon(e.value)\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{{e.value}}</span>\n\t\t\t\t</div>\n\t\t\t</mhw-builder-dropdown>\n\t\t</div>\n\t\t<div class=\"ailment-slot\" (click)=\"ailmentDropdown.toggle($event)\">\n\t\t\t<div class=\"ailment selected-ailment\">\n\t\t\t\t<div *ngIf=\"weaponAilment && weaponAilment != ailmentTypes.None\" class=\"image-container\">\n\t\t\t\t\t<img *ngIf=\"weaponAilment\" [src]=\"getElementIcon(weaponAilment)\">\n\t\t\t\t</div>\n\t\t\t\t<span *ngIf=\"weaponAilment && weaponAilment != ailmentTypes.None\">\n\t\t\t\t\t{{weaponAilment}}\n\t\t\t\t</span>\n\t\t\t\t<span *ngIf=\"!weaponAilment || weaponAilment == ailmentTypes.None\">\n\t\t\t\t\tAilment Type\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<mhw-builder-dropdown #ailmentDropdown>\n\t\t\t\t<div class=\"ailment\" *ngFor=\"let e of ailmentValues\" (click)=\"selectAilment(e.value)\">\n\t\t\t\t\t<div class=\"image-container\">\n\t\t\t\t\t\t<img *ngIf=\"e.value != ailmentTypes.None\" [src]=\"getAilmentIcon(e.value)\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{{e.value}}</span>\n\t\t\t\t</div>\n\t\t\t</mhw-builder-dropdown>\n\t\t</div>\n\t</div>\n\t<div class=\"awakenings\">\n\t\t<div class=\"awakening-slot\">\n\t\t\t<div class=\"awakening-type\">\n\t\t\t\t<div class=\"awakening selected-awakening\" (click)=\"clicked()\">\n\t\t\t\t\t<span *ngIf=\"setbonus\">\n\t\t\t\t\t\t{{setbonus?.name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf=\"!setbonus\">\n\t\t\t\t\t\tAbility\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"awakening-level\">\n\t\t\t\t\t<span *ngIf=\"setbonus?.level\">\n\t\t\t\t\t\t{{setbonus?.level}} <i class=\"fas fa-star star-icon\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"awakening-clear\">\n\t\t\t\t\t<button type=\"button\" class=\"clear-button\" (click)=\"clearSkillClicked($event)\">\n\t\t\t\t\t\t<i class=\"fas fa-times fa-sm\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"awakening-slot\" *ngFor=\"let awakening of awakenings; let i = index\">\n\t\t\t<div class=\"awakening-type\" (click)=\"awakeningDropdown.toggle($event)\">\n\t\t\t\t<div class=\"awakening selected-awakening\">\n\t\t\t\t\t<span *ngIf=\"awakening.type != awakeningTypes.None\">\n\t\t\t\t\t\t<span class=\"name1\">{{awakening.name}}</span>\n\t\t\t\t\t\t<span class=\"name2\" style=\"display: none;\">{{awakening.short ? awakening.short : awakening.name}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf=\"awakening.type == awakeningTypes.None\">\n\t\t\t\t\t\tAwakening\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<mhw-builder-dropdown #awakeningDropdown>\n\t\t\t\t\t<div class=\"awakening\" *ngFor=\"let e of awakeningValues\"\n\t\t\t\t\t\t(click)=\"selectAwakeningType(e, awakening, i)\">\n\t\t\t\t\t\t<span class=\"name1\">{{e.name}}</span>\n\t\t\t\t\t\t<span class=\"name2\" style=\"display: none;\">{{e.short ? e.short : e.name}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</mhw-builder-dropdown>\n\t\t\t</div>\n\t\t\t<div class=\"awakening-level\">\n\t\t\t\t<div *ngIf=\"awakening.type != awakeningTypes.None\">\n\t\t\t\t\t<span *ngFor=\"let key of awakening.minLevel - 1 | numbersArr\">\n\t\t\t\t\t\t<i class=\"far fa-star fa-sm c-pointer\" [ngClass]=\"awakening.type\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (awakening.level - awakening.minLevel + 1) | numbersArr\">\n\t\t\t\t\t\t<i class=\"fas fa-star fa-sm c-pointer\" [ngClass]=\"awakening.type\"\n\t\t\t\t\t\t\t(click)=\"selectAwakeningLevel(key + 1 + awakening.minLevel - 1, awakening)\">\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (getMin(i == 0 ? 6 : 5, awakening.maxLevel) - awakening.level) | numbersArr\">\n\t\t\t\t\t\t<i class=\"far fa-star fa-sm c-pointer\" [ngClass]=\"awakening.type\"\n\t\t\t\t\t\t\t(click)=\"selectAwakeningLevel(key + 1 + awakening.level, awakening)\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (6 - getMin(awakening.maxLevel, i == 0 ? 6 : 5)) | numbersArr\">\n\t\t\t\t\t\t<i class=\"far fa-star fa-sm c-pointer\" style=\"color:#525252\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-calc-details',\n\ttemplateUrl: './calc-details.component.html',\n\tstyleUrls: ['./calc-details.component.scss'],\n})\nexport class CalcDetailsComponent implements OnInit {\n\n\tprivate _calc: StatDetailModel;\n\t@Input()\n\tpublic set calc(calc: StatDetailModel) {\n\t\tthis._calc = calc;\n\t\tthis.generateTemplate();\n\t}\n\tpublic get calc() { return this._calc; }\n\n\tdetailTemplate: string;\n\n\tconstructor(\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t}\n\n\tclearCalc() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tgenerateTemplate() {\n\t\tthis.detailTemplate = null;\n\n\t\tif (this.calc.calculationTemplate) {\n\t\t\tlet template = this.calc.calculationTemplate;\n\t\t\tfor (const item of this.calc.calculationVariables) {\n\t\t\t\ttemplate = template.split(`{${item.name}}`).join(`<span class=\"${item.colorClass}\">${item.value}</span>`);\n\t\t\t}\n\n\t\t\tthis.detailTemplate = template;\n\t\t}\n\t}\n}\n","<div class=\"container\" (click)=\"clearCalc()\">\n\t<h3>{{calc.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<div class=\"template\" [innerHTML]=\"detailTemplate\"></div>\n\t<ul class=\"info\" *ngIf=\"calc.info\">\n\t\t<li *ngFor=\"let info of calc.info\">{{info}}</li>\n\t</ul>\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let item of calc.calculationVariables\">\n\t\t\t<span class=\"name\">{{item.displayName}}</span>\n\t\t\t<span class=\"value\" [ngClass]=\"item.colorClass\">{{item.value}}</span>\n\t\t</li>\n\t</ul>\n</div>\n","import { Component, ElementRef, HostListener, Input, OnInit, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\n\n@Component({\n\tselector: 'mhw-builder-charm-list',\n\ttemplateUrl: './charm-list.component.html',\n\tstyleUrls: ['./charm-list.component.scss']\n})\nexport class CharmListComponent implements OnInit {\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\n\tprivate _itemType: ItemType;\n\n\t@Input()\n\tset itemType(itemType: ItemType) {\n\t\tthis._itemType = itemType;\n\t\tthis.loadItems();\n\t}\n\tget itemType(): ItemType { return this._itemType; }\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titems: ItemModel[];\n\tfilteredItems: ItemModel[];\n\tvirtualItems: ItemModel[];\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService\n\t) { }\n\n\tngOnInit(): void { }\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tloadItems() {\n\t\tthis.items = this.dataService.getCharms();\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredItems = this.items;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.items) {\n\t\t\t\tfor (const item of this.items) {\n\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\t\t\t\t\tconst skills = this.dataService.getSkills(item.skills);\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\t\t\t\t\tconst skillMatch = _.some(skills, skill => skill.name.toLowerCase().includes(query));\n\n\t\t\t\t\tconst tagMatch = _.some(queryParts, queryPart => {\n\t\t\t\t\t\treturn _.some(item.tags, tag => tag.toLowerCase().includes(queryPart));\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!nameMatch && !skillMatch && !tagMatch) {\n\t\t\t\t\t\tthis.filteredItems = _.reject(this.filteredItems, i => i.name === item.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredItems = this.items;\n\t}\n\n\tonItemListUpdate(items: ItemModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tconst newItem = Object.assign({}, item);\n\t\tthis.slotService.selectItem(newItem);\n\t}\n\n\tgetSkillCount(item: ItemModel, skill: SkillModel): string {\n\t\tconst itemSkill = _.find(item.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"items\" [items]=\"filteredItems\" (vsUpdate)=\"onItemListUpdate($event)\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"item.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{item.rarity}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"levels\">\n\t\t\t\t\t{{item.levels}} {{item.levels > 1 ? 'levels' : 'level'}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\" *ngIf=\"item.skills.length == 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"skills-container-2\" *ngIf=\"item.skills.length > 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { CommonModel } from '../../models/common.model';\n\n@Component({\n\tselector: 'mhw-builder-common-details',\n\ttemplateUrl: './common-details.component.html',\n\tstyleUrls: ['./common-details.component.scss']\n})\nexport class CommonDetailsComponent implements OnInit {\n\t@Input() common: CommonModel;\n\n\tconstructor(\n\t) { }\n\n\tngOnInit(): void { }\n}\n","<div class=\"container\">\n\t<h3>{{common?.name}}</h3>\n\t<hr>\n\t<div>{{common?.description}}</div>\n\t<br />\n\t<ul>\n\t\t<li *ngFor=\"let level of common?.levels; let i = index\">\n\t\t\t<div class=\"level\">Lv {{i + 1}}</div>\n\t\t\t<div class=\"level-description\">{{level.description}}</div>\n\t\t</li>\n\t</ul>\n</div>\n","import { NgModule } from '@angular/core';\nimport { DropdownComponent } from './dropdown/dropdown.component';\nimport { ModalComponent } from './modal/modal.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tDropdownComponent,\n\t\tModalComponent\n\t],\n\texports: [\n\t\tDropdownComponent,\n\t\tModalComponent\n\t]\n})\nexport class CommonModule { }\n","import { Component, ContentChildren, ElementRef, OnInit, QueryList, ViewChild } from '@angular/core';\n\n@Component({\n\tselector: 'mhw-builder-dropdown',\n\ttemplateUrl: './dropdown.component.html',\n\tstyleUrls: ['./dropdown.component.scss']\n})\nexport class DropdownComponent implements OnInit {\n\tisOpen = false;\n\n\t@ViewChild('container', { static: true }) container: ElementRef;\n\t@ContentChildren(ElementRef, { descendants: true }) items: QueryList<ElementRef>;\n\n\tconstructor() { }\n\n\tngOnInit() {\n\t}\n\n\tpublic toggle(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.isOpen = !this.isOpen;\n\t}\n\n\tpublic open() {\n\t\tthis.isOpen = true;\n\t}\n\n\tpublic close() {\n\t\tthis.isOpen = false;\n\t}\n}\n","<div #container class=\"container\" [hidden]=\"!isOpen\">\n\t<ng-content></ng-content>\n</div>\n","import { Component, HostBinding, HostListener, Input, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'mhw-builder-modal',\n\ttemplateUrl: './modal.component.html',\n\tstyleUrls: ['./modal.component.scss']\n})\nexport class ModalComponent implements OnInit {\n\n\t@Input() title: string;\n\n\t@HostBinding('class.open') isOpen: boolean;\n\n\t@HostListener('document:keyup', ['$event'])\n\tonKeyUp(event: KeyboardEvent) {\n\t\tif (event.key === 'Escape') {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tconstructor() { }\n\n\tngOnInit(): void {\n\n\t}\n\n\topen() {\n\t\tthis.isOpen = true;\n\t}\n\n\tclose() {\n\t\tthis.isOpen = false;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"header-container\">\n\t\t<div class=\"title-container\">\n\t\t\t<span>{{title}}</span>\n\t\t</div>\n\n\t\t<button class=\"close-button\" (click)=\"close()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"content-container\">\n\t\t<ng-content></ng-content>\n\t</div>\n\n\t<div class=\"background\" (click)=\"close()\"></div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport * as _ from 'lodash';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-decoration-details',\n\ttemplateUrl: './decoration-details.component.html',\n\tstyleUrls: ['./decoration-details.component.scss']\n})\nexport class DecorationDetailsComponent implements OnInit {\n\tprivate _decoration: DecorationModel;\n\n\t@Input()\n\tset decoration(decoration: DecorationModel) {\n\t\tthis._decoration = decoration;\n\t\tif (decoration) {\n\t\t\tthis.loadSkills();\n\t\t} else {\n\t\t\tthis.skills = new Array<SkillModel>();\n\t\t}\n\t}\n\tget decoration(): DecorationModel {\n\t\treturn this._decoration;\n\t}\n\n\tskills: SkillModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tloadSkills() {\n\t\tthis.skills = this.dataService.getSkills(this.decoration.skills);\n\t}\n\n\tgetSkillCount(skill: SkillModel): string {\n\t\tconst itemSkill = _.find(this.decoration.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setDecoration(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clearTooltipItem()\">\n\t<h3>{{decoration?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul class=\"striped-light\">\n\t\t<li>\n\t\t\t<span class=\"name\">Rarity</span>\n\t\t\t<span class=\"value\">{{decoration?.rarity}}</span>\n\t\t</li>\n\t</ul>\n\t<div *ngIf=\"skills?.length\" class=\"skills-container\">\n\t\t<ul>\n\t\t\t<ng-container *ngFor=\"let skill of skills\">\n\t\t\t\t<li *ngIf=\"skill.levels\">\n\t\t\t\t\t<div class=\"skill-header\">\n\t\t\t\t\t\t<h4 class=\"skill-name\">{{skill.name}}</h4>\n\t\t\t\t\t\t<h4 class=\"skill-level\">{{getSkillCount(skill)}}</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<span>{{skill.description}}</span>\n\t\t\t\t</li>\n\t\t\t</ng-container>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-decoration-list',\n\ttemplateUrl: './decoration-list.component.html',\n\tstyleUrls: ['./decoration-list.component.scss']\n})\nexport class DecorationListComponent implements OnInit {\n\tprivate _decorationLevel: number;\n\n\t@Input()\n\tset decorationLevel(decorationLevel: number) {\n\t\tthis._decorationLevel = decorationLevel;\n\t\tthis.loadItems();\n\t}\n\tget decorationLevel(): number { return this._decorationLevel; }\n\n\t@Output() decorationSelected = new EventEmitter<DecorationModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('decorationList') decorationList: VirtualScrollerComponent;\n\n\tdecorations: DecorationModel[];\n\tfilteredDecorations: DecorationModel[];\n\tvirtualDecorations: DecorationModel[];\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tpublic dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void { }\n\n\trefreshList() {\n\t\tif (this.decorationList) {\n\t\t\tthis.decorationList.refresh();\n\t\t}\n\t}\n\n\tonDecorationListUpdate(decorations: DecorationModel[]) {\n\t\tthis.virtualDecorations = decorations;\n\t}\n\n\tloadItems() {\n\t\tthis.decorations = this.dataService.getDecorations(this.decorationLevel);\n\t\tthis.decorations = this.decorations.sort((a, b) => {\n\t\t\tif (a.priority < b.priority) {\n\t\t\t\treturn 1;\n\t\t\t} else if (a.priority > b.priority) {\n\t\t\t\treturn -1;\n\t\t\t} else if (a.level < b.level) {\n\t\t\t\treturn 1;\n\t\t\t} else if (a.level > b.level) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\tif (a.skills.length < b.skills.length) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (a.skills.length > b.skills.length) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.filteredDecorations = this.decorations;\n\t\tthis.search(this.searchBox.nativeElement.value);\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredDecorations = this.decorations;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.decorations) {\n\t\t\t\tfor (const decoration of this.decorations) {\n\t\t\t\t\tconst itemName = decoration.name.toLowerCase();\n\t\t\t\t\tconst skills = this.dataService.getSkills(decoration.skills);\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\n\t\t\t\t\tlet skillMatch = true;\n\t\t\t\t\tfor (const queryPart of queryParts) {\n\t\t\t\t\t\tskillMatch = _.some(skills, skill => skill.name.toLowerCase().includes(queryPart));\n\t\t\t\t\t\tif (!skillMatch) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!nameMatch && !skillMatch) {\n\t\t\t\t\t\tthis.filteredDecorations = _.reject(this.filteredDecorations, d => d.name === decoration.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredDecorations = this.decorations;\n\t}\n\n\tselectDecoration(decoration: DecorationModel) {\n\t\tconst newDecoration = Object.assign({}, decoration);\n\t\tthis.slotService.selectDecoration(newDecoration);\n\t}\n\n\tgetSkills(decoration: DecorationModel): SkillModel[] {\n\t\tconst result: SkillModel[] = [];\n\t\tfor (const skill of decoration.skills) {\n\t\t\tresult.push(this.dataService.getSkill(skill.id));\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetSkillCount(decoration: DecorationModel, skill: SkillModel): string {\n\t\tconst itemSkill = _.find(decoration.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"decorations-list\" #decorationList class=\"scroll-container\" *ngIf=\"decorations\" [items]=\"filteredDecorations\" (vsUpdate)=\"onDecorationListUpdate($event)\">\n\t\t<div *ngFor=\"let decoration of virtualDecorations\" class=\"scroll-item-container\" (click)=\"selectDecoration(decoration)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t{{decoration.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"decoration.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{decoration.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\" *ngIf=\"decoration.skills.length == 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of getSkills(decoration)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(decoration, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"skills-container-2\" *ngIf=\"decoration.skills.length > 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of getSkills(decoration)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(decoration, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-decoration-slot',\n\ttemplateUrl: './decoration-slot.component.html',\n\tstyleUrls: ['./decoration-slot.component.scss'],\n})\nexport class DecorationSlotComponent implements OnInit {\n\tslotName = ItemType.Decoration;\n\n\t@Input() level: number;\n\t@Input() itemId: number;\n\t@Input() itemType: ItemType;\n\n\tdecoration: DecorationModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.clearTooltipItem();\n\t\tthis.slotService.clearDecorationSlot(this);\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectDecorationSlot(this);\n\t}\n\n\tsetTooltipItem(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setDecoration(this.decoration);\n\t\t}\n\t}\n\n\tshowOnClickTooltipItem() {\n\t\tthis.tooltipService.setDecoration(this.decoration);\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setDecoration(null);\n\t}\n}\n","<div class=\"container\" [class.selected]=\"selected\">\n\t<div class=\"slot-icon\">\n\t\t<img [src]=\"'assets/images/decorations/' + level + '-' + (decoration?.level ? decoration?.level : 0) + '.png'\" alt=\"slot\">\n\t</div>\n\t<div class=\"selected-decoration\"\n\t\t (click)=\"clicked()\"\n\t\t (pointerenter)=\"setTooltipItem($event)\"\n\t\t (pointerleave)=\"clearTooltipItem()\">\n\t\t{{decoration?.name}}\n\t</div>\n\n\t<button type=\"button\" class=\"info-button\" (click)=\"showOnClickTooltipItem()\" aria-label=\"info\">\n\t\t<i class=\"fas fa-grip-lines-vertical fa-sm icon-xs\" [ngClass]=\"'rarity-'+decoration?.rarity\" style=\"display:none;\"></i>\n\t\t<i class=\"fas fa-grip-lines-vertical icon-md fa-sm\" [ngClass]=\"'rarity-'+decoration?.rarity\"></i>\n\t</button>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { EquipmentService } from 'src/app/services/equipment.service';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-equipped-buffs',\n\ttemplateUrl: './equipped-buffs.component.html',\n\tstyleUrls: ['./equipped-buffs.component.scss']\n})\n\nexport class EquippedBuffsComponent implements OnInit {\n\n\tbuffsVisible = true;\n\telementBuffActive = 0;\n\n\tconstructor(\n\t\tprivate equipementService: EquipmentService,\n\t\tprivate tooltipService: TooltipService,\n\t) { }\n\n\tngOnInit() {\n\t}\n\tbuffElementLarge() {\n\t\tif (this.elementBuffActive != 3) {\n\t\t\tthis.elementBuffActive = 3;\n\t\t} else {\n\t\t\tthis.elementBuffActive = 0;\n\t\t}\n\n\t\tthis.equipementService.updateElementBuff(this.elementBuffActive);\n\t}\n}\n","<div class=\"container\">\n    <br />\n    <h4>\n        Buffs (ALPHA)\n        <span [hidden]=\"!buffsVisible\" (click)=\"buffsVisible = !buffsVisible\"><i\n                class=\"fas fa-minus-circle number\"></i></span>\n        <span [hidden]=\"buffsVisible\" (click)=\"buffsVisible = !buffsVisible\"><i\n                class=\"fas fa-plus-circle number\"></i></span>\n    </h4>\n    <div [hidden]=\"!buffsVisible\">\n        <span class=\"detail-icon cursor-p\" (click)=\"buffElementLarge()\">\n            <img [src]=\"'assets/images/drinks/drink-element-icon.png'\" alt=\"element buff\"> Large Element\n            {{elementBuffActive == 3 ? 'ON': 'OFF'}}\n        </span>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { EquippedSetBonusDetailModel, EquippedSetBonusModel } from '../../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../../models/equipped-skill.model';\nimport { EquipmentService } from '../../services/equipment.service';\nimport { SkillService } from '../../services/skill.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ModeType } from '../../types/mode.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-equipped-skills',\n\ttemplateUrl: './equipped-skills.component.html',\n\tstyleUrls: ['./equipped-skills.component.scss']\n})\nexport class EquippedSkillsComponent implements OnInit {\n\tskills: EquippedSkillModel[];\n\tskillsBackup: EquippedSkillModel[];\n\tsetBonuses: EquippedSetBonusModel[];\n\n\tskillsVisible = true;\n\n\tconstructor(\n\t\tprivate skillService: SkillService,\n\t\tprivate equipmentService: EquipmentService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.skillService.skillsUpdated$.subscribe(skills => {\n\t\t\tthis.skills = skills;\n\t\t\tthis.skillsBackup = JSON.parse(JSON.stringify(this.skills));\n\t\t\tthis.skills.sort(function (skill1, skill2) {\n\t\t\t\tif (skill1.isSetBonus && !skill2.isSetBonus) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} if (!skill1.isSetBonus && skill2.isSetBonus) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (skill1.equippedCount > skill2.equippedCount) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (skill1.equippedCount < skill2.equippedCount) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else if (skill1.totalLevelCount > skill2.totalLevelCount) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (skill1.totalLevelCount < skill2.totalLevelCount) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else {\n\t\t\t\t\treturn skill1.name.localeCompare(skill2.name);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.skillService.setBonusesUpdated$.subscribe(setBonuses => {\n\t\t\tthis.setBonuses = setBonuses;\n\t\t});\n\t}\n\n\tgetMinCount(tool1Count: number, tool2Count: number) {\n\t\treturn Math.min(tool1Count, tool2Count);\n\t}\n\n\tgetMaxCount(tool1Count: number, tool2Count: number) {\n\t\treturn Math.max(tool1Count, tool2Count);\n\t}\n\n\tgetSkillCountColor(skill: EquippedSkillModel): string {\n\t\tif (skill.isSetBonus) {\n\t\t\treturn '#F0E68C';\n\t\t} else if (skill.equippedArmorCount > skill.totalLevelCount) {\n\t\t\treturn '#ffa07a';\n\t\t} else if (skill.equippedArmorCount == skill.totalLevelCount) {\n\t\t\treturn '#87cefa';\n\t\t} else if (skill.equippedCount + skill.equippedToolActiveCount >= skill.totalLevelCount) {\n\t\t\treturn '#86ff86';\n\t\t}\n\n\t\treturn 'white';\n\t}\n\n\tgetSetBonusColor(equippedCount: number, requiredCount: number): string {\n\t\tif (equippedCount >= requiredCount) {\n\t\t\treturn '#87cefa';\n\t\t}\n\t\treturn 'rgba(200,200,200,0.5)';\n\t}\n\n\tshowSkillDetails(event: PointerEvent, equippedSkill: EquippedSkillModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setEquippedSkill(equippedSkill);\n\t\t}\n\t}\n\n\tclearSkillDetails() {\n\t\tthis.tooltipService.setEquippedSkill(null);\n\t}\n\n\tshowOnClickSkillDetails(equippedSkill: EquippedSkillModel) {\n\t\tthis.tooltipService.setEquippedSkill(equippedSkill);\n\t}\n\n\tshowSetBonusDetails(event: PointerEvent, equippedSetBonus: EquippedSetBonusModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setEquippedSetBonus(equippedSetBonus);\n\t\t}\n\t}\n\n\tclearSetBonusDetails() {\n\t\tthis.tooltipService.setEquippedSetBonus(null);\n\t}\n\n\tshowOnClickSetBonusDetails(equippedSetBonus: EquippedSetBonusModel) {\n\t\tthis.tooltipService.setEquippedSetBonus(equippedSetBonus);\n\t}\n\n\tskillMode(equippedSkill: EquippedSkillModel) {\n\t\tif (equippedSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\tequippedSkill.skill.mode = ModeType.Active;\n\t\t} else if (equippedSkill.skill.mode == ModeType.Active) {\n\t\t\tequippedSkill.skill.mode = ModeType.Inactive;\n\t\t} else if (equippedSkill.skill.mode == ModeType.Inactive) {\n\t\t\tif (equippedSkill.hasActiveStats) {\n\t\t\t\tequippedSkill.skill.mode = ModeType.AllSkillActive;\n\t\t\t} else {\n\t\t\t\tequippedSkill.skill.mode = ModeType.Active;\n\t\t\t}\n\t\t}\n\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t}\n\n\tSetbonusSkillMode(detail: EquippedSetBonusDetailModel, equippedCount: number) {\n\t\tif (equippedCount >= detail.requiredCount) {\n\t\t\tif (detail.skill.levels[0].activeSkills) {\n\t\t\t\tif (detail.mode == ModeType.Active) {\n\t\t\t\t\tdetail.mode = ModeType.AllSkillActive;\n\t\t\t\t\tfor (const skillExtra of detail.skill.levels[0].activeSkills) {\n\t\t\t\t\t\tlet equippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\tequippedSkill = this.skills.find(es => es.id == skillExtra.id);\n\t\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\t\tequippedSkill = this.skillService.createEquippedSkill(skillExtra.id, skillExtra.level);\n\t\t\t\t\t\t\tequippedSkill.isNatureBonus = true;\n\t\t\t\t\t\t\tthis.skills.push(equippedSkill);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (skillExtra.level > equippedSkill.equippedCount) {\n\t\t\t\t\t\t\t\tequippedSkill.equippedCount = skillExtra.level;\n\t\t\t\t\t\t\t\tequippedSkill.equippedArmorCount = skillExtra.level;\n\t\t\t\t\t\t\t\tequippedSkill.isNatureBonus = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t\t\t\t} else if (detail.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tdetail.mode = ModeType.Active;\n\t\t\t\t\tfor (const skillExtra of detail.skill.levels[0].activeSkills) {\n\t\t\t\t\t\tlet equippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\tequippedSkill = this.skillsBackup.find(es => es.id == skillExtra.id);\n\t\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\t\tconst skillIndex = this.skills.findIndex(es => es.id == skillExtra.id);\n\t\t\t\t\t\t\tif (skillIndex > -1) {\n\t\t\t\t\t\t\t\tthis.skills.splice(skillIndex, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst skillIndex = this.skills.findIndex(es => es.id == skillExtra.id);\n\t\t\t\t\t\t\tif (skillIndex > -1) {\n\t\t\t\t\t\t\t\tthis.skills[skillIndex] = equippedSkill;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t\t\t\t}\n\t\t\t} else if (detail.skill.hasActiveStats) {\n\t\t\t\tif (detail.mode == ModeType.Active) {\n\t\t\t\t\tdetail.mode = ModeType.AllSkillActive;\n\t\t\t\t} else if (detail.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tdetail.mode = ModeType.Active;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst skill = this.skills.find(x => x.id == detail.skill.id);\n\t\t\tskill.skill.mode = detail.mode;\n\t\t\tthis.equipmentService.updateSkillMode(this.skills);\n\t\t}\n\t}\n\n\tgetModeColor(mode: ModeType) {\n\t\tif (mode == 1) {\n\t\t\treturn '';\n\t\t} else if (mode == 2) {\n\t\t\treturn 'rgba(200,200,200,0.5)';\n\t\t} else if (mode == 3) {\n\t\t\treturn '#0091c2';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetIconModeClass(mode: ModeType) {\n\t\tif (mode == 1) {\n\t\t\treturn 'fas fa-circle';\n\t\t} else if (mode == 2) {\n\t\t\treturn 'far fa-circle';\n\t\t} else if (mode == 3) {\n\t\t\treturn 'fas fa-circle';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\n\t}\n}\n","<div class=\"container\">\n\t<br />\n\t<h4>\n\t\tSkills\n\t\t<span [hidden]=\"!skillsVisible\" (click)=\"skillsVisible = !skillsVisible\"><i class=\"fas fa-minus-circle number\"></i></span>\n\t\t<span [hidden]=\"skillsVisible\" (click)=\"skillsVisible = !skillsVisible\"><i class=\"fas fa-plus-circle number\"></i></span>\n\t</h4>\n\n\t<div [hidden]=\"!skillsVisible\">\n\t\t<hr>\n\t\t<ul class=\"striped\">\n\t\t\t<ng-container *ngFor=\"let skill of skills; let i = index\">\n\t\t\t\t<li *ngIf=\"!skill.isSetBonus\" [style.color]=\"getSkillCountColor(skill)\" (pointerenter)=\"showSkillDetails($event, skill)\" (pointerleave)=\"clearSkillDetails()\">\n\t\t\t\t\t<span class=\"detail-icon\" (click)=\"showOnClickSkillDetails(skill)\">\n\t\t\t\t\t\t<i class=\"far fa-question-circle\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"name\" [style.color]=\"getSkillCountColor(skill)\" (click)=\"showOnClickSkillDetails(skill)\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"value\">\n\t\t\t\t\t\t<span (click)=\"skillMode(skill)\" class=\"cursor-p\" style=\"font-size:14px !important;\">\n\t\t\t\t\t\t\t<i [ngClass]=\"getIconModeClass(skill.skill.mode)\" [style.color]=\"getModeColor(skill.skill.mode)\"></i>\n\t\t\t\t\t\t\t[{{skill.equippedCount}}]\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"skill-box\" style=\"display:inline-block;position:relative;\">\n\t\t\t\t\t\t\t<span *ngFor=\"let key of getMinCount(skill.equippedArmorCount, skill.totalLevelCount - skill.secretLevelCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span *ngIf=\"!skill.isNatureBonus\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-active\" *ngIf=\"skill.skill.mode == 1\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-mode2\" *ngIf=\"skill.skill.mode == 2\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-mode3\" *ngIf=\"skill.skill.mode == 3\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-nature\" *ngIf=\"skill.isNatureBonus\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of (getMinCount(skill.equippedArmorCount, skill.totalLevelCount) - (skill.totalLevelCount - skill.secretLevelCount)) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-secret\" *ngIf=\"!skill.isNatureBonus\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of getMinCount(skill.equippedToolActiveCount, skill.totalLevelCount - skill.equippedArmorCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-tool\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of (skill.totalLevelCount - skill.equippedArmorCount - skill.equippedToolActiveCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-empty\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span *ngFor=\"let key of (7 - skill.totalLevelCount) | numbersArr\">\n\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-transparent\">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t</ng-container>\n\t\t</ul>\n\n\t\t<div *ngIf=\"setBonuses?.length\">\n\t\t\t<br />\n\t\t\t<h4>Set Bonuses</h4>\n\t\t\t<hr>\n\t\t\t<ul class=\"\">\n\t\t\t\t<ng-container *ngFor=\"let setBonus of setBonuses\">\n\t\t\t\t\t<li class=\"setBonus-header\" (pointerenter)=\"showSetBonusDetails($event, setBonus)\" (pointerleave)=\"clearSetBonusDetails()\" (click)=\"showOnClickSetBonusDetails(setBonus)\">\n\t\t\t\t\t\t<span class=\"detail-icon\">\n\t\t\t\t\t\t\t<i class=\"far fa-question-circle\"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"name\">\n\t\t\t\t\t\t\t{{setBonus.name}}\n\t\t\t\t\t\t\t<span [style.color]=\"getSetBonusColor(setBonus.equippedCount, setBonus.details[setBonus.details.length-1].requiredCount)\">\n\t\t\t\t\t\t\t\t[{{setBonus.equippedCount}}]\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li *ngFor=\"let level of setBonus.details; let i=index\" [style.color]=\"getSetBonusColor(setBonus.equippedCount, level.requiredCount)\" (pointerenter)=\"showSkillDetails($event, level)\" (pointerleave)=\"clearSkillDetails()\">\n\t\t\t\t\t\t<span class=\"detail-icon\">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"name\" (click)=\"showOnClickSkillDetails(level)\">\n\t\t\t\t\t\t\t<i class=\"far fa-question-circle\"></i>&nbsp;{{level.skill.name}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t\t<span (click)=\"SetbonusSkillMode(level, setBonus.equippedCount)\" class=\"cursor-p\" style=\"font-size:14px !important;\">\n\t\t\t\t\t\t\t\t<i [ngClass]=\"getIconModeClass(level.mode)\" [style.color]=\"getModeColor(level.mode)\"></i>\n\t\t\t\t\t\t\t\t[{{level.requiredCount}}]\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"skill-box\" style=\"display:inline-block;position:relative;\" (click)=\"showOnClickSkillDetails(level)\">\n\t\t\t\t\t\t\t\t<span *ngFor=\"let key of getMinCount(setBonus.equippedCount, level.requiredCount) | numbersArr\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-setbonus\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span *ngFor=\"let key of (level.requiredCount - getMinCount(setBonus.equippedCount, level.requiredCount)) | numbersArr\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-empty\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span *ngFor=\"let key of (5 - level.requiredCount) | numbersArr\">\n\t\t\t\t\t\t\t\t\t<span class=\"skill-square skill-bg-transparent\">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ng-container>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { KinsectModel } from 'src/app/models/kinsect.model';\nimport { AmmoCapacitiesModel } from '../../models/ammo-capacities.model';\nimport { CalculationVariableModel } from '../../models/calculation-variable.model';\nimport { ExtraDataModel } from '../../models/extra-data.model';\nimport { SharpnessBarModel } from '../../models/sharpness-bar.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { CalculationService } from '../../services/calculation.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { PointerType } from '../../types/pointer.type';\nimport { SharpnessBarComponent } from '../sharpness-bar/sharpness-bar.component';\n\n@Component({\n\tselector: 'mhw-builder-equipped-stats',\n\ttemplateUrl: './equipped-stats.component.html',\n\tstyleUrls: ['./equipped-stats.component.scss']\n})\n\nexport class EquippedStatsComponent implements OnInit {\n\n\tattackCalcs = new Array<StatDetailModel>();\n\tdefenseCalcs = new Array<StatDetailModel>();\n\tammoCapacities: AmmoCapacitiesModel;\n\tkinsect: KinsectModel;\n\tsharpnessBar: SharpnessBarModel;\n\textraData: ExtraDataModel;\n\n\tattackVisible: boolean;\n\tammoVisible: boolean;\n\tkinsectVisible: boolean;\n\tdefenseVisible: boolean;\n\n\t@ViewChild(SharpnessBarComponent) sharpnessBarComponent: SharpnessBarComponent;\n\n\tconstructor(\n\t\tprivate calculationService: CalculationService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.calculationService.attackCalcsUpdated$.subscribe(calcs => {\n\t\t\tthis.attackCalcs = calcs;\n\t\t});\n\n\t\tthis.calculationService.ammoUpdated$.subscribe(ammo => {\n\t\t\tthis.ammoCapacities = ammo;\n\t\t});\n\n\t\tthis.calculationService.kinsectUpdated$.subscribe(kinsect => {\n\t\t\tthis.kinsect = kinsect;\n\t\t});\n\n\t\tthis.calculationService.sharpnessUpdated$.subscribe(sharp => {\n\t\t\tthis.sharpnessBar = sharp;\n\t\t\tif (this.sharpnessBarComponent) {\n\t\t\t\tthis.sharpnessBarComponent.handicraftLevel = sharp.handicraftLevel;\n\t\t\t}\n\t\t});\n\n\t\tthis.calculationService.extraDataUpdated$.subscribe(extraData => {\n\t\t\tthis.extraData = extraData;\n\t\t});\n\n\t\tthis.calculationService.defenseCalcsUpdated$.subscribe(calcs => {\n\t\t\tthis.defenseCalcs = calcs;\n\t\t});\n\n\t\tthis.attackVisible = true;\n\t\tthis.ammoVisible = true;\n\t\tthis.kinsectVisible = true;\n\t\tthis.defenseVisible = true;\n\t}\n\n\tshowCalcDetails(event: PointerEvent, calc: StatDetailModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tif (calc.calculationTemplate || (calc.info && calc.info.length)) {\n\t\t\t\tthis.tooltipService.setCalc(calc);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearCalcDetails() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tshowOnClickCalcDetails(calc: StatDetailModel) {\n\t\tif (calc.calculationTemplate || (calc.info && calc.info.length)) {\n\t\t\tthis.tooltipService.setCalc(calc);\n\t\t} else {\n\t\t\tthis.clearCalcDetails();\n\t\t}\n\t}\n\n\tshowSharpDetails(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.setSharpTooltip(this.sharpnessBarComponent.sharpnessBar);\n\t\t}\n\t}\n\n\tshowOnClickSharpDetails() {\n\t\tthis.setSharpTooltip(this.sharpnessBarComponent.sharpnessBar);\n\t}\n\n\tclearSharpDetails() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tshowExtraDetails(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.setExtraDatailsTooltip();\n\t\t}\n\t}\n\tshowOnClickExtraDetails(event: PointerEvent) {\n\t\tthis.setExtraDatailsTooltip();\n\t}\n\n\tclearExtraDetails() {\n\t\tthis.tooltipService.setCalc(null);\n\t}\n\n\tprivate setExtraDatailsTooltip() {\n\t\tconst calculationVariables: CalculationVariableModel[] = [];\n\t\tfor (const other of this.extraData.otherData) {\n\t\t\tconst variable: CalculationVariableModel = {\n\t\t\t\tdisplayName: other.value,\n\t\t\t\tname: other.value,\n\t\t\t\tcolorClass: 'white',\n\t\t\t\tvalue: other.data\n\t\t\t};\n\t\t\tcalculationVariables.push(variable);\n\t\t}\n\t\tconst otherDetail: StatDetailModel = {\n\t\t\tname: 'Weapon Info',\n\t\t\tvalue: '',\n\t\t\tcalculationTemplate: '',\n\t\t\tcalculationVariables: calculationVariables,\n\t\t\tinfo: []\n\t\t};\n\n\t\tthis.tooltipService.setCalc(otherDetail);\n\t}\n\n\tprivate setSharpTooltip(sharp: SharpnessBarModel) {\n\t\tif (sharp.levels) {\n\t\t\tconst sharpDetail: StatDetailModel = {\n\t\t\t\tname: 'Sharpness',\n\t\t\t\tvalue: sharp.tooltipTemplate,\n\t\t\t\tcalculationTemplate: sharp.tooltipTemplate,\n\t\t\t\tcalculationVariables: [],\n\t\t\t\tinfo: []\n\t\t\t};\n\t\t\tif (sharp.sharpnessDataNeeded) {\n\t\t\t\tsharpDetail.info.push('Missing data for this weapon! Sharpness values are probably incorrect!');\n\t\t\t}\n\n\t\t\tthis.tooltipService.setCalc(sharpDetail);\n\t\t} else {\n\t\t\tthis.clearSharpDetails();\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<h4>\n\t\tAttack\n\t\t<span [hidden]=\"!attackVisible\" (click)=\"attackVisible = !attackVisible\"><i\n\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t<span [hidden]=\"attackVisible\" (click)=\"attackVisible = !attackVisible\"><i\n\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t</h4>\n\t<div [hidden]=\"!attackVisible\">\n\t\t<hr>\n\t\t<ul class=\"attack-stats striped\">\n\t\t\t<li *ngFor=\"let calc of attackCalcs\" (pointerenter)=\"showCalcDetails($event, calc)\"\n\t\t\t\t(pointerleave)=\"clearCalcDetails()\" (click)=\"showOnClickCalcDetails(calc)\">\n\t\t\t\t<span *ngIf=\"(calc.calculationTemplate || calc.info?.length) && !calc.icon\" class=\"detail-icon\"\n\t\t\t\t\t[ngClass]=\"calc.color\">\n\t\t\t\t\t<i class=\"far fa-question-circle\"></i>\n\t\t\t\t</span>\n\t\t\t\t<span *ngIf=\"calc.icon\" class=\"detail-icon\">\n\t\t\t\t\t<img [src]=\"'assets/images/' + calc.icon + '-icon.png'\" alt=\"stat icon\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">{{calc.name}}</span>\n\t\t\t\t<span class=\"value\">\n\t\t\t\t\t<span [ngClass]=\"calc.valueColor\">{{calc.value}}</span>\n\t\t\t\t\t<span *ngIf=\"calc.extra1 || calc.extra2\"> (</span>\n\t\t\t\t\t<span [ngClass]=\"calc.class1\">{{calc.extra1}}</span>\n\t\t\t\t\t<span *ngIf=\"calc.extra1 && calc.extra2\">/</span>\n\t\t\t\t\t<span [ngClass]=\"calc.class2\">{{calc.extra2}}</span>\n\t\t\t\t\t<span *ngIf=\"calc.extra1 || calc.extra2\">)</span>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li *ngIf=\"sharpnessBar && sharpnessBar.levels && sharpnessBar.levels.length\"\n\t\t\t\t(pointerenter)=\"showSharpDetails($event)\" (pointerleave)=\"clearSharpDetails()\"\n\t\t\t\t(click)=\"showOnClickSharpDetails()\">\n\t\t\t\t<span class=\"detail-icon\" [ngClass]=\"sharpnessBar.color\">\n\t\t\t\t\t<img [src]=\"'assets/images/sharpness3-icon.png'\" alt=\"sharpness\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">\n\t\t\t\t\tSharpness\n\t\t\t\t</span>\n\t\t\t\t<mhw-builder-sharpness-bar class=\"value\" [sharpnessLevels]=\"sharpnessBar.levels\"\n\t\t\t\t\t[handicraftLevel]=\"sharpnessBar.handicraftLevel\" [dataNeeded]=\"sharpnessBar.sharpnessDataNeeded\">\n\t\t\t\t</mhw-builder-sharpness-bar>\n\t\t\t</li>\n\n\t\t\t<li *ngIf=\"extraData && extraData.otherData[0].value\" (pointerenter)=\"showExtraDetails($event)\"\n\t\t\t\t(click)=\"showOnClickExtraDetails(calc)\" (pointerleave)=\"clearExtraDetails()\">\n\t\t\t\t<span class=\"detail-icon text-center\">\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='Bow'\" [src]=\"'assets/images/phials/phial-close.png'\"\n\t\t\t\t\t\talt=\"icon\" />\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='ChargeBlade' || extraData.weaponType=='SwitchAxe'\"\n\t\t\t\t\t\t[src]=\"'assets/images/phial-icon.png'\" alt=\"icon\" />\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='Gunlance'\" [src]=\"'assets/images/special-ammo-icon.png'\"\n\t\t\t\t\t\talt=\"icon\" />\n\t\t\t\t\t<img *ngIf=\"extraData.weaponType=='InsectGlaive'\" [src]=\"'assets/images/dust-effect-icon.png'\"\n\t\t\t\t\t\talt=\"icon\" />\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='Bow'\">Coatings</span>\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='ChargeBlade' || extraData.weaponType=='SwitchAxe'\">Phial\n\t\t\t\t\t\tType</span>\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='Gunlance'\">Shell Type</span>\n\t\t\t\t\t<span *ngIf=\"extraData.weaponType=='InsectGlaive'\">Boost Type</span>\n\t\t\t\t</span>\n\t\t\t\t<div class=\"value\">\n\t\t\t\t\t<div *ngFor=\"let other of extraData.otherData; let i = index\"\n\t\t\t\t\t\tstyle=\"display:inline;white-space:nowrap;\">\n\t\t\t\t\t\t<div *ngIf=\"extraData.weaponType=='Bow'\" class=\"other-container\">\n\t\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + other.value + '.png'\" alt=\"coat\" />\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"extraData.weaponType=='ChargeBlade' || extraData.weaponType=='SwitchAxe'\"\n\t\t\t\t\t\t\tclass=\"other-container\">\n\t\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + other.value + '.png'\" alt=\"phial\" />\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{other.value}}<span *ngIf=\"other.data && other.data!=0\">-{{other.data}}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"extraData.weaponType=='Gunlance' || extraData.weaponType=='InsectGlaive'\"\n\t\t\t\t\t\t\tclass=\"other-container\">\n\t\t\t\t\t\t\t{{other.value}}<span *ngIf=\"other.data && other.data!=0\">-{{other.data}}</span>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<br />\n\n\t<div class=\"kinsect-stats\" *ngIf=\"kinsect\">\n\t\t<h4>\n\t\t\tKinsect\n\t\t\t<span [hidden]=\"!kinsectVisible\" (click)=\"kinsectVisible = !kinsectVisible\"><i\n\t\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t\t<span [hidden]=\"kinsectVisible\" (click)=\"kinsectVisible = !kinsectVisible\"><i\n\t\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t\t</h4>\n\t\t<div class=\"\" [hidden]=\"!kinsectVisible\">\n\t\t\t<hr>\n\t\t\t<mhw-builder-kinsect-details [kinsect]=\"kinsect\"></mhw-builder-kinsect-details>\n\t\t</div>\n\t\t<br />\n\t</div>\n\n\t<div *ngIf=\"ammoCapacities\">\n\t\t<h4>\n\t\t\tAmmo\n\t\t\t<span [hidden]=\"!ammoVisible\" (click)=\"ammoVisible = !ammoVisible\"><i\n\t\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t\t<span [hidden]=\"ammoVisible\" (click)=\"ammoVisible = !ammoVisible\"><i\n\t\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t\t</h4>\n\t\t<div class=\"ammo-stats\" [hidden]=\"!ammoVisible\">\n\t\t\t<hr>\n\t\t\t<mhw-builder-ammo-capacities [ammoCapacities]=\"ammoCapacities\"></mhw-builder-ammo-capacities>\n\t\t</div>\n\t\t<br />\n\t</div>\n\n\t<h4>\n\t\tDefense\n\t\t<span [hidden]=\"!defenseVisible\" (click)=\"defenseVisible = !defenseVisible\"><i\n\t\t\t\tclass=\"fas fa-minus-circle number\"></i></span>\n\t\t<span [hidden]=\"defenseVisible\" (click)=\"defenseVisible = !defenseVisible\"><i\n\t\t\t\tclass=\"fas fa-plus-circle number\"></i></span>\n\t</h4>\n\t<div [hidden]=\"!defenseVisible\">\n\t\t<hr>\n\t\t<ul class=\"defense-stats striped\">\n\t\t\t<li *ngFor=\"let calc of defenseCalcs\" (pointerenter)=\"showCalcDetails($event, calc)\"\n\t\t\t\t(pointerleave)=\"clearCalcDetails()\">\n\t\t\t\t<span *ngIf=\"calc.icon\" class=\"detail-icon\">\n\t\t\t\t\t<img [src]=\"'assets/images/' + calc.icon + '-icon.png'\" alt=\"stat icon\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"name\">{{calc.name}}</span>\n\t\t\t\t<span class=\"value\">{{calc.value}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { DataService } from '../../services/data.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { WeaponType } from '../../types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-item-details',\n\ttemplateUrl: './item-details.component.html',\n\tstyleUrls: ['./item-details.component.scss']\n})\nexport class ItemDetailsComponent implements OnInit {\n\tprivate _item: ItemModel;\n\n\t@Input()\n\tset item(item: ItemModel) {\n\t\tthis._item = item;\n\t\tif (item) {\n\t\t\tthis.setupStats();\n\t\t\tthis.loadSkills();\n\t\t} else {\n\t\t\tthis.skills = new Array<SkillModel>();\n\t\t}\n\t}\n\tget item(): ItemModel {\n\t\treturn this._item;\n\t}\n\n\tskills: SkillModel[];\n\tstats: StatDetailModel[] = [];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tsetupStats() {\n\t\tthis.stats = [];\n\n\t\tif (this.item.rarity) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Rarity',\n\t\t\t\tvalue: this.item.rarity\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.itemType == ItemType.Weapon) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Weapon Type',\n\t\t\t\tvalue: this.getWeaponTypeName(this.item.weaponType)\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Attack',\n\t\t\t\tvalue: this.item.baseAttack\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Affinity',\n\t\t\t\tvalue: this.item.baseAffinityPercent\n\t\t\t});\n\n\t\t\tif (this.item.ailment) {\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Ailment',\n\t\t\t\t\tvalue: this.item.ailment,\n\t\t\t\t\tcolor: this.item.ailmentHidden ? 'grey' : 'white'\n\t\t\t\t});\n\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Ailment Attack',\n\t\t\t\t\tvalue: this.item.ailmentBaseAttack,\n\t\t\t\t\tcolor: this.item.ailmentHidden ? 'grey' : 'white'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.item.element) {\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Element',\n\t\t\t\t\tvalue: this.item.element,\n\t\t\t\t\tcolor: this.item.elementHidden ? 'grey' : 'white'\n\t\t\t\t});\n\n\t\t\t\tthis.stats.push({\n\t\t\t\t\tname: 'Element Attack',\n\t\t\t\t\tvalue: this.item.elementBaseAttack,\n\t\t\t\t\tcolor: this.item.elementHidden ? 'grey' : 'white'\n\t\t\t\t});\n\n\t\t\t\tif (this.item.elderseal) {\n\t\t\t\t\tthis.stats.push({\n\t\t\t\t\t\tname: 'Elderseal',\n\t\t\t\t\t\tvalue: this.item.elderseal\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.item.otherData && this.item.otherData[0].value) {\n\t\t\t\tconst auxDetail: StatDetailModel = {\n\t\t\t\t\tname: '',\n\t\t\t\t\tvalue: ''\n\t\t\t\t};\n\t\t\t\tswitch (this.item.weaponType) {\n\t\t\t\t\tcase WeaponType.Bow:\n\t\t\t\t\t\tauxDetail.name = 'Coatings';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.ChargeBlade:\n\t\t\t\t\tcase WeaponType.SwitchAxe:\n\t\t\t\t\t\tauxDetail.name = 'Phial Type';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.Gunlance:\n\t\t\t\t\t\tauxDetail.name = 'Shell Type';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\t\tauxDetail.name = 'Boost Type';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tauxDetail.name = 'Other Data';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfor (const other of this.item.otherData) {\n\t\t\t\t\tauxDetail.value += `${other.value}${other.data ? '-' + other.data : ''}\t`;\n\t\t\t\t\tif (this.item.otherData.length > 1) {\n\t\t\t\t\t\tauxDetail.value += ' | ';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.stats.push(auxDetail);\n\t\t\t}\n\t\t}\n\n\t\tif (this.item.itemType == ItemType.Charm) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Levels',\n\t\t\t\tvalue: this.item.levels\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.itemType == ItemType.Tool1 || this.item.itemType == ItemType.Tool2) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Duration',\n\t\t\t\tvalue: this.item.duration\n\t\t\t});\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Recharge',\n\t\t\t\tvalue: this.item.recharge\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.defense) {\n\t\t\tlet value = '';\n\t\t\tfor (let i = 0; i < this.item.defense.length; i++) {\n\t\t\t\tvalue += this.item.defense[i];\n\t\t\t\tif (i < this.item.defense.length - 2) {\n\t\t\t\t\tvalue += ' ➝ ';\n\t\t\t\t} else if (i < this.item.defense.length - 1) {\n\t\t\t\t\tvalue += ' ➟ ';\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Defense',\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.equipmentCategory == EquipmentCategoryType.Armor) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Fire Resist',\n\t\t\t\tvalue: this.item.fireResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Water Resist',\n\t\t\t\tvalue: this.item.waterResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Thunder Resist',\n\t\t\t\tvalue: this.item.thunderResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Ice Resist',\n\t\t\t\tvalue: this.item.iceResist || 0\n\t\t\t});\n\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Dragon Resist',\n\t\t\t\tvalue: this.item.dragonResist || 0\n\t\t\t});\n\t\t}\n\n\t\tif (this.item.monsters) {\n\t\t\tthis.stats.push({\n\t\t\t\tname: 'Monsters',\n\t\t\t\tvalue: this.item.monsters.join(' | ').replace(/-/g, ' ')\n\t\t\t});\n\t\t}\n\t}\n\n\n\tloadSkills() {\n\t\tthis.skills = this.dataService.getSkills(this.item.skills);\n\t}\n\n\tgetSkillCount(skill: SkillModel): string {\n\t\tconst itemSkill = _.find(this.item.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\tgetWeaponTypeName(weaponType: WeaponType): string {\n\t\treturn this.dataService.getWeaponTypeName(weaponType);\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setItem(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clearTooltipItem()\">\n\t<h3>{{item?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let stat of stats\">\n\t\t\t<span class=\"name\" [ngStyle]=\"{ color: stat.color }\">{{stat.name}}</span>\n\t\t\t<span class=\"value\" [ngStyle]=\"{ color: stat.color }\">{{stat.value}}</span>\n\t\t</li>\n\t\t<li *ngIf=\"item.sharpnessLevelsBar && item.sharpnessLevelsBar.length > 1\">\n\t\t\t<span class=\"name\">Max Sharpness</span>\n\t\t\t<span class=\"value\">\n\t\t\t\t{{item.sharpnessMaxLevel * 10}}\n\t\t\t\t<i class=\"fas fa-circle fa-sm\" [ngClass]=\"['sharp-' + item.sharpnessMaxColorIndex]\"></i>\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n\n\t<div class=\"slots-container\">\n\t\t<ng-template [ngIf]=\"item?.slots\">\n\t\t\t<div *ngIf=\"item?.slots[0]?.level\">\n\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t</div>\n\t\t\t<div *ngIf=\"item?.slots[1]?.level\">\n\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t</div>\n\t\t\t<div *ngIf=\"item?.slots[2]?.level\">\n\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t</div>\n\t\t</ng-template>\n\t</div>\n\n\t<div *ngIf=\"skills?.length\" class=\"skills-container\">\n\t\t<ul>\n\t\t\t<ng-container *ngFor=\"let skill of skills\">\n\t\t\t\t<li *ngIf=\"skill.levels\">\n\t\t\t\t\t<div class=\"skill-header\">\n\t\t\t\t\t\t<h4 class=\"skill-name\">{{skill.name}}</h4>\n\t\t\t\t\t\t<h4 class=\"skill-level\">{{getSkillCount(skill)}}</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<span>{{skill.description}}</span>\n\t\t\t\t</li>\n\t\t\t</ng-container>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, Input, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\nimport { KinsectModel } from 'src/app/models/kinsect.model';\nimport { ModificationModel } from 'src/app/models/modification.model';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { AwakeningLevelModel } from '../../models/awakening-level.model';\nimport { ItemModel } from '../../models/item.model';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\nimport { AugmentationSlotComponent } from '../augmentation-slot/augmentation-slot.component';\nimport { AwakeningSlotComponent } from '../awakening-slot/awakening-slot.component';\nimport { DecorationSlotComponent } from '../decoration-slot/decoration-slot.component';\nimport { KinsectSlotComponent } from '../kinsect-slot/kinsect-slot.component';\nimport { ModificationSlotComponent } from '../modification-slot/modification-slot.component';\nimport { UpgradeSlotComponent } from '../upagrade-slot/upgrade-slot.component';\n\n@Component({\n\tselector: 'mhw-builder-item-slot',\n\ttemplateUrl: './item-slot.component.html',\n\tstyleUrls: ['./item-slot.component.scss']\n})\nexport class ItemSlotComponent implements OnInit {\n\t@Input() slotName: ItemType;\n\n\t@ViewChildren(DecorationSlotComponent) decorationSlots: QueryList<DecorationSlotComponent>;\n\t@ViewChildren(AugmentationSlotComponent) augmentationSlots: QueryList<AugmentationSlotComponent>;\n\t@ViewChild(UpgradeSlotComponent) upgradeSlot: UpgradeSlotComponent;\n\t@ViewChild(AwakeningSlotComponent) awakeningSlot: AwakeningSlotComponent;\n\t@ViewChildren(ModificationSlotComponent) modificationSlots: QueryList<ModificationSlotComponent>;\n\t@ViewChild(KinsectSlotComponent) kinsectSlot: KinsectSlotComponent;\n\n\titem: ItemModel;\n\n\tpublic augmentations = new Array<AugmentationModel>();\n\tpublic upgradeContainer: UpgradeContainerModel;\n\tpublic awakenings = new Array<AwakeningLevelModel>();\n\tpublic modifications = new Array<ModificationModel>();\n\tpublic kinsect: KinsectModel;\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t}\n\n\tequipmentSlotClicked() {\n\t\tthis.slotService.selectItemSlot(this);\n\t}\n\n\tlevelDownClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tif (this.item.equippedLevel > 1) {\n\t\t\tthis.item.equippedLevel--;\n\t\t\tthis.slotService.updateItemLevel();\n\t\t}\n\t}\n\n\tlevelUpClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tif (this.item.equippedLevel < this.item.levels) {\n\t\t\tthis.item.equippedLevel++;\n\t\t\tthis.slotService.updateItemLevel();\n\t\t}\n\t}\n\n\tactiveClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.item.active = !this.item.active;\n\t\tthis.slotService.activeItemTool(this.item.itemType, this.item.active);\n\t}\n\n\tgetItemIconName(): string {\n\t\tlet assetPath;\n\t\tswitch (this.dataService.getEquipmentCategory(this.slotName)) {\n\t\t\tcase EquipmentCategoryType.Armor:\n\t\t\t\tassetPath = `armor/${this.slotName.toLowerCase()}-icon`;\n\t\t\t\tbreak;\n\t\t\tcase EquipmentCategoryType.Weapon:\n\t\t\t\tif (this.item) {\n\t\t\t\t\tassetPath = `weapons/${this.item.weaponType.toLowerCase()}-icon`;\n\t\t\t\t} else {\n\t\t\t\t\tassetPath = 'weapons/greatsword-icon';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EquipmentCategoryType.Charm:\n\t\t\t\tassetPath = 'armor/charm-icon';\n\t\t\t\tbreak;\n\t\t\tcase EquipmentCategoryType.Tool:\n\t\t\t\tassetPath = 'armor/tool-icon';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n\n\tequipmentClearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearItemSlot(this);\n\t\tthis.clearTooltipItem();\n\t}\n\n\tsetTooltipItem(event: PointerEvent) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setItem(this.item);\n\t\t}\n\t}\n\n\tshowOnClickTooltipItem() {\n\t\tthis.tooltipService.setItem(this.item);\n\t}\n\n\tclearTooltipItem() {\n\t\tthis.tooltipService.setItem(null);\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"item-container\" [class.selected]=\"selected\">\n\t\t<!--<div class=\"slot-name\">{{slotName}}</div>-->\n\t\t<div class=\"slot-icon\" (click)=\"equipmentSlotClicked()\">\n\t\t\t<img [src]=\"getItemIconName()\" alt=\"slot icon\">\n\t\t</div>\n\t\t<div class=\"selected-item\" (click)=\"equipmentSlotClicked()\"\n\t\t\t (pointerenter)=\"setTooltipItem($event)\"\n\t\t\t (pointerleave)=\"clearTooltipItem()\">\n\t\t\t{{item?.name}}\n\t\t</div>\n\n\t\t<div *ngIf=\"item?.levels\" class=\"levels-container\">\n\t\t\t<button type=\"button\" class=\"level-down-button\" (click)=\"levelDownClicked($event)\">\n\t\t\t\t<i class=\"fas fa-minus\"></i>\n\t\t\t</button>\n\n\t\t\t<div class=\"level\">\n\t\t\t\t{{item.equippedLevel}}\n\t\t\t</div>\n\n\t\t\t<button type=\"button\" class=\"level-up-button\" (click)=\"levelUpClicked($event)\">\n\t\t\t\t<i class=\"fas fa-plus\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div *ngIf=\"item && (slotName=='Tool1' || slotName=='Tool2')\" class=\"active-container\">\n\t\t\t<button type=\"button\" class=\"active-button\" (click)=\"activeClicked($event)\">\n\t\t\t\t<i class=\"fas fa-lg\" [ngClass]=\"{'fa-toggle-on text-white': item?.active, 'fa-toggle-off': !item?.active}\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<button type=\"button\" class=\"info-button\" (click)=\"showOnClickTooltipItem()\" aria-label=\"info\">\n\t\t\t<i class=\"fas fa-info-circle icon-xs\" [ngClass]=\"'rarity-'+item?.rarity\" style=\"display:none;\"></i>\n\t\t\t<i class=\"fas fa-grip-lines-vertical icon-md\" [ngClass]=\"'rarity-'+item?.rarity\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"equipmentClearClicked($event)\" aria-label=\"clear\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"kinsect-container\" *ngIf=\"kinsect\">\n\t\t<mhw-builder-kinsect-slot></mhw-builder-kinsect-slot>\n\t</div>\n\n\t<div class=\"augmentation-container\" *ngIf=\"augmentations && augmentations.length\">\n\t\t<mhw-builder-augmentation-slot *ngFor=\"let aug of augmentations\">\n\t\t</mhw-builder-augmentation-slot>\n\t</div>\n\n\t<div class=\"upgrade-container\" *ngIf=\"upgradeContainer?.slots > 0\">\n\t\t<mhw-builder-upgrade-slot [upgradeContainer]=\"upgradeContainer\">\n\t\t</mhw-builder-upgrade-slot>\n\t</div>\n\n\t<div class=\"modification-container\" *ngIf=\"modifications && modifications.length\">\n\t\t<mhw-builder-modification-slot *ngFor=\"let mod of modifications\">\n\t\t</mhw-builder-modification-slot>\n\t</div>\n\n\t<div class=\"awakening-container\" *ngIf=\"item?.weaponType && item?.upgradeType && item?.upgradeType==2\">\n\t\t<mhw-builder-awakening-slot [awakenings]=\"awakenings\"\n\t\t\t\t\t\t\t\t\t[weaponElement]=\"item?.element\"\n\t\t\t\t\t\t\t\t\t[weaponAilment]=\"item?.ailment\"\n\t\t\t\t\t\t\t\t\t[weaponType]=\"item?.weaponType\">\n\t\t</mhw-builder-awakening-slot>\n\t</div>\n\n\t<div class=\"decoration-container\" *ngIf=\"item?.slots && item?.slots.length\">\n\t\t<mhw-builder-decoration-slot *ngFor=\"let slot of item?.slots\"\n\t\t\t\t\t\t\t\t\t [level]=\"slot.level\"\n\t\t\t\t\t\t\t\t\t [itemId]=\"item.id\"\n\t\t\t\t\t\t\t\t\t [itemType]=\"item.itemType\">\n\t\t</mhw-builder-decoration-slot>\n\t</div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { StatService } from 'src/app/services/stat.service';\nimport { ElementType } from 'src/app/types/element.type';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\n\n@Component({\n\tselector: 'mhw-builder-kinsect-details',\n\ttemplateUrl: './kinsect-details.component.html',\n\tstyleUrls: ['./kinsect-details.component.scss']\n})\nexport class KinsectDetailsComponent implements OnInit {\n\n\tprivate _kinsect: KinsectModel;\n\n\t@Input()\n\tset kinsect(kinsect: KinsectModel) {\n\t\tthis._kinsect = kinsect;\n\t\tif (kinsect) {\n\t\t\tthis.setupStats();\n\t\t} else {\n\n\t\t}\n\t}\n\tget kinsect(): KinsectModel {\n\t\treturn this._kinsect;\n\t}\n\n\tstats: StatDetailModel[] = [];\n\n\tconstructor(private statService: StatService) {\n\t\tthis.statService.statsUpdated$.subscribe(stats => {\n\t\t\tif (stats.kinsect) {\n\t\t\t\tthis.kinsect = stats.kinsect;\n\t\t\t\tthis.setupStats();\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n\tsetupStats() {\n\t\tthis.stats = [];\n\n\t\tthis.stats.push({\n\t\t\ticon: 'attack-type',\n\t\t\tname: 'Attack Type',\n\t\t\tvalue: this.kinsect.attackType\n\t\t});\n\n\t\tthis.stats.push({\n\t\t\ticon: 'dust-effect',\n\t\t\tname: 'Dust Effect',\n\t\t\tvalue: this.kinsect.dustEffect,\n\t\t\tclass1: this.kinsect.dustEffect\n\t\t});\n\n\t\tlet power = this.kinsect.power;\n\t\tconst powerDetail: StatDetailModel = {\n\t\t\ticon: 'kinsect/power',\n\t\t\tname: 'Power',\n\t\t\tvalue: 'Lv '\n\t\t};\n\t\tif (this.kinsect.element && this.kinsect.element != ElementType.None) {\n\t\t\tthis.stats.push({\n\t\t\t\ticon: this.kinsect.element.toLowerCase(),\n\t\t\t\tname: 'Element Power',\n\t\t\t\tvalue: `Lv ${this.kinsect.elementPower}`,\n\t\t\t\tclass1: this.kinsect.element\n\t\t\t});\n\t\t\tpower -= 1;\n\t\t\tpowerDetail.color = 'yellow';\n\t\t}\n\t\tpowerDetail.value += `${power}`;\n\t\tthis.stats.push(powerDetail);\n\n\t\tthis.stats.push({\n\t\t\ticon: '/kinsect/speed',\n\t\t\tname: 'Speed',\n\t\t\tvalue: `Lv ${this.kinsect.speed}`\n\t\t});\n\n\t\tthis.stats.push({\n\t\t\ticon: '/kinsect/heal',\n\t\t\tname: 'Heal',\n\t\t\tvalue: `Lv ${this.kinsect.heal}`\n\t\t});\n\t}\n}\n","<div class=\"container\">\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let stat of stats\">\n\t\t\t<span *ngIf=\"stat.icon\" class=\"detail-icon\">\n\t\t\t\t<img [src]=\"'assets/images/' + stat.icon + '-icon.png'\" style=\"height:1em;margin:auto;padding-top:1px;\" alt=\"stat icon\">\n\t\t\t</span>\n\t\t\t<span class=\"name\">{{stat.name}}</span>\n\t\t\t<span class=\"value\" [ngStyle]=\"{ color: stat.color }\" [ngClass]=\"stat.class1\">{{stat.value}}</span>\n\t\t</li>\n\t</ul>\n</div>\n","import { Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ElementType } from 'src/app/types/element.type';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\n\n@Component({\n\tselector: 'mhw-builder-kinsect-list',\n\ttemplateUrl: './kinsect-list.component.html',\n\tstyleUrls: ['./kinsect-list.component.scss']\n})\nexport class KinsectListComponent implements OnInit {\n\tonlyIceborne = true;\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\tkinsects: KinsectModel[];\n\tkinsectsWorld: KinsectModel[];\n\tkinsectsIceborne: KinsectModel[];\n\tfilteredKinsects: KinsectModel[];\n\tvirtualKinsects: KinsectModel[];\n\n\tshowSortContainer = true;\n\tsortType = '';\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate dataService: DataService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.loadKinsects();\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tloadKinsects() {\n\t\tthis.kinsects = this.dataService.getKinsects();\n\t\tthis.kinsectsWorld = this.kinsects.filter(item => item.id <= 100);\n\t\tthis.kinsectsIceborne = this.kinsects.filter(item => item.id > 100);\n\t\tthis.resetSearchResults();\n\t}\n\n\tsearch(query: string) {\n\t\tthis.applyIceborneFilter();\n\n\t\tif (query) {\n\t\t\tquery = query.toLocaleLowerCase().trim();\n\n\t\t\tthis.filteredKinsects = _.filter(this.filteredKinsects, (k: KinsectModel) =>\n\t\t\t\tk.name.toLocaleLowerCase().includes(query) ||\n\t\t\t\tk.attackType.toString().toLocaleLowerCase().includes(query) ||\n\t\t\t\tk.dustEffect.toString().toLocaleLowerCase().includes(query));\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.applyIceborneFilter();\n\t\tthis.sortType = '';\n\t}\n\n\tapplyIceborneFilter() {\n\t\tif (this.onlyIceborne) {\n\t\t\tthis.filteredKinsects = this.kinsectsIceborne;\n\t\t} else {\n\t\t\tthis.filteredKinsects = this.kinsectsIceborne.concat(this.kinsectsWorld);\n\t\t}\n\t}\n\n\tsetOnlyIceborne() {\n\t\tthis.onlyIceborne = !this.onlyIceborne;\n\t\tthis.applyIceborneFilter();\n\t}\n\n\tonKinsectListUpdate(kinsects: KinsectModel[]) {\n\t\tthis.virtualKinsects = kinsects;\n\t}\n\n\tselectKinsect(kinsect: KinsectModel) {\n\t\tconst newKinsect = Object.assign({}, kinsect);\n\t\tnewKinsect.element = ElementType.None;\n\t\tthis.slotService.selectKinsect(newKinsect);\n\t}\n\n\tsortByProperty(property: string) {\n\t\tthis.sortType = property;\n\t\tthis.filteredKinsects.sort(function (a, b) {\n\t\t\tif (a[property] > b[property]) {\n\t\t\t\treturn -1;\n\t\t\t} else if (a[property] < b[property]) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualKinsects = this.filteredKinsects;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, kinsect types, dust types\" />\n\t\t<button type=\"button\" class=\"iceborne-button\" (click)=\"setOnlyIceborne()\" title=\"Only Iceborne\">\n\t\t\t<i class=\"fas fa-toggle-on\" [hidden]=\"!onlyIceborne\"></i>\n\t\t\t<i class=\"fas fa-toggle-off\" [hidden]=\"onlyIceborne\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'power'\" (click)=\"sortByProperty('power')\">\n\t\t\t<span>POWER</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'speed'\" (click)=\"sortByProperty('speed')\">\n\t\t\t<span>SPEED</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'heal'\" (click)=\"sortByProperty('heal')\">\n\t\t\t<span>HEAL</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'attackType'\" (click)=\"sortByProperty('attackType')\">\n\t\t\t<span>TYPE</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"sortType == 'dustEffect'\" (click)=\"sortByProperty('dustEffect')\">\n\t\t\t<span>DUST</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"kinsects-list\" #itemList class=\"scroll-container\" *ngIf=\"kinsects\" [items]=\"filteredKinsects\" (vsUpdate)=\"onKinsectListUpdate($event)\">\n\t\t<div *ngFor=\"let kinsect of virtualKinsects\" class=\"scroll-item-container\" (click)=\"selectKinsect(kinsect)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"{'ver-52':kinsect.id==6}\">\n\t\t\t\t\t{{kinsect.name}}\n\t\t\t\t</div>\n\t\t\t\t<!--<div class=\"type\">\n\t\t\t\t</div>-->\n\t\t\t\t<div class=\"rarity\" *ngIf=\"kinsect.rarity\">\n\t\t\t\t\tRarity {{kinsect.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/attack-type-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.attackType}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/dust-effect-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.dustEffect}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/element-damage-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value sharp-8\">{{kinsect.elementPower}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/kinsect/power-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.power}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/kinsect/speed-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.speed}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/kinsect/heal-icon.png\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{kinsect.heal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { KeyValuePair } from '../../models/common/key-value-pair.model';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ElementType } from '../../types/element.type';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\nimport { DropdownComponent } from '../common/dropdown/dropdown.component';\n\n@Component({\n\tselector: 'mhw-builder-kinsect-slot',\n\ttemplateUrl: './kinsect-slot.component.html',\n\tstyleUrls: ['./kinsect-slot.component.scss']\n})\nexport class KinsectSlotComponent implements OnInit {\n\tslotName = ItemType.Kinsect;\n\telementTypes = ElementType;\n\tkinsect: KinsectModel;\n\telements: KeyValuePair<string, string>[];\n\n\tpublic selected: boolean;\n\n\t@ViewChild(DropdownComponent, { static: true }) elementDropdown: DropdownComponent;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.elements = [];\n\t\tObject.keys(ElementType).map(key => {\n\t\t\tthis.elements.push({ key: key, value: key });\n\t\t});\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectKinsectSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearKinsectSlot(this);\n\t\tthis.clearTooltipKinsect();\n\t}\n\n\tsetTooltipKinsect(event: PointerEvent, kinsect: KinsectModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setKinsect(kinsect);\n\t\t}\n\t}\n\n\tclearTooltipKinsect() {\n\t\tthis.tooltipService.setKinsect(null);\n\t}\n\n\tselectElement(selectedElement: ElementType) {\n\t\tthis.kinsect.element = selectedElement;\n\t\tthis.slotService.selectKinsectSlot(this);\n\t\tthis.slotService.selectKinsect(this.kinsect);\n\t}\n\n\tgetElementIcon(element: ElementType): string {\n\t\tlet assetPath;\n\t\tif (element && element != ElementType.None) {\n\t\t\tassetPath = `${element.toLowerCase()}-icon`;\n\t\t}\n\t\treturn `assets/images/${assetPath}.png`;\n\t}\n}\n","<div class=\"container\" (click)=\"clicked()\" [class.selected]=\"selected\" (pointerenter)=\"setTooltipKinsect($event, kinsect)\" (pointerleave)=\"clearTooltipKinsect()\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/kinsect/culldrone-icon.png'\"></div>\n\t<div class=\"selected-kinsect\">{{kinsect?.name}}</div>\n\n\t<div class=\"element-slot\" [hidden]=\"!kinsect\" (click)=\"elementDropdown.toggle($event)\">\n\t\t<div class=\"element selected-element\">\n\t\t\t<div *ngIf=\"kinsect?.element && kinsect?.element != elementTypes.None\" class=\"image-container\">\n\t\t\t\t<img *ngIf=\"kinsect?.element\" [src]=\"getElementIcon(kinsect?.element)\">\n\t\t\t</div>\n\t\t\t<span>{{kinsect?.element}}</span>\n\t\t</div>\n\t\t<mhw-builder-dropdown #elementDropdown>\n\t\t\t<div class=\"element\" *ngFor=\"let e of elements\" (click)=\"selectElement(e.value)\">\n\t\t\t\t<div class=\"image-container\">\n\t\t\t\t\t<img *ngIf=\"e.value != elementTypes.None\" [src]=\"getElementIcon(e.value)\">\n\t\t\t\t</div>\n\t\t\t\t<span>{{e.value}}</span>\n\t\t\t</div>\n\t\t</mhw-builder-dropdown>\n\t</div>\n\n\t<button class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MelodiesModel } from '../../models/melodies.model';\n\n@Component({\n\tselector: 'mhw-builder-melodies',\n\ttemplateUrl: './melodies.component.html',\n\tstyleUrls: ['./melodies.component.scss']\n})\nexport class MelodiesComponent implements OnInit {\n\n\t@Input() weaponMelodies: MelodiesModel;\n\n\tconstructor() { }\n\n\tngOnInit() {\n\n\t}\n\n\tgetNoteClass(note: string) {\n\t\tif (isNaN(parseInt(note.substring(note.length - 1, note.length), 10))) {\n\t\t\treturn note;\n\t\t} else {\n\t\t\treturn note.substring(0, note.length - 1);\n\t\t}\n\t}\n\tgetNoteSymbol(note: string) {\n\t\tif (isNaN(parseInt(note.substring(note.length - 1, note.length), 10))) {\n\t\t\treturn '♪';\n\t\t} else {\n\t\t\tconst val = note.substring(note.length - 1, note.length);\n\t\t\tif (val == '1') {\n\t\t\t\treturn '♪';\n\t\t\t} if (val == '2') {\n\t\t\t\treturn '♫';\n\t\t\t} else if (val == '3') {\n\t\t\t\treturn '𝆺𝅥𝅯';\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tNotes: &nbsp;\n\t\t\t\t\t<span *ngFor=\"let note of weaponMelodies.notes; let i = index\">\n\t\t\t\t\t\t<span [ngClass]=\"'note-' + getNoteClass(note)\" style=\"font-size:20px;font-weight:bold;\">\n\t\t\t\t\t\t\t<span *ngIf=\"i < 3\">{{getNoteSymbol(note)}}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr *ngFor=\"let melodyEffect of weaponMelodies.melodyEffects; let i = index\">\n\t\t\t\t<td>\n\t\t\t\t\t<span *ngFor=\"let effect of melodyEffect.effects; let effectIndex = index\">\n\t\t\t\t\t\t<span *ngIf=\"effectIndex > 0\"> +</span>\n\t\t\t\t\t\t{{effect.name}} <span *ngIf=\"effect.level\">({{effect.level}})</span>\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span *ngFor=\"let note of melodyEffect.melody\">\n\t\t\t\t\t\t<span [ngClass]=\"'note-' + getNoteClass(weaponMelodies.notes[note-1])\" style=\"font-size:20px;\">\n\t\t\t\t\t\t\t{{getNoteSymbol(weaponMelodies.notes[note-1])}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ModificationModel } from 'src/app/models/modification.model';\nimport { SlotService } from 'src/app/services/slot.service';\nimport { TooltipService } from 'src/app/services/tooltip.service';\nimport { ItemType } from 'src/app/types/item.type';\nimport { PointerType } from 'src/app/types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-modification-slot',\n\ttemplateUrl: './modification-slot.component.html',\n\tstyleUrls: ['./modification-slot.component.scss']\n})\nexport class ModificationSlotComponent implements OnInit {\n\tslotName = ItemType.Modification;\n\n\tmodification: ModificationModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void { }\n\n\tclicked() {\n\t\tthis.slotService.selectModificationSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearModificationSlot(this);\n\t\tthis.clearTooltipModification();\n\t}\n\n\tsetTooltipModification(event: PointerEvent, modification: ModificationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setModification(modification);\n\t\t}\n\t}\n\n\tclearTooltipModification() {\n\t\tthis.tooltipService.setModification(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clicked()\" [class.selected]=\"selected\" (pointerenter)=\"setTooltipModification($event, modification)\" (pointerleave)=\"clearTooltipModification()\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/mod-icon.png'\" alt=\"augment\"></div>\n\t<div class=\"selected-modification\">\n\t\t<span class=\"hidden-xs\">{{modification?.name}}</span>\n\t\t<span class=\"visible-xs\">{{modification?.code}}</span>\n\t</div>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ModificationModel } from '../../models/modification.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-modifications-list',\n\ttemplateUrl: './modifications-list.component.html',\n\tstyleUrls: ['./modifications-list.component.scss']\n})\nexport class ModificationsListComponent implements OnInit {\n\tmodifications: ModificationModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.loadItems();\n\t}\n\n\tloadItems() {\n\t\tthis.modifications = this.dataService.getModifications();\n\t}\n\n\tselectModification(modification: ModificationModel) {\n\t\tconst newModification = Object.assign({}, modification);\n\t\tthis.slotService.selectModification(newModification);\n\t}\n\n\tsetTooltipModification(event: PointerEvent, modification: ModificationModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setModification(modification);\n\t\t}\n\t}\n\n\tclearTooltipModification() {\n\t\tthis.tooltipService.setModification(null);\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"items-container\">\n\t\t<ul>\n\t\t\t<li *ngFor=\"let mod of modifications\" (click)=\"selectModification(mod)\" (pointerenter)=\"setTooltipModification($event, mod)\" (pointerleave)=\"clearTooltipModification()\">\n\t\t\t\t<div class=\"info-container\">\n\t\t\t\t\t<div class=\"name-container\">\n\t\t\t\t\t\t{{mod.name}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t\t<div class=\"description-value\">\n\t\t\t\t\t\t\t{{mod.description}}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<div *ngFor=\"let level of mod.levels\">\n\t\t\t\t\t\t\t\t{{level.description}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { EquippedSetBonusModel } from '../../models/equipped-set-bonus.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-set-bonus-details',\n\ttemplateUrl: './set-bonus-details.component.html',\n\tstyleUrls: ['./set-bonus-details.component.scss']\n})\nexport class SetBonusDetailsComponent implements OnInit {\n\n\t@Input() equippedSetBonus: EquippedSetBonusModel;\n\n\tconstructor(\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() { }\n\n\tclearSetBonus() {\n\t\tthis.tooltipService.setEquippedSetBonus(null);\n\t}\n\n\tgetLevelColor(equipped: boolean): string {\n\t\treturn equipped ? '#F0E68C' : 'white';\n\t}\n}\n","<div class=\"container\" (click)=\"clearSetBonus()\">\n\t<h3>{{equippedSetBonus?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul>\n\t\t<li *ngFor=\"let level of equippedSetBonus?.details; let i = index\" [style.color]=\"getLevelColor(equippedSetBonus?.equippedCount >= level.requiredCount)\">\n\t\t\t<div class=\"level\">{{level.requiredCount}} Parts</div>\n\t\t\t<div class=\"level-description\">{{level.skill.name}}</div>\n\t\t</li>\n\t</ul>\n\t<hr />\n\t<table class=\"skill-part-table\">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon.png\" [hidden]=\"!(equippedSetBonus?.weaponCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Weapon\">\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.weaponCount > 0)\" class=\"armor-icon\" alt=\"Weapon\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"!(equippedSetBonus?.headCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Head\">\n\t\t\t\t<img src=\"assets/images/armor/head-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.headCount > 0)\" class=\"armor-icon\" alt=\"Head\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"!(equippedSetBonus?.chestCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Chest\">\n\t\t\t\t<img src=\"assets/images/armor/chest-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.chestCount > 0)\" class=\"armor-icon\" alt=\"Chest\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"!(equippedSetBonus?.armsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Arms\">\n\t\t\t\t<img src=\"assets/images/armor/arms-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.armsCount > 0)\" class=\"armor-icon\" alt=\"Arms\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"!(equippedSetBonus?.waistCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Waist\">\n\t\t\t\t<img src=\"assets/images/armor/waist-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.waistCount > 0)\" class=\"armor-icon\" alt=\"Waist\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"!(equippedSetBonus?.legsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Legs\">\n\t\t\t\t<img src=\"assets/images/armor/legs-icon-gold.png\" [hidden]=\"!(equippedSetBonus?.legsCount > 0)\" class=\"armor-icon\" alt=\"Legs\">\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { SavedSetModel } from 'src/app/models/saved-set.model';\nimport { SetService } from 'src/app/services/set.service';\nimport { WeaponType } from 'src/app/types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-set-list',\n\ttemplateUrl: './set-list.component.html',\n\tstyleUrls: ['./set-list.component.scss']\n})\nexport class SetListComponent implements OnInit, AfterViewInit {\n\tsets: SavedSetModel[] = [];\n\tvirtualItems: SavedSetModel[];\n\tfilteredItems: SavedSetModel[];\n\tselectedSetIndex = -1;\n\tloading = 0;\n\n\t@ViewChild('saveBox', { static: true }) saveBox: ElementRef;\n\n\tweaponTypeFilter?: WeaponType;\n\thideFilterContainer = true;\n\n\tconstructor(\n\t\tprivate setService: SetService\n\t) {\n\t\tthis.setService.setsUpdated$.subscribe(sets => {\n\t\t\tthis.sets = sets;\n\t\t\tif (this.weaponTypeFilter) {\n\t\t\t\tthis.filteredItems = _.reject(this.sets, item => item.weaponType != this.weaponTypeFilter);\n\t\t\t} else {\n\t\t\t\tthis.filteredItems = this.sets;\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnInit() {\n\t\tthis.sets = this.setService.getSets();\n\t\tthis.filteredItems = this.sets;\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.setService.importSet();\n\t}\n\n\tsave(setName: string) {\n\t\tif (setName) {\n\t\t\tthis.loading = 1;\n\t\t\tthis.selectedSetIndex = this.setService.save(setName);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.loading = 0;\n\t\t\t}, 500);\n\t\t}\n\t}\n\n\tsaveSets() {\n\t\tthis.loading = 2;\n\t\tthis.setService.saveSets();\n\t\tsetTimeout(() => {\n\t\t\tthis.loading = 0;\n\t\t}, 500);\n\t}\n\n\tsortSets() {\n\t\tthis.loading = 3;\n\t\tthis.setService.sortSets();\n\t\tsetTimeout(() => {\n\t\t\tthis.loading = 0;\n\t\t}, 500);\n\t}\n\n\tremove(index: number) {\n\t\tthis.setService.remove(this.sets.indexOf(this.filteredItems[index]));\n\t}\n\n\tselect(set: SavedSetModel, index: number = 0) {\n\t\tthis.setService.select(set);\n\t\tthis.selectedSetIndex = index;\n\t\tthis.saveBox.nativeElement.value = set.setName;\n\t}\n\n\tweaponFilterClicked(weaponType?: WeaponType) {\n\t\tthis.selectedSetIndex = -1;\n\t\tif (!this.weaponTypeFilter || this.weaponTypeFilter != weaponType) {\n\t\t\tthis.weaponTypeFilter = weaponType;\n\t\t\tthis.filteredItems = _.reject(this.sets, item => item.weaponType != this.weaponTypeFilter);\n\t\t} else if (this.weaponTypeFilter == weaponType) {\n\t\t\tthis.weaponTypeFilter = null;\n\t\t\tthis.filteredItems = this.sets;\n\t\t}\n\t}\n\n\tdownloadHtmlFile() {\n\t\tconst dateNow = new Date().toLocaleDateString('en-GB', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: '2-digit',\n\t\t\tday: '2-digit',\n\t\t});\n\t\tconst fileName = `mhworld-builder-save(${dateNow}).html`;\n\t\tconst fileString = `\n<!DOCTYPE html>\n\n<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\" ng-app=\"mhwApp\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n    <title>MHWorld-Builder SetList</title>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.11.2/css/all.css\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.7/angular.min.js\" crossorigin=\"anonymous\"></script>\n    <style>\n        a {\n            color: cornflowerblue;\n        }\n        .Fire {\n            color: #ff6666;\n        }\n        .Water {\n            color: #66ccff;\n        }\n        .Thunder {\n            color: #ff9900;\n        }\n        .Ice {\n            color: #0099ff;\n        }\n        .Dragon {\n            color: #3cb05d;\n        }\n        .Poison {\n            color: #cc44ff;\n        }\n        .Sleep {\n            color: #9999ff;\n        }\n        .Paralysis {\n            color: #e6cb00;\n        }\n        .Blast {\n            color: #E6A400;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container-fluid\" ng-controller=\"SetListController\">\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <h2>MHWorld-Builder</h2>\n                <div class=\"input-group mb-2\">\n                    <select class=\"custom-select\" id=\"weaponFilter\" ng-model=\"weaponFilter\">\n                        <option value=\"\" selected></option>\n                        <option value=\"GreatSword\">GreatSword</option>\n                        <option value=\"SwordAndShield\">SwordAndShield</option>\n                        <option value=\"DualBlades\">DualBlades</option>\n                        <option value=\"LongSword\">LongSword</option>\n                        <option value=\"Hammer\">Hammer</option>\n                        <option value=\"HuntingHorn\">HuntingHorn</option>\n                        <option value=\"Lance\">Lance</option>\n                        <option value=\"Gunlance\">Gunlance</option>\n                        <option value=\"SwitchAxe\">SwitchAxe</option>\n                        <option value=\"ChargeBlade\">ChargeBlade</option>\n                        <option value=\"InsectGlaive\">InsectGlaive</option>\n                        <option value=\"Bow\">Bow</option>\n                        <option value=\"HeavyBowgun\">HeavyBowgun</option>\n                        <option value=\"LightBowgun\">LightBowgun</option>\n                    </select>\n                    <div class=\"input-group-append\">\n                        <label class=\"input-group-text\" for=\"inputGroupSelect02\">Weapon</label>\n                    </div>\n                </div>\n                <div class=\"card-columns\">\n                    <div class=\"card\" ng-repeat=\"(key,item) in sets | filter:(weaponFilter? {weaponType:weaponFilter}: ''):(weaponFilter? true: false) track by $index\" style=\"margin-bottom:.5rem;\">\n                        <div class=\"card-body\" style=\"padding:6px;\">\n                            <h6 class=\"card-title\" style=\"margin:0px;\">\n                                <a href=\"https://neftalimich.github.io/mhw-builder-page?{{item.hashString}}\" class=\"text-decoration-none\" target=\"_blank\">\n                                    {{item.setName}}\n                                </a>\n                                <span style=\"font-size:14px;\">\n                                    <a class=\"float-right ml-1 text-secondary\" href=\"https://neftalimich.github.io/mhw-builder-page?{{item.hashString}}i{{item.setName | uppercase}}\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\" title=\"Import\">\n                                        <i class=\"fas fa-cloud-upload-alt fa-sm\"></i>\n                                    </a>\n                                    <span class=\"float-right\">\n                                        <span>{{item.totalAttack}}</span>\n                                        <span ng-show=\"item.element || item.ailment\">\n\t\t\t\t\t\t\t\t\t\t\t(<span class=\"{{item.element}}\" title=\"{{item.element}}\">{{item.element ? item.elementAttack : ''}}</span><!--\n\t\t\t\t\t\t\t\t\t\t\t-->{{item.ailment && item.element ? '/' : ''}}<!--\n\t\t\t\t\t\t\t\t\t\t\t--><span class=\"{{item.ailment}}\" title=\"{{item.ailment}}\">{{item.ailment ? item.ailmentAttack : ''}}</span>)\n                                        </span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-muted\" style=\"font-size:12px;\">\n\t\t\t\t\t\t\t\t\t\t\t{{item.affinity}}%\n\t\t\t\t\t\t\t\t\t\t</span>\n                                    </span>\n                                </span>\n                            </h6>\n                            <p class=\"card-text\">\n                                <small class=\"text-muted text-capitalize\">\n                                    {{item.weaponType}}\n                                </small>\n\t\t\t\t\t\t\t\t<span style=\"font-size:10px;\">\n\t\t\t\t\t\t\t\t\t<span class=\"float-right text-muted mt-2\" ng-show=\"item.resistances.length > 0\">\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t<span class=\"Fire\">{{item.resistances[0]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Water\">{{item.resistances[1]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Thunder\">{{item.resistances[2]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Ice\">{{item.resistances[3]}}</span>,\n\t\t\t\t\t\t\t\t\t\t<span class=\"Dragon\">{{item.resistances[4]}}</span>\n\t\t\t\t\t\t\t\t\t\t] ➟ <span>{{item.defense[2]}} DEF</span>\n\t\t\t\t\t\t\t\t\t</span>\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <span class=\"text-muted float-right\" style=\"font-size:11px\">\n\t\t\t\t\tBy Neftalí Michelet (neftalimich)\n\t\t\t\t\t<a href=\"https://neftalimich.github.io/mhw-builder-page/\">Site</a>.\n\t\t\t\t</span>\n            </div>\n        </div>\n    </div>\n    <script>\n        var json = ${JSON.stringify(this.sets)};\n        var mhwApp = angular.module('mhwApp', []);\n        mhwApp.controller('SetListController', [\n            '$scope',\n            function ($scope) {\n                $scope.sets = json;\n            }\n        ]);\n    </script>\n</body>\n</html>\n\t\t`;\n\t\tconst blob = new Blob([fileString], { type: 'text/html' });\n\t\tif (window.navigator && window.navigator.msSaveOrOpenBlob) {\n\t\t\twindow.navigator.msSaveOrOpenBlob(blob, fileName);\n\t\t} else {\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = URL.createObjectURL(blob);\n\t\t\ta.download = fileName;\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\tdocument.body.removeChild(a);\n\t\t}\n\t}\n\n\tdownloadJsonFile() {\n\t\tconst dateNow = new Date().toLocaleDateString('en-GB', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: '2-digit',\n\t\t\tday: '2-digit',\n\t\t});\n\t\tconst fileName = `mhworld-builder-data(${dateNow}).json`;\n\t\tconst fileString = JSON.stringify(this.sets);\n\t\tconst blob = new Blob([fileString], { type: 'application/json' });\n\t\tif (window.navigator && window.navigator.msSaveOrOpenBlob) {\n\t\t\twindow.navigator.msSaveOrOpenBlob(blob, fileName);\n\t\t} else {\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = URL.createObjectURL(blob);\n\t\t\ta.download = fileName;\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\tdocument.body.removeChild(a);\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"save-container\">\n\t\t<input #saveBox placeholder=\"Set Name\" (keydown.enter)=\"save(saveBox.value)\" />\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"hideFilterContainer=!hideFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"save-button save-color\" (click)=\"save(saveBox.value)\">\n\t\t\t<i class=\"fas fa-save fa-lg\" [hidden]=\"loading==1\"></i>\n\t\t\t<i class=\"fas fa-spinner fa-spin\" [hidden]=\"loading!=1\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"filter-container\" *ngIf=\"!hideFilterContainer\">\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'GreatSword'\" (click)=\"weaponFilterClicked('GreatSword')\">\n\t\t\t<img src=\"assets/images/weapons/greatsword-icon.png\" alt=\"greatsword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwordAndShield'\" (click)=\"weaponFilterClicked('SwordAndShield')\">\n\t\t\t<img src=\"assets/images/weapons/swordandshield-icon.png\" alt=\"Sword and Shield\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'DualBlades'\" (click)=\"weaponFilterClicked('DualBlades')\">\n\t\t\t<img src=\"assets/images/weapons/dualblades-icon.png\" alt=\"Dual Blades\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LongSword'\" (click)=\"weaponFilterClicked('LongSword')\">\n\t\t\t<img src=\"assets/images/weapons/longsword-icon.png\" alt=\"Long Sword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Hammer'\" (click)=\"weaponFilterClicked('Hammer')\">\n\t\t\t<img src=\"assets/images/weapons/hammer-icon.png\" alt=\"Hammer\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HuntingHorn'\" (click)=\"weaponFilterClicked('HuntingHorn')\">\n\t\t\t<img src=\"assets/images/weapons/huntinghorn-icon.png\" alt=\"Hunting Horn\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Lance'\" (click)=\"weaponFilterClicked('Lance')\">\n\t\t\t<img src=\"assets/images/weapons/lance-icon.png\" alt=\"Lance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Gunlance'\" (click)=\"weaponFilterClicked('Gunlance')\">\n\t\t\t<img src=\"assets/images/weapons/gunlance-icon.png\" alt=\"Gunlance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwitchAxe'\" (click)=\"weaponFilterClicked('SwitchAxe')\">\n\t\t\t<img src=\"assets/images/weapons/switchaxe-icon.png\" alt=\"Switch Axe\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'ChargeBlade'\" (click)=\"weaponFilterClicked('ChargeBlade')\">\n\t\t\t<img src=\"assets/images/weapons/chargeblade-icon.png\" alt=\"Charge Blade\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'InsectGlaive'\" (click)=\"weaponFilterClicked('InsectGlaive')\">\n\t\t\t<img src=\"assets/images/weapons/insectglaive-icon.png\" alt=\"Insect Glaive\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Bow'\" (click)=\"weaponFilterClicked('Bow')\">\n\t\t\t<img src=\"assets/images/weapons/bow-icon.png\" alt=\"Bow\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LightBowgun'\" (click)=\"weaponFilterClicked('LightBowgun')\">\n\t\t\t<img src=\"assets/images/weapons/lightbowgun-icon.png\" alt=\"LBG\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HeavyBowgun'\" (click)=\"weaponFilterClicked('HeavyBowgun')\">\n\t\t\t<img src=\"assets/images/weapons/heavybowgun-icon.png\" alt=\"HBG\">\n\t\t</button>\n\t</div>\n\n\t<div class=\"scroll-container\" *ngIf=\"sets\">\n\t\t<div *ngFor=\"let item of filteredItems; let i = index\" class=\"scroll-item-container\">\n\t\t\t<div class=\"icon-container text-left\">\n\t\t\t\t<img [src]=\"'assets/images/weapons/'+item.weaponType.toLowerCase()+'-icon.png'\" *ngIf=\"item.weaponType\" alt=\"weapon\" />\n\t\t\t</div>\n\t\t\t<div class=\"name-container\" (click)=\"select(item, i)\" [ngClass]=\"{'sharp-2':i==selectedSetIndex}\">\n\t\t\t\t{{item.setName}}\n\t\t\t</div>\n\t\t\t<div class=\"stats-container text-right\" (click)=\"select(item, i)\">\n\t\t\t\t<span>{{item.totalAttack}}</span>\n\t\t\t\t<span *ngIf=\"item.element || item.ailment\"> (</span>\n\t\t\t\t<span [ngClass]=\"item.element\" *ngIf=\"item.element\">{{item.elementAttack}}</span>\n\t\t\t\t<span *ngIf=\"item.element && item.ailment\">/</span>\n\t\t\t\t<span [ngClass]=\"item.ailment\" *ngIf=\"item.ailment\">{{item.ailmentAttack}}</span>\n\t\t\t\t<span *ngIf=\"item.element || item.ailment\">)</span>\n\t\t\t</div>\n\t\t\t<div class=\"buttons-container text-right\">\n\t\t\t\t<button type=\"button\" (click)=\"remove(i)\">\n\t\t\t\t\t<i class=\"fas fa-trash\" [ngClass]=\"{'trash-color':item.confirm}\"></i>\n\t\t\t\t</button>\n\t\t\t\t<button [hidden]=\"!item.confirm\">\n\t\t\t\t\t<i class=\"fas fa-times\" (click)=\"item.confirm=false\"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=\"download-container text-center\">\n\t\t<button type=\"button\" (click)=\"sortSets()\" title=\"Sort sets\">\n\t\t\tSort <i class=\"fas fa-sort-amount-up\" [hidden]=\"loading==3\"></i><i class=\"fas fa-spinner fa-spin\" [hidden]=\"loading!=3\"></i>\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"saveSets()\" title=\"Save order of sets\">\n\t\t\tOrder <i class=\"fas fa-save\" [hidden]=\"loading==2\"></i><i class=\"fas fa-spinner fa-spin\" [hidden]=\"loading!=2\"></i>\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"downloadHtmlFile()\" title=\"Download Html\">\n\t\t\tHTML <i class=\"fas fa-file-download\"></i>\n\t\t</button>\n\t\t<button type=\"button\" (click)=\"downloadJsonFile()\" title=\"Download Json\">\n\t\t\tJSON <i class=\"fas fa-file-code\"></i>\n\t\t</button>\n\t</div>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { EquippedSetBonusDetailModel } from '../../models/equipped-set-bonus.model';\nimport { SetBonusModel } from '../../models/set-bonus.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ModeType } from '../../types/mode.type';\n\n@Component({\n\tselector: 'mhw-builder-setbonus-list',\n\ttemplateUrl: './setbonus-list.component.html',\n\tstyleUrls: ['./setbonus-list.component.scss']\n})\nexport class SetbonusListComponent implements OnInit {\n\t@Output() setbonusSelected = new EventEmitter<SetBonusModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('setbonusList') setbonusList: VirtualScrollerComponent;\n\n\tsetbonuses: SetBonusModel[];\n\tfilteredSetbonuses: SetBonusModel[];\n\tvirtualSetbonuses: SetBonusModel[];\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tpublic dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit(): void {\n\t\tthis.loadItems();\n\t}\n\n\trefreshList() {\n\t\tif (this.setbonusList) {\n\t\t\tthis.setbonusList.refresh();\n\t\t}\n\t}\n\n\tonSetbonusListUpdate(setbonuses: SetBonusModel[]) {\n\t\tthis.virtualSetbonuses = setbonuses;\n\t}\n\n\tloadItems() {\n\t\tthis.setbonuses = this.dataService.getSetBonuses();\n\t\tthis.setbonuses = this.setbonuses.sort((a, b) => {\n\t\t\tif (a.name > b.name) {\n\t\t\t\treturn 1;\n\t\t\t} else if (a.name < b.name) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredSetbonuses = this.setbonuses;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.setbonuses) {\n\t\t\t\tfor (const setbonus of this.setbonuses) {\n\t\t\t\t\tconst itemName = setbonus.name.toLowerCase();\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\n\t\t\t\t\tif (!nameMatch) {\n\t\t\t\t\t\tthis.filteredSetbonuses = _.reject(this.filteredSetbonuses, d => d.name === setbonus.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredSetbonuses = this.setbonuses;\n\t}\n\n\tselectSetbonus(setbonus: SetBonusModel) {\n\t\tconst newSetbonus = Object.assign({}, setbonus);\n\t\tthis.slotService.selectSetbonus(newSetbonus);\n\t}\n\n\tgetSkills(setbonus: SetBonusModel): EquippedSetBonusDetailModel[] {\n\t\tconst result: EquippedSetBonusDetailModel[] = [];\n\t\tfor (const level of setbonus.setLevels) {\n\t\t\tconst skill: SkillModel = JSON.parse(JSON.stringify(this.dataService.getSkill(level.id)));\n\t\t\tresult.push({\n\t\t\t\tskill: skill,\n\t\t\t\tmode: ModeType.Active,\n\t\t\t\trequiredCount: level.pieces\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names\" />\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"setbonuses-list\" #setbonusList class=\"scroll-container\" *ngIf=\"setbonuses\" [items]=\"filteredSetbonuses\" (vsUpdate)=\"onSetbonusListUpdate($event)\">\n\t\t<div *ngFor=\"let setbonus of virtualSetbonuses\" class=\"scroll-item-container\" (click)=\"selectSetbonus(setbonus)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t{{setbonus.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"level\" *ngIf=\"setbonus.level\">\n\t\t\t\t\t<span *ngFor=\"let key of setbonus.level | numbersArr\">\n\t\t\t\t\t\t<i class=\"fas fa-star fa-sm star-icon\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\" *ngIf=\"setbonus?.setLevels.length == 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let bonus of getSkills(setbonus)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{bonus.requiredCount}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{bonus.skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"skills-container-2\" *ngIf=\"setbonus?.setLevels.length > 1\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let bonus of getSkills(setbonus)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{bonus.requiredCount}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{bonus.skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { SharpnessBarModel } from 'src/app/models/sharpness-bar.model';\nimport { SharpnessModel } from 'src/app/models/sharpness-model';\nimport { TooltipService } from 'src/app/services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-sharpness-bar',\n\ttemplateUrl: './sharpness-bar.component.html',\n\tstyleUrls: ['./sharpness-bar.component.scss']\n})\nexport class SharpnessBarComponent implements OnInit {\n\tprivate _handicraftLevel = 0;\n\tprivate _sharpnessLevels: number[] = [];\n\n\t@Input()\n\tset handicraftLevel(handicraftLevel: number) {\n\t\tthis._handicraftLevel = handicraftLevel;\n\t}\n\n\t@Input()\n\tset sharpnessLevels(sharpnessLevels: number[]) {\n\t\tthis._sharpnessLevels = sharpnessLevels;\n\t\tthis.generateSharpnessBar();\n\t}\n\n\t@Input() dataNeeded: boolean;\n\n\tsharpnessBar: SharpnessBarModel = new SharpnessBarModel();\n\n\tconstructor(private tooltipService: TooltipService) {\n\t}\n\n\tngOnInit() {\n\t}\n\n\tgenerateSharpnessBar() {\n\t\tlet total = this._sharpnessLevels.reduce((a, b) => a + b, 0);\n\t\tconst maxHandicraftLevels = 40 + 5 - total;\n\t\tthis.sharpnessBar.tooltipTemplate = '';\n\t\tthis.sharpnessBar.sharps = [];\n\t\tthis.sharpnessBar.levels = JSON.parse(JSON.stringify(this._sharpnessLevels));\n\t\tthis.sharpnessBar.maxColorSharp = null;\n\n\t\tlet levelsToSubstract = Math.min(5 - this._handicraftLevel, maxHandicraftLevels);\n\t\tlet levelsToAdd = Math.min(this._handicraftLevel, maxHandicraftLevels);\n\t\tconst sharpnessEmpty = levelsToSubstract;\n\t\tlet last = true;\n\n\t\tfor (let i = this._sharpnessLevels.length - 1; i >= 0; i--) {\n\t\t\tif (this.sharpnessBar.maxColorSharp == null && this._sharpnessLevels[i] > 0) {\n\t\t\t\tthis.sharpnessBar.maxColorSharp = i;\n\t\t\t\tthis.sharpnessBar.maxLevelSharp = this._sharpnessLevels[i] - (total - 40);\n\t\t\t}\n\t\t\tif (levelsToSubstract > 0) {\n\t\t\t\tconst toSubstract = Math.min(this._sharpnessLevels[i], levelsToSubstract);\n\t\t\t\tthis._sharpnessLevels[i] -= toSubstract;\n\t\t\t\tlevelsToSubstract -= toSubstract;\n\t\t\t}\n\t\t\tconst aux = Math.min(this._sharpnessLevels[i], levelsToAdd);\n\n\t\t\tif (levelsToAdd > 0) {\n\t\t\t\tconst sharpnessAux: SharpnessModel = {\n\t\t\t\t\tcolorIndex: i,\n\t\t\t\t\tlevel: aux,\n\t\t\t\t\tactive: true,\n\t\t\t\t\tlast: last\n\t\t\t\t};\n\t\t\t\tlast = false;\n\t\t\t\tif (levelsToAdd - aux == 0) {\n\t\t\t\t\tsharpnessAux.first = true;\n\t\t\t\t}\n\t\t\t\tthis.sharpnessBar.sharps.push(sharpnessAux);\n\t\t\t}\n\t\t\tif (levelsToAdd < this._sharpnessLevels[i]) {\n\t\t\t\tconst sharpnessAux: SharpnessModel = {\n\t\t\t\t\tcolorIndex: i,\n\t\t\t\t\tlevel: this._sharpnessLevels[i] - levelsToAdd,\n\t\t\t\t\tactive: false\n\t\t\t\t};\n\t\t\t\t// When handicraft is not needed\n\t\t\t\tif (total > 40 && this._sharpnessLevels[i] > 0) {\n\t\t\t\t\tconst toSubstract2 = Math.min(this._sharpnessLevels[i], total - 40);\n\t\t\t\t\tthis.sharpnessBar.levels[i] -= toSubstract2;\n\t\t\t\t\tthis._sharpnessLevels[i] -= toSubstract2;\n\t\t\t\t\ttotal -= toSubstract2;\n\t\t\t\t\tsharpnessAux.level -= toSubstract2;\n\t\t\t\t}\n\t\t\t\tthis.sharpnessBar.sharps.push(sharpnessAux);\n\t\t\t}\n\t\t\tif (levelsToAdd == 0 && this._sharpnessLevels[i] == 0) {\n\t\t\t\tconst sharpnessAux: SharpnessModel = {\n\t\t\t\t\tcolorIndex: i,\n\t\t\t\t\tlevel: 0,\n\t\t\t\t\tactive: false\n\t\t\t\t};\n\t\t\t\tthis.sharpnessBar.sharps.push(sharpnessAux);\n\t\t\t}\n\t\t\tlevelsToAdd -= aux;\n\n\t\t\tthis.sharpnessBar.tooltipTemplate =\n\t\t\t\t`| <span class=\"sharp-${i}\">${this._sharpnessLevels[i] * 10}</span> ${this.sharpnessBar.tooltipTemplate}`;\n\t\t}\n\n\t\tthis.sharpnessBar.sharps = this.sharpnessBar.sharps.reverse();\n\t\tthis.sharpnessBar.empty = sharpnessEmpty;\n\t\tthis.sharpnessBar.widthModifier = 5;\n\t\tthis.sharpnessBar.levelsMissing = 7 - this._sharpnessLevels.length;\n\t\tthis.sharpnessBar.tooltipTemplate +=\n\t\t\t` | <br /> = <br /><span class=\"sharp-8\"> ${((total - sharpnessEmpty) * 10)}`\n\t\t\t+ ` [<span class=\"sharp-${this.sharpnessBar.maxColorSharp}\">${this.sharpnessBar.maxLevelSharp * 10}<i class=\"fas fa-circle fa-sm\"></i></span>]</span>`;\n\t\tthis.sharpnessBar.sharpnessDataNeeded = this.dataNeeded;\n\t\tthis.sharpnessBar.color = this.dataNeeded ? 'red' : 'white';\n\t}\n\n\tgetLevel(colorIndex: number) {\n\t\tconst sharpsFiltered = this.sharpnessBar.sharps.filter(item => {\n\t\t\treturn item['colorIndex'].toString().indexOf(colorIndex.toString()) != -1;\n\t\t});\n\t\tlet level = 0;\n\t\tfor (const sharp of sharpsFiltered) {\n\t\t\tlevel += sharp.level;\n\t\t}\n\t\treturn level;\n\t}\n}\n","<div style=\"display:inline-block;position:relative;margin-right:-1px;z-index:10;\">\n\t<i class=\"fas fa-filter fa-rotate-90 fa-sm sharp-8\" style=\"padding-top:2px;\"></i>\n</div>\n\n<div class=\"text-right sharp-box\" style=\"display:inline-block;position:relative;z-index:9;\">\n\t<span *ngFor=\"let colorIndex of (7 | numbersArr)\">\n\t\t<span [ngClass]=\"['sharp-bg-' + colorIndex]\"\n\t\t\t  [ngStyle]=\"{'width.px': (getLevel(colorIndex) * sharpnessBar.widthModifier)}\">\n\t\t</span>\n\t\t<span [ngClass]=\"['sharp-bg-' + colorIndex]\" style=\"height:3px !important;\"\n\t\t\t  [ngStyle]=\"{'width.px': ((sharpnessBar.levels[colorIndex]- getLevel(colorIndex)) * sharpnessBar.widthModifier)}\">\n\t\t</span>\n\t</span>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { EquippedSkillModel } from '../../models/equipped-skill.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-skill-details',\n\ttemplateUrl: './skill-details.component.html',\n\tstyleUrls: ['./skill-details.component.scss']\n})\nexport class SkillDetailsComponent implements OnInit {\n\n\t@Input() equippedSkill: EquippedSkillModel;\n\t@Input() skill: SkillModel;\n\n\tconstructor(\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t}\n\n\tclearSkill() {\n\t\tthis.tooltipService.setEquippedSkill(null);\n\t}\n\n\tgetLevelColor(level: number): string {\n\t\tif (this.equippedSkill.requiredCount) {\n\t\t\treturn '#87cefa';\n\t\t}\n\t\tlet color = 'white';\n\t\tif (level == Math.min(this.equippedSkill.equippedArmorCount + this.equippedSkill.equippedToolActiveCount, this.equippedSkill.totalLevelCount)) {\n\t\t\tcolor = 'rgb(134, 255, 134)';\n\t\t}\n\t\tif (level == Math.min(this.equippedSkill.equippedArmorCount, this.equippedSkill.totalLevelCount)) {\n\t\t\tcolor = '#87cefa';\n\t\t}\n\t\treturn color;\n\t}\n}\n","<div class=\"container\" (click)=\"clearSkill()\">\n\t<h3>{{skill?.name}}<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<div [hidden]=\"skill?.levels.length == 1\">{{skill?.description}}</div>\n\t<ul>\n\t\t<li *ngFor=\"let level of skill?.levels; let i = index\" [style.color]=\"getLevelColor(i + 1)\">\n\t\t\t<div class=\"level\">\n\t\t\t\t<span [style.color]=\"i + 1 > skill?.maxLevel?'#b38cd9':''\">Lv {{i + 1}}</span>\n\t\t\t</div>\n\t\t\t<div class=\"level-description\">\n\t\t\t\t{{level.description}}\n\t\t\t\t<i *ngIf=\"i + 1 > skill?.maxLevel\" class=\"fas fa-angle-double-up\" style=\"color: #b38cd9;\"></i>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n\t<hr />\n\t<table class=\"skill-part-table\">\n\t\t<tr>\n\t\t\t<td [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon.png\" [hidden]=\"!(equippedSkill.weaponCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Weapon\">\n\t\t\t\t<img src=\"assets/images/armor/weapon-icon-gold.png\" [hidden]=\"!(equippedSkill.weaponCount > 0)\" class=\"armor-icon\" alt=\"Weapon\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/head-icon.png\" [hidden]=\"!(equippedSkill.headCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Head\">\n\t\t\t\t<img src=\"assets/images/armor/head-icon-gold.png\" [hidden]=\"!(equippedSkill.headCount > 0)\" class=\"armor-icon\" alt=\"Head\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/chest-icon.png\" [hidden]=\"!(equippedSkill.chestCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Chest\">\n\t\t\t\t<img src=\"assets/images/armor/chest-icon-gold.png\" [hidden]=\"!(equippedSkill.chestCount > 0)\" class=\"armor-icon\" alt=\"Chest\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/arms-icon.png\" [hidden]=\"!(equippedSkill.armsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Arms\">\n\t\t\t\t<img src=\"assets/images/armor/arms-icon-gold.png\" [hidden]=\"!(equippedSkill.armsCount > 0)\" class=\"armor-icon\" alt=\"Arms\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/waist-icon.png\" [hidden]=\"!(equippedSkill.waistCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Waist\">\n\t\t\t\t<img src=\"assets/images/armor/waist-icon-gold.png\" [hidden]=\"!(equippedSkill.waistCount > 0)\" class=\"armor-icon\" alt=\"Waist\">\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<img src=\"assets/images/armor/legs-icon.png\" [hidden]=\"!(equippedSkill.legsCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Legs\">\n\t\t\t\t<img src=\"assets/images/armor/legs-icon-gold.png\" [hidden]=\"!(equippedSkill.legsCount > 0)\" class=\"armor-icon\" alt=\"Lgs\">\n\t\t\t</td>\n\t\t\t<td [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t\t<img src=\"assets/images/armor/charm-icon.png\" [hidden]=\"!(equippedSkill.charmCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Charm\">\n\t\t\t\t<img src=\"assets/images/armor/charm-icon-gold.png\" [hidden]=\"!(equippedSkill.charmCount > 0)\" class=\"armor-icon\" alt=\"Charm\">\n\t\t\t</td>\n\t\t\t<td [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t\t<img src=\"assets/images/armor/tool-icon.png\" [hidden]=\"!(equippedSkill.toolCount == 0)\" class=\"armor-icon info-opaque\" alt=\"Tool\">\n\t\t\t\t<img src=\"assets/images/armor/tool-icon-gold.png\" [hidden]=\"!(equippedSkill.toolCount > 0)\" class=\"armor-icon\" alt=\"Tool\">\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr [hidden]=\"equippedSkill.isSetBonus\">\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.weaponCount==0}\">{{equippedSkill.weaponCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.headCount==0}\">{{equippedSkill.headCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.chestCount==0}\">{{equippedSkill.chestCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.armsCount==0}\">{{equippedSkill.armsCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.waistCount==0}\">{{equippedSkill.waistCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.legsCount==0}\">{{equippedSkill.legsCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.charmCount==0}\">{{equippedSkill.charmCount}}</span>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<span [ngClass]=\"{'info-opaque':equippedSkill.toolCount==0}\">{{equippedSkill.toolCount}}</span>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ToolModel } from 'src/app/models/tool.model';\nimport { ItemModel } from '../../models/item.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { ToolType } from '../../types/tool.type';\n\n@Component({\n\tselector: 'mhw-builder-tool-list',\n\ttemplateUrl: './tool-list.component.html',\n\tstyleUrls: ['./tool-list.component.scss']\n})\nexport class ToolListComponent implements OnInit {\n\tpublic itemTypes = ItemType;\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\tprivate _itemType: ItemType;\n\ttypeSort: string;\n\n\t@Input()\n\tset itemType(itemType: ItemType) {\n\t\tthis._itemType = itemType;\n\t\tthis.loadItems();\n\t}\n\tget itemType(): ItemType { return this._itemType; }\n\n\t@Output() itemSelected = new EventEmitter<ItemModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titems: ToolModel[];\n\tfilteredItems: ToolModel[];\n\tvirtualItems: ToolModel[];\n\ttoolTypeFilter?: ToolType;\n\tweaponTypeSort: String;\n\n\thideFilterContainer = false;\n\tshowSortContainer = false;\n\n\tchildHeight: number;\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService,\n\t) { }\n\n\tngOnInit() {\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tonItemListUpdate(items: ToolModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tloadItems() {\n\t\tthis.items = this.dataService.getTools(this._itemType);\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(query: string) {\n\t\tthis.filteredItems = this.items;\n\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase().trim();\n\t\t\tconst queryParts = query.split(' ');\n\n\t\t\tif (this.items) {\n\t\t\t\tfor (const item of this.items) {\n\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\n\t\t\t\t\tconst nameMatch = itemName.includes(query);\n\n\t\t\t\t\tif (!nameMatch) {\n\t\t\t\t\t\tthis.filteredItems = _.reject(this.filteredItems, i => i.name === item.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.filteredItems = this.items;\n\t\tthis.applyToolFilter();\n\t}\n\n\tapplyToolFilter() {\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tconst newItem = Object.assign({}, item);\n\t\tthis.slotService.selectItem(newItem);\n\t}\n\n\tsortByDuration() {\n\t\tthis.typeSort = 'DUR';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.duration > item2.duration) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.duration < item2.duration) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortByRecharge() {\n\t\tthis.typeSort = 'REC';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.recharge < item2.recharge) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.recharge > item2.recharge) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tsortBySlots() {\n\t\tthis.typeSort = 'SLOT';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet slotValue1 = 0;\n\t\t\tlet slotValue2 = 0;\n\n\t\t\tif (item1.slots.length > 0) {\n\t\t\t\tslotValue1 += item1.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item1.slots.length > 1) {\n\t\t\t\tslotValue1 += item1.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item1.slots.length > 2) {\n\t\t\t\tslotValue1 += item1.slots[2].level;\n\t\t\t}\n\t\t\tif (item2.slots.length > 0) {\n\t\t\t\tslotValue2 += item2.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item2.slots.length > 1) {\n\t\t\t\tslotValue2 += item2.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item2.slots.length > 2) {\n\t\t\t\tslotValue2 += item2.slots[2].level;\n\t\t\t}\n\n\t\t\tif (slotValue1 > slotValue2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (slotValue1 < slotValue2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search(searchBox.value)\" placeholder=\"Search names, skills\" />\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"hideFilterContainer=!hideFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"typeSort == 'DUR'\" (click)=\"sortByDuration()\">\n\t\t\t<span>DUR</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"typeSort == 'REC'\" (click)=\"sortByRecharge()\">\n\t\t\t<span>REC</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"item-sort\" [class.selected]=\"typeSort == 'SLOT'\" (click)=\"sortBySlots()\">\n\t\t\t<span>SLOT</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"items\" [items]=\"filteredItems\" (vsUpdate)=\"onItemListUpdate($event)\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"'ver-'+ item.version\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"slots\">\n\t\t\t\t\t<div *ngIf=\"item.slots[0]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[1]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[2]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"type\">\n\t\t\t\t\t{{item.toolType}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/tool-duration-icon.png\" alt=\"duration\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.duration}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/tool-recharge-icon.png\" alt=\"recharge\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.recharge}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>\n","import { Component, ElementRef, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { CommonLevelModel, CommonModel } from 'src/app/models/common.model';\nimport { KinsectModel } from 'src/app/models/kinsect.model';\nimport { DecorationModel } from '../../models/decoration.model';\nimport { EquippedSetBonusModel } from '../../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../../models/equipped-skill.model';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { WeaponType } from '../../types/weapon.type';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\n\n@Component({\n\tselector: 'mhw-builder-tooltip',\n\ttemplateUrl: './tooltip.component.html',\n\tstyleUrls: ['./tooltip.component.scss']\n})\nexport class TooltipComponent implements OnInit {\n\t@ViewChild('container', { static: true }) container: ElementRef;\n\n\titem: ItemModel;\n\tupgradeContainer: UpgradeContainerModel;\n\tdecoration: DecorationModel;\n\tcommon: CommonModel;\n\tkinsect: KinsectModel;\n\tequippedSkill: EquippedSkillModel;\n\tequippedSetBonus: EquippedSetBonusModel;\n\tskill: SkillModel;\n\tcalc: StatDetailModel;\n\tvisible: boolean;\n\tweaponTypes = WeaponType;\n\n\tprivate mouseXOffset = 40;\n\tprivate mouseYOffset = 40;\n\n\tconstructor(\n\t\tprivate renderer: Renderer2,\n\t\tprivate tooltipService: TooltipService\n\t) { }\n\n\tngOnInit() {\n\t\tthis.tooltipService.itemChanged$.subscribe(item => {\n\t\t\tif (!item) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.item = item;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.decorationChanged$.subscribe(decoration => {\n\t\t\tif (!decoration) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.decoration = decoration;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.augmentationChanged$.subscribe(augmentation => {\n\t\t\tif (!augmentation) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tconst levels: CommonLevelModel[] = [];\n\t\t\t\tfor (const augLevel of augmentation.levels) {\n\t\t\t\t\tlet level: CommonLevelModel;\n\t\t\t\t\tlevel = {\n\t\t\t\t\t\tdescription: augLevel.description,\n\t\t\t\t\t\tskills: augLevel.skills\n\t\t\t\t\t};\n\t\t\t\t\tlevels.push(level);\n\t\t\t\t}\n\t\t\t\tthis.common = {\n\t\t\t\t\tid: augmentation.id,\n\t\t\t\t\tcode: augmentation.code,\n\t\t\t\t\tname: augmentation.name,\n\t\t\t\t\tdescription: augmentation.description,\n\t\t\t\t\tlevels: levels\n\t\t\t\t};\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.upgradeContainerChanged$.subscribe(upgradeContainer => {\n\t\t\tif (!upgradeContainer) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.upgradeContainer = upgradeContainer;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.modificationChanged$.subscribe(modification => {\n\t\t\tif (!modification) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tconst levels: CommonLevelModel[] = [];\n\t\t\t\tfor (const modLevel of modification.levels) {\n\t\t\t\t\tlet level: CommonLevelModel;\n\t\t\t\t\tlevel = {\n\t\t\t\t\t\tdescription: modLevel.description,\n\t\t\t\t\t\tskills: modLevel.skills\n\t\t\t\t\t};\n\t\t\t\t\tlevels.push(level);\n\t\t\t\t}\n\t\t\t\tthis.common = {\n\t\t\t\t\tid: modification.id,\n\t\t\t\t\tcode: modification.code,\n\t\t\t\t\tname: modification.name,\n\t\t\t\t\tdescription: modification.description,\n\t\t\t\t\tlevels: levels\n\t\t\t\t};\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.kinsectChanged$.subscribe(kinsect => {\n\t\t\tif (!kinsect) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.kinsect = kinsect;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.equippedSkillChanged$.subscribe(equippedSkill => {\n\t\t\tif (!equippedSkill) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.equippedSkill = equippedSkill;\n\t\t\t\tthis.skill = equippedSkill.skill;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.equippedSetBonusChanged$.subscribe(equippedSetBonus => {\n\t\t\tif (!equippedSetBonus) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.equippedSetBonus = equippedSetBonus;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.skillChanged$.subscribe(skill => {\n\t\t\tif (!skill) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.skill = skill;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\n\t\tthis.tooltipService.calcChanged$.subscribe(calc => {\n\t\t\tif (!calc) {\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.calc = calc;\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t});\n\t}\n\n\treset() {\n\t\tthis.item = null;\n\t\tthis.upgradeContainer = null;\n\t\tthis.decoration = null;\n\t\tthis.common = null;\n\t\tthis.kinsect = null;\n\t\tthis.equippedSkill = null;\n\t\tthis.equippedSetBonus = null;\n\t\tthis.skill = null;\n\t\tthis.calc = null;\n\t}\n\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\tmove(x: number, y: number) {\n\t\tif (this.visible) {\n\t\t\tlet newTop = y + this.mouseYOffset;\n\t\t\tlet newRight = 0;\n\t\t\tlet newLeft = 0;\n\n\t\t\tif (x < window.innerWidth - (this.container.nativeElement.offsetWidth + this.mouseXOffset)) {\n\t\t\t\tnewLeft = x + this.mouseXOffset;\n\n\t\t\t\tif (window.innerWidth < newLeft + this.container.nativeElement.scrollWidth) {\n\t\t\t\t\tnewLeft = window.innerWidth - this.container.nativeElement.scrollWidth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewRight = window.innerWidth - x + this.mouseXOffset;\n\n\t\t\t\tif (window.innerWidth < newRight + this.container.nativeElement.scrollWidth) {\n\t\t\t\t\tnewRight = window.innerWidth - this.container.nativeElement.scrollWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (window.innerHeight - 20 < newTop + this.container.nativeElement.scrollHeight) {\n\t\t\t\tnewTop = window.innerHeight - this.container.nativeElement.scrollHeight - 20;\n\t\t\t}\n\n\t\t\tthis.renderer.setStyle(this.container.nativeElement, 'left', newLeft ? newLeft + 'px' : 'auto');\n\t\t\tthis.renderer.setStyle(this.container.nativeElement, 'right', newRight ? newRight + 'px' : 'auto');\n\t\t\tthis.renderer.setStyle(this.container.nativeElement, 'top', newTop + 'px');\n\t\t}\n\t}\n}\n","<div #container class=\"container\" [hidden]=\"!visible\">\n\t<mhw-builder-item-details *ngIf=\"item\" [item]=\"item\"></mhw-builder-item-details>\n\t<mhw-builder-upgrade-details *ngIf=\"upgradeContainer\" [upgradeContainer]=\"upgradeContainer\"></mhw-builder-upgrade-details>\n\t<mhw-builder-decoration-details *ngIf=\"decoration\" [decoration]=\"decoration\"></mhw-builder-decoration-details>\n\t<mhw-builder-common-details *ngIf=\"common\" [common]=\"common\"></mhw-builder-common-details>\n\t<mhw-builder-skill-details *ngIf=\"equippedSkill || skill\" [equippedSkill]=\"equippedSkill\" [skill]=\"skill\"></mhw-builder-skill-details>\n\t<mhw-builder-set-bonus-details *ngIf=\"equippedSetBonus\" [equippedSetBonus]=\"equippedSetBonus\"></mhw-builder-set-bonus-details>\n\t<mhw-builder-calc-details *ngIf=\"calc\" [calc]=\"calc\"></mhw-builder-calc-details>\n\t<ng-container *ngIf=\"kinsect\">\n\t\t<h3>{{kinsect?.name}}</h3>\n\t\t<hr>\n\t\t<mhw-builder-kinsect-details [kinsect]=\"kinsect\"></mhw-builder-kinsect-details>\n\t</ng-container>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { SlotService } from '../../services/slot.service';\nimport { TooltipService } from '../../services/tooltip.service';\nimport { ItemType } from '../../types/item.type';\nimport { PointerType } from '../../types/pointer.type';\n\n@Component({\n\tselector: 'mhw-builder-upgrade-slot',\n\ttemplateUrl: './upgrade-slot.component.html',\n\tstyleUrls: ['./upgrade-slot.component.scss']\n})\nexport class UpgradeSlotComponent implements OnInit {\n\tslotName = ItemType.Upgrade;\n\n\t@Input()\n\tupgradeContainer: UpgradeContainerModel;\n\n\tpublic selected: boolean;\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tprivate tooltipService: TooltipService\n\t) {\n\t}\n\n\tngOnInit(): void {\n\t}\n\n\tclicked() {\n\t\tthis.slotService.selectUpgradeSlot(this);\n\t}\n\n\tclearClicked(event: Event) {\n\t\tevent.stopPropagation();\n\t\tthis.slotService.clearUpgradeSlot(this);\n\t}\n\n\tsetTooltipUpgrade(event: PointerEvent, upgradeContainer: UpgradeContainerModel) {\n\t\tif (event.pointerType == PointerType.Mouse) {\n\t\t\tthis.tooltipService.setUpgradeContainer(upgradeContainer);\n\t\t}\n\t}\n\n\tshowOnClickTooltipItem() {\n\t\tthis.tooltipService.setUpgradeContainer(this.upgradeContainer);\n\t}\n\n\tclearTooltipUpgrade() {\n\t\tthis.tooltipService.setUpgradeContainer(null);\n\t}\n}\n","<div class=\"container\" [class.selected]=\"selected\">\n\t<div class=\"slot-icon\"><img [src]=\"'assets/images/augment-icon.png'\" alt=\"augment\"></div>\n\t<div class=\"upgrades\">\n\t\t<div class=\"selected-upgrade\" (click)=\"clicked()\" (pointerenter)=\"setTooltipUpgrade($event, upgradeContainer)\" (pointerleave)=\"clearTooltipUpgrade()\">\n\t\t\t<span *ngIf=\"upgradeContainer?.upgradeDetails\">\n\t\t\t\t<span *ngFor=\"let detail of upgradeContainer.upgradeDetails; let i = index\">\n\t\t\t\t\t<span *ngFor=\"let key of detail.totalSlots | numbersArr\">\n\t\t\t\t\t\t<span [class]=\"'hex-' + (i + 1)\" style=\"font-size: 24px;\">&#x2B22;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span *ngFor=\"let key of (upgradeContainer.slots - upgradeContainer.used) | numbersArr\">\n\t\t\t\t\t<span class=\"hex-0\" style=\"font-size: 24px;\">&#x2B22;</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div *ngIf=\"upgradeContainer?.hasCustomUpgrades\" class=\"selected-custom\" (click)=\"clicked()\" (pointerenter)=\"setTooltipUpgrade($event, upgradeContainer)\" (pointerleave)=\"clearTooltipUpgrade()\">\n\t\t\t<span *ngFor=\"let customId of upgradeContainer.customUpgradeIds; let i = index\">\n\t\t\t\t<span [ngClass]=\"'hex-' + customId\" style=\"font-size: 14px;\">&#9672;</span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t<button type=\"button\" class=\"info-button\" (click)=\"showOnClickTooltipItem()\" aria-label=\"info\">\n\t\t<i class=\"fas fa-info-circle icon-xs\" style=\"display:none;\"></i>\n\t</button>\n\n\t<button type=\"button\" class=\"clear-button\" (click)=\"clearClicked($event)\">\n\t\t<i class=\"fas fa-times\"></i>\n\t</button>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { StatDetailModel } from '../../models/stat-detail.model';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { TooltipService } from '../../services/tooltip.service';\n\n@Component({\n\tselector: 'mhw-builder-upgrade-details',\n\ttemplateUrl: './upgrade-details.component.html',\n\tstyleUrls: ['./upgrade-details.component.scss']\n})\nexport class UpgradeDetailsComponent implements OnInit {\n\tprivate _upgradeContainer: UpgradeContainerModel;\n\n\t@Input()\n\tset upgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tthis._upgradeContainer = upgradeContainer;\n\t\tif (upgradeContainer) {\n\t\t\tthis.setupStats();\n\t\t}\n\t}\n\tget upgradeContainer(): UpgradeContainerModel {\n\t\treturn this._upgradeContainer;\n\t}\n\n\tstats: StatDetailModel[] = [];\n\n\tconstructor(private tooltipService: TooltipService) {\n\t}\n\n\tngOnInit() { }\n\n\tsetupStats() {\n\t\tthis.stats = [];\n\t\tfor (const detail of this.upgradeContainer.upgradeDetails) {\n\t\t\tif (detail.level > 0) {\n\t\t\t\tthis.stats.push({ name: detail.type, value: detail.description });\n\t\t\t}\n\t\t}\n\n\t\tlet upgradePassiveAttack = 0;\n\t\tlet upgradePassiveAffinity = 0;\n\t\tlet upgradePassiveAilmentElement = 0;\n\t\tlet upgradePassiveDefense = 0;\n\n\t\tfor (const [i, customId] of this.upgradeContainer.customUpgradeIds.entries()) {\n\t\t\tswitch (customId) {\n\t\t\t\tcase 1: // Attack\n\t\t\t\t\tupgradePassiveAttack += this.upgradeContainer.customUpgradeValues[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2: // Affinity\n\t\t\t\t\tupgradePassiveAffinity += this.upgradeContainer.customUpgradeValues[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3: // Defense\n\t\t\t\t\tupgradePassiveDefense += this.upgradeContainer.customUpgradeValues[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6: // Element / Ailment\n\t\t\t\t\tupgradePassiveAilmentElement += this.upgradeContainer.customUpgradeValues[i] * 10;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\t\tif (upgradePassiveAttack > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Attack', value: `+${upgradePassiveAttack}` });\n\t\t}\n\t\tif (upgradePassiveAffinity > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Affinity', value: `+${upgradePassiveAffinity}` });\n\t\t}\n\t\tif (upgradePassiveDefense > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Defense', value: `+${upgradePassiveDefense}` });\n\t\t}\n\t\tif (upgradePassiveAilmentElement > 0) {\n\t\t\tthis.stats.push({ name: 'Custom Element/Ailment', value: `+${upgradePassiveAilmentElement}` });\n\t\t}\n\t}\n\n\tclearTooltipUpgrade() {\n\t\tthis.tooltipService.setUpgradeContainer(null);\n\t}\n}\n","<div class=\"container\" (click)=\"clearTooltipUpgrade()\">\n\t<h3>Upgrades<span class=\"close-btn-sm\" style=\"visibility:hidden;\"><i class=\"fa fa-times\"></i></span></h3>\n\t<hr>\n\t<ul class=\"striped-light\">\n\t\t<li *ngFor=\"let stat of stats\">\n\t\t\t<span class=\"name\" [ngStyle]=\"{ color: stat.color }\">{{stat.name}}</span>\n\t\t\t<span class=\"value\" [ngStyle]=\"{ color: stat.color }\">{{stat.value}}</span>\n\t\t</li>\n\t</ul>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { UpgradeContainerModel } from '../../models/upgrade-container.model';\nimport { UpgradeLevelModel, UpgradeModel } from '../../models/upgrade.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { WeaponType } from '../../types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-upgrades-list',\n\ttemplateUrl: './upgrades-list.component.html',\n\tstyleUrls: ['./upgrades-list.component.scss']\n})\nexport class UpgradesListComponent implements OnInit {\n\tupgrades: UpgradeModel[];\n\tcustomUpgrades: any[];\n\tweaponIndex: number;\n\n\tprivate _upgradeContainer: UpgradeContainerModel;\n\n\t@Input()\n\tset upgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tif (upgradeContainer) {\n\t\t\tthis._upgradeContainer = JSON.parse(JSON.stringify(upgradeContainer));\n\n\t\t\tif (this.upgradeContainer.upgradeDetails && this.upgradeContainer.upgradeDetails.length == 0) {\n\t\t\t\tfor (const cUpg of this.upgrades) {\n\t\t\t\t\tconst newDetail = new UpgradeLevelModel();\n\t\t\t\t\tnewDetail.type = cUpg.type;\n\t\t\t\t\tnewDetail.level = 0;\n\t\t\t\t\tnewDetail.requiredSlots = 0;\n\t\t\t\t\tnewDetail.totalSlots = 0;\n\t\t\t\t\tthis.upgradeContainer.upgradeDetails.push(newDetail);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.weaponIndex = 0;\n\t\t\tfor (const item in WeaponType) {\n\t\t\t\tif (isNaN(Number(item))) {\n\t\t\t\t\tif (item == upgradeContainer.weaponType) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.weaponIndex += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.customUpgrades = [];\n\t\t\tfor (const cUpg of this.upgrades) {\n\t\t\t\tif (cUpg.WeaponCustomUpgrades) {\n\t\t\t\t\tconst levels = cUpg.WeaponCustomUpgrades[this.weaponIndex];\n\t\t\t\t\tconst maximum = levels.reduce((acumulator, currentValue) => acumulator + currentValue, 0);\n\t\t\t\t\tif (maximum > 0) {\n\t\t\t\t\t\tthis.customUpgrades.push({\n\t\t\t\t\t\t\tid: cUpg.id,\n\t\t\t\t\t\t\ttype: cUpg.type,\n\t\t\t\t\t\t\tmaximum: maximum,\n\t\t\t\t\t\t\tvalues: cUpg.WeaponCustomUpgrades[this.weaponIndex]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.verifyUpgrades();\n\t\t}\n\t}\n\tget upgradeContainer(): UpgradeContainerModel { return this._upgradeContainer; }\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService\n\t) {\n\t\tthis.upgrades = this.dataService.getUpgrades();\n\t}\n\n\tngOnInit(): void { }\n\n\tselectUpgrade() {\n\t\tconst newUpg = JSON.parse(JSON.stringify(this.upgradeContainer));\n\t\tthis.slotService.selectUpgradeContainer(newUpg);\n\t}\n\n\tverifyUpgrades() {\n\t\tif (this.upgradeContainer.used > this.upgradeContainer.slots) {\n\t\t\tfor (let i = 0; i < this.upgradeContainer.upgradeDetails.length; i++) {\n\t\t\t\tconst detail = this.upgradeContainer.upgradeDetails[i];\n\t\t\t\tif (detail.level > 0) {\n\t\t\t\t\tthis.selectUpgLevel(i, detail.level);\n\t\t\t\t\tthis.verifyUpgrades();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tselectUpgLevel(augIndex: number, level: number) {\n\t\tconst auxUpg = this.upgradeContainer.upgradeDetails[augIndex];\n\t\tlet auxOverrideValue: number = null;\n\t\tif (this.upgrades[augIndex].WeaponLevels) {\n\t\t\tauxOverrideValue = this.upgrades[augIndex].WeaponLevels[this.weaponIndex][level - 1];\n\t\t}\n\n\t\tif (auxUpg.level == level) {\n\t\t\tauxUpg.level = level - 1;\n\t\t\tif (level > 1) {\n\t\t\t\tconst auxDown = this.upgrades[augIndex].levels[level - 2];\n\t\t\t\tthis.upgradeContainer.used -= auxUpg.totalSlots;\n\t\t\t\tthis.upgradeContainer.used += auxDown.totalSlots;\n\n\t\t\t\tif (auxOverrideValue) {\n\t\t\t\t\tthis.overrideUpgrageLevel(auxDown, augIndex, auxOverrideValue);\n\t\t\t\t}\n\t\t\t\tthis.updatePassiveStats(auxUpg, auxDown);\n\t\t\t} else {\n\t\t\t\tthis.upgradeContainer.used -= auxUpg.totalSlots;\n\t\t\t\tthis.clearPassiveStats(auxUpg);\n\t\t\t}\n\t\t} else {\n\t\t\tconst auxLevel = this.upgrades[augIndex].levels[level - 1];\n\t\t\tif (this.upgradeContainer.used - auxUpg.totalSlots + auxLevel.totalSlots <= this.upgradeContainer.slots) {\n\t\t\t\tthis.upgradeContainer.used -= auxUpg.totalSlots;\n\t\t\t\tthis.upgradeContainer.used += auxLevel.totalSlots;\n\n\t\t\t\tauxUpg.level = level;\n\n\t\t\t\tif (auxOverrideValue) {\n\t\t\t\t\tthis.overrideUpgrageLevel(auxLevel, augIndex, auxOverrideValue);\n\t\t\t\t}\n\t\t\t\tthis.updatePassiveStats(auxUpg, auxLevel);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate overrideUpgrageLevel(upgradeLevel: UpgradeLevelModel, augIndex: number, value: number) {\n\t\tswitch (augIndex) {\n\t\t\tcase 0:\n\t\t\t\tupgradeLevel.passiveAttack = value;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tupgradeLevel.passiveAffinity = value;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tupgradeLevel.passiveDefense = value;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tupgradeLevel.slotLevel = value;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tupgradeLevel.healOnHitPercent = value;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tupgradeLevel.passiveAilment = value;\n\t\t\t\tupgradeLevel.passiveElement = value;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tupgradeLevel.description = '+' + value;\n\t}\n\n\tupdatePassiveStats(aug: UpgradeLevelModel, level: UpgradeLevelModel) {\n\t\taug.requiredSlots = level.requiredSlots;\n\t\taug.totalSlots = level.totalSlots;\n\n\t\taug.passiveAttack = level.passiveAttack;\n\t\taug.passiveAffinity = level.passiveAffinity;\n\t\taug.passiveDefense = level.passiveDefense;\n\t\taug.healOnHitPercent = level.healOnHitPercent;\n\t\taug.passiveElement = level.passiveElement;\n\t\taug.passiveAilment = level.passiveAilment;\n\n\t\taug.description = level.description;\n\t}\n\n\tclearPassiveStats(aug: UpgradeLevelModel) {\n\t\taug.requiredSlots = 0;\n\t\taug.totalSlots = 0;\n\n\t\taug.passiveAttack = 0;\n\t\taug.passiveAffinity = 0;\n\t\taug.passiveDefense = 0;\n\t\taug.healOnHitPercent = 0;\n\t\taug.passiveElement = 0;\n\t\taug.passiveAilment = 0;\n\t}\n\n\tgetHexagonClass(upgIndex: number, levelIndex: number) {\n\t\tconst auxUpg = this.upgradeContainer.upgradeDetails[upgIndex];\n\t\tconst auxLevel = this.upgrades[upgIndex].levels[levelIndex];\n\n\t\tif (levelIndex + 1 <= auxUpg.level) {\n\t\t\treturn 'hex-o-' + (upgIndex + 1);\n\t\t} else {\n\t\t\tif (this.upgradeContainer.used - auxUpg.totalSlots + auxLevel.totalSlots <= this.upgradeContainer.slots) {\n\t\t\t\treturn 'hex-' + (upgIndex + 1);\n\t\t\t} else {\n\t\t\t\treturn 'hex-' + (upgIndex + 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBackgroundColor(upgIndex: number, levelIndex: number) {\n\t\tconst auxUpg = this.upgradeContainer.upgradeDetails[upgIndex];\n\t\tconst auxLevel = this.upgrades[upgIndex].levels[levelIndex];\n\n\t\tif (levelIndex + 1 <= auxUpg.level) {\n\t\t\treturn '#525252';\n\t\t} else {\n\t\t\tif (this.upgradeContainer.used - auxUpg.totalSlots + auxLevel.totalSlots <= this.upgradeContainer.slots) {\n\t\t\t\treturn '';\n\t\t\t} else {\n\t\t\t\treturn '#1E1E1E';\n\t\t\t}\n\t\t}\n\t}\n\n\tselectCustomUpg(augId: number, levelIndex: number, level: number) {\n\t\tif (level > 0) {\n\t\t\tif (this.upgradeContainer.customUpgradeIds[levelIndex] == augId) {\n\t\t\t\tthis.upgradeContainer.customUpgradeIds[levelIndex] = 0;\n\t\t\t\tthis.upgradeContainer.customUpgradeValues[levelIndex] = 0;\n\t\t\t} else {\n\t\t\t\tthis.upgradeContainer.customUpgradeIds[levelIndex] = augId;\n\t\t\t\tthis.upgradeContainer.customUpgradeValues[levelIndex] = level;\n\t\t\t}\n\t\t}\n\t}\n\n\tcountCustomUpg(augId: number) {\n\t\treturn this.upgradeContainer.customUpgradeIds.filter(customId => customId == augId).length;\n\t}\n\n\tsumCustomUpg(augId: number) {\n\t\tlet result = 0;\n\t\tconst customUpgrade = this.customUpgrades.find(x => x.id == augId);\n\t\tfor (const [i, customId] of this.upgradeContainer.customUpgradeIds.entries()) {\n\t\t\tif (customId == augId) {\n\t\t\t\tresult += customUpgrade.values[i];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\n\tgetCustomColor(augType: string) {\n\t\tif (augType == 'Attack') {\n\t\t\treturn '0';\n\t\t} else if (augType == 'Affinity') {\n\t\t\treturn '1';\n\t\t} else if (augType == 'Defense') {\n\t\t\treturn '2';\n\t\t} else if (augType == 'Element') {\n\t\t\treturn '5';\n\t\t} else {\n\t\t\treturn 'gray';\n\t\t}\n\t}\n}\n","<div class=\"container\">\n\t<table class=\"upgrades-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"text-center\">{{upgradeContainer.used}}/{{upgradeContainer.slots}}</th>\n\t\t\t\t<th class=\"text-center\">Lv1</th>\n\t\t\t\t<th class=\"text-center\">Lv2</th>\n\t\t\t\t<th class=\"text-center\">Lv3</th>\n\t\t\t\t<th class=\"text-center\">Lv4</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<ng-container *ngFor=\"let aug of upgrades; let augIndex = index\">\n\t\t\t\t<tr *ngIf=\"aug.levels && aug.levels.length > 0\">\n\t\t\t\t\t<td class=\"border-left-blue\">{{aug.type}}</td>\n\t\t\t\t\t<td *ngFor=\"let level of aug.levels; let levelIndex = index\"\n\t\t\t\t\t\t(click)=\"selectUpgLevel(augIndex, levelIndex + 1)\"\n\t\t\t\t\t\t[style.background-color]=\"getBackgroundColor(augIndex, levelIndex)\"\n\t\t\t\t\t\tclass=\"text-center\" style=\"cursor:pointer;\">\n\t\t\t\t\t\t<span *ngFor=\"let key of level.requiredSlots | numbersArr\"\n\t\t\t\t\t\t\t  [class]=\"getHexagonClass(augIndex,levelIndex)\"\n\t\t\t\t\t\t\t  style=\"font-size:24px;\">\n\t\t\t\t\t\t\t&#x2B22;\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</ng-container>\n\t\t</tbody>\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"4\" class=\"text-center border-left-blue\" style=\"background-color:#323232!important;\">\n\t\t\t\t\t<span *ngFor=\"let detail of upgradeContainer.upgradeDetails; let i = index\">\n\t\t\t\t\t\t<span *ngFor=\"let key of detail.totalSlots | numbersArr\">\n\t\t\t\t\t\t\t<span [class]=\"'hex-o-' + (i + 1)\" style=\"font-size: 26px;\">&#x2B22;</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngFor=\"let key of (upgradeContainer.slots - upgradeContainer.used) | numbersArr\">\n\t\t\t\t\t\t<span class=\"hex-0\" style=\"font-size: 26px;\">&#x2B22;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-center bg-52\" (click)=\"selectUpgrade()\" style=\"cursor:pointer;\">\n\t\t\t\t\t<button type=\"button\" class=\"text-white\">OK</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</table>\n\t<table class=\"upgrades-table\" *ngIf=\"upgradeContainer.hasCustomUpgrades\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"text-left upgrade-th\">Custom</th>\n\t\t\t\t<th class=\"upgrade-th\">I</th>\n\t\t\t\t<th class=\"upgrade-th\">II</th>\n\t\t\t\t<th class=\"upgrade-th\">III</th>\n\t\t\t\t<th class=\"upgrade-th\">IV</th>\n\t\t\t\t<th class=\"upgrade-th\">V</th>\n\t\t\t\t<th class=\"upgrade-th\">VI</th>\n\t\t\t\t<th class=\"upgrade-th\">VII</th>\n\t\t\t\t<th class=\"upgrade-th\">Total</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr *ngFor=\"let customUpg of customUpgrades\">\n\t\t\t\t<td>\n\t\t\t\t\t{{customUpg.type}}\n\t\t\t\t</td>\n\t\t\t\t<td *ngFor=\"let value of customUpg.values; let i = index\"\n\t\t\t\t\t(click)=\"selectCustomUpg(customUpg.id, i, value)\"\n\t\t\t\t\t[class.selected]=\"upgradeContainer.customUpgradeIds[i] == customUpg.id\"\n\t\t\t\t\tclass=\"text-center upgrade-td\">\n\t\t\t\t\t<span [hidden]=\"value==0\">{{value}}</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-center upgrade-td bg-52\">\n\t\t\t\t\t+{{sumCustomUpg(customUpg.id)}}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"8\" class=\"text-center border-left-blue\" style=\"background-color:#323232!important;\">\n\t\t\t\t\t<span *ngFor=\"let customId of upgradeContainer.customUpgradeIds; let i = index\">\n\t\t\t\t\t\t<span [ngClass]=\"'hex-' + customId\" style=\"font-size: 22px;\">&#9672;</span>\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-center bg-52\" (click)=\"selectUpgrade()\" style=\"cursor:pointer;\">\n\t\t\t\t\t<button type=\"button\" class=\"text-white\">OK</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</table>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nimport { VirtualScrollerComponent } from 'ngx-virtual-scroller';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataService } from '../../services/data.service';\nimport { SlotService } from '../../services/slot.service';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { WeaponType } from '../../types/weapon.type';\n\n@Component({\n\tselector: 'mhw-builder-weapon-list',\n\ttemplateUrl: './weapon-list.component.html',\n\tstyleUrls: ['./weapon-list.component.scss']\n})\nexport class WeaponListComponent implements OnInit {\n\tpublic itemTypes = ItemType;\n\tpublic equipmentCategoryType = EquipmentCategoryType;\n\tprivate _itemType: ItemType;\n\tprivate _onlyIceborne: boolean;\n\tprivate searchLength = 0;\n\n\t@Input()\n\tset itemType(itemType: ItemType) {\n\t\tthis._itemType = itemType;\n\t\tthis.loadItems();\n\t}\n\tget itemType(): ItemType { return this._itemType; }\n\n\t@Input()\n\tset onlyIceborne(onlyIceborne: boolean) {\n\t\tthis._onlyIceborne = onlyIceborne;\n\t\tthis.applyIceborneFilter();\n\t\tthis.search({ key: 'Filter' }, this.searchBox.nativeElement.value);\n\t\tthis.weaponTypeSort = '';\n\t}\n\tget onlyIceborne(): boolean { return this._onlyIceborne; }\n\n\t@Output() itemSelected = new EventEmitter<ItemModel>();\n\n\t@ViewChild('searchBox', { static: true }) searchBox: ElementRef;\n\t@ViewChild('itemList') itemList: VirtualScrollerComponent;\n\n\titems: ItemModel[];\n\titemsWorld: ItemModel[];\n\titemsIceborne: ItemModel[];\n\tfilteredItems: ItemModel[];\n\tvirtualItems: ItemModel[];\n\tweaponTypeFilter?: WeaponType;\n\tweaponTypeSort: String;\n\n\tshowFilterContainer = true;\n\tshowSortContainer = true;\n\n\tchildHeight: number;\n\n\t@HostListener('window:resize')\n\tonResize() {\n\t\tthis.refreshList();\n\t}\n\n\tconstructor(\n\t\tprivate slotService: SlotService,\n\t\tpublic dataService: DataService,\n\t) {\n\t\tthis.items = this.dataService.getWeapons();\n\t}\n\n\tngOnInit() {\n\t\tthis.slotService.weaponSlotSelected$.subscribe(slot => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.searchBox.nativeElement.focus();\n\t\t\t\tthis.searchBox.nativeElement.select();\n\t\t\t}, 250);\n\t\t});\n\t}\n\n\trefreshList() {\n\t\tif (this.itemList) {\n\t\t\tthis.itemList.refresh();\n\t\t}\n\t}\n\n\tonItemListUpdate(items: ItemModel[]) {\n\t\tthis.virtualItems = items;\n\t}\n\n\tloadItems() {\n\t\tthis.itemsWorld = this.items.filter(item => item.id < 1000);\n\t\tthis.itemsIceborne = this.items.filter(item => item.id >= 1000);\n\t\tthis.resetSearchResults();\n\t\tsetTimeout(() => this.searchBox.nativeElement.focus(), 250);\n\t}\n\n\tsearch(event, query: string) {\n\t\tif (query) {\n\t\t\tif (query.length < this.searchLength || (event && (event.key === 'FilterHard' || event.key === 'Backspace' || event.key === 'Delete'))) {\n\t\t\t\tthis.applyIceborneFilter();\n\t\t\t}\n\n\t\t\tif (query.length > 1) {\n\t\t\t\tquery = query.toLowerCase().trim();\n\t\t\t\tconst queryParts = query.split(' ');\n\n\t\t\t\tif (this.filteredItems) {\n\t\t\t\t\tfor (const item of this.filteredItems) {\n\t\t\t\t\t\tconst itemName = item.name.toLowerCase();\n\n\t\t\t\t\t\tconst match = _.some(queryParts, queryPart => {\n\t\t\t\t\t\t\tconst nameMatch = itemName.includes(queryPart);\n\t\t\t\t\t\t\tconst skillMatch = _.some(item.skills, skill => skill.id.toLowerCase().includes(queryPart));\n\t\t\t\t\t\t\tconst tagMatch = _.some(item.tags, tag => tag.toLowerCase().includes(queryPart));\n\t\t\t\t\t\t\tconst monstersMatch = _.some(item.monsters, tag => tag.toLowerCase().includes(queryPart));\n\n\t\t\t\t\t\t\treturn nameMatch || skillMatch || tagMatch || monstersMatch;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tthis.filteredItems = _.reject(this.filteredItems, i => i.name === item.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.applyWeaponFilter();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.resetSearchResults();\n\t\t}\n\t}\n\n\tresetSearchResults() {\n\t\tthis.searchBox.nativeElement.value = null;\n\t\tthis.applyIceborneFilter();\n\t\tthis.applyWeaponFilter();\n\t\tthis.weaponTypeSort = '';\n\t}\n\n\tapplyWeaponFilter() {\n\t\tif (this.filteredItems && this.weaponTypeFilter && this.itemType == ItemType.Weapon) {\n\t\t\tthis.filteredItems = _.reject(this.filteredItems, item => item.weaponType != this.weaponTypeFilter);\n\t\t}\n\t}\n\n\tapplyIceborneFilter() {\n\t\tif (this.onlyIceborne) {\n\t\t\tthis.filteredItems = this.itemsIceborne;\n\t\t} else {\n\t\t\tthis.filteredItems = this.itemsIceborne.concat(this.itemsWorld);\n\t\t}\n\t}\n\n\tweaponFilterClicked(weaponType: WeaponType) {\n\t\tif (this.weaponTypeFilter) {\n\t\t\tif (this.weaponTypeFilter == weaponType) {\n\t\t\t\tthis.weaponTypeFilter = null;\n\t\t\t\tthis.search({ key: 'FilterHard' }, this.searchBox.nativeElement.value);\n\t\t\t} else {\n\t\t\t\tthis.weaponTypeFilter = weaponType;\n\t\t\t\tthis.search({ key: 'FilterHard' }, this.searchBox.nativeElement.value);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.weaponTypeFilter = weaponType;\n\t\t\tthis.search({ key: 'FilterSoft' }, this.searchBox.nativeElement.value);\n\t\t}\n\n\t\tthis.weaponTypeSort = '';\n\t}\n\n\tselectItem(item: ItemModel) {\n\t\tif (item.weaponType == WeaponType.LightBowgun || item.weaponType == WeaponType.HeavyBowgun) {\n\t\t\titem.ammoCapacities = this.dataService.getAmmoCapacities(item.id);\n\t\t} else if (item.weaponType == WeaponType.HuntingHorn && item.otherData) {\n\t\t\titem.melodies = this.dataService.getMelodies(item.otherData.map(other => other.value).join(';'));\n\t\t}\n\n\t\tconst newItem = Object.assign({}, item);\n\t\tthis.slotService.selectItem(newItem);\n\t}\n\n\tgetSkillCount(item: ItemModel, skill: SkillModel): string {\n\t\tconst itemSkill = _.find(item.skills, s => s.id == skill.id);\n\t\tconst result = `${itemSkill.level}/${skill.levels.length}`;\n\t\treturn result;\n\t}\n\n\tgetMonsterIcon(monster: string, item: ItemModel): string {\n\t\tif (monster != 'element') {\n\t\t\treturn `assets/images/monsters/${monster}.png`;\n\t\t} else {\n\t\t\tif (item.ailment) {\n\t\t\t\treturn `assets/images/${item.ailment.toLowerCase()}-icon.png`;\n\t\t\t} else if (item.element) {\n\t\t\t\treturn `assets/images/${item.element.toLowerCase()}-icon.png`;\n\t\t\t} else {\n\t\t\t\treturn `assets/images/monsters/question.png`;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElementIcon(item: ItemModel): string {\n\t\tif (item.element) {\n\t\t\treturn `assets/images/${item.element.toLowerCase()}${item.elementHidden ? '-gray' : ''}-icon.png`;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetAilmentIcon(item: ItemModel): string {\n\t\tif (item.ailment) {\n\t\t\treturn `assets/images/${item.ailment.toLowerCase()}${item.ailmentHidden ? '-gray' : ''}-icon.png`;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tweaponSortByAttack() {\n\t\tthis.weaponTypeSort = 'ATK';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.baseAttack > item2.baseAttack) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.baseAttack < item2.baseAttack) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByAffinity() {\n\t\tthis.weaponTypeSort = 'AFN';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.baseAffinityPercent > item2.baseAffinityPercent) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.baseAffinityPercent < item2.baseAffinityPercent) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByAilment() {\n\t\tthis.weaponTypeSort = 'AIL';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.ailment && !item2.ailment || item1.ailmentBaseAttack > item2.ailmentBaseAttack) {\n\t\t\t\treturn -1;\n\t\t\t} else if (!item1.ailment && item2.ailment || item1.ailmentBaseAttack < item2.ailmentBaseAttack) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByElement() {\n\t\tthis.weaponTypeSort = 'ELE';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.element && !item2.element || item1.elementBaseAttack > item2.elementBaseAttack) {\n\t\t\t\treturn -1;\n\t\t\t} else if (!item1.element && item2.element || item1.elementBaseAttack < item2.elementBaseAttack) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortByDefense() {\n\t\tthis.weaponTypeSort = 'DEF';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tif (item1.defense > item2.defense) {\n\t\t\t\treturn -1;\n\t\t\t} else if (item1.defense < item2.defense) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortBySharpness() {\n\t\tthis.weaponTypeSort = 'SHARP';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet sharp1 = -1;\n\t\t\tlet sharp2 = -1;\n\t\t\tif (!item1.sharpnessDataNeeded && item1.sharpnessLevelsBar.length > 0) {\n\t\t\t\tif (item1.sharpnessLevelsBar[item1.sharpnessLevelsBar.length - 1] > 0) {\n\t\t\t\t\tsharp1 = item1.sharpnessLevelsBar.length * 100 + item1.sharpnessLevelsBar[item1.sharpnessLevelsBar.length - 1];\n\t\t\t\t} else {\n\t\t\t\t\tsharp1 = (item1.sharpnessLevelsBar.length - 1) * 100 + item1.sharpnessLevelsBar[item1.sharpnessLevelsBar.length - 2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!item2.sharpnessDataNeeded && item2.sharpnessLevelsBar.length > 0) {\n\t\t\t\tif (item2.sharpnessLevelsBar[item2.sharpnessLevelsBar.length - 1] > 0) {\n\t\t\t\t\tsharp2 = item2.sharpnessLevelsBar.length * 100 + item2.sharpnessLevelsBar[item2.sharpnessLevelsBar.length - 1];\n\t\t\t\t} else {\n\t\t\t\t\tsharp2 = (item2.sharpnessLevelsBar.length - 1) * 100 + item2.sharpnessLevelsBar[item2.sharpnessLevelsBar.length - 2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (sharp1 > sharp2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (sharp1 < sharp2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n\n\tweaponSortBySlots() {\n\t\tthis.weaponTypeSort = 'SLOT';\n\t\tthis.filteredItems.sort(function (item1, item2) {\n\t\t\tlet slotValue1 = 0;\n\t\t\tlet slotValue2 = 0;\n\n\t\t\tif (item1.slots.length > 0) {\n\t\t\t\tslotValue1 += item1.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item1.slots.length > 1) {\n\t\t\t\tslotValue1 += item1.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item1.slots.length > 2) {\n\t\t\t\tslotValue1 += item1.slots[2].level;\n\t\t\t}\n\t\t\tif (item2.slots.length > 0) {\n\t\t\t\tslotValue2 += item2.slots[0].level * 100;\n\t\t\t}\n\t\t\tif (item2.slots.length > 1) {\n\t\t\t\tslotValue2 += item2.slots[1].level * 10;\n\t\t\t}\n\t\t\tif (item2.slots.length > 2) {\n\t\t\t\tslotValue2 += item2.slots[2].level;\n\t\t\t}\n\n\t\t\tif (slotValue1 > slotValue2) {\n\t\t\t\treturn -1;\n\t\t\t} else if (slotValue1 < slotValue2) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tthis.virtualItems = this.filteredItems;\n\t}\n}\n","<div class=\"container\">\n\t<div class=\"search-container\">\n\t\t<input #searchBox (keyup)=\"search($event, searchBox.value)\" placeholder=\"Search names, skills, monster\" />\n\t\t<button type=\"button\" class=\"iceborne-button\" (click)=\"onlyIceborne = !onlyIceborne\" title=\"Only Iceborne\">\n\t\t\t<i class=\"fas fa-toggle-on\" [hidden]=\"!onlyIceborne\"></i>\n\t\t\t<i class=\"fas fa-toggle-off\" [hidden]=\"onlyIceborne\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"sort-button\" (click)=\"showSortContainer=!showSortContainer\">\n\t\t\t<i class=\"fas fa-sort-amount-up\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"filter-button\" (click)=\"showFilterContainer=!showFilterContainer\">\n\t\t\t<i class=\"fas fa-filter\"></i>\n\t\t</button>\n\t\t<button type=\"button\" class=\"clear-button\" (click)=\"resetSearchResults()\">\n\t\t\t<i class=\"fas fa-times\"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=\"filter-container\" *ngIf=\"itemType == 'Weapon' && showFilterContainer\">\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'GreatSword'\"\n\t\t\t(click)=\"weaponFilterClicked('GreatSword')\" title=\"Great Sword\">\n\t\t\t<img src=\"assets/images/weapons/greatsword-icon.png\" alt=\"greatsword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwordAndShield'\"\n\t\t\t(click)=\"weaponFilterClicked('SwordAndShield')\" title=\"Sword and Shield\">\n\t\t\t<img src=\"assets/images/weapons/swordandshield-icon.png\" alt=\"Sword and Shield\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'DualBlades'\"\n\t\t\t(click)=\"weaponFilterClicked('DualBlades')\" title=\"Dual Blades\">\n\t\t\t<img src=\"assets/images/weapons/dualblades-icon.png\" alt=\"Dual Blades\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LongSword'\"\n\t\t\t(click)=\"weaponFilterClicked('LongSword')\" title=\"Long Sword\">\n\t\t\t<img src=\"assets/images/weapons/longsword-icon.png\" alt=\"Long Sword\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Hammer'\"\n\t\t\t(click)=\"weaponFilterClicked('Hammer')\" title=\"Hammer\">\n\t\t\t<img src=\"assets/images/weapons/hammer-icon.png\" alt=\"Hammer\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HuntingHorn'\"\n\t\t\t(click)=\"weaponFilterClicked('HuntingHorn')\" title=\"Hunting Horn\">\n\t\t\t<img src=\"assets/images/weapons/huntinghorn-icon.png\" alt=\"Hunting Horn\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Lance'\"\n\t\t\t(click)=\"weaponFilterClicked('Lance')\" title=\"Lance\">\n\t\t\t<img src=\"assets/images/weapons/lance-icon.png\" alt=\"Lance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Gunlance'\"\n\t\t\t(click)=\"weaponFilterClicked('Gunlance')\" title=\"Gunlance\">\n\t\t\t<img src=\"assets/images/weapons/gunlance-icon.png\" alt=\"Gunlance\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'SwitchAxe'\"\n\t\t\t(click)=\"weaponFilterClicked('SwitchAxe')\" title=\"Switch Axe\">\n\t\t\t<img src=\"assets/images/weapons/switchaxe-icon.png\" alt=\"Switch Axe\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'ChargeBlade'\"\n\t\t\t(click)=\"weaponFilterClicked('ChargeBlade')\" title=\"Charge Blade\">\n\t\t\t<img src=\"assets/images/weapons/chargeblade-icon.png\" alt=\"Charge Blade\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'InsectGlaive'\"\n\t\t\t(click)=\"weaponFilterClicked('InsectGlaive')\" title=\"Insect Glaive\">\n\t\t\t<img src=\"assets/images/weapons/insectglaive-icon.png\" alt=\"Insect Glaive\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'Bow'\"\n\t\t\t(click)=\"weaponFilterClicked('Bow')\" title=\"Bow\">\n\t\t\t<img src=\"assets/images/weapons/bow-icon.png\" alt=\"Bow\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'LightBowgun'\"\n\t\t\t(click)=\"weaponFilterClicked('LightBowgun')\" title=\"Light Bowgun\">\n\t\t\t<img src=\"assets/images/weapons/lightbowgun-icon.png\" alt=\"LBG\">\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-filter\" [class.selected]=\"weaponTypeFilter == 'HeavyBowgun'\"\n\t\t\t(click)=\"weaponFilterClicked('HeavyBowgun')\" title=\"Heavy Bowgun\">\n\t\t\t<img src=\"assets/images/weapons/heavybowgun-icon.png\" alt=\"HBG\">\n\t\t</button>\n\t</div>\n\n\t<div class=\"sort-container\" *ngIf=\"showSortContainer\">\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'ATK'\"\n\t\t\t(click)=\"weaponSortByAttack()\">\n\t\t\t<!--<img src=\"assets/images/attack-icon.png\" />-->\n\t\t\t<span>ATK</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'AFN'\"\n\t\t\t(click)=\"weaponSortByAffinity()\">\n\t\t\t<!--<img src=\"assets/images/affinity-icon.png\" />-->\n\t\t\t<span>AFN</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'AIL'\"\n\t\t\t(click)=\"weaponSortByAilment()\">\n\t\t\t<span>AIL</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'ELE'\"\n\t\t\t(click)=\"weaponSortByElement()\">\n\t\t\t<span>ELE</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'DEF'\"\n\t\t\t(click)=\"weaponSortByDefense()\">\n\t\t\t<span>DEF</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'SHARP'\"\n\t\t\t(click)=\"weaponSortBySharpness()\">\n\t\t\t<span>SHARP</span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"weapon-sort\" [class.selected]=\"weaponTypeSort == 'SLOT'\"\n\t\t\t(click)=\"weaponSortBySlots()\">\n\t\t\t<span>SLOT</span>\n\t\t</button>\n\t</div>\n\n\t<virtual-scroller id=\"items-list\" #itemList class=\"scroll-container\" *ngIf=\"items\" [items]=\"filteredItems\"\n\t\t(vsUpdate)=\"onItemListUpdate($event)\" [enableUnequalChildrenSizes]=\"true\" [bufferAmount]=\"10\">\n\t\t<div *ngFor=\"let item of virtualItems\" class=\"scroll-item-container\" (click)=\"selectItem(item)\">\n\t\t\t<div class=\"name-container\">\n\t\t\t\t<div class=\"name\" [ngClass]=\"'vColor-'+ item.vColor\">\n\t\t\t\t\t{{item.name}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"upgrade\" *ngIf=\"item.upgradeType==1\">\n\t\t\t\t\t<img src=\"assets/images/custom-upgrade.png\" alt=\"upgrade\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"slots\" *ngIf=\"item.slots.length > 0\">\n\t\t\t\t\t<div *ngIf=\"item.slots[0]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[0]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[1]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[1]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"item.slots[2]?.level\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/decorations/' + item?.slots[2]?.level + '-0.png'\" alt=\"slot\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"type\">\n\t\t\t\t\t<span *ngIf=\"item.equipmentCategory == equipmentCategoryType.Armor\">{{item.itemType}}</span>\n\t\t\t\t\t<img *ngIf=\"item.equipmentCategory == equipmentCategoryType.Weapon\"\n\t\t\t\t\t\t[src]=\"'assets/images/weapons/' + dataService.getWeaponTypeIcon(item.weaponType) + '-icon.png'\"\n\t\t\t\t\t\talt=\"weapon\" />\n\t\t\t\t\t<span class=\"typeName\"\n\t\t\t\t\t\t*ngIf=\"item.equipmentCategory == equipmentCategoryType.Weapon\">{{dataService.getWeaponTypeName(item.weaponType)}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rarity\" *ngIf=\"item.rarity\" [ngClass]=\"'rarity-'+item?.rarity\">\n\t\t\t\t\t<span class=\"r1\">Rarity </span><span class=\"r2\">R</span>{{item.rarity}}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"stats-container\">\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/attack-icon.png\" alt=\"attack\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.baseAttack}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/affinity-icon.png\" alt=\"affinity\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [class.red]=\"item.baseAffinityPercent < 0\">{{item.baseAffinityPercent}}%\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"monsters-container\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/defense-icon.png\" alt=\"defense\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.defense}}</div>\n\t\t\t\t\t<div class=\"monster-icon\" *ngFor=\"let monster of item.monsters\">\n\t\t\t\t\t\t<img [src]=\"getMonsterIcon(monster, item)\" [alt]=\"monster\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{{monster}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.ailment\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"getAilmentIcon(item)\" alt=\"ailment\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [style.color]=\"item.ailmentHidden ? 'gray' : 'white'\">\n\t\t\t\t\t\t{{item.ailmentBaseAttack}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.element\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"getElementIcon(item)\" alt=\"element\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [style.color]=\"item.elementHidden ? 'gray' : 'white'\">\n\t\t\t\t\t\t{{item.elementBaseAttack}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.sharpnessLevelsBar.length > 1 && !item.sharpnessDataNeeded\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/sharpness3-icon.png\" alt=\"sharpness\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\" [ngClass]=\"['sharp-' + item.sharpnessMaxColorIndex]\">\n\t\t\t\t\t\t{{item.sharpnessMaxLevel * 10}} <i class=\"fas fa-circle fa-sm\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.ammoCapacities?.deviation\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/deviation-icon.png\" alt=\"deviation\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.ammoCapacities.deviation[0]}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.ammoCapacities?.specialAmmo\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/special-ammo-icon.png\" alt=\"special ammo\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.ammoCapacities.specialAmmo}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.weaponType=='Gunlance'\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img src=\"assets/images/special-ammo-icon.png\" alt=\"special ammo\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.otherData[0].value}}-{{item.otherData[0].data}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.weaponType=='InsectGlaive'\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/dust-effect-icon.png'\" alt=\"boost\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">\n\t\t\t\t\t\t{{item.otherData[0].value}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.weaponType=='SwitchAxe' || item.weaponType=='ChargeBlade'\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + item.otherData[0].value + '.png'\" alt=\"phial\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">\n\t\t\t\t\t\t{{item.otherData[0].value}}\n\t\t\t\t\t\t<span *ngIf=\"item.otherData[0] && item.otherData[0].data\">- {{item.otherData[0].data}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"coats-container\" *ngIf=\"item.weaponType=='Bow'\">\n\t\t\t\t\t<div class=\"icon-container\" *ngFor=\"let phial of item.otherData\">\n\t\t\t\t\t\t<img [src]=\"'assets/images/phials/phial-' + phial.value + '.png'\" alt=\"coat\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"stat-container\" *ngIf=\"item.elderseal\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<img *ngIf=\"item.elderseal\" src=\"assets/images/elderseal.png\" alt=\"elderseal\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"stat-value\">{{item.elderseal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"skills-container\">\n\t\t\t\t<div class=\"skill-container\" *ngFor=\"let skill of dataService.getSkills(item.skills)\">\n\t\t\t\t\t<div class=\"count\">\n\t\t\t\t\t\t{{getSkillCount(item, skill)}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t{{skill.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</virtual-scroller>\n</div>","import { NgModule } from '@angular/core';\nimport { AmmoCapacitiesLoader } from './loaders/ammo-capacities.loader';\nimport { ArmorLoader } from './loaders/armor.loader';\nimport { AugmentationsLoader } from './loaders/augmentations.loader';\nimport { AwakeningsLoader } from './loaders/awakenings.loader';\nimport { CharmsLoader } from './loaders/charms.loader';\nimport { DecorationsLoader } from './loaders/decorations.loader';\nimport { KinsectsLoader } from './loaders/kinsects.loader';\nimport { MelodiesLoader } from './loaders/melodies.loader';\nimport { MelodyEffectLoader } from './loaders/melodyEffect.loader';\nimport { ModificationsLoader } from './loaders/modifications.loader';\nimport { SetBonusesLoader } from './loaders/set-bonuses.loader';\nimport { SharpnessModifiersLoader } from './loaders/sharpness-modifiers.loader';\nimport { SkillsLoader } from './loaders/skills.loader';\nimport { ToolsLoader } from './loaders/tools.loader';\nimport { UpgradesLoader } from './loaders/upgrades.loader';\nimport { WeaponModifiersLoader } from './loaders/weapon-modifiers.loader';\nimport { WeaponsLoader } from './loaders/weapons.loader';\n\n@NgModule({\n\tproviders: [\n\t\tWeaponsLoader,\n\t\tArmorLoader,\n\t\tCharmsLoader,\n\t\tDecorationsLoader,\n\t\tAugmentationsLoader,\n\t\tModificationsLoader,\n\t\tKinsectsLoader,\n\t\tSkillsLoader,\n\t\tSetBonusesLoader,\n\t\tSharpnessModifiersLoader,\n\t\tWeaponModifiersLoader,\n\t\tAmmoCapacitiesLoader,\n\t\tMelodiesLoader,\n\t\tMelodyEffectLoader,\n\t\tToolsLoader,\n\t\tUpgradesLoader,\n\t\tAwakeningsLoader\n\t],\n})\nexport class DataModule { }\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { AmmoCapacitiesModel } from '../../models/ammo-capacities.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class AmmoCapacitiesLoader extends DataLoader<AmmoCapacitiesModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { ValuesParser } from '../parsers/values.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class ArmorLoader extends DataLoader<ItemModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ItemModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'defense',\n\t\t\t\tparser: new ValuesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t}\n\t\t\t,\n\t\t\t{\n\t\t\t\tcolumnName: 'tags',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t]);\n\n\t\t_.each(items, item => {\n\t\t\titem.equipmentCategory = EquipmentCategoryType.Armor;\n\t\t});\n\t\treturn items;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { AugmentationModel } from '../../models/augmentation.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class AugmentationsLoader extends DataLoader<AugmentationModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { AwakeningModel } from '../../models/awakening.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class AwakeningsLoader extends DataLoader<AwakeningModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class CharmsLoader extends DataLoader<ItemModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ItemModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'tags',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t]);\n\n\t\t_.each(items, charm => {\n\t\t\tcharm.itemType = ItemType.Charm;\n\t\t\tcharm.equipmentCategory = EquipmentCategoryType.Charm;\n\t\t});\n\n\t\treturn items;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as ld from 'lodash';\nimport { forkJoin, Observable, Observer, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { ColumnParser } from '../models/column-parser.model';\n\n@Injectable()\nexport abstract class DataLoader<T> {\n\treadonly defaultLocale = 'en-US';\n\treadonly delimeter = '\\t';\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) { }\n\n\tprotected parse(_: string): T[] {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tpublic load(resourceName: string, withLocale: boolean = true): Observable<T[]> {\n\t\tlet result: Observable<T[]>;\n\n\t\tconst ext = resourceName.split('.').pop();\n\t\tif (ext.toLowerCase() === 'json') {\n\t\t\tresult = new Observable((observer: Observer<T[]>) => {\n\t\t\t\tforkJoin(\n\t\t\t\t\tthis.getResources(resourceName, true, withLocale)\n\t\t\t\t).subscribe(results => {\n\t\t\t\t\tconst items = ld.map(results[0], r => {\n\t\t\t\t\t\tconst txVal = ld.find(results[1], { id: r.id });\n\t\t\t\t\t\tconst newVal = ld.assignIn(r, txVal);\n\t\t\t\t\t\treturn newVal;\n\t\t\t\t\t});\n\t\t\t\t\tobserver.next(items);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tresult = new Observable((observer: Observer<T[]>) => {\n\t\t\t\tforkJoin(\n\t\t\t\t\tthis.getResources(resourceName, false, withLocale)\n\t\t\t\t).subscribe(results => {\n\t\t\t\t\tconst data = this.parse(results[0]);\n\t\t\t\t\tconst localeData = results[1] ? this.parse(results[1]) : null;\n\t\t\t\t\tconst items = ld.map(data, r => ld.assignIn(r, ld.find(localeData, { id: (r as any).id })));\n\t\t\t\t\tobserver.next(items);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate getResources(resourceName: string, json: boolean, withLocale: boolean): Observable<any>[] {\n\t\tconst resources: Observable<any>[] = [];\n\t\tconst locale = this.getLocale();\n\n\t\tif (json) {\n\t\t\tresources.push(this.loadJsonResource(resourceName, false));\n\t\t\tif (withLocale && locale !== this.defaultLocale) {\n\t\t\t\tresources.push(this.loadJsonResource(resourceName, true));\n\t\t\t}\n\t\t} else {\n\t\t\tresources.push(this.loadTextResource(resourceName, false));\n\t\t\tif (withLocale && locale !== this.defaultLocale) {\n\t\t\t\tresources.push(this.loadTextResource(resourceName, true));\n\t\t\t}\n\t\t}\n\n\t\treturn resources;\n\t}\n\n\tprivate loadJsonResource(resourceName: string, fromLocale: boolean): Observable<T[]> {\n\t\treturn this.http.get<T[]>(this.getPath(resourceName, fromLocale)).pipe(\n\t\t\tcatchError(() => {\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate loadTextResource(resourceName: string, fromLocale: boolean): Observable<string> {\n\t\treturn this.http.get(this.getPath(resourceName, fromLocale), { responseType: 'text' }).pipe(\n\t\t\tcatchError(() => {\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate getPath(resourceName: string, fromLocale: boolean): string {\n\t\tlet path: string;\n\t\tconst locale = this.getLocale();\n\t\tif (fromLocale) {\n\t\t\tpath = `./assets/${locale}/${resourceName}`;\n\t\t} else {\n\t\t\tpath = `./assets/${resourceName}`;\n\t\t}\n\t\treturn path;\n\t}\n\n\tprivate getLocale(): string {\n\t\tlet locale = localStorage.getItem('locale');\n\t\tif (!locale) {\n\t\t\tlocale = navigator.languages[0];\n\t\t\tlocalStorage.setItem('locale', locale);\n\t\t}\n\n\t\treturn locale;\n\t}\n\n\tprotected parseTextContent(content: string, columnParsers: ColumnParser[] = []): T[] {\n\t\tconst result: Array<T> = [];\n\t\tconst rows = content.split('\\n');\n\t\tconst headerColumns = rows[0].split(this.delimeter);\n\n\t\tfor (let i = 1; i < rows.length; i++) {\n\t\t\tconst row = rows[i];\n\t\t\tconst rowValues = row.split(this.delimeter);\n\t\t\tconst item: any = {};\n\n\t\t\tfor (let j = 0; j < rowValues.length; j++) {\n\t\t\t\tconst columnHeader = headerColumns[j];\n\t\t\t\tconst rowValue = rowValues[j];\n\n\t\t\t\tconst columnParser = ld.find(columnParsers, p => p.columnName == columnHeader);\n\t\t\t\tif (columnParser) {\n\t\t\t\t\titem[columnHeader] = columnParser.parser.parse(rowValue);\n\t\t\t\t} else if (rowValue) {\n\t\t\t\t\tif (!Number.isNaN(Number(rowValue)) && rowValue != '') {\n\t\t\t\t\t\titem[columnHeader] = Number(rowValue);\n\t\t\t\t\t} else if (rowValue.toLowerCase() === 'true' || rowValue.toLowerCase() === 'false') {\n\t\t\t\t\t\titem[columnHeader] = rowValue === 'true';\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem[columnHeader] = rowValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(item);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ItemModel } from '../../models/item.model';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { DataLoader } from './data.loader';\nimport { DecorationModel } from 'src/app/models/decoration.model';\n\n@Injectable()\nexport class DecorationsLoader extends DataLoader<DecorationModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): DecorationModel[] {\n\t\treturn this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { KinsectModel } from '../../models/kinsect.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class KinsectsLoader extends DataLoader<KinsectModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): KinsectModel[] {\n\t\treturn this.parseTextContent(content);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { MelodiesModel } from '../../models/melodies.model';\nimport { MelodiesEffectParser } from '../parsers/melodies-effect.parser';\nimport { MelodiesParser } from '../parsers/melodies.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class MelodiesLoader extends DataLoader<MelodiesModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): MelodiesModel[] {\n\t\tconst melodies = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'notes',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'melodies',\n\t\t\t\tparser: new MelodiesParser()\n\t\t\t}\n\t\t\t,\n\t\t\t{\n\t\t\t\tcolumnName: 'melodiesEffect',\n\t\t\t\tparser: new MelodiesEffectParser()\n\t\t\t}\n\t\t]);\n\n\t\treturn melodies;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { MelodyEffectModel } from '../../models/melody-effect.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class MelodyEffectLoader extends DataLoader<MelodyEffectModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): MelodyEffectModel[] {\n\t\tconst melodyEffect = this.parseTextContent(content, []);\n\n\t\treturn melodyEffect;\n\t}\n}\n\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ModificationModel } from '../../models/modification.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class ModificationsLoader extends DataLoader<ModificationModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { SetBonusModel } from '../../models/set-bonus.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class SetBonusesLoader extends DataLoader<SetBonusModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { SharpnessModifierModel } from '../../models/sharpness-modifier.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class SharpnessModifiersLoader extends DataLoader<SharpnessModifierModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { SkillModel } from '../../models/skill.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class SkillsLoader extends DataLoader<SkillModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ToolModel } from '../../models/tool.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class ToolsLoader extends DataLoader<ToolModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ToolModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t}\n\t\t]);\n\t\t_.each(items, tool => {\n\t\t\ttool.equipmentCategory = EquipmentCategoryType.Tool;\n\t\t});\n\t\treturn items;\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { UpgradeModel } from '../../models/upgrade.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class UpgradesLoader extends DataLoader<UpgradeModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { WeaponModifierModel } from '../../models/weapon-modifier.model';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class WeaponModifiersLoader extends DataLoader<WeaponModifierModel> {\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ItemModel } from '../../models/item.model';\nimport { EquipmentCategoryType } from '../../types/equipment-category.type';\nimport { ItemType } from '../../types/item.type';\nimport { OtherDataParser } from '../parsers/other-data.parser';\nimport { SkillReferencesParser } from '../parsers/skill-references.parser';\nimport { SlotsParser } from '../parsers/slots.parser';\nimport { TagsParser } from '../parsers/tags.parser';\nimport { ValuesParser } from '../parsers/values.parser';\nimport { DataLoader } from './data.loader';\n\n@Injectable()\nexport class WeaponsLoader extends DataLoader<ItemModel> {\n\n\tconstructor(\n\t\tprotected http: HttpClient\n\t) {\n\t\tsuper(http);\n\t}\n\n\tprotected parse(content: string): ItemModel[] {\n\t\tconst items = this.parseTextContent(content, [\n\t\t\t{\n\t\t\t\tcolumnName: 'defense',\n\t\t\t\tparser: new ValuesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'slots',\n\t\t\t\tparser: new SlotsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'sharpnessLevelsBar',\n\t\t\t\tparser: new ValuesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'monsters',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'tags',\n\t\t\t\tparser: new TagsParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'skills',\n\t\t\t\tparser: new SkillReferencesParser()\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolumnName: 'otherData',\n\t\t\t\tparser: new OtherDataParser()\n\t\t\t}\n\t\t]);\n\n\t\titems.forEach(item => {\n\t\t\titem.equipmentCategory = EquipmentCategoryType.Weapon;\n\t\t\titem.itemType = ItemType.Weapon;\n\t\t\tif (item.sharpnessLevelsBar && !isNaN(item.sharpnessLevelsBar[0])) {\n\t\t\t\tconst total = item.sharpnessLevelsBar.reduce((a, b) => a + b, 0);\n\t\t\t\tconst over = total - 40;\n\t\t\t\tfor (let i = item.sharpnessLevelsBar.length - 1; i >= 0; i--) {\n\t\t\t\t\tconst level = item.sharpnessLevelsBar[i];\n\t\t\t\t\tif (level > 0) {\n\t\t\t\t\t\titem.sharpnessMaxLevel = level - over;\n\t\t\t\t\t\titem.sharpnessMaxColorIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn items;\n\t}\n}\n","export abstract class DataParser<T> {\n\tabstract parse(data: string): T[];\n}\n","import { MelodyEffectModel } from '../../models/melody-effect.model';\nimport { DataParser } from './data-parser';\n\nexport class MelodiesEffectParser extends DataParser<MelodyEffectModel> {\n\tparse(data: string): MelodyEffectModel[] {\n\t\tconst effects = data.split(';');\n\t\tconst melodiesEffect: MelodyEffectModel[] = [];\n\t\tlet count = 0;\n\t\tfor (const effect of effects) {\n\t\t\tconst melodies = effect.split('+');\n\n\t\t\tfor (const melody of melodies) {\n\t\t\t\tconst values = melody.split('-');\n\t\t\t\tmelodiesEffect.push({\n\t\t\t\t\tid: values[0],\n\t\t\t\t\tlevel: values.length == 2 ? values[1] : null,\n\t\t\t\t\tindex: count\n\t\t\t\t});\n\t\t\t}\n\t\t\tcount += 1;\n\t\t}\n\t\treturn melodiesEffect;\n\t}\n}\n","import { DataParser } from './data-parser';\n\nexport class MelodiesParser extends DataParser<number[]> {\n\tparse(data: string): number[][] {\n\t\tconst result = [];\n\t\tconst melodies = data.split('|');\n\t\tfor (let i = 0; i < melodies.length; i++) {\n\t\t\tconst notes = melodies[i].split(';');\n\t\t\tconst aux = [];\n\t\t\tfor (let j = 0; j < notes.length; j++) {\n\t\t\t\taux.push(parseInt(notes[j], 10));\n\t\t\t}\n\t\t\tresult.push(aux);\n\t\t}\n\t\treturn result;\n\t}\n}\n","import { OtherDataModel } from '../../models/other-data.model';\nimport { DataParser } from './data-parser';\n\nexport class OtherDataParser extends DataParser<OtherDataModel> {\n\tparse(data: string): OtherDataModel[] {\n\t\tconst values = data.split(';');\n\t\tconst otherLevels: OtherDataModel[] = [];\n\t\tfor (const value of values) {\n\t\t\tconst parts = value.split('-');\n\t\t\totherLevels.push({\n\t\t\t\tvalue: parts[0],\n\t\t\t\tdata: parts.length == 2 ? parseInt(parts[1], 10) : null\n\t\t\t});\n\t\t}\n\t\treturn otherLevels;\n\t}\n}\n","import { SkillReferenceModel } from '../../models/skill-reference.model';\nimport { DataParser } from './data-parser';\n\nexport class SkillReferencesParser extends DataParser<SkillReferenceModel> {\n\tparse(data: string): SkillReferenceModel[] {\n\t\tconst values = data.split(';');\n\t\tconst skillRefs: SkillReferenceModel[] = [];\n\t\tif (data) {\n\t\t\tfor (const skill of values) {\n\t\t\t\tconst parts = skill.split('-');\n\t\t\t\tskillRefs.push({\n\t\t\t\t\tid: parts[0],\n\t\t\t\t\tlevel: parts.length > 1 ? Number(parts[1]) : null\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn skillRefs;\n\t}\n}\n","import { SlotModel } from '../../models/slot.model';\nimport { DataParser } from './data-parser';\nimport * as _ from 'lodash';\n\nexport class SlotsParser extends DataParser<SlotModel> {\n\tparse(data: string): SlotModel[] {\n\t\tconst values = data.split(';');\n\t\tconst slots: SlotModel[] = [];\n\t\tfor (const item of _.filter(values, v => v)) {\n\t\t\tslots.push({\n\t\t\t\tlevel: Number(item),\n\t\t\t});\n\t\t}\n\t\treturn slots;\n\t}\n}\n","import { DataParser } from './data-parser';\n\nexport class TagsParser extends DataParser<string> {\n\tparse(data: string): string[] {\n\t\treturn data.split(';');\n\t}\n}\n","import { DataParser } from './data-parser';\n\nexport class ValuesParser extends DataParser<number> {\n\tparse(data: string): number[] {\n\t\tconst result = [];\n\t\tconst aux = data.split(';');\n\t\tfor (let i = 0; i < aux.length; i++) {\n\t\t\tresult.push(parseInt(aux[i], 10));\n\t\t}\n\t\treturn result;\n\t}\n}\n","import { AmmoType } from '../types/ammo.type';\nimport { DeviationType } from '../types/deviation.type';\nimport { SpecialAmmoType } from '../types/special-ammo.type';\n\nexport class AmmoCapacitiesModel {\n\tid: number;\n\tdeviation: DeviationType[];\n\tspecialAmmo: SpecialAmmoType;\n\tammo: AmmoTypeModel[];\n\tmissingData: boolean;\n\tmissingMods: boolean;\n}\n\nexport class AmmoTypeModel {\n\tname: AmmoType;\n\tlevels: AmmoLevelModel[];\n}\n\nexport class AmmoLevelModel {\n\tcapacity: number;\n\ttype: number;\n\trecoil: number[];\n\treload: number[];\n}\n","import { AmmoCapacitiesModel } from './ammo-capacities.model';\nimport { AugmentationModel } from './augmentation.model';\nimport { AwakeningModel } from './awakening.model';\nimport { DecorationModel } from './decoration.model';\nimport { ItemModel } from './item.model';\nimport { KinsectModel } from './kinsect.model';\nimport { MelodiesModel } from './melodies.model';\nimport { MelodyEffectModel } from './melody-effect.model';\nimport { ModificationModel } from './modification.model';\nimport { SetBonusModel } from './set-bonus.model';\nimport { SharpnessModifierModel } from './sharpness-modifier.model';\nimport { SkillModel } from './skill.model';\nimport { ToolModel } from './tool.model';\nimport { UpgradeModel } from './upgrade.model';\nimport { WeaponModifierModel } from './weapon-modifier.model';\n\nexport class AppDataModel {\n\tweaponModifiers: WeaponModifierModel[];\n\tsharpnessModifiers: SharpnessModifierModel[];\n\tweapons: ItemModel[];\n\tarmors: ItemModel[];\n\tcharms: ItemModel[];\n\ttools: ToolModel[];\n\tsetBonuses: SetBonusModel[];\n\tskills: SkillModel[];\n\tdecorations: DecorationModel[];\n\taugmentations: AugmentationModel[];\n\tmodifications: ModificationModel[];\n\tkinsects: KinsectModel[];\n\tammoCapacities: AmmoCapacitiesModel[];\n\tmelodies: MelodiesModel[];\n\tmelodyEffect: MelodyEffectModel[];\n\tupgrades: UpgradeModel[];\n\tawakenings: AwakeningModel[];\n\n\tconstructor() {\n\t\tthis.weaponModifiers = new Array<WeaponModifierModel>();\n\t\tthis.sharpnessModifiers = new Array<SharpnessModifierModel>();\n\t\tthis.weapons = new Array<ItemModel>();\n\t\tthis.armors = new Array<ItemModel>();\n\t\tthis.charms = new Array<ItemModel>();\n\t\tthis.setBonuses = new Array<SetBonusModel>();\n\t\tthis.skills = new Array<SkillModel>();\n\t\tthis.decorations = new Array<DecorationModel>();\n\t\tthis.augmentations = new Array<AugmentationModel>();\n\t\tthis.modifications = new Array<ModificationModel>();\n\t\tthis.kinsects = new Array<KinsectModel>();\n\t\tthis.ammoCapacities = new Array<AmmoCapacitiesModel>();\n\t\tthis.melodies = new Array<MelodiesModel>();\n\t\tthis.melodyEffect = new Array<MelodyEffectModel>();\n\t\tthis.tools = new Array<ToolModel>();\n\t\tthis.upgrades = new Array<UpgradeModel>();\n\t\tthis.awakenings = new Array<AwakeningModel>();\n\t}\n}\n","import { AugmentationLevelModel } from './augmentation-level.model';\n\nexport class AugmentationModel {\n\tid: number;\n\tcode: string;\n\tname: string;\n\tdescription: string;\n\tlevels: AugmentationLevelModel[];\n}\n","import { AwakeningType } from '../types/awakening.type';\n\nexport class AwakeningLevelModel {\n\tid: number;\n\ttype: AwakeningType;\n\tname: string;\n\tshort?: string;\n\tlevel: number;\n\tminLevel: number;\n\tmaxLevel: number;\n\n\tconstructor() {\n\t\tthis.id = 0;\n\t\tthis.type = AwakeningType.None;\n\t\tthis.name = 'None';\n\t\tthis.short = 'None';\n\t\tthis.level = 0;\n\t\tthis.minLevel = 1;\n\t\tthis.maxLevel = 6;\n\t}\n}\n","\nexport class BuffModel {\n\tattackBuff: number;\n\tdeffenseBuff: number;\n\telementBuff: number;\n\n\tconstructor() {\n\t\tthis.attackBuff = 0;\n\t\tthis.deffenseBuff = 0;\n\t\tthis.elementBuff = 0;\n\t}\n}\n","export class BuildModel {\n\tweapon: BuildItemModel;\n\thead: BuildItemModel;\n\tchest: BuildItemModel;\n\thands: BuildItemModel;\n\tlegs: BuildItemModel;\n\tfeet: BuildItemModel;\n\tcharm: BuildItemModel;\n\ttool1: BuildItemModel;\n\ttool2: BuildItemModel;\n}\n\nexport class BuildItemModel {\n\titemId: number;\n\tkinsectId?: number;\n\tkinsectElementId?: number;\n\tdecorationIds?: number[];\n\taugmentationIds?: number[];\n\tupgradeLevels?: number[];\n\tcustomLevelIds?: number[];\n\tawakenings?: number[][];\n\tsetbonusId?: number;\n\tlevel?: number;\n\tmodificationIds: number[];\n\n\telementId?: number;\n\tailmentId?: number;\n}\n","import { SkillReferenceModel } from './skill-reference.model';\n\nexport class CommonModel {\n\tid: number;\n\tcode: string;\n\tname: string;\n\tdescription: string;\n\tlevels: CommonLevelModel[];\n}\n\nexport class CommonLevelModel {\n\tdescription: string;\n\tskills: SkillReferenceModel[];\n}\n","import { ItemType } from '../types/item.type';\nimport { SkillReferenceModel } from './skill-reference.model';\n\nexport class DecorationModel {\n\tid: number;\n\tname: string;\n\tlevel: number;\n\trarity: number;\n\tpriority: number;\n\tskills: SkillReferenceModel[];\n\n\titemId: number;\n\titemType: ItemType;\n\tactive: boolean;\n}\n","import { ModeType } from '../types/mode.type';\nimport { SkillModel } from './skill.model';\n\nexport class EquippedSetBonusModel {\n\tid: string;\n\tname: string;\n\tequippedCount: number;\n\tdetails: EquippedSetBonusDetailModel[];\n\n\tweaponCount: number;\n\theadCount: number;\n\tchestCount: number;\n\tarmsCount: number;\n\twaistCount: number;\n\tlegsCount: number;\n\n\tconstructor() {\n\t\tthis.weaponCount = 0;\n\t\tthis.headCount = 0;\n\t\tthis.chestCount = 0;\n\t\tthis.armsCount = 0;\n\t\tthis.waistCount = 0;\n\t\tthis.legsCount = 0;\n\t}\n}\nexport class EquippedSetBonusDetailModel {\n\trequiredCount: number;\n\tskill: SkillModel;\n\tmode: ModeType;\n\n\tconstructor() {\n\t\tthis.mode = ModeType.Active;\n\t}\n}\n\n","import { SkillModel } from './skill.model';\n\nexport class EquippedSkillModel {\n\tskill: SkillModel;\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tequippedArmorCount: number;\n\tequippedTool1Count: number;\n\tequippedTool2Count: number;\n\tequippedToolActiveCount: number;\n\tequippedCount: number;\n\tsecretLevelCount: number;\n\ttotalLevelCount: number;\n\n\tweaponCount: number; // Weapon\n\theadCount: number; // Helm\n\tchestCount: number; // Chest\n\tarmsCount: number; // Arms\n\twaistCount: number; // Waist\n\tlegsCount: number; // Legs\n\tcharmCount: number; // Charm\n\ttoolCount: number; // Tool\n\n\tisSetBonus: boolean;\n\tisNatureBonus: boolean;\n\trequiredCount?: number;\n\n\thasActiveStats?: boolean;\n\n\tconstructor() {\n\t\tthis.weaponCount = 0;\n\t\tthis.headCount = 0;\n\t\tthis.chestCount = 0;\n\t\tthis.armsCount = 0;\n\t\tthis.waistCount = 0;\n\t\tthis.legsCount = 0;\n\t\tthis.charmCount = 0;\n\t\tthis.toolCount = 0;\n\n\t\tthis.equippedArmorCount = 0;\n\t\tthis.equippedTool1Count = 0;\n\t\tthis.equippedTool2Count = 0;\n\t\tthis.equippedToolActiveCount = 0;\n\t\tthis.equippedCount = 0;\n\n\t\tthis.secretLevelCount = 0;\n\n\t\tthis.isSetBonus = false;\n\t\tthis.isNatureBonus = false;\n\t}\n}\n","import { WeaponType } from '../types/weapon.type';\nimport { OtherDataModel } from './other-data.model';\n\nexport class ExtraDataModel {\n\tweaponType: WeaponType;\n\totherData: OtherDataModel[];\n\ticon?: string;\n}\n","import { AilmentType } from '../types/ailment.type';\nimport { EldersealType } from '../types/elderseal.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { AmmoCapacitiesModel } from './ammo-capacities.model';\nimport { MelodiesModel } from './melodies.model';\nimport { OtherDataModel } from './other-data.model';\nimport { SkillReferenceModel } from './skill-reference.model';\nimport { SlotModel } from './slot.model';\n\nexport class ItemModel {\n\tid: number;\n\tname: string;\n\trarity: number;\n\titemType: ItemType;\n\tequipmentCategory: EquipmentCategoryType;\n\tslots?: SlotModel[];\n\tdefense?: number[];\n\tlevels?: number;\n\n\t// weapon properties\n\tweaponType?: WeaponType;\n\tbaseAttack?: number;\n\tsharpnessDataNeeded: boolean;\n\tsharpnessLevelsBar: number[];\n\tsharpnessMaxLevel?: number;\n\tsharpnessMaxColorIndex?: number;\n\tbaseAffinityPercent?: number;\n\tailment?: AilmentType;\n\tailmentBaseAttack: number;\n\tailmentHidden: boolean;\n\tailmentAttackIncreaseCapOverride: number;\n\telement?: ElementType;\n\telementBaseAttack?: number;\n\telementHidden: boolean;\n\telementAttackIncreaseCapOverride: number;\n\telderseal?: EldersealType;\n\totherData?: OtherDataModel[];\n\tupgradeType?: number;\n\tammoCapacities?: AmmoCapacitiesModel;\n\tmelodies?: MelodiesModel;\n\n\t// armor properties\n\tfireResist: number;\n\twaterResist: number;\n\tthunderResist: number;\n\ticeResist: number;\n\tdragonResist: number;\n\tskills?: SkillReferenceModel[];\n\n\t// tool properties\n\tduration: number;\n\trecharge: number;\n\n\tmonsters?: string[];\n\ttags?: string[];\n\tvColor: number;\n\n\tequippedLevel?: number;\n\tactive: boolean;\n}\n","import { AttackType } from '../types/attack.type';\nimport { DustEffectType } from '../types/dust-effect.type';\nimport { ElementType } from '../types/element.type';\nimport { KinsectType } from '../types/kinsect.type';\n\nexport class KinsectModel {\n\tid: number;\n\trarity: number;\n\ttype: KinsectType;\n\tname: string;\n\tattackType: AttackType;\n\tdustEffect: DustEffectType;\n\telement: ElementType;\n\tpower: number;\n\tspeed: number;\n\theal: number;\n\telementPower?: number;\n}\n","import { MelodyEffectModel } from './melody-effect.model';\n\nexport class MelodiesModel {\n\tid: number;\n\tnotes: string[];\n\tmelodies: number[][];\n\tmelodiesEffect: MelodyEffectModel[];\n\tmelodyEffects: MelodiesDetailModel[];\n}\n\nexport class MelodiesDetailModel {\n\tmelody: number[];\n\teffects: MelodyEffectModel[];\n}\n","import { ModificationLevelModel } from './modification-level.model';\n\nexport class ModificationModel {\n\tid: number;\n\tcode: string;\n\tname: string;\n\tdescription: string;\n\tlevels: ModificationLevelModel[];\n}\n","import { SharpnessModel } from './sharpness-model';\n\nexport class SharpnessBarModel {\n\tlevels: number[];\n\thandicraftLevel?: number;\n\tsharps: SharpnessModel[];\n\tempty: number;\n\twidthModifier: number;\n\tlevelsMissing: number;\n\ttooltipTemplate: string;\n\tmaxColorSharp?: number;\n\tmaxLevelSharp?: number;\n\tsharpnessDataNeeded: boolean;\n\tcolor: string;\n}\n","import { ModeType } from '../types/mode.type';\nimport { SkillLevelModel } from './skill-level.model';\n\nexport class SkillModel {\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tmaxLevel?: number;\n\traiseSkillId?: string;\n\tlevels: SkillLevelModel[];\n\thasActiveStats?: boolean;\n\tmode?: ModeType;\n}\n","import { CalculationVariableModel } from './calculation-variable.model';\n\nexport class StatDetailModel {\n\tname: string;\n\tvalue: string | number;\n\tvalueColor?: string;\n\tinfo?: string[];\n\tcalculationTemplate?: string;\n\tcalculationVariables?: CalculationVariableModel[];\n\tcolor?: string;\n\textra1?: string | number;\n\textra2?: string | number;\n\tclass1?: string;\n\tclass2?: string;\n\ticon?: string;\n}\n","import { AilmentType } from '../types/ailment.type';\nimport { ElementType } from '../types/element.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { AmmoCapacitiesModel } from './ammo-capacities.model';\nimport { ExtraDataModel } from './extra-data.model';\nimport { KinsectModel } from './kinsect.model';\n\nexport class StatsModel {\n\tweaponType?: WeaponType;\n\ttotalAttack: number;\n\ttotalAttackPotential: number;\n\tattack: number;\n\tupgradeAttack: number;\n\tawakeningAttack: number;\n\tpassiveAttack: number;\n\tactiveAttack: number;\n\tactiveAttackPercent: number;\n\n\tsharpnessDataNeeded: boolean;\n\tpassiveSharpness: number;\n\textraSharpness: number;\n\tsharpnessLevelsBar: number[];\n\teffectivePhysicalSharpnessModifier: number;\n\teffectiveElementalSharpnessModifier: number;\n\textraSlot: number;\n\n\tweaponAttackModifier: number;\n\tcritElementModifier: number;\n\ttrueCritElementModifier: number;\n\tcritStatusModifier: number;\n\ttrueCritStatusModifier: number;\n\taffinity: number;\n\tupgradeAffinity: number;\n\tawakeningAffinity: number;\n\tpassiveAffinity: number;\n\tactiveAffinity: number;\n\tweakPointAffinity: number;\n\tpassiveCriticalBoostPercent: number;\n\tcriticalElement: boolean;\n\tcriticalStatus: boolean;\n\ttrueCriticalElement: boolean;\n\ttrueCriticalStatus: boolean;\n\n\telementless: boolean;\n\telementlessBoostPercent: number;\n\n\telement: ElementType;\n\tbaseElementAttack: number;\n\tupgradeElementAttack: number;\n\tawakeningElementAttack: number;\n\teffectivePassiveElementAttack: number;\n\telementHidden: boolean;\n\teffectiveElementAttack: number;\n\telementCap: number;\n\telementCapped: boolean;\n\ttotalElementAttack: number;\n\ttotalElementAttackPotential: number;\n\n\tailment: AilmentType;\n\tbaseAilmentAttack: number;\n\tupgradeAilmentAttack: number;\n\tawakeningAilmentAttack: number;\n\teffectivePassiveAilmentAttack: number;\n\tailmentHidden: boolean;\n\teffectiveAilmentAttack: number;\n\tailmentCap: number;\n\tailmentCapped: boolean;\n\ttotalAilmentAttack: number;\n\ttotalAilmentAttackPotential: number;\n\n\telementAttackMultiplier: number;\n\n\tpassiveDragonAttack: number;\n\tpassiveDragonAttackPercent: number;\n\tpassiveFireAttack: number;\n\tpassiveFireAttackPercent: number;\n\tpassiveIceAttack: number;\n\tpassiveIceAttackPercent: number;\n\tpassiveWaterAttack: number;\n\tpassiveWaterAttackPercent: number;\n\tpassiveThunderAttack: number;\n\tpassiveThunderAttackPercent: number;\n\tpassivePoisonAttack: number;\n\tpassivePoisonBuildupPercent: number;\n\tpassiveSleepAttack: number;\n\tpassiveSleepBuildupPercent: number;\n\tpassiveParalysisAttack: number;\n\tpassiveParalysisBuildupPercent: number;\n\tpassiveBlastAttack: number;\n\tpassiveBlastBuildupPercent: number;\n\tpassiveStunAttack: number;\n\tpassiveStunBuildupPercent: number;\n\n\teffectivePassiveAilmentBuildupPercent: number;\n\n\tactiveElementAttack: number;\n\tactiveAilmentAttack: number;\n\tactiveAilmentAttackBuildUpPercent: number;\n\n\telderseal: string;\n\teldersealLevelBoost: number;\n\n\tdefense: number[];\n\tpassiveDefense: number;\n\tpassiveDefensePercent: number;\n\tactiveDefense: number;\n\tpassiveHealth: number;\n\tpassiveStamina: number;\n\n\tfireResist: number;\n\twaterResist: number;\n\tthunderResist: number;\n\ticeResist: number;\n\tdragonResist: number;\n\n\tpassiveFireResist: number;\n\tpassiveWaterResist: number;\n\tpassiveThunderResist: number;\n\tpassiveIceResist: number;\n\tpassiveDragonResist: number;\n\n\tpassiveElementResistPercent?: number;\n\n\thealOnHitPercent: number;\n\thastenRecovery?: number;\n\n\tammoCapacities: AmmoCapacitiesModel;\n\tammoCapacitiesUp: AmmoCapacitiesModel;\n\tammoUp: number;\n\textraData: ExtraDataModel;\n\trecoil: number;\n\treload: number;\n\tdeviation: number;\n\n\tkinsect?: KinsectModel;\n\n\tfrostcraft?: number[];\n\n\tconstructor() {\n\t\tthis.totalAttack = 0;\n\t\tthis.attack = 0;\n\t\tthis.upgradeAttack = 0;\n\t\tthis.awakeningAttack = 0;\n\t\tthis.passiveAttack = 0;\n\t\tthis.activeAttack = 0;\n\t\tthis.activeAttackPercent = 0;\n\n\t\tthis.elementless = false;\n\t\tthis.elementlessBoostPercent = 0;\n\n\t\tthis.sharpnessDataNeeded = false;\n\t\tthis.passiveSharpness = 0;\n\t\tthis.extraSharpness = 0;\n\t\tthis.effectivePhysicalSharpnessModifier = 1;\n\t\tthis.effectiveElementalSharpnessModifier = 1;\n\t\tthis.extraSlot = 0;\n\t\tthis.weaponAttackModifier = 0;\n\t\tthis.critElementModifier = 0;\n\t\tthis.trueCritElementModifier = 0;\n\t\tthis.critStatusModifier = 0;\n\t\tthis.trueCritStatusModifier = 0;\n\t\tthis.affinity = 0;\n\t\tthis.upgradeAffinity = 0;\n\t\tthis.awakeningAffinity = 0;\n\t\tthis.passiveAffinity = 0;\n\t\tthis.activeAffinity = 0;\n\t\tthis.weakPointAffinity = 0;\n\t\tthis.passiveCriticalBoostPercent = 0;\n\t\tthis.criticalElement = false;\n\t\tthis.criticalStatus = false;\n\t\tthis.trueCriticalElement = false;\n\t\tthis.trueCriticalStatus = false;\n\n\t\tthis.element = null;\n\t\tthis.baseElementAttack = 0;\n\t\tthis.upgradeElementAttack = 0;\n\t\tthis.awakeningElementAttack = 0;\n\t\tthis.elementHidden = false;\n\t\tthis.effectiveElementAttack = 0;\n\t\tthis.elementCap = 0;\n\t\tthis.elementCapped = false;\n\t\tthis.totalElementAttack = 0;\n\t\tthis.totalElementAttackPotential = 0;\n\n\t\tthis.ailment = null;\n\t\tthis.baseAilmentAttack = 0;\n\t\tthis.upgradeAilmentAttack = 0;\n\t\tthis.awakeningAilmentAttack = 0;\n\t\tthis.ailmentHidden = false;\n\t\tthis.effectiveAilmentAttack = 0;\n\t\tthis.ailmentCap = 0;\n\t\tthis.ailmentCapped = false;\n\t\tthis.totalAilmentAttack = 0;\n\t\tthis.totalAilmentAttackPotential = 0;\n\n\t\tthis.elementAttackMultiplier = 0;\n\n\t\tthis.passiveFireAttack = 0;\n\t\tthis.passiveFireAttackPercent = 0;\n\t\tthis.passiveWaterAttack = 0;\n\t\tthis.passiveWaterAttackPercent = 0;\n\t\tthis.passiveThunderAttack = 0;\n\t\tthis.passiveThunderAttackPercent = 0;\n\t\tthis.passiveIceAttack = 0;\n\t\tthis.passiveIceAttackPercent = 0;\n\t\tthis.passiveDragonAttack = 0;\n\t\tthis.passiveDragonAttackPercent = 0;\n\t\tthis.passivePoisonAttack = 0;\n\t\tthis.passivePoisonBuildupPercent = 0;\n\t\tthis.passiveSleepAttack = 0;\n\t\tthis.passiveSleepBuildupPercent = 0;\n\t\tthis.passiveParalysisAttack = 0;\n\t\tthis.passiveParalysisBuildupPercent = 0;\n\t\tthis.passiveBlastAttack = 0;\n\t\tthis.passiveBlastBuildupPercent = 0;\n\t\tthis.passiveStunAttack = 0;\n\t\tthis.passiveStunBuildupPercent = 0;\n\t\tthis.effectivePassiveElementAttack = 0;\n\t\tthis.effectivePassiveAilmentAttack = 0;\n\n\t\tthis.effectivePassiveAilmentBuildupPercent = 0;\n\n\t\tthis.activeElementAttack = 0;\n\t\tthis.activeAilmentAttack = 0;\n\t\tthis.activeAilmentAttackBuildUpPercent = 0;\n\n\t\tthis.elderseal = null;\n\t\tthis.eldersealLevelBoost = 0;\n\n\t\tthis.defense = [0, 0, 0];\n\t\tthis.passiveDefense = 0;\n\t\tthis.passiveDefensePercent = 0;\n\t\tthis.activeDefense = 0;\n\t\tthis.passiveHealth = 0;\n\t\tthis.passiveStamina = 0;\n\n\t\tthis.recoil = 0;\n\t\tthis.reload = 0;\n\t\tthis.deviation = 0;\n\n\t\tthis.fireResist = 0;\n\t\tthis.waterResist = 0;\n\t\tthis.thunderResist = 0;\n\t\tthis.iceResist = 0;\n\t\tthis.dragonResist = 0;\n\n\t\tthis.passiveFireResist = 0;\n\t\tthis.passiveWaterResist = 0;\n\t\tthis.passiveThunderResist = 0;\n\t\tthis.passiveIceResist = 0;\n\t\tthis.passiveDragonResist = 0;\n\n\t\tthis.healOnHitPercent = 0;\n\n\t\tthis.ammoCapacities = null;\n\t\tthis.ammoCapacitiesUp = null;\n\t\tthis.ammoUp = 0;\n\t\tthis.extraData = null;\n\t}\n}\n","import { WeaponType } from '../types/weapon.type';\nimport { UpgradeLevelModel } from './upgrade.model';\n\nexport class UpgradeContainerModel {\n\tslots: number;\n\tused: number;\n\thasCustomUpgrades: boolean;\n\tupgradeDetails: UpgradeLevelModel[];\n\tcustomUpgradeIds: number[];\n\tcustomUpgradeValues: number[];\n\tweaponType: WeaponType;\n\n\tconstructor() {\n\t\tthis.slots = 0;\n\t\tthis.used = 0;\n\t\tthis.hasCustomUpgrades = false;\n\t\tthis.upgradeDetails = new Array<UpgradeLevelModel>();\n\t\tthis.customUpgradeIds = [0, 0, 0, 0, 0, 0, 0];\n\t\tthis.customUpgradeValues = [0, 0, 0, 0, 0, 0, 0];\n\t}\n}\n","import { AugmentationType } from '../types/augmentation.type';\nimport { SkillReferenceModel } from './skill-reference.model';\n\nexport class UpgradeModel {\n\tid: number;\n\ttype: AugmentationType;\n\tname: string;\n\tdescription: string;\n\tlevels: UpgradeLevelModel[];\n\tmultiplier?: number;\n\tWeaponLevels?: number[][];\n\tWeaponCustomUpgrades: number[][];\n}\n\nexport class UpgradeLevelModel {\n\ttype: AugmentationType;\n\tlevel: number;\n\trequiredSlots: number;\n\ttotalSlots: number;\n\n\tpassiveAttack: number;\n\tpassiveAffinity: number;\n\tpassiveDefense: number;\n\thealOnHitPercent: number;\n\tslotLevel: number;\n\tpassiveElement: number;\n\tpassiveAilment: number;\n\n\tdescription: string;\n\n\tskills: SkillReferenceModel[];\n\n\tconstructor() {\n\t\tthis.passiveAttack = 0;\n\t\tthis.passiveAffinity = 0;\n\t\tthis.passiveDefense = 0;\n\t\tthis.slotLevel = 0;\n\t\tthis.healOnHitPercent = 0;\n\t\tthis.passiveElement = 0;\n\t\tthis.passiveAilment = 0;\n\n\t\tthis.description = '';\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'numbersArr'\n})\nexport class NumbersArrPipe implements PipeTransform {\n\ttransform(value, args: string[]): any {\n\t\tconst res = [];\n\t\tfor (let i = 0; i < value; i++) {\n\t\t\tres.push(i);\n\t\t}\n\t\treturn res;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable, Observer } from 'rxjs';\nimport { AmmoCapacitiesLoader } from '../data/loaders/ammo-capacities.loader';\nimport { ArmorLoader } from '../data/loaders/armor.loader';\nimport { AugmentationsLoader } from '../data/loaders/augmentations.loader';\nimport { AwakeningsLoader } from '../data/loaders/awakenings.loader';\nimport { CharmsLoader } from '../data/loaders/charms.loader';\nimport { DecorationsLoader } from '../data/loaders/decorations.loader';\nimport { KinsectsLoader } from '../data/loaders/kinsects.loader';\nimport { MelodiesLoader } from '../data/loaders/melodies.loader';\nimport { MelodyEffectLoader } from '../data/loaders/melodyEffect.loader';\nimport { ModificationsLoader } from '../data/loaders/modifications.loader';\nimport { SetBonusesLoader } from '../data/loaders/set-bonuses.loader';\nimport { SharpnessModifiersLoader } from '../data/loaders/sharpness-modifiers.loader';\nimport { SkillsLoader } from '../data/loaders/skills.loader';\nimport { ToolsLoader } from '../data/loaders/tools.loader';\nimport { UpgradesLoader } from '../data/loaders/upgrades.loader';\nimport { WeaponModifiersLoader } from '../data/loaders/weapon-modifiers.loader';\nimport { WeaponsLoader } from '../data/loaders/weapons.loader';\nimport { AppDataModel } from '../models/app-data.model';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class AppDataProvider {\n\tpublic appData: AppDataModel;\n\n\tconstructor(\n\t\tprivate weaponLoader: WeaponsLoader,\n\t\tprivate armorLoader: ArmorLoader,\n\t\tprivate charmsLoader: CharmsLoader,\n\t\tprivate decorationsLoader: DecorationsLoader,\n\t\tprivate augmentationsLoader: AugmentationsLoader,\n\t\tprivate modificationsLoader: ModificationsLoader,\n\t\tprivate kinsectsLoader: KinsectsLoader,\n\t\tprivate skillsLoader: SkillsLoader,\n\t\tprivate setBonusesLoader: SetBonusesLoader,\n\t\tprivate sharpnessModifiersLoader: SharpnessModifiersLoader,\n\t\tprivate weaponModifiersLoader: WeaponModifiersLoader,\n\t\tprivate ammoCapacitiesLoader: AmmoCapacitiesLoader,\n\t\tprivate melodiesLoader: MelodiesLoader,\n\t\tprivate melodyEffectLoader: MelodyEffectLoader,\n\t\tprivate toolsLoader: ToolsLoader,\n\t\tprivate upgradesLoader: UpgradesLoader,\n\t\tprivate awakeningsLoader: AwakeningsLoader\n\t) {\n\t\tthis.appData = new AppDataModel();\n\t}\n\n\tload(): Observable<boolean> {\n\t\treturn new Observable((observer: Observer<boolean>) => {\n\t\t\tPromise.all([\n\t\t\t\tthis.weaponLoader.load('weapons.tsv', false).toPromise(),\n\t\t\t\tthis.armorLoader.load('armor.tsv', false).toPromise(),\n\t\t\t\tthis.charmsLoader.load('charms.tsv', false).toPromise(),\n\t\t\t\tthis.decorationsLoader.load('decorations.tsv', false).toPromise(),\n\t\t\t\tthis.augmentationsLoader.load('augmentations.json', false).toPromise(),\n\t\t\t\tthis.modificationsLoader.load('modifications.json', false).toPromise(),\n\t\t\t\tthis.kinsectsLoader.load('kinsects.tsv', false).toPromise(),\n\t\t\t\tthis.skillsLoader.load('skills.json', false).toPromise(),\n\t\t\t\tthis.setBonusesLoader.load('set-bonuses.json', false).toPromise(),\n\t\t\t\tthis.sharpnessModifiersLoader.load('sharpness-modifiers.json', false).toPromise(),\n\t\t\t]).then(results => {\n\t\t\t\tthis.appData.weapons = results[0];\n\t\t\t\tthis.appData.armors = results[1];\n\t\t\t\tthis.appData.charms = results[2];\n\t\t\t\tthis.appData.decorations = results[3];\n\t\t\t\tthis.appData.augmentations = results[4];\n\t\t\t\tthis.appData.modifications = results[5];\n\t\t\t\tthis.appData.kinsects = results[6];\n\t\t\t\tthis.appData.skills = results[7];\n\t\t\t\tthis.appData.setBonuses = results[8];\n\t\t\t\tthis.appData.sharpnessModifiers = results[9];\n\n\t\t\t\tPromise.all([\n\t\t\t\t\tthis.weaponModifiersLoader.load('weapon-modifiers.json', false).toPromise(),\n\t\t\t\t\tthis.ammoCapacitiesLoader.load('ammo-capacities.json', false).toPromise(),\n\t\t\t\t\tthis.melodiesLoader.load('melodies.tsv', false).toPromise(),\n\t\t\t\t\tthis.melodyEffectLoader.load('melody-effect.tsv', false).toPromise(),\n\t\t\t\t\tthis.toolsLoader.load('tools.tsv', false).toPromise(),\n\t\t\t\t\tthis.upgradesLoader.load('upgrades.json', false).toPromise(),\n\t\t\t\t\tthis.awakeningsLoader.load('awakenings.json', false).toPromise()\n\t\t\t\t]).then(results2 => {\n\t\t\t\t\tthis.appData.weaponModifiers = results2[0];\n\t\t\t\t\tthis.appData.ammoCapacities = results2[1];\n\t\t\t\t\tthis.appData.melodies = results2[2];\n\t\t\t\t\tthis.appData.melodyEffect = results2[3];\n\t\t\t\t\tthis.appData.tools = results2[4];\n\t\t\t\t\tthis.appData.upgrades = results2[5];\n\t\t\t\t\tthis.appData.awakenings = results2[6];\n\n\t\t\t\t\tobserver.next(true);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n","import { ChangeDetectorRef, Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { ItemSlotComponent } from '../components/item-slot/item-slot.component';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { BuildItemModel, BuildModel } from '../models/build.model';\nimport { ItemModel } from '../models/item.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { UpgradeLevelModel } from '../models/upgrade.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { DataService } from './data.service';\nimport { EquipmentService } from './equipment.service';\nimport { SlotService } from './slot.service';\n\n@Injectable()\nexport class BuildService {\n\tpublic buildIdUpdated$ = new Subject<string>();\n\n\tprivate changeDetector: ChangeDetectorRef;\n\tprivate loadingBuild = false;\n\n\tprivate weaponItem: ItemModel;\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate slotService: SlotService,\n\t\tprivate equipmentService: EquipmentService\n\t) { }\n\n\tinitialize(\n\t\tchangeDetector: ChangeDetectorRef\n\t) {\n\t\t// TODO: Passing in change detector feels gross, but at the moment it's needed to set up decoration slots when an item is loaded by build id.\n\t\tthis.changeDetector = changeDetector;\n\t\tthis.subscribeSlotEvents();\n\t}\n\n\tprivate subscribeSlotEvents() {\n\t\tthis.slotService.itemSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\t\tthis.slotService.itemSelectedNew$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.decorationSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.augmentationSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.upgradeSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.modificationSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.kinsectSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.itemLevelChanged$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.weaponModSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\n\t\tthis.slotService.setbonusSelected$.subscribe(() => {\n\t\t\tif (!this.loadingBuild) { this.updateBuildId(); }\n\t\t});\n\t}\n\n\tloadBuild(buildHash: string) {\n\t\tthis.loadingBuild = true;\n\t\tconst buildParts = buildHash.split('&');\n\n\t\tconst buildId = buildParts[0];\n\n\t\tconst build = this.parseBuildId(buildId);\n\n\t\tthis.loadBuildSlot(build.head, this.slotService.headSlot);\n\t\tthis.loadBuildSlot(build.chest, this.slotService.chestSlot);\n\t\tthis.loadBuildSlot(build.hands, this.slotService.handsSlot);\n\t\tthis.loadBuildSlot(build.legs, this.slotService.legsSlot);\n\t\tthis.loadBuildSlot(build.feet, this.slotService.feetSlot);\n\t\tthis.loadBuildSlot(build.charm, this.slotService.charmSlot);\n\t\tif (build.tool1) { this.loadBuildSlot(build.tool1, this.slotService.tool1Slot); }\n\t\tif (build.tool2) { this.loadBuildSlot(build.tool2, this.slotService.tool2Slot); }\n\t\tthis.loadBuildSlot(build.weapon, this.slotService.weaponSlot, true);\n\n\t\tthis.slotService.selectItemSlot(null);\n\t\tthis.changeDetector.detectChanges();\n\t\tthis.loadingBuild = false;\n\t}\n\n\tprivate parseBuildId(buildId: string): BuildModel {\n\t\tconst itemGroupRegex = /(i[.]*[^i]*)/g;\n\t\tconst itemRegex = /(?<=i)([\\d]+)/g;\n\t\tconst decoRegex = /(?<=d)([\\d]+)/g;\n\t\tconst augRegex = /(?<=a)([\\d]+)/g;\n\t\tconst upgRegex = /(?<=u)([\\d]+)/g;\n\t\tconst custRegex = /(?<=c)([\\d]+)/g;\n\t\tconst awkRegex = /(?<=w)([\\d]+)(l)([\\d]+)/g;\n\t\tconst setbRegex = /(?<=s)([\\d]+)/g;\n\t\tconst kinsectRegex = /(?<=k)([\\d]+)/g;\n\t\tconst kinsectElementRegex = /(?<=e)([\\d]+)/g;\n\t\tconst elementRegex = /(?<=f)([\\d]+)/g;\n\t\tconst ailmentRegex = /(?<=g)([\\d]+)/g;\n\t\tconst modRegex = /(?<=m)([\\d]+)/g;\n\t\tconst levelRegex = /(?<=l)([\\d]+)/g;\n\n\t\tconst build = new BuildModel();\n\n\t\tconst itemGroups = buildId.match(itemGroupRegex);\n\t\tlet index = 1;\n\t\tfor (const itemGroup of itemGroups) {\n\t\t\tconst buildItem = new BuildItemModel();\n\n\t\t\tconst item = itemGroup.match(itemRegex);\n\t\t\tif (item) {\n\t\t\t\tbuildItem.itemId = parseInt(item[0], 10);\n\t\t\t}\n\n\t\t\tconst decos = itemGroup.match(decoRegex);\n\t\t\tif (decos) {\n\t\t\t\tbuildItem.decorationIds = [];\n\t\t\t\tfor (const deco of decos) {\n\t\t\t\t\tbuildItem.decorationIds.push(parseInt(deco, 10));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst augs = itemGroup.match(augRegex);\n\t\t\tif (augs) {\n\t\t\t\tbuildItem.augmentationIds = [];\n\t\t\t\tfor (const aug of augs) {\n\t\t\t\t\tbuildItem.augmentationIds.push(parseInt(aug, 10));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst upgs = itemGroup.match(upgRegex);\n\t\t\tif (upgs) {\n\t\t\t\tbuildItem.upgradeLevels = [];\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(0, 1), 10)); // Attack\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(1, 2), 10)); // Affinity\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(2, 3), 10)); // Defense\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(3, 4), 10)); // Slots\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(4, 5), 10)); // Health\n\t\t\t\tbuildItem.upgradeLevels.push(parseInt(upgs.toString().substring(5, 6), 10)); // Element/Ailment\n\t\t\t}\n\n\t\t\tconst customs = itemGroup.match(custRegex);\n\t\t\tif (customs) {\n\t\t\t\tif (customs.toString().length == 4) { // V2\n\t\t\t\t\t// Empty\n\t\t\t\t} else if (customs.toString().length == 7) { // v3\n\t\t\t\t\tbuildItem.customLevelIds = [];\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(0, 1), 10)); // Lv 1\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(1, 2), 10)); // Lv 2\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(2, 3), 10)); // Lv 3\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(3, 4), 10)); // Lv 4\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(4, 5), 10)); // Lv 5\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(5, 6), 10)); // Lv 6\n\t\t\t\t\tbuildItem.customLevelIds.push(parseInt(customs.toString().substring(6, 7), 10)); // Lv 7\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst awks = itemGroup.match(awkRegex);\n\t\t\tif (awks) {\n\t\t\t\tbuildItem.awakenings = [];\n\t\t\t\tfor (const awk of awks) {\n\t\t\t\t\tconst awkAux = awk.split('l');\n\t\t\t\t\tbuildItem.awakenings.push([parseInt(awkAux[0], 10), parseInt(awkAux[1], 10)]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst setb = itemGroup.match(setbRegex);\n\t\t\tif (setb) {\n\t\t\t\tbuildItem.setbonusId = parseInt(setb[0], 10);\n\t\t\t}\n\n\t\t\tconst element = itemGroup.match(elementRegex);\n\t\t\tif (element) {\n\t\t\t\tbuildItem.elementId = parseInt(element[0], 10);\n\t\t\t}\n\t\t\tconst ailment = itemGroup.match(ailmentRegex);\n\t\t\tif (ailment) {\n\t\t\t\tbuildItem.ailmentId = parseInt(ailment[0], 10);\n\t\t\t}\n\n\t\t\tconst mods = itemGroup.match(modRegex);\n\t\t\tif (mods) {\n\t\t\t\tbuildItem.modificationIds = [];\n\t\t\t\tfor (const mod of mods) {\n\t\t\t\t\tbuildItem.modificationIds.push(parseInt(mod, 10));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst kinsect = itemGroup.match(kinsectRegex);\n\t\t\tif (kinsect) {\n\t\t\t\tbuildItem.kinsectId = parseInt(kinsect[0], 10);\n\t\t\t}\n\n\t\t\tconst kinsectElement = itemGroup.match(kinsectElementRegex);\n\t\t\tif (kinsectElement) {\n\t\t\t\tbuildItem.kinsectElementId = parseInt(kinsectElement[0], 10);\n\t\t\t}\n\n\t\t\tconst level = itemGroup.match(levelRegex);\n\t\t\tif (level) {\n\t\t\t\tbuildItem.level = parseInt(level[0], 10);\n\t\t\t}\n\n\t\t\tswitch (index) {\n\t\t\t\tcase 1:\n\t\t\t\t\tbuild.weapon = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tbuild.head = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tbuild.chest = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tbuild.hands = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tbuild.legs = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tbuild.feet = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\tbuild.charm = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tbuild.tool1 = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 9:\n\t\t\t\t\tbuild.tool2 = buildItem;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tindex++;\n\t\t}\n\n\t\treturn build;\n\t}\n\n\tprivate loadBuildSlot(buildItem: BuildItemModel, slot: ItemSlotComponent, updateStats: boolean = false) {\n\t\tif (buildItem.itemId) {\n\t\t\tlet item: ItemModel;\n\t\t\tswitch (this.dataService.getEquipmentCategory(slot.slotName)) {\n\t\t\t\tcase EquipmentCategoryType.Weapon:\n\t\t\t\t\titem = this.dataService.getWeapon(buildItem.itemId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase EquipmentCategoryType.Armor:\n\t\t\t\t\titem = this.dataService.getArmor(buildItem.itemId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase EquipmentCategoryType.Charm:\n\t\t\t\t\titem = this.dataService.getCharm(buildItem.itemId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase EquipmentCategoryType.Tool:\n\t\t\t\t\titem = this.dataService.getTool(buildItem.itemId, slot.slotName);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (item) {\n\t\t\t\tif (buildItem.level) {\n\t\t\t\t\titem.equippedLevel = buildItem.level;\n\t\t\t\t}\n\n\t\t\t\tthis.slotService.selectItemSlot(slot);\n\t\t\t\tthis.slotService.selectItem(item, updateStats);\n\n\t\t\t\tthis.changeDetector.detectChanges();\n\n\t\t\t\tif (item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\t\tlet weaponIndex = 0;\n\t\t\t\t\tfor (const types in WeaponType) {\n\t\t\t\t\t\tif (isNaN(Number(types))) {\n\t\t\t\t\t\t\tif (types == item.weaponType) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tweaponIndex += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Element\n\t\t\t\t\tif (buildItem.elementId != null && buildItem.elementId > 0) {\n\t\t\t\t\t\titem.element = this.dataService.getElement(buildItem.elementId);\n\t\t\t\t\t\tif (item.upgradeType == 2) {\n\t\t\t\t\t\t\tif (item.element != null) {\n\t\t\t\t\t\t\t\titem.elementBaseAttack = this.dataService.getSafiElementAttack(weaponIndex);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\titem.elementBaseAttack = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Ailment\n\t\t\t\t\tif (buildItem.ailmentId != null && buildItem.ailmentId > 0) {\n\t\t\t\t\t\titem.ailment = this.dataService.getAilment(buildItem.ailmentId);\n\t\t\t\t\t\tif (item.upgradeType == 2) {\n\t\t\t\t\t\t\tif (item.ailment != null) {\n\t\t\t\t\t\t\t\tlet ailmentType = 0;\n\t\t\t\t\t\t\t\tif (item.ailment == AilmentType.Poison || item.ailment == AilmentType.Blast) {\n\t\t\t\t\t\t\t\t\tailmentType = 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\titem.ailmentBaseAttack = this.dataService.getSafiAilmentAttack(weaponIndex, ailmentType);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\titem.ailmentBaseAttack = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\t\t\t\t\tif (item.upgradeType == 2\n\t\t\t\t\t\t&& item.weaponType != WeaponType.LightBowgun\n\t\t\t\t\t\t&& item.weaponType != WeaponType.HeavyBowgun\n\t\t\t\t\t\t&& (buildItem.elementId != null || buildItem.ailmentId != null)) {\n\t\t\t\t\t\titem.name = this.dataService.getSafiWeaponName(item.weaponType, item.element, item.ailment);\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Awakenings\n\t\t\t\t\tif (buildItem.awakenings != null) {\n\t\t\t\t\t\tconst awakeningLevels: AwakeningLevelModel[] = [];\n\t\t\t\t\t\tfor (const awk of buildItem.awakenings) {\n\t\t\t\t\t\t\tconst awkAux = this.dataService.getAwakening(awk[0]);\n\t\t\t\t\t\t\tawakeningLevels.push({\n\t\t\t\t\t\t\t\tid: awkAux.id,\n\t\t\t\t\t\t\t\ttype: awkAux.type,\n\t\t\t\t\t\t\t\tname: awkAux.name,\n\t\t\t\t\t\t\t\tshort: awkAux.short,\n\t\t\t\t\t\t\t\tlevel: awk[1],\n\t\t\t\t\t\t\t\tminLevel: awkAux.minLevel,\n\t\t\t\t\t\t\t\tmaxLevel: awkAux.maxLevel\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tslot.awakeningSlot.awakenings = awakeningLevels;\n\t\t\t\t\t\tthis.slotService.selectAwakenings(awakeningLevels);\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Setbonus\n\t\t\t\t\tif (buildItem.setbonusId != null) {\n\t\t\t\t\t\tconst setbonus = this.dataService.getSetBonusByBuildId(buildItem.setbonusId);\n\t\t\t\t\t\tif (setbonus) {\n\t\t\t\t\t\t\tif (slot.awakeningSlot) {\n\t\t\t\t\t\t\t\tslot.awakeningSlot.setbonus = setbonus;\n\t\t\t\t\t\t\t\tthis.slotService.selectSetbonusSlot(slot.awakeningSlot);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.slotService.selectSetbonus(setbonus);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\n\t\t\t\t\t// -------------------- Augmentations\n\t\t\t\t\tif (buildItem.augmentationIds) {\n\t\t\t\t\t\tfor (let i = 0; i < 9 - item.rarity; i++) {\n\t\t\t\t\t\t\tconst augId = buildItem.augmentationIds[i];\n\t\t\t\t\t\t\tif (augId) {\n\t\t\t\t\t\t\t\tconst aug = this.dataService.getAugmentation(augId);\n\t\t\t\t\t\t\t\tif (aug) {\n\t\t\t\t\t\t\t\t\tthis.slotService.selectAugmentationSlot(slot.augmentationSlots.toArray()[i]);\n\t\t\t\t\t\t\t\t\tconst newAug = Object.assign({}, aug);\n\t\t\t\t\t\t\t\t\tthis.slotService.selectAugmentation(newAug, updateStats);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// -------------------- Upgrades\n\t\t\t\t\tif (buildItem.upgradeLevels && slot.upgradeSlot) {\n\t\t\t\t\t\tconst upgrades = this.dataService.getUpgrades();\n\t\t\t\t\t\tconst upgradeContainer = new UpgradeContainerModel();\n\t\t\t\t\t\tupgradeContainer.hasCustomUpgrades = item.upgradeType == 1;\n\t\t\t\t\t\tupgradeContainer.weaponType = item.weaponType;\n\t\t\t\t\t\tif (item.rarity == 10) {\n\t\t\t\t\t\t\tupgradeContainer.slots = 10;\n\t\t\t\t\t\t} else if (item.rarity == 11) {\n\t\t\t\t\t\t\tupgradeContainer.slots = 8;\n\t\t\t\t\t\t} else if (item.rarity == 12) {\n\t\t\t\t\t\t\tupgradeContainer.slots = 6;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupgradeContainer.slots = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let i = 0; i < buildItem.upgradeLevels.length; i++) {\n\t\t\t\t\t\t\tconst detail = new UpgradeLevelModel;\n\t\t\t\t\t\t\tdetail.type = upgrades[i].type;\n\t\t\t\t\t\t\tdetail.level = buildItem.upgradeLevels[i];\n\t\t\t\t\t\t\tif (detail.level > 0) {\n\t\t\t\t\t\t\t\tdetail.requiredSlots = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].requiredSlots;\n\t\t\t\t\t\t\t\tdetail.totalSlots = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].totalSlots;\n\n\t\t\t\t\t\t\t\tdetail.passiveAttack = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveAttack;\n\t\t\t\t\t\t\t\tdetail.passiveAffinity = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveAffinity;\n\t\t\t\t\t\t\t\tdetail.passiveDefense = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveDefense;\n\t\t\t\t\t\t\t\tdetail.slotLevel = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].slotLevel;\n\t\t\t\t\t\t\t\tdetail.healOnHitPercent = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].healOnHitPercent;\n\t\t\t\t\t\t\t\tdetail.passiveElement = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveElement;\n\t\t\t\t\t\t\t\tdetail.passiveAilment = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].passiveAilment;\n\n\t\t\t\t\t\t\t\tdetail.description = upgrades[i].levels[buildItem.upgradeLevels[i] - 1].description;\n\n\t\t\t\t\t\t\t\tif (upgrades[i].WeaponLevels) {\n\t\t\t\t\t\t\t\t\tconst overrideValue = upgrades[i].WeaponLevels[weaponIndex][buildItem.upgradeLevels[i] - 1];\n\t\t\t\t\t\t\t\t\tthis.overrideUpgrageLevel(detail, i, overrideValue);\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tupgradeContainer.used += detail.totalSlots;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdetail.requiredSlots = 0;\n\t\t\t\t\t\t\t\tdetail.totalSlots = 0;\n\n\t\t\t\t\t\t\t\tdetail.passiveAttack = 0;\n\t\t\t\t\t\t\t\tdetail.passiveAffinity = 0;\n\t\t\t\t\t\t\t\tdetail.passiveDefense = 0;\n\t\t\t\t\t\t\t\tdetail.slotLevel = 0;\n\t\t\t\t\t\t\t\tdetail.healOnHitPercent = 0;\n\t\t\t\t\t\t\t\tdetail.passiveElement = 0;\n\t\t\t\t\t\t\t\tdetail.passiveAilment = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tupgradeContainer.upgradeDetails.push(detail);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buildItem.customLevelIds) {\n\t\t\t\t\t\t\tupgradeContainer.customUpgradeIds = buildItem.customLevelIds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tslot.upgradeSlot.upgradeContainer = upgradeContainer;\n\n\t\t\t\t\t\tthis.slotService.selectUpgradeSlot(slot.upgradeSlot);\n\t\t\t\t\t\tconst newUpg = JSON.parse(JSON.stringify(upgradeContainer));\n\t\t\t\t\t\tthis.slotService.selectUpgradeContainer(newUpg, updateStats);\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\t\t\t\t\tswitch (item.weaponType) {\n\t\t\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\t\t\tif (buildItem.kinsectId) {\n\t\t\t\t\t\t\t\tconst kinsect = this.dataService.getKinsect(buildItem.kinsectId);\n\t\t\t\t\t\t\t\tif (kinsect) {\n\t\t\t\t\t\t\t\t\tthis.slotService.selectKinsectSlot(slot.kinsectSlot);\n\t\t\t\t\t\t\t\t\tconst newKinsect = Object.assign({}, kinsect);\n\t\t\t\t\t\t\t\t\tthis.slotService.selectKinsect(newKinsect, updateStats);\n\t\t\t\t\t\t\t\t\tif (buildItem.kinsectElementId) {\n\t\t\t\t\t\t\t\t\t\tconst keys = Object.keys(ElementType);\n\t\t\t\t\t\t\t\t\t\tfor (const key in keys) {\n\t\t\t\t\t\t\t\t\t\t\tif (key == buildItem.kinsectElementId.toString()) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = keys[key];\n\t\t\t\t\t\t\t\t\t\t\t\tnewKinsect.element = (<any>ElementType)[value]; // There must be a better way to do this...\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewKinsect.element = ElementType.None;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\t\t\t\tif (buildItem.modificationIds) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < buildItem.modificationIds.length; i++) {\n\t\t\t\t\t\t\t\t\tconst modId = buildItem.modificationIds[i];\n\t\t\t\t\t\t\t\t\tif (modId) {\n\t\t\t\t\t\t\t\t\t\tconst mod = this.dataService.getModification(modId);\n\t\t\t\t\t\t\t\t\t\tif (mod) {\n\t\t\t\t\t\t\t\t\t\t\tthis.slotService.selectModificationSlot(slot.modificationSlots.toArray()[i]);\n\t\t\t\t\t\t\t\t\t\t\tconst newAug = Object.assign({}, mod);\n\t\t\t\t\t\t\t\t\t\t\tthis.slotService.selectModification(newAug, updateStats);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.changeDetector.detectChanges();\n\n\t\t\t\tif (buildItem.decorationIds) {\n\t\t\t\t\tlet i = 0;\n\t\t\t\t\tfor (const decorationId of buildItem.decorationIds) {\n\t\t\t\t\t\tconst decoration = this.dataService.getDecoration(decorationId);\n\t\t\t\t\t\tif (decoration) {\n\t\t\t\t\t\t\tthis.slotService.selectDecorationSlot(slot.decorationSlots.toArray()[i]);\n\t\t\t\t\t\t\tconst newDecoration = Object.assign({}, decoration);\n\t\t\t\t\t\t\tthis.slotService.selectDecoration(newDecoration, updateStats);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.slotService.clearItemSlot(slot);\n\t\t}\n\t}\n\n\tprivate updateBuildId() {\n\t\tconst weapon = this.equipmentService.items.find(item => item.equipmentCategory == EquipmentCategoryType.Weapon);\n\t\tconst head = this.equipmentService.items.find(item => item.itemType == ItemType.Head);\n\t\tconst chest = this.equipmentService.items.find(item => item.itemType == ItemType.Chest);\n\t\tconst hands = this.equipmentService.items.find(item => item.itemType == ItemType.Arms);\n\t\tconst legs = this.equipmentService.items.find(item => item.itemType == ItemType.Waist);\n\t\tconst feet = this.equipmentService.items.find(item => item.itemType == ItemType.Legs);\n\t\tconst charm = this.equipmentService.items.find(item => item.itemType == ItemType.Charm);\n\t\tconst tool1 = this.equipmentService.items.find(item => item.itemType == ItemType.Tool1);\n\t\tconst tool2 = this.equipmentService.items.find(item => item.itemType == ItemType.Tool2);\n\n\t\tlet buildId = 'v3';\n\n\t\tthis.changeDetector.detectChanges();\n\n\t\tbuildId += this.getItemBuildString(weapon);\n\t\tbuildId += this.getItemBuildString(head);\n\t\tbuildId += this.getItemBuildString(chest);\n\t\tbuildId += this.getItemBuildString(hands);\n\t\tbuildId += this.getItemBuildString(legs);\n\t\tbuildId += this.getItemBuildString(feet);\n\t\tbuildId += this.getItemBuildString(charm);\n\t\tbuildId += this.getItemBuildString(tool1);\n\t\tbuildId += this.getItemBuildString(tool2);\n\n\t\tthis.buildIdUpdated$.next(buildId);\n\t}\n\n\tprivate getItemBuildString(item: ItemModel): string {\n\t\tlet result = 'i';\n\n\t\tif (item) {\n\t\t\tresult += item.id.toString();\n\n\t\t\tif (item.equippedLevel) {\n\t\t\t\tresult += `l${item.equippedLevel}`;\n\t\t\t}\n\n\t\t\tif (item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\tif (item.rarity >= 6) {\n\t\t\t\t\t// -------------------- Augmentations\n\n\t\t\t\t\tfor (const aug of this.equipmentService.augmentations) {\n\t\t\t\t\t\tif (aug.id) {\n\t\t\t\t\t\t\tresult += `a${aug.id}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Upgrades\n\t\t\t\t\tif (this.equipmentService.upgradeContainer) {\n\t\t\t\t\t\tresult += 'u';\n\t\t\t\t\t\tfor (const detail of this.equipmentService.upgradeContainer.upgradeDetails) {\n\t\t\t\t\t\t\tif (detail.level) {\n\t\t\t\t\t\t\t\tresult += `${detail.level}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresult += '0';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += 'c';\n\t\t\t\t\t\tfor (const customId of this.equipmentService.upgradeContainer.customUpgradeIds) {\n\t\t\t\t\t\t\tresult += customId;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult += 'u000000c0000000';\n\t\t\t\t\t}\n\t\t\t\t\t// -------------------- Awakenings\n\t\t\t\t\tif (this.equipmentService.awakenings.length) {\n\t\t\t\t\t\tfor (const awakening of this.equipmentService.awakenings) {\n\t\t\t\t\t\t\tresult += `w${awakening.id}l${awakening.level}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\n\t\t\t\t\t// -------------------- Setbonus\n\t\t\t\t\tif (this.equipmentService.awakeningSetbonus) {\n\t\t\t\t\t\tresult += `s${this.equipmentService.awakeningSetbonus.buildId}`;\n\t\t\t\t\t}\n\t\t\t\t\t// --------------------\n\t\t\t\t}\n\n\t\t\t\tfor (const mod of this.equipmentService.modifications) {\n\t\t\t\t\tif (mod.id) {\n\t\t\t\t\t\tresult += `m${mod.id}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.equipmentService.kinsect) {\n\t\t\t\t\tresult += `k${this.equipmentService.kinsect.id}`;\n\n\t\t\t\t\tif (this.equipmentService.kinsect.element) {\n\t\t\t\t\t\tconst keys = Object.keys(ElementType);\n\t\t\t\t\t\tlet elementIndex = '0';\n\t\t\t\t\t\tfor (const key in keys) {\n\t\t\t\t\t\t\tif (keys.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tconst value = keys[key];\n\t\t\t\t\t\t\t\tif (this.equipmentService.kinsect.element == value) {\n\t\t\t\t\t\t\t\t\telementIndex = key;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += `e${elementIndex}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (item.element) {\n\t\t\t\t\tconst elementId = this.dataService.getElementId(item.element);\n\t\t\t\t\tresult += `f${elementId}`;\n\t\t\t\t} else {\n\t\t\t\t\tresult += `f${0}`;\n\t\t\t\t}\n\t\t\t\tif (item.ailment) {\n\t\t\t\t\tconst ailmentId = this.dataService.getAilmentId(item.ailment);\n\t\t\t\t\tresult += `g${ailmentId}`;\n\t\t\t\t} else {\n\t\t\t\t\tresult += `g${0}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.slots) {\n\t\t\t\tlet decorations = this.equipmentService.decorations.filter(d => d.itemId === item.id);\n\t\t\t\tdecorations = decorations.sort((a, b) => (a.level < b.level) ? 1 : ((a.level > b.level) ? -1 : 0));\n\t\t\t\tfor (let i = 0; i < item.slots.length; i++) {\n\t\t\t\t\tconst slot = item.slots[i];\n\t\t\t\t\tconst decoration = decorations.find(d => d.itemId == item.id && d.level <= slot.level);\n\t\t\t\t\tdecorations = decorations.filter(d => !(d === decoration));\n\t\t\t\t\tif (decoration) {\n\t\t\t\t\t\tresult += `d${decoration.id.toString()}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate overrideUpgrageLevel(upgradeLevel: UpgradeLevelModel, augIndex: number, value: number) {\n\t\tswitch (augIndex) {\n\t\t\tcase 0:\n\t\t\t\tupgradeLevel.passiveAttack = value;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tupgradeLevel.passiveAffinity = value;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tupgradeLevel.passiveDefense = value;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tupgradeLevel.slotLevel = value;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tupgradeLevel.healOnHitPercent = value;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tupgradeLevel.passiveAilment = value;\n\t\t\t\tupgradeLevel.passiveElement = value;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tupgradeLevel.description = '+' + value;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { AmmoCapacitiesModel } from '../models/ammo-capacities.model';\nimport { CalculationVariableModel } from '../models/calculation-variable.model';\nimport { ExtraDataModel } from '../models/extra-data.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { SharpnessBarModel } from '../models/sharpness-bar.model';\nimport { StatDetailModel } from '../models/stat-detail.model';\nimport { StatsModel } from '../models/stats.model';\nimport { AttackType } from '../types/attack.type';\n\n@Injectable()\nexport class CalculationService {\n\tpublic attackCalcsUpdated$ = new Subject<StatDetailModel[]>();\n\tpublic defenseCalcsUpdated$ = new Subject<StatDetailModel[]>();\n\tpublic ammoUpdated$ = new Subject<AmmoCapacitiesModel>();\n\tpublic kinsectUpdated$ = new Subject<KinsectModel>();\n\tpublic sharpnessUpdated$ = new Subject<SharpnessBarModel>();\n\tpublic extraDataUpdated$ = new Subject<ExtraDataModel>();\n\n\tattackCalcs = new Array<StatDetailModel>();\n\tdefenseCalcs = new Array<StatDetailModel>();\n\tsharpnessBar = new SharpnessBarModel;\n\textraData = new ExtraDataModel;\n\taffinityTotal = 0;\n\n\tconstructor() {\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Defense',\n\t\t\tvalue: '',\n\t\t\ticon: 'defense'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Health',\n\t\t\tvalue: '100',\n\t\t\ticon: 'health'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Stamina',\n\t\t\tvalue: '100',\n\t\t\ticon: 'stamina'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Fire Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'fire'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Water Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'water'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Thunder Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'thunder'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Ice Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'ice'\n\t\t});\n\n\t\tthis.defenseCalcs.push({\n\t\t\tname: 'Dragon Resist',\n\t\t\tvalue: '',\n\t\t\ticon: 'dragon'\n\t\t});\n\t}\n\n\tupdateCalcs(stats: StatsModel) {\n\t\tthis.buildAttackCalcs(stats);\n\t\tthis.buildDefenseCalcs(stats);\n\t\tthis.buildAmmoCapacities(stats);\n\t\tthis.buildKinsect(stats);\n\t\tthis.getSharpnessBar(stats);\n\t\tthis.getExtraData(stats);\n\n\t\tthis.attackCalcsUpdated$.next(this.attackCalcs);\n\t\tthis.defenseCalcsUpdated$.next(this.defenseCalcs);\n\n\t\tthis.ammoUpdated$.next(stats.ammoCapacitiesUp);\n\t\tthis.kinsectUpdated$.next(stats.kinsect);\n\t\tthis.sharpnessUpdated$.next(this.sharpnessBar);\n\t\tthis.extraDataUpdated$.next(this.extraData);\n\t}\n\n\tprivate buildAttackCalcs(stats: StatsModel) {\n\t\tthis.attackCalcs = [];\n\n\t\tthis.attackCalcs.push(this.getAttack(stats));\n\t\tif (stats.activeAttack || stats.effectivePhysicalSharpnessModifier) {\n\t\t\tthis.attackCalcs.push(this.getAttackPotential(stats));\n\t\t}\n\n\t\tthis.attackCalcs.push(this.getAffinity(stats));\n\t\tif (stats.activeAffinity || stats.weakPointAffinity) {\n\t\t\tthis.affinityTotal = stats.affinity + stats.passiveAffinity + stats.weakPointAffinity + stats.activeAffinity;\n\t\t\tthis.attackCalcs.push(this.getAffinityPotential(stats));\n\t\t}\n\n\t\tthis.attackCalcs.push(this.getCriticalBoost(stats));\n\n\t\tif (stats.ailment) {\n\t\t\tconst ailmentCalc = this.getAilment(stats);\n\t\t\t// this.attackCalcs.push(ailmentCalc);\n\t\t\tthis.attackCalcs.push(this.getAilmentAttack(stats, ailmentCalc));\n\t\t}\n\n\t\tif (stats.element) {\n\t\t\tconst elementCalc = this.getElement(stats);\n\t\t\t// this.attackCalcs.push(elementCalc);\n\t\t\tthis.attackCalcs.push(this.getElementAttack(stats, elementCalc));\n\t\t}\n\n\t\tif (stats.element) {\n\t\t\tif (stats.trueCriticalElement) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Elemental Critical Boost',\n\t\t\t\t\tvalue: stats.trueCritElementModifier * 100 + '%',\n\t\t\t\t\ticon: stats.element.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t} else if (stats.criticalElement) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Elemental Critical Boost',\n\t\t\t\t\tvalue: stats.critElementModifier * 100 + '%',\n\t\t\t\t\ticon: stats.element.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (stats.ailment) {\n\t\t\tif (stats.trueCriticalStatus) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Ailment Critical Boost',\n\t\t\t\t\tvalue: stats.trueCritStatusModifier * 100 + '%',\n\t\t\t\t\ticon: stats.ailment.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t} else if (stats.criticalStatus) {\n\t\t\t\tthis.attackCalcs.push({\n\t\t\t\t\tname: 'Ailment Critical Boost',\n\t\t\t\t\tvalue: stats.critStatusModifier * 100 + '%',\n\t\t\t\t\ticon: stats.ailment.toLowerCase() + '-gray'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (stats.elderseal) {\n\t\t\tthis.attackCalcs.push(this.getElderseal(stats));\n\t\t}\n\n\t\tif (stats.healOnHitPercent) {\n\t\t\tthis.attackCalcs.push({\n\t\t\t\tname: 'Heal on Hit',\n\t\t\t\tvalue: stats.healOnHitPercent + '%'\n\t\t\t});\n\t\t}\n\t\tif (stats.hastenRecovery != null) {\n\t\t\tthis.attackCalcs.push({\n\t\t\t\tname: 'Heal every 5 Hits',\n\t\t\t\tvalue: stats.hastenRecovery + 'HP'\n\t\t\t});\n\t\t}\n\t\tif (stats.frostcraft != null) {\n\t\t\tthis.attackCalcs.push({\n\t\t\t\tname: 'Frostcraft',\n\t\t\t\tvalue: `+[${stats.frostcraft.join(', ')}]% ATK`\n\t\t\t});\n\t\t}\n\n\t\tthis.attackCalcs.push(this.getRawAttack(stats));\n\t\tthis.attackCalcs.push(this.getRawAttackCritical(stats));\n\t\tif (this.affinityTotal < 100) {\n\t\t\tthis.attackCalcs.push(this.getRawAttackAverage(stats));\n\t\t}\n\t}\n\n\tprivate getAttack(stats: StatsModel): StatDetailModel {\n\t\tconst attackCalc: StatDetailModel = {\n\t\t\tname: 'Attack',\n\t\t\tvalue: stats.totalAttack,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Base Raw Attack',\n\t\t\t\t\tname: 'attack',\n\t\t\t\t\tvalue: Math.round(stats.attack / stats.weaponAttackModifier),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Upgrade Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Attack',\n\t\t\t\t\tname: 'passiveAttack',\n\t\t\t\t\tvalue: stats.passiveAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier,\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.elementless) {\n\t\t\tattackCalc.calculationVariables.push(this.getElementlessVariable(stats));\n\t\t\tattackCalc.calculationTemplate =\n\t\t\t\t`({attack} × {elementlessBoostPercent} + {upgrade}${stats.awakeningAttack ? ' + {awakening}' : ''} + {passiveAttack}) × {weaponModifier} ≈ ${stats.totalAttack}`;\n\t\t} else {\n\t\t\tattackCalc.calculationTemplate =\n\t\t\t\t`({attack} + {upgrade}${stats.awakeningAttack ? ' + {awakening}' : ''} + {passiveAttack}) × {weaponModifier} ≈ ${stats.totalAttack}`;\n\t\t}\n\n\t\tif (stats.awakeningAttack > 0) {\n\t\t\tattackCalc.calculationVariables.splice(2, 0, this.getAwakeningVariable(stats));\n\t\t}\n\n\t\treturn attackCalc;\n\t}\n\n\tprivate getAttackPotential(stats: StatsModel): StatDetailModel {\n\t\tconst attackPotentialCalc: StatDetailModel = {\n\t\t\tname: 'Attack Potential',\n\t\t\tvalue: stats.totalAttackPotential,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Base Raw Attack',\n\t\t\t\t\tname: 'attack',\n\t\t\t\t\tvalue: Math.round(stats.attack / stats.weaponAttackModifier),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Upgrade Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Attack',\n\t\t\t\t\tname: 'passiveAttack',\n\t\t\t\t\tvalue: stats.passiveAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Attack',\n\t\t\t\t\tname: 'activeAttack',\n\t\t\t\t\tvalue: stats.activeAttack,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier,\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.elementlessBoostPercent > 0 && stats.totalAilmentAttack == 0 && stats.totalElementAttack == 0) {\n\t\t\tattackPotentialCalc.calculationTemplate =\n\t\t\t\t(stats.activeAttackPercent > 0 ? `(` : ``)\n\t\t\t\t+ `({attack} × {elementlessBoostPercent}`\n\t\t\t\t+ ` + {upgrade}${stats.awakeningAttack ? ` + {awakening}` : ``}`\n\t\t\t\t+ (stats.activeAttackPercent > 0 ? `) × {activeAttackPercent}` : ``)\n\t\t\t\t+ ` + {passiveAttack} + {activeAttack})`\n\t\t\t\t+ `<br> × {weaponModifier} × {sharpnessModifier}`\n\t\t\t\t+ `<br>≈<br>${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier)}`;\n\t\t\tattackPotentialCalc.calculationVariables.push(this.getElementlessVariable(stats));\n\t\t} else {\n\t\t\tattackPotentialCalc.calculationTemplate =\n\t\t\t\t(stats.activeAttackPercent > 0 ? `(` : ``)\n\t\t\t\t+ `({attack}`\n\t\t\t\t+ ` + {upgrade}${stats.awakeningAttack ? ` + {awakening}` : ``}`\n\t\t\t\t+ (stats.activeAttackPercent > 0 ? `) × {activeAttackPercent}` : ``)\n\t\t\t\t+ ` + {passiveAttack} + {activeAttack})`\n\t\t\t\t+ ` × {weaponModifier} × {sharpnessModifier}`\n\t\t\t\t+ `<br>≈<br>${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier)}`;\n\t\t}\n\n\t\tif (stats.activeAttackPercent > 0) {\n\t\t\tattackPotentialCalc.calculationVariables.splice(4, 0, {\n\t\t\t\tdisplayName: 'Active Attack Percent',\n\t\t\t\tname: 'activeAttackPercent',\n\t\t\t\tvalue: stats.activeAttackPercent / 100,\n\t\t\t\tcolorClass: 'red'\n\t\t\t});\n\t\t}\n\n\t\tif (stats.awakeningAttack > 0) {\n\t\t\tattackPotentialCalc.calculationVariables.splice(2, 0, this.getAwakeningVariable(stats));\n\t\t}\n\n\t\treturn attackPotentialCalc;\n\t}\n\n\tprivate getElementlessVariable(stats: StatsModel): CalculationVariableModel {\n\t\treturn {\n\t\t\tdisplayName: 'Elementless Boost Modifier',\n\t\t\tname: 'elementlessBoostPercent',\n\t\t\tvalue: (1 + stats.elementlessBoostPercent / 100).toFixed(2),\n\t\t\tcolorClass: 'kakhi'\n\t\t};\n\t}\n\n\tprivate getAwakeningVariable(stats: StatsModel): CalculationVariableModel {\n\t\treturn {\n\t\t\tdisplayName: 'Awakening Attack',\n\t\t\tname: 'awakening',\n\t\t\tvalue: stats.awakeningAttack,\n\t\t\tcolorClass: 'green'\n\t\t};\n\t}\n\n\tprivate getSharpnessBar(stats: StatsModel) {\n\t\tif (stats.sharpnessLevelsBar && !isNaN(stats.sharpnessLevelsBar[0])) {\n\t\t\tthis.sharpnessBar.levels = JSON.parse(JSON.stringify(stats.sharpnessLevelsBar));\n\t\t\tthis.sharpnessBar.handicraftLevel = (stats.passiveSharpness / 10);\n\t\t\tthis.sharpnessBar.sharpnessDataNeeded = stats.sharpnessDataNeeded;\n\t\t} else {\n\t\t\tthis.sharpnessBar.levels = null;\n\t\t}\n\t}\n\n\tprivate getExtraData(stats: StatsModel) {\n\t\tthis.extraData = stats.extraData;\n\t}\n\n\tprivate getAffinity(stats: StatsModel): StatDetailModel {\n\t\tconst affinityValue = `${stats.affinity + stats.passiveAffinity}%`;\n\t\tconst affinityCalc: StatDetailModel = {\n\t\t\tname: 'Affinity',\n\t\t\tvalue: affinityValue,\n\t\t\tcalculationTemplate: `{affinity} + {passiveAffinity} = ${affinityValue}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Affinity',\n\t\t\t\t\tname: 'affinity',\n\t\t\t\t\tvalue: stats.affinity,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Affinity',\n\t\t\t\t\tname: 'passiveAffinity',\n\t\t\t\t\tvalue: stats.passiveAffinity,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn affinityCalc;\n\t}\n\n\tprivate getAffinityPotential(stats: StatsModel): StatDetailModel {\n\t\tconst value = `${this.affinityTotal}%`;\n\t\tconst affinityPotentialCalc: StatDetailModel = {\n\t\t\tname: 'Affinity Potential',\n\t\t\tvalue: value,\n\t\t\tcalculationTemplate: `Base: {base} + {passive} + {weakPoint} + {active} = ${value}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Affinity',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: stats.affinity,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Affinity',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.passiveAffinity,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weak Point Affinity',\n\t\t\t\t\tname: 'weakPoint',\n\t\t\t\t\tvalue: stats.weakPointAffinity,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Affinity',\n\t\t\t\t\tname: 'active',\n\t\t\t\t\tvalue: stats.activeAffinity,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn affinityPotentialCalc;\n\t}\n\n\tprivate getCriticalBoost(stats: StatsModel): StatDetailModel {\n\t\tconst critBoostValue = `${125 + stats.passiveCriticalBoostPercent}%`;\n\t\tconst critBoostCalc: StatDetailModel = {\n\t\t\tname: 'Critical Boost',\n\t\t\tvalue: critBoostValue,\n\t\t\tcalculationTemplate: `{base} + {passive} = ${critBoostValue}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Base Critical Boost',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: '125',\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Critical Boost',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.passiveCriticalBoostPercent,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn critBoostCalc;\n\t}\n\n\tprivate getAilment(stats: StatsModel): StatDetailModel {\n\t\tconst ailmentCalc: StatDetailModel = {\n\t\t\tname: 'Ailment',\n\t\t\tvalue: stats.ailment,\n\t\t\tinfo: []\n\t\t};\n\n\t\tif (stats.ailmentCapped) {\n\t\t\tailmentCalc.info.push('Ailment attack is capped.');\n\t\t\tailmentCalc.color = 'yellow';\n\t\t}\n\n\t\tif (stats.ailmentHidden && stats.elementAttackMultiplier < 1) {\n\t\t\tailmentCalc.info.push('Effectiveness reduced due to hidden ailment.');\n\t\t\tailmentCalc.color = !stats.elementAttackMultiplier ? 'gray' : 'lightgray';\n\t\t}\n\n\t\treturn ailmentCalc;\n\t}\n\n\tprivate getAilmentAttack(stats: StatsModel, ailmentCalc: StatDetailModel): StatDetailModel {\n\t\tlet value = `${Math.round(stats.totalAilmentAttack)}`;\n\t\tif (stats.totalAilmentAttack != stats.totalAilmentAttackPotential) {\n\t\t\tvalue = `${stats.totalAilmentAttack} | ${stats.totalAilmentAttackPotential}`;\n\t\t}\n\t\tconst ailmentAttackCalc: StatDetailModel = {\n\t\t\tname: 'Ailment Attack',\n\t\t\tvalue: value,\n\t\t\tvalueColor: ailmentCalc.color,\n\t\t\ticon: stats.ailment.toLowerCase() + (stats.effectiveAilmentAttack == 0 ? '-gray' : ''),\n\t\t\tcolor: ailmentCalc.color,\n\t\t\tinfo: ailmentCalc.info,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Ailment Attack',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: stats.baseAilmentAttack - stats.upgradeAilmentAttack - stats.awakeningAilmentAttack,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Upgrade Ailment Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeAilmentAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Awakening Ailment Attack',\n\t\t\t\t\tname: 'awakening',\n\t\t\t\t\tvalue: stats.awakeningAilmentAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Ailment Buildup Percent',\n\t\t\t\t\tname: 'passiveBuildup',\n\t\t\t\t\tvalue: stats.effectivePassiveAilmentBuildupPercent / 100,\n\t\t\t\t\tcolorClass: 'oyellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Ailment Attack',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.effectivePassiveAilmentAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Ailment Attack',\n\t\t\t\t\tname: 'active',\n\t\t\t\t\tvalue: stats.activeAilmentAttack,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Ailment Buildup Percent',\n\t\t\t\t\tname: 'activeBuildup',\n\t\t\t\t\tvalue: stats.activeAilmentAttackBuildUpPercent / 100,\n\t\t\t\t\tcolorClass: 'red'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailmentHidden) {\n\t\t\tailmentAttackCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Hidden Ailment Multiplier',\n\t\t\t\tname: 'multiplier',\n\t\t\t\tvalue: stats.elementAttackMultiplier,\n\t\t\t\tcolorClass: 'kakhi'\n\t\t\t});\n\n\t\t\tif (stats.elementAttackMultiplier) {\n\t\t\t\tailmentAttackCalc.calculationTemplate =\n\t\t\t\t\t`(({base} + {upgrade} + {awakening}) × {multiplier} (1 + {passiveBuildup} + {activeBuildup}) + {passive} + {active} ≈ ${stats.totalAilmentAttackPotential}`;\n\t\t\t} else {\n\t\t\t\tailmentAttackCalc.calculationTemplate =\n\t\t\t\t\t`(({base} + {upgrade} + {awakening}) × (1 + {passiveBuildup} + {activeBuildup}) + {passive} + {active}) × {multiplier} ≈ ${stats.totalAilmentAttackPotential}`;\n\t\t\t}\n\t\t} else {\n\t\t\tailmentAttackCalc.calculationTemplate =\n\t\t\t\t`({base} + {upgrade} + {awakening}) × (1 + {passiveBuildup} + {activeBuildup}) + {passive} + {active} ≈ ${stats.totalAilmentAttackPotential}`;\n\t\t}\n\n\t\treturn ailmentAttackCalc;\n\t}\n\n\tprivate getElement(stats: StatsModel): StatDetailModel {\n\t\tconst elementCalc: StatDetailModel = {\n\t\t\tname: 'Element',\n\t\t\tvalue: stats.element,\n\t\t\tinfo: []\n\t\t};\n\n\t\tif (stats.elementCapped) {\n\t\t\telementCalc.info.push('Element attack is capped.');\n\t\t\telementCalc.color = 'yellow';\n\t\t}\n\n\t\tif (stats.elementHidden && stats.elementAttackMultiplier < 1) {\n\t\t\telementCalc.info.push('Effectiveness reduced due to hidden element.');\n\t\t\telementCalc.color = !stats.elementAttackMultiplier ? 'gray' : 'lightgray';\n\t\t}\n\n\t\treturn elementCalc;\n\t}\n\n\tprivate getElementAttack(stats: StatsModel, elementCalc: StatDetailModel): StatDetailModel {\n\t\tlet value = `${Math.round(stats.totalElementAttack)}`;\n\t\tif (stats.totalElementAttack != stats.totalElementAttackPotential) {\n\t\t\tvalue = `${stats.totalElementAttack} | ${stats.totalElementAttackPotential}`;\n\t\t}\n\t\tconst elementAttackCalc: StatDetailModel = {\n\t\t\tname: 'Elment Attack',\n\t\t\tvalue: value,\n\t\t\tvalueColor: elementCalc.color,\n\t\t\ticon: stats.element.toLowerCase() + (stats.effectiveElementAttack == 0 ? '-gray' : ''),\n\t\t\tcolor: elementCalc.color,\n\t\t\tinfo: elementCalc.info,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Base Element Attack',\n\t\t\t\t\tname: 'base',\n\t\t\t\t\tvalue: stats.baseElementAttack - stats.upgradeElementAttack - stats.awakeningElementAttack,\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Upgrade Element Attack',\n\t\t\t\t\tname: 'upgrade',\n\t\t\t\t\tvalue: stats.upgradeElementAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Awakening Element Attack',\n\t\t\t\t\tname: 'awakening',\n\t\t\t\t\tvalue: stats.awakeningElementAttack,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Passive Element Attack',\n\t\t\t\t\tname: 'passive',\n\t\t\t\t\tvalue: stats.effectivePassiveElementAttack,\n\t\t\t\t\tcolorClass: 'yellow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Active Element Attack',\n\t\t\t\t\tname: 'active',\n\t\t\t\t\tvalue: stats.activeElementAttack,\n\t\t\t\t\tcolorClass: 'orange'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.elementHidden) {\n\t\t\telementAttackCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Hidden Element Multiplier',\n\t\t\t\tname: 'multiplier',\n\t\t\t\tvalue: stats.elementAttackMultiplier,\n\t\t\t\tcolorClass: 'kakhi'\n\t\t\t});\n\n\t\t\tif (stats.elementAttackMultiplier) {\n\t\t\t\telementAttackCalc.calculationTemplate = `({base} + {upgrade} + {awakening}) × {multiplier} + {passive} + {active} ≈ ${stats.totalElementAttackPotential}`;\n\t\t\t} else {\n\t\t\t\telementAttackCalc.calculationTemplate = `({base + {upgrade} + {awakening}} + {passive} + {active}) × {multiplier} ≈ ${stats.totalElementAttackPotential}`;\n\t\t\t}\n\t\t} else {\n\t\t\telementAttackCalc.calculationTemplate = `{base} + {upgrade} + {awakening} + {passive} + {active} = ${stats.totalElementAttackPotential}`;\n\t\t}\n\n\t\treturn elementAttackCalc;\n\t}\n\n\tprivate getElderseal(stats: StatsModel): StatDetailModel {\n\t\treturn {\n\t\t\tname: 'Elderseal',\n\t\t\tvalue: stats.elderseal\n\t\t};\n\t}\n\n\tprivate getRawAttack(stats: StatsModel): StatDetailModel {\n\t\tconst affinityPotentialTotal = Math.min(this.affinityTotal, 100);\n\n\t\tconst auxDivider = (stats.ailment && stats.element) ? 2 : 1;\n\n\t\tconst trueElement =\n\t\t\tthis.getElementAverage(\n\t\t\t\tstats.totalElementAttackPotential, // Attack\n\t\t\t\t0, // Affinity\n\t\t\t\t0, // Critical Modifier\n\t\t\t\tstats.effectiveElementalSharpnessModifier, // Weaponn Modifier\n\t\t\t\tauxDivider // Divider\n\t\t\t);\n\n\t\tconst trueAilment =\n\t\t\tthis.getAilmentAverage(\n\t\t\t\tstats.totalAilmentAttackPotential, // Attack\n\t\t\t\t0, // Affinity\n\t\t\t\t0, // Critical Modifier\n\t\t\t\tstats.effectiveElementalSharpnessModifier, // Weapon Modifier\n\t\t\t\tauxDivider // Divider\n\t\t\t);\n\n\t\tconst rawAttackAveragePotentialCalc: StatDetailModel = {\n\t\t\tname: 'True Raw',\n\t\t\tvalue: Number.isInteger(stats.totalAttackPotential) ?\n\t\t\t\t`${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`\n\t\t\t\t: 0,\n\t\t\textra1: stats.ailment && trueAilment ? trueAilment : null,\n\t\t\tclass1: stats.ailment && trueAilment ? stats.ailment : null,\n\t\t\textra2: stats.element && trueElement ? trueElement : null,\n\t\t\tclass2: stats.element && trueElement ? stats.element : null,\n\t\t\tcalculationTemplate:\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalAttackPotential} × {sharpnessModifier} ÷ {weaponModifier} ≈ ${Math.round(stats.totalAttackPotential * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Attack Potential',\n\t\t\t\t\tname: 'totalAttackPotential',\n\t\t\t\t\tvalue: stats.totalAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Affinity Potential',\n\t\t\t\t\tname: 'totalAffinityPotential',\n\t\t\t\t\tvalue: (affinityPotentialTotal / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier.toFixed(2),\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailment && trueAilment) {\n\t\t\trawAttackAveragePotentialCalc.extra1 = trueAilment;\n\t\t\trawAttackAveragePotentialCalc.class1 = stats.ailment;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalAilment} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">30</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueAilment}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailement Attack',\n\t\t\t\t\tname: 'totalAilment',\n\t\t\t\t\tvalue: stats.totalAilmentAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.extra2 = trueElement;\n\t\t\trawAttackAveragePotentialCalc.class2 = stats.element;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalElement} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">10</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueElement}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Attack',\n\t\t\t\t\tname: 'totalElement',\n\t\t\t\t\tvalue: stats.totalElementAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (stats.ailment && trueAilment || stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Element Sharpness Modifier',\n\t\t\t\tname: 'elementSharpnessModifier',\n\t\t\t\tvalue: stats.effectiveElementalSharpnessModifier.toFixed(2),\n\t\t\t\tcolorClass: 'purple'\n\t\t\t});\n\t\t}\n\n\t\treturn rawAttackAveragePotentialCalc;\n\t}\n\n\tprivate getRawAttackCritical(stats: StatsModel): StatDetailModel {\n\t\tconst affinityPotentialTotal = Math.min(this.affinityTotal, 100);\n\n\t\tconst auxDivider = (stats.ailment && stats.element) ? 2 : 1;\n\n\t\tlet elementCriticalBoost = 1;\n\t\tif (stats.trueCriticalElement) {\n\t\t\telementCriticalBoost = stats.trueCritElementModifier;\n\t\t} else if (stats.criticalElement) {\n\t\t\telementCriticalBoost = stats.critElementModifier;\n\t\t}\n\t\tconst trueElement =\n\t\t\tthis.getElementAverage(\n\t\t\t\tstats.totalElementAttackPotential,\n\t\t\t\t100,\n\t\t\t\telementCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tlet ailmentCriticalBoost = 1;\n\t\tif (stats.trueCriticalStatus) {\n\t\t\tailmentCriticalBoost = stats.trueCritStatusModifier;\n\t\t} else if (stats.criticalStatus) {\n\t\t\tailmentCriticalBoost = stats.critStatusModifier;\n\t\t}\n\t\tconst trueAilment =\n\t\t\tthis.getAilmentAverage(\n\t\t\t\tstats.totalAilmentAttackPotential,\n\t\t\t\t100,\n\t\t\t\tailmentCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tconst rawAttackAveragePotentialCalc: StatDetailModel = {\n\t\t\tname: 'True Critical Raw',\n\t\t\tvalue: Number.isInteger(stats.totalAttackPotential) ?\n\t\t\t\t`${Math.round(stats.totalAttackPotential * (1.25 + stats.passiveCriticalBoostPercent / 100) * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`\n\t\t\t\t: 0,\n\t\t\textra1: stats.ailment && trueAilment ? trueAilment : null,\n\t\t\tclass1: stats.ailment && trueAilment ? stats.ailment : null,\n\t\t\textra2: stats.element && trueElement ? trueElement : null,\n\t\t\tclass2: stats.element && trueElement ? stats.element : null,\n\t\t\tcalculationTemplate:\n\t\t\t\t`<i class=\"fas fa-bullseye fa-xs\"></i> {totalAttackPotential} × {criticalBoost} × {sharpnessModifier} ÷ {weaponModifier} ≈ ${Math.round(stats.totalAttackPotential * (1.25 + stats.passiveCriticalBoostPercent / 100) * stats.effectivePhysicalSharpnessModifier / stats.weaponAttackModifier)}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Attack Potential',\n\t\t\t\t\tname: 'totalAttackPotential',\n\t\t\t\t\tvalue: stats.totalAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Affinity Potential',\n\t\t\t\t\tname: 'totalAffinityPotential',\n\t\t\t\t\tvalue: (affinityPotentialTotal / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Critical Boost',\n\t\t\t\t\tname: 'criticalBoost',\n\t\t\t\t\tvalue: ((stats.passiveCriticalBoostPercent + 125) / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier.toFixed(2),\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailment && trueAilment) {\n\t\t\trawAttackAveragePotentialCalc.extra1 = trueAilment;\n\t\t\trawAttackAveragePotentialCalc.class1 = stats.ailment;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalAilment} × {criticalAilmentBoost} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">30<span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueAilment}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailement Attack',\n\t\t\t\t\tname: 'totalAilment',\n\t\t\t\t\tvalue: stats.totalAilmentAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailment Critical Boost',\n\t\t\t\t\tname: 'criticalAilmentBoost',\n\t\t\t\t\tvalue: ailmentCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.extra2 = trueElement;\n\t\t\trawAttackAveragePotentialCalc.class2 = stats.element;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> {totalElement} × {criticalElementBoost} × {elementSharpnessModifier} ÷ <span class=\"ogreen\">10</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueElement}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Attack',\n\t\t\t\t\tname: 'totalElement',\n\t\t\t\t\tvalue: stats.totalElementAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Critical Boost',\n\t\t\t\t\tname: 'criticalElementBoost',\n\t\t\t\t\tvalue: elementCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (stats.ailment && trueAilment || stats.element && trueElement) {\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Element Sharpness Modifier',\n\t\t\t\tname: 'elementSharpnessModifier',\n\t\t\t\tvalue: stats.effectiveElementalSharpnessModifier.toFixed(2),\n\t\t\t\tcolorClass: 'purple'\n\t\t\t});\n\t\t}\n\n\t\treturn rawAttackAveragePotentialCalc;\n\t}\n\n\tprivate getRawAttackAverage(stats: StatsModel): StatDetailModel {\n\t\tconst affinityPotentialTotal = Math.min(this.affinityTotal, 100);\n\t\tconst rawAttackAveragePotential =\n\t\t\tthis.getRawAverage(\n\t\t\t\tstats.totalAttackPotential,\n\t\t\t\taffinityPotentialTotal,\n\t\t\t\tstats.passiveCriticalBoostPercent,\n\t\t\t\tstats.weaponAttackModifier\n\t\t\t);\n\n\t\tconst auxDivider = (stats.ailment && stats.element) ? 2 : 1;\n\n\t\tlet elementCriticalBoost = 1;\n\t\tif (stats.trueCriticalElement) {\n\t\t\telementCriticalBoost = stats.trueCritElementModifier;\n\t\t} else if (stats.criticalElement) {\n\t\t\telementCriticalBoost = stats.critElementModifier;\n\t\t}\n\t\tconst trueElementPotential =\n\t\t\tthis.getElementAverage(\n\t\t\t\tstats.totalElementAttackPotential,\n\t\t\t\tMath.max(affinityPotentialTotal, 0),\n\t\t\t\telementCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tlet ailmentCriticalBoost = 1;\n\t\tif (stats.trueCriticalStatus) {\n\t\t\tailmentCriticalBoost = stats.trueCritStatusModifier;\n\t\t} else if (stats.criticalStatus) {\n\t\t\tailmentCriticalBoost = stats.critStatusModifier;\n\t\t}\n\t\tconst trueAilmentPotential =\n\t\t\tthis.getAilmentAverage(\n\t\t\t\tstats.totalAilmentAttackPotential,\n\t\t\t\tMath.max(affinityPotentialTotal, 0),\n\t\t\t\tailmentCriticalBoost,\n\t\t\t\tstats.effectiveElementalSharpnessModifier,\n\t\t\t\tauxDivider\n\t\t\t);\n\n\t\tconst rawAttackAveragePotentialCalc: StatDetailModel = {\n\t\t\tname: 'True Average Raw',\n\t\t\tvalue: Number.isInteger(rawAttackAveragePotential) ? Math.round(rawAttackAveragePotential * stats.effectivePhysicalSharpnessModifier) : 0,\n\t\t\tcalculationTemplate:\n\t\t\t\t`<i class=\"fas fa-bullseye fa-sm\"></i> ({totalAttackPotential} × {totalAffinityPotential} × {criticalBoost} + {totalAttackPotential} × (1 - {totalAffinityPotential}))`\n\t\t\t\t+ `<br>× {sharpnessModifier} ÷ {weaponModifier} ≈ ${rawAttackAveragePotential}`,\n\t\t\tcalculationVariables: [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Attack Potential',\n\t\t\t\t\tname: 'totalAttackPotential',\n\t\t\t\t\tvalue: stats.totalAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Affinity Potential',\n\t\t\t\t\tname: 'totalAffinityPotential',\n\t\t\t\t\tvalue: (affinityPotentialTotal / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Total Critical Boost',\n\t\t\t\t\tname: 'criticalBoost',\n\t\t\t\t\tvalue: ((stats.passiveCriticalBoostPercent + 125) / 100).toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Physical Sharpness Modifier',\n\t\t\t\t\tname: 'sharpnessModifier',\n\t\t\t\t\tvalue: stats.effectivePhysicalSharpnessModifier,\n\t\t\t\t\tcolorClass: 'purple'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Weapon Modifier',\n\t\t\t\t\tname: 'weaponModifier',\n\t\t\t\t\tvalue: stats.weaponAttackModifier.toFixed(2),\n\t\t\t\t\tcolorClass: 'ogreen'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (stats.ailment && trueAilmentPotential) {\n\t\t\trawAttackAveragePotentialCalc.extra1 = trueAilmentPotential;\n\t\t\trawAttackAveragePotentialCalc.class1 = stats.ailment;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> ({totalAilmentPotential} × {totalAffinityPotential} × {criticalAilmentBoost} + {totalAilmentPotential} × (1 - {totalAffinityPotential}))`\n\t\t\t\t+ `<br> × {elementSharpnessModifier} ÷ <span class=\"ogreen\">30</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueAilmentPotential}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailement Attack Potential',\n\t\t\t\t\tname: 'totalAilmentPotential',\n\t\t\t\t\tvalue: stats.totalAilmentAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Ailment Critical Boost',\n\t\t\t\t\tname: 'criticalAilmentBoost',\n\t\t\t\t\tvalue: ailmentCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tif (stats.element && trueElementPotential) {\n\t\t\trawAttackAveragePotentialCalc.extra2 = trueElementPotential;\n\t\t\trawAttackAveragePotentialCalc.class2 = stats.element;\n\t\t\trawAttackAveragePotentialCalc.calculationTemplate +=\n\t\t\t\t`<br><i class=\"fas fa-bullseye fa-xs\"></i> ({totalElementPotential} × {totalAffinityPotential} × {criticalElementBoost} + {totalElementPotential} × (1 - {totalAffinityPotential}))`\n\t\t\t\t+ `<br> × {elementSharpnessModifier} ÷ <span class=\"ogreen\">10</span>${auxDivider == 2 ? ' ÷ 2' : ''} ≈ ${trueElementPotential}`;\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push(\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Attack Potential',\n\t\t\t\t\tname: 'totalElementPotential',\n\t\t\t\t\tvalue: stats.totalElementAttackPotential,\n\t\t\t\t\tcolorClass: 'green'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: 'Element Critical Boost',\n\t\t\t\t\tname: 'criticalElementBoost',\n\t\t\t\t\tvalue: elementCriticalBoost.toFixed(2),\n\t\t\t\t\tcolorClass: 'oblue'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (stats.ailment && trueAilmentPotential || stats.element && trueElementPotential) {\n\t\t\trawAttackAveragePotentialCalc.calculationVariables.push({\n\t\t\t\tdisplayName: 'Element Sharpness Modifier',\n\t\t\t\tname: 'elementSharpnessModifier',\n\t\t\t\tvalue: stats.effectiveElementalSharpnessModifier.toFixed(2),\n\t\t\t\tcolorClass: 'purple'\n\t\t\t});\n\t\t}\n\n\t\treturn rawAttackAveragePotentialCalc;\n\t}\n\n\tprivate buildDefenseCalcs(stats: StatsModel) {\n\t\tlet defValue = '';\n\t\tfor (let i = 0; i < stats.defense.length; i++) {\n\t\t\tlet def = stats.defense[i];\n\t\t\tif (i == stats.defense.length - 1) {\n\t\t\t\tdef += 101;\n\t\t\t}\n\t\t\tdefValue += Math.round(def * (1 + stats.passiveDefensePercent / 100) + stats.passiveDefense + stats.activeDefense);\n\t\t\tif (i < stats.defense.length - 2) {\n\t\t\t\tdefValue += ' ➝ ';\n\t\t\t} else if (i < stats.defense.length - 1) {\n\t\t\t\tdefValue += ' ➟ ';\n\t\t\t}\n\t\t}\n\n\t\t// Defense [0]\n\t\tthis.defenseCalcs[0].value = defValue;\n\t\t// Health [1]\n\t\tif (stats.passiveHealth) {\n\t\t\tthis.defenseCalcs[1].value = 100 + stats.passiveHealth;\n\t\t}\n\t\t// Stamina [2]\n\t\tif (stats.passiveStamina) {\n\t\t\tthis.defenseCalcs[2].value = 100 + stats.passiveStamina;\n\t\t}\n\t\t// Fire [3]\n\t\tthis.defenseCalcs[3].value = stats.fireResist + stats.passiveFireResist;\n\t\t// Water [4]\n\t\tthis.defenseCalcs[4].value = stats.waterResist + stats.passiveWaterResist;\n\t\t// Thunder [5]\n\t\tthis.defenseCalcs[5].value = stats.thunderResist + stats.passiveThunderResist;\n\t\t// Ice [6]\n\t\tthis.defenseCalcs[6].value = stats.iceResist + stats.passiveIceResist;\n\t\t// Dragon [7]\n\t\tthis.defenseCalcs[7].value = stats.dragonResist + stats.passiveDragonResist;\n\t}\n\n\tprivate buildAmmoCapacities(stats: StatsModel) {\n\t\tif (stats.ammoCapacities) {\n\t\t\tstats.ammoCapacitiesUp = JSON.parse(JSON.stringify(stats.ammoCapacities));\n\t\t\tif (stats.ammoUp >= 1) {\n\t\t\t\tfor (const ammo of stats.ammoCapacitiesUp.ammo) {\n\t\t\t\t\tif (ammo.levels.length == 3) {\n\t\t\t\t\t\tif (ammo.name !== 'sticky' && ammo.name !== 'cluster') {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity >= 5 ? 2 : (ammo.levels[0].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity < 3 && ammo.levels[0].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (stats.ammoUp >= 2) {\n\t\t\t\tfor (const ammo of stats.ammoCapacitiesUp.ammo) {\n\t\t\t\t\tif (ammo.levels.length == 3) {\n\t\t\t\t\t\tif (ammo.name !== 'sticky' && ammo.name !== 'cluster') {\n\t\t\t\t\t\t\tammo.levels[1].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[1].capacity >= 5 ? 2 : (ammo.levels[1].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[1].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[1].capacity < 3 && ammo.levels[1].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (ammo.levels.length == 2) {\n\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t+= (ammo.levels[0].capacity >= 5 ? 2 : (ammo.levels[0].capacity > 0 ? 1 : 0));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (stats.ammoUp >= 3) {\n\t\t\t\tfor (const ammo of stats.ammoCapacitiesUp.ammo) {\n\t\t\t\t\tif (ammo.levels.length == 3) {\n\t\t\t\t\t\tif (ammo.name !== 'sticky' && ammo.name !== 'cluster') {\n\t\t\t\t\t\t\tammo.levels[2].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[2].capacity >= 5 ? 2 : (ammo.levels[2].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[2].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[2].capacity < 3 && ammo.levels[2].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (ammo.levels.length == 2) {\n\t\t\t\t\t\tammo.levels[1].capacity\n\t\t\t\t\t\t\t+= (ammo.levels[1].capacity >= 5 ? 2 : (ammo.levels[1].capacity > 0 ? 1 : 0));\n\t\t\t\t\t}\n\t\t\t\t\tif (ammo.levels.length == 1) {\n\t\t\t\t\t\tif (ammo.name == 'wyvern') {\n\t\t\t\t\t\t} else if (ammo.name !== 'dragon' && ammo.name !== 'slicing') {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity >= 5 ? 2 : (ammo.levels[0].capacity > 0 ? 1 : 0));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tammo.levels[0].capacity\n\t\t\t\t\t\t\t\t+= (ammo.levels[0].capacity < 3 && ammo.levels[0].capacity > 0 ? 1 : 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate buildKinsect(stats: StatsModel) {\n\t\tif (stats.kinsect) {\n\t\t\tif (stats.extraData) {\n\t\t\t\tswitch (stats.extraData.otherData[0].value) {\n\t\t\t\t\tcase 'Blunt':\n\t\t\t\t\t\tif (stats.kinsect.attackType == AttackType.Blunt) {\n\t\t\t\t\t\t\t// stats.kinsect.power += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Sever':\n\t\t\t\t\t\tif (stats.kinsect.attackType == AttackType.Sever) {\n\t\t\t\t\t\t\t// stats.kinsect.power += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Element':\n\t\t\t\t\t\tif (stats.kinsect.element) {\n\t\t\t\t\t\t\t// stats.kinsect.powerElement += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Health':\n\t\t\t\t\t\t// stats.kinsect.heal += 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Speed':\n\t\t\t\t\t\t// stats.kinsect.speed += 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Stamina':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getRawAverage(attack: number, affinity: number, criticalBoostPercent: number, weaponAttackModifier: number): number {\n\t\tconst attackWithAffinity = attack * (Math.min(affinity, 100) / 100) * (Math.min(affinity, 100) > 0 ? (criticalBoostPercent + 125) / 100 : 1.25);\n\t\tconst attackWithoutAffinity = attack * (1 - Math.min(affinity, 100) / 100);\n\t\treturn Math.round((attackWithAffinity + attackWithoutAffinity) / weaponAttackModifier);\n\t}\n\n\tprivate getAilmentAverage(attack: number, affinity: number, criticalModifier: number, sharpnessModifier: number, auxDivider: number): number {\n\t\tconst ailmentWithAffinity = attack * (Math.min(affinity, 100) / 100) * (Math.min(affinity, 100) > 0 ? criticalModifier : 1);\n\t\tconst ailmentWithoutAffinity = attack * (1 - Math.min(affinity, 100) / 100);\n\t\treturn Math.round((ailmentWithAffinity + ailmentWithoutAffinity) * sharpnessModifier / 30 / (auxDivider ? auxDivider : 1));\n\t}\n\n\tprivate getElementAverage(attack: number, affinity: number, criticalModifier: number, sharpnessModifier: number, auxDivider: number): number {\n\t\tconst elementWithAffinity = attack * (Math.min(affinity, 100) / 100) * criticalModifier;\n\t\tconst elementWithoutAffinity = attack * (1 - Math.min(affinity, 100) / 100);\n\t\treturn Math.round((elementWithAffinity + elementWithoutAffinity) * sharpnessModifier / 10 / (auxDivider ? auxDivider : 1));\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { AmmoCapacitiesModel } from '../models/ammo-capacities.model';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningModel } from '../models/awakening.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { MelodiesDetailModel, MelodiesModel } from '../models/melodies.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SetBonusModel } from '../models/set-bonus.model';\nimport { SharpnessModifierModel } from '../models/sharpness-modifier.model';\nimport { SkillReferenceModel } from '../models/skill-reference.model';\nimport { SkillModel } from '../models/skill.model';\nimport { ToolModel } from '../models/tool.model';\nimport { UpgradeModel } from '../models/upgrade.model';\nimport { WeaponModifierModel } from '../models/weapon-modifier.model';\nimport { AppDataProvider } from '../providers/app-data.provider';\nimport { AilmentType } from '../types/ailment.type';\nimport { DamageType } from '../types/damage.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\n\n@Injectable()\nexport class DataService {\n\tconstructor(\n\t\tprivate appDataProvider: AppDataProvider\n\t) { }\n\n\tgetWeapons(weaponType?: WeaponType): ItemModel[] {\n\t\tlet result = new Array<ItemModel>();\n\t\tif (weaponType) {\n\t\t\tresult = this.appDataProvider.appData.weapons.filter(w => w.weaponType == weaponType);\n\t\t} else {\n\t\t\tresult = this.appDataProvider.appData.weapons;\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetWeapon(id: number): ItemModel {\n\t\tconst weapon: ItemModel = _.find(this.appDataProvider.appData.weapons, w => w.id === id);\n\t\tif (weapon.weaponType == WeaponType.LightBowgun || weapon.weaponType == WeaponType.HeavyBowgun) {\n\t\t\tweapon.ammoCapacities = this.getAmmoCapacities(weapon.id);\n\t\t} else if (weapon.weaponType == WeaponType.HuntingHorn && weapon.otherData) {\n\t\t\tweapon.melodies = this.getMelodies(weapon.otherData.map(item => item.value).join(';'));\n\t\t}\n\t\treturn weapon;\n\t}\n\n\tgetArmors(armorType?: ItemType): ItemModel[] {\n\t\tlet result = new Array<ItemModel>();\n\t\tif (armorType) {\n\t\t\tresult = this.appDataProvider.appData.armors.filter(armor => armor.itemType);\n\t\t} else {\n\t\t\tresult = this.appDataProvider.appData.armors;\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetArmor(id: number): ItemModel {\n\t\treturn _.find(this.appDataProvider.appData.armors, armor => armor.id === id);\n\t}\n\n\tgetCharm(id: number): ItemModel {\n\t\treturn _.find(this.appDataProvider.appData.charms, charm => charm.id === id);\n\t}\n\n\tgetTool(id: number, type: ItemType): ItemModel {\n\t\tconst item = _.find(this.appDataProvider.appData.tools, tool => tool.id === id);\n\t\titem.itemType = type;\n\t\treturn item;\n\t}\n\n\tgetArmorByType(type: ItemType): ItemModel[] {\n\t\treturn _.filter(this.appDataProvider.appData.armors, armor => armor.itemType === type);\n\t}\n\n\tgetCharms(): ItemModel[] {\n\t\treturn this.appDataProvider.appData.charms;\n\t}\n\n\tgetTools(type: ItemType): ToolModel[] {\n\t\tconst items = this.appDataProvider.appData.tools.map(x => Object.assign({}, x));\n\t\t_.each(items, tool => {\n\t\t\ttool.itemType = type;\n\t\t});\n\t\treturn items;\n\t}\n\n\tgetDecorations(level?: number): DecorationModel[] {\n\t\tlet result = new Array<DecorationModel>();\n\t\tif (level) {\n\t\t\tresult = this.appDataProvider.appData.decorations.filter(d => d.level <= level);\n\t\t} else {\n\t\t\tresult = this.appDataProvider.appData.decorations;\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetSetBonuses(): SetBonusModel[] {\n\t\treturn this.appDataProvider.appData.setBonuses.filter(setBonus => setBonus.buildId);\n\t}\n\n\tgetSetBonus(id: string): SetBonusModel {\n\t\treturn _.find(this.appDataProvider.appData.setBonuses, setBonus => setBonus.id === id);\n\t}\n\n\tgetSetBonusByBuildId(buildId: number): SetBonusModel {\n\t\treturn _.find(this.appDataProvider.appData.setBonuses, setBonus => setBonus.buildId === buildId);\n\t}\n\n\tgetSkill(id: string): SkillModel {\n\t\treturn _.find(this.appDataProvider.appData.skills, skill => skill.id === id);\n\t}\n\n\tgetSkills(itemSkills: SkillReferenceModel[]): SkillModel[] {\n\t\treturn _.filter(this.appDataProvider.appData.skills, skill => {\n\t\t\treturn _.some(itemSkills, itemSkill => skill.id == itemSkill.id);\n\t\t});\n\t}\n\n\tgetWeaponModifier(weaponType: WeaponType): WeaponModifierModel {\n\t\treturn _.find(this.appDataProvider.appData.weaponModifiers, (mod: WeaponModifierModel) => {\n\t\t\treturn mod.type == weaponType;\n\t\t});\n\t}\n\n\tgetSharpnessModifier(damageType: DamageType, colorIndex: number): SharpnessModifierModel {\n\t\treturn _.find(this.appDataProvider.appData.sharpnessModifiers, mod => {\n\t\t\treturn mod.damageType == damageType && mod.colorIndex == colorIndex;\n\t\t});\n\t}\n\n\tgetDecoration(id: number): DecorationModel {\n\t\treturn _.find(this.appDataProvider.appData.decorations, decoration => decoration.id == id);\n\t}\n\n\tgetAugmentations(): AugmentationModel[] {\n\t\treturn this.appDataProvider.appData.augmentations;\n\t}\n\n\tgetAugmentation(id: number): AugmentationModel {\n\t\treturn _.find(this.appDataProvider.appData.augmentations, augmentation => augmentation.id == id);\n\t}\n\n\tgetUpgrades(): UpgradeModel[] {\n\t\treturn this.appDataProvider.appData.upgrades;\n\t}\n\n\tgetAwakenings(): AwakeningModel[] {\n\t\treturn this.appDataProvider.appData.awakenings;\n\t}\n\tgetAwakening(id: number): AwakeningModel {\n\t\treturn _.find(this.appDataProvider.appData.awakenings, awakening => awakening.id == id);\n\t}\n\n\tgetSafiElementAttack(weaponIndex: number): number {\n\t\tlet elementAttack = 0;\n\t\tconst elementAwakening: AwakeningModel = this.appDataProvider.appData.awakenings.find(x => x.id == 6);\n\t\telementAttack = elementAwakening.safiElements[weaponIndex];\n\t\treturn elementAttack;\n\t}\n\n\tgetSafiAilmentAttack(weaponIndex: number, ailmentType: number): number {\n\t\tlet ailmentAttack = 0;\n\t\tconst ailmentAwakening = this.appDataProvider.appData.awakenings.find(x => x.id == 5);\n\t\tailmentAttack = ailmentAwakening.safiAilments[weaponIndex][ailmentType];\n\t\treturn ailmentAttack;\n\t}\n\n\tgetSafiElementName(element: ElementType): string {\n\t\tlet elementName = '';\n\t\tswitch (element) {\n\t\t\tcase ElementType.Fire:\n\t\t\t\telementName = 'Hell';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Water:\n\t\t\t\telementName = 'Aqua';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Thunder:\n\t\t\t\telementName = 'Bolt';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Ice:\n\t\t\t\telementName = 'Frost';\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Dragon:\n\t\t\t\telementName = 'Drak';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn elementName;\n\t}\n\n\tgetSafiAilmentName(ailment: AilmentType): string {\n\t\tlet ailmentName = '';\n\t\tswitch (ailment) {\n\t\t\tcase AilmentType.Paralysis:\n\t\t\t\tailmentName = 'Bind';\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Sleep:\n\t\t\t\tailmentName = 'Dream';\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Poison:\n\t\t\t\tailmentName = 'Venom';\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Blast:\n\t\t\t\tailmentName = 'Shatter';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn ailmentName;\n\t}\n\n\tgetSafiName(weaponType: WeaponType): string {\n\t\tlet name = '';\n\t\tswitch (weaponType) {\n\t\t\tcase WeaponType.GreatSword:\n\t\t\t\tname = 'splitter';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.LongSword:\n\t\t\t\tname = 'blade';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.SwordAndShield:\n\t\t\t\tname = 'fang';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.DualBlades:\n\t\t\t\tname = 'claws';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Hammer:\n\t\t\t\tname = 'crusher';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.HuntingHorn:\n\t\t\t\tname = 'horn';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Lance:\n\t\t\t\tname = 'snout';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Gunlance:\n\t\t\t\tname = 'buster';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.SwitchAxe:\n\t\t\t\tname = 'axe';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.ChargeBlade:\n\t\t\t\tname = 'shield';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\tname = 'spear';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\tname = 'shot';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\tname = 'cannon';\n\t\t\t\tbreak;\n\t\t\tcase WeaponType.Bow:\n\t\t\t\tname = 'bow';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn name;\n\t}\n\n\tgetSafiWeaponName(weaponType: WeaponType, weaponElement: ElementType, weaponAilment: AilmentType): string {\n\t\tlet weaponName = 'Safi\\'s ';\n\n\t\tconst safiName = this.getSafiName(weaponType);\n\t\tlet elementName = '';\n\n\t\tif (weaponElement != ElementType.None) {\n\t\t\telementName = this.getSafiElementName(weaponElement);\n\t\t}\n\n\t\tlet ailmentName = '';\n\n\t\tif (weaponAilment != AilmentType.None) {\n\t\t\tailmentName = this.getSafiAilmentName(weaponAilment);\n\t\t}\n\n\t\tif (elementName != '' || ailmentName != '') {\n\t\t\tif (ailmentName == '') {\n\t\t\t\tweaponName += elementName + safiName;\n\t\t\t} else if (elementName == '') {\n\t\t\t\tweaponName += ailmentName + safiName;\n\t\t\t} else {\n\t\t\t\tweaponName += elementName + safiName + '/' + ailmentName + safiName;\n\t\t\t}\n\t\t} else {\n\t\t\tweaponName += safiName;\n\t\t}\n\t\treturn weaponName;\n\t}\n\n\tgetModifications(): ModificationModel[] {\n\t\treturn this.appDataProvider.appData.modifications;\n\t}\n\n\tgetModification(id: number): ModificationModel {\n\t\treturn _.find(this.appDataProvider.appData.modifications, modification => modification.id == id);\n\t}\n\n\tgetKinsects(): KinsectModel[] {\n\t\treturn this.appDataProvider.appData.kinsects;\n\t}\n\n\tgetKinsect(id: number): KinsectModel {\n\t\treturn _.find(this.appDataProvider.appData.kinsects, kinsect => kinsect.id == id);\n\t}\n\n\tgetWeaponTypeName(weaponType: WeaponType): string {\n\t\tswitch (weaponType) {\n\t\t\tcase WeaponType.ChargeBlade:\n\t\t\t\treturn 'Charge Blade';\n\t\t\tcase WeaponType.DualBlades:\n\t\t\t\treturn 'Dual Blades';\n\t\t\tcase WeaponType.GreatSword:\n\t\t\t\treturn 'Great Sword';\n\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\treturn 'Heavy Bowgun';\n\t\t\tcase WeaponType.HuntingHorn:\n\t\t\t\treturn 'Hunting Horn';\n\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\treturn 'Insect Glaive';\n\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\treturn 'Light Bowgun';\n\t\t\tcase WeaponType.LongSword:\n\t\t\t\treturn 'Long Sword';\n\t\t\tcase WeaponType.SwitchAxe:\n\t\t\t\treturn 'Switch Axe';\n\t\t\tcase WeaponType.SwordAndShield:\n\t\t\t\treturn 'Sword and Shield';\n\t\t\tdefault:\n\t\t\t\treturn weaponType;\n\t\t}\n\t}\n\n\tgetWeaponTypeIcon(weaponType: WeaponType): string {\n\t\treturn this.getWeaponTypeName(weaponType).toLowerCase().split(' ').join('');\n\t}\n\n\tgetEquipmentCategory(itemType: ItemType): EquipmentCategoryType {\n\t\tswitch (itemType) {\n\t\t\tcase ItemType.Weapon:\n\t\t\t\treturn EquipmentCategoryType.Weapon;\n\t\t\tcase ItemType.Charm:\n\t\t\t\treturn EquipmentCategoryType.Charm;\n\t\t\tcase ItemType.Tool1:\n\t\t\tcase ItemType.Tool2:\n\t\t\t\treturn EquipmentCategoryType.Tool;\n\t\t\tcase ItemType.Head:\n\t\t\tcase ItemType.Chest:\n\t\t\tcase ItemType.Arms:\n\t\t\tcase ItemType.Waist:\n\t\t\tcase ItemType.Legs:\n\t\t\t\treturn EquipmentCategoryType.Armor;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetElementId(element: ElementType): number {\n\t\tlet elementId = 0;\n\t\tswitch (element) {\n\t\t\tcase ElementType.Fire:\n\t\t\t\telementId = 1;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Water:\n\t\t\t\telementId = 2;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Thunder:\n\t\t\t\telementId = 3;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Ice:\n\t\t\t\telementId = 4;\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Dragon:\n\t\t\t\telementId = 5;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn elementId;\n\t}\n\n\tgetAilmentId(ailment: AilmentType): number {\n\t\tlet ailmentId = 0;\n\t\tswitch (ailment) {\n\t\t\tcase AilmentType.Paralysis:\n\t\t\t\tailmentId = 1;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Sleep:\n\t\t\t\tailmentId = 2;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Poison:\n\t\t\t\tailmentId = 3;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Blast:\n\t\t\t\tailmentId = 4;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn ailmentId;\n\t}\n\n\tgetElement(elementId: number): ElementType {\n\t\tlet element = null;\n\t\tswitch (elementId) {\n\t\t\tcase 1:\n\t\t\t\telement = ElementType.Fire;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\telement = ElementType.Water;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\telement = ElementType.Thunder;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\telement = ElementType.Ice;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\telement = ElementType.Dragon;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn element;\n\t}\n\n\tgetAilment(ailmentId: number): AilmentType {\n\t\tlet ailment = null;\n\t\tswitch (ailmentId) {\n\t\t\tcase 1:\n\t\t\t\tailment = AilmentType.Paralysis;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tailment = AilmentType.Sleep;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tailment = AilmentType.Poison;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tailment = AilmentType.Blast;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn ailment;\n\t}\n\n\tgetAmmoCapacities(weaponId: number): AmmoCapacitiesModel {\n\t\treturn this.appDataProvider.appData.ammoCapacities.find(c => c.id === weaponId);\n\t}\n\n\tgetMelodies(notes: string): MelodiesModel {\n\t\tconst melody: MelodiesModel = this.appDataProvider.appData.melodies.find(c => c.notes.join(';') === notes);\n\t\treturn this.getMelodyDetails(melody);\n\t}\n\n\tgetMelodiesById(melodyId: number): MelodiesModel {\n\t\tconst melody: MelodiesModel = this.appDataProvider.appData.melodies.find(c => c.id === melodyId);\n\t\treturn this.getMelodyDetails(melody);\n\t}\n\n\tgetMelodyDetails(melody: MelodiesModel): MelodiesModel {\n\t\tmelody.melodyEffects = [];\n\t\tfor (let i = 0; i < melody.melodies.length; i++) {\n\t\t\tconst melodyEffect = new MelodiesDetailModel();\n\t\t\tmelodyEffect.melody = melody.melodies[i];\n\t\t\tmelodyEffect.effects = melody.melodiesEffect.filter(e => e.index == i);\n\t\t\tfor (const effect of melodyEffect.effects) {\n\t\t\t\teffect.name = this.appDataProvider.appData.melodyEffect.find(m => m.id == effect.id).name;\n\t\t\t}\n\t\t\tmelody.melodyEffects.push(melodyEffect);\n\t\t}\n\n\t\treturn melody;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { BuffModel } from '../models/buffs.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { MelodiesModel } from '../models/melodies.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SetBonusModel } from '../models/set-bonus.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { EldersealType } from '../types/elderseal.type';\nimport { ElementType } from '../types/element.type';\nimport { ItemType } from '../types/item.type';\nimport { SkillService } from './skill.service';\nimport { StatService } from './stat.service';\n\n@Injectable()\nexport class EquipmentService {\n\tpublic skills: EquippedSkillModel[];\n\tpublic items: ItemModel[];\n\tpublic decorations: DecorationModel[];\n\tpublic augmentations: AugmentationModel[];\n\tpublic upgradeContainer: UpgradeContainerModel;\n\tpublic awakenings: AwakeningLevelModel[];\n\tpublic awakeningSetbonus: SetBonusModel;\n\tpublic modifications: ModificationModel[];\n\tpublic kinsect: KinsectModel;\n\tpublic buffs: BuffModel;\n\n\tconstructor(\n\t\tprivate skillService: SkillService,\n\t\tprivate statService: StatService\n\t) {\n\t\tthis.items = [];\n\t\tthis.decorations = [];\n\t\tthis.augmentations = [];\n\t\tthis.awakenings = [];\n\t\tthis.awakeningSetbonus = null;\n\t\tthis.modifications = [];\n\t\tthis.buffs = new BuffModel();\n\n\t\tthis.skillService.skillsUpdated$.subscribe(skills => {\n\t\t\tthis.skills = skills;\n\t\t\tthis.statService.update(\n\t\t\t\tskills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t});\n\t}\n\n\taddItem(item: ItemModel, updateStats: boolean = true) {\n\t\t// console.log(\"addItem\",item);\n\t\tthis.items.push(item);\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddDecoration(decoration: DecorationModel, updateStats: boolean = true) {\n\t\t// console.log(\"addDecoration\");\n\t\tthis.decorations.push(decoration);\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddAugmentation(augmentation: AugmentationModel, updateStats: boolean = true) {\n\t\t// console.log(\"addAugmentation\");\n\t\tthis.augmentations.push(augmentation);\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddUpgrade(upgradeContainer: UpgradeContainerModel, updateStats: boolean = true) {\n\t\t// console.log(\"addUpgrade\");\n\t\tthis.upgradeContainer = upgradeContainer;\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs);\n\t\t}\n\t}\n\n\taddAwakenings(awakenings: AwakeningLevelModel[], updateStats: boolean = true) {\n\t\t// console.log(\"addAwakening\");\n\t\tthis.awakenings = awakenings;\n\t\tif (awakenings.length && updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\taddSetbonus(setbonus: SetBonusModel, updateStats: boolean = true) {\n\t\t// console.log(\"addSetbonus\");\n\t\tthis.awakeningSetbonus = setbonus;\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (!weapon.skills.find(skill => skill.id == setbonus.id)) {\n\t\t\tweapon.skills.push({\n\t\t\t\tid: setbonus.id,\n\t\t\t\tlevel: null\n\t\t\t});\n\t\t}\n\n\t\tif (updateStats) {\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\taddModification(modification: ModificationModel, updateStats: boolean = true) {\n\t\t// console.log(\"addModification\");\n\t\tthis.modifications.push(modification);\n\t\tif (updateStats) {\n\t\t\tif (modification.id < 4) {\n\t\t\t\tthis.updateSkills();\n\t\t\t}\n\t\t}\n\t}\n\n\taddKinsect(kinsect: KinsectModel, updateStats: boolean = true) {\n\t\t// console.log(\"addKinsect\");\n\t\tthis.kinsect = kinsect;\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\tremoveItem(item: ItemModel) {\n\t\t// console.log(\"removeItem\");\n\t\tif (item && item.itemType == ItemType.Weapon) {\n\t\t\tthis.awakenings = [];\n\t\t}\n\t\tthis.items = _.reject(this.items, i => i === item);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveDecoration(decoration: DecorationModel) {\n\t\t// console.log(\"removeDeco\");\n\t\tthis.decorations = _.reject(this.decorations, d => d === decoration);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveAugmentation(augmentation: AugmentationModel) {\n\t\t// console.log(\"RemoveAug\");\n\t\tthis.augmentations = _.reject(this.augmentations, a => a === augmentation);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveUpgrade() {\n\t\t// console.log(\"RemoveUpgrade\");\n\t\tthis.upgradeContainer = null;\n\t\tthis.updateSkills();\n\t}\n\n\tremoveAwakening() {\n\t\t// console.log(\"RemoveAwake\");\n\t\tthis.awakenings = [];\n\t\tthis.awakeningSetbonus = null;\n\t\tthis.updateSkills();\n\t}\n\n\tremoveSetbonus() {\n\t\t// console.log(\"RemoveSetbonus\");\n\t\tif (this.awakeningSetbonus && this.awakeningSetbonus.id) {\n\t\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\t\tweapon.skills.splice(weapon.skills.findIndex(skill => skill.id == this.awakeningSetbonus.id), 1);\n\t\t\tthis.awakeningSetbonus = null;\n\t\t\tthis.updateSkills();\n\t\t}\n\t}\n\n\tremoveMelody() {\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t}\n\n\tremoveModification(modification: ModificationModel) {\n\t\t// console.log(\"RemoveModification\");\n\t\tthis.modifications = _.reject(this.modifications, a => a === modification);\n\t\tthis.updateSkills();\n\t}\n\n\tremoveKinsect() {\n\t\t// console.log(\"RemoveKin\");\n\t\tthis.kinsect = null;\n\t}\n\n\tchangeElement(element: ElementType, elementAttack: number, updateStats: boolean = true) {\n\t\t// console.log(\"changeElement\");\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (element != ElementType.None) {\n\t\t\tweapon.element = element;\n\t\t\tweapon.elementBaseAttack = elementAttack;\n\t\t\tif (element == ElementType.Dragon) {\n\t\t\t\tweapon.elderseal = EldersealType.Average;\n\t\t\t}\n\t\t} else {\n\t\t\tweapon.element = null;\n\t\t\tweapon.elementBaseAttack = null;\n\t\t\tweapon.elderseal = null;\n\t\t}\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\tchangeAilment(ailment: AilmentType, ailmentAttack: number, updateStats: boolean = true) {\n\t\t// console.log(\"changeAilment\");\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (ailment != AilmentType.None) {\n\t\t\tweapon.ailment = ailment;\n\t\t\tweapon.ailmentBaseAttack = ailmentAttack;\n\t\t} else {\n\t\t\tweapon.ailment = null;\n\t\t\tweapon.ailmentBaseAttack = null;\n\t\t}\n\t\tif (updateStats) {\n\t\t\tthis.statService.update(\n\t\t\t\tthis.skills,\n\t\t\t\tthis.items,\n\t\t\t\tthis.augmentations,\n\t\t\t\tthis.upgradeContainer,\n\t\t\t\tthis.awakenings,\n\t\t\t\tthis.modifications,\n\t\t\t\tthis.kinsect,\n\t\t\t\tthis.buffs\n\t\t\t);\n\t\t}\n\t}\n\n\tchangeWeaponName(weaponName: string) {\n\t\t// console.log(\"changeWeaponName\");\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tweapon.name = weaponName;\n\t}\n\n\tchangeWeaponMelody(melodies: MelodiesModel) {\n\t\tconst weapon = this.items.find(x => x.itemType == ItemType.Weapon);\n\t\tweapon.melodies = melodies;\n\t}\n\n\tupdateItemLevel() {\n\t\t// console.log(\"updateItemLevel\");\n\t\tthis.updateSkills();\n\t}\n\n\tupdateItemActive() {\n\t\t// console.log(\"updateItemActive\");\n\t\tthis.updateSkills();\n\t}\n\n\tupdateSkillMode(equippedSkills: EquippedSkillModel[]) {\n\t\t// console.log(\"UpdateSkillMode\");\n\t\tthis.statService.update(\n\t\t\tequippedSkills,\n\t\t\tthis.items,\n\t\t\tthis.augmentations,\n\t\t\tthis.upgradeContainer,\n\t\t\tthis.awakenings,\n\t\t\tthis.modifications,\n\t\t\tthis.kinsect,\n\t\t\tthis.buffs\n\t\t);\n\t}\n\n\tupdateElementBuff(value: number) {\n\t\tthis.buffs.elementBuff = value;\n\t\tthis.statService.update(\n\t\t\tthis.skills,\n\t\t\tthis.items,\n\t\t\tthis.augmentations,\n\t\t\tthis.upgradeContainer,\n\t\t\tthis.awakenings,\n\t\t\tthis.modifications,\n\t\t\tthis.kinsect,\n\t\t\tthis.buffs\n\t\t);\n\t}\n\n\tprivate updateSkills() {\n\t\tthis.skillService.updateSkills(this.items, this.decorations, this.augmentations);\n\t}\n}\n","import { Location } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { SavedSetModel } from '../models/saved-set.model';\nimport { WeaponType } from '../types/weapon.type';\nimport { BuildService } from './build.service';\nimport { StatService } from './stat.service';\n\n@Injectable()\nexport class SetService {\n\tsets: SavedSetModel[] = [];\n\tpublic setsUpdated$ = new Subject<SavedSetModel[]>();\n\tselectedSetIndex = -1;\n\n\tconstructor(\n\t\tprivate location: Location,\n\t\tprivate buildService: BuildService,\n\t\tprivate statService: StatService) {\n\t\tthis.loadSets();\n\t}\n\n\tloadSets() {\n\t\tconst stringSets = localStorage.getItem('mhwSets');\n\t\tif (stringSets) {\n\t\t\ttry {\n\t\t\t\tthis.sets = JSON.parse(stringSets);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log('LocalStorage-Error:', stringSets);\n\t\t\t}\n\t\t}\n\t}\n\n\timportSet() {\n\t\tconst buildParts = location.hash.split('&');\n\t\tconst buildId = buildParts[0];\n\t\tconst buildV = buildId.substring(0, 3);\n\t\tif (buildId.length > 0) {\n\t\t\tconst itemGroupRegex = /(i[.]*[^i]*)/g;\n\t\t\tconst itemGroups = buildId.match(itemGroupRegex);\n\t\t\tlet itemGroupsLenght = 0;\n\t\t\tif (buildV == '#v3') {\n\t\t\t\titemGroupsLenght = 9;\n\t\t\t} else if (buildV == '#v2') {\n\t\t\t\titemGroupsLenght = 9;\n\t\t\t} else if (buildId.substring(0, 3) == '#v1') {\n\t\t\t\titemGroupsLenght = 8;\n\t\t\t}\n\t\t\tif (itemGroups.length > itemGroupsLenght && itemGroups[itemGroupsLenght].length > 1) {\n\t\t\t\tconst setName = itemGroups[itemGroupsLenght].substring(1, itemGroups[itemGroupsLenght].length);\n\t\t\t\titemGroups.splice(-1, 1);\n\t\t\t\tthis.location.replaceState(this.location.path(false), buildV + itemGroups.join(''));\n\t\t\t\tthis.buildService.loadBuild(buildV + itemGroups.join(''));\n\t\t\t\tthis.save(setName + '_IMPORTED', false);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetSets(): SavedSetModel[] {\n\t\treturn this.sets;\n\t}\n\n\tsave(setName: string, overwrite: boolean = true): number {\n\t\tthis.loadSets();\n\t\tlet setItem = this.sets.find(s => s.setName === setName);\n\t\tconst stats = this.statService.stats;\n\t\tif (setItem && overwrite) {\n\t\t\tsetItem.hashString = location.hash;\n\t\t\tsetItem.hashString = setItem.hashString.replace('#v1', '#v2');\n\t\t\tsetItem.weaponType = stats.weaponType;\n\t\t\tsetItem.totalAttack = stats.totalAttack;\n\t\t\tsetItem.affinity = stats.affinity;\n\t\t\tsetItem.element = stats.element;\n\t\t\tsetItem.elementAttack = stats.totalElementAttack;\n\t\t\tsetItem.ailment = stats.ailment;\n\t\t\tsetItem.ailmentAttack = stats.totalAilmentAttack;\n\t\t\tsetItem.defense = stats.defense;\n\t\t\tsetItem.resistances = [\n\t\t\t\tstats.fireResist,\n\t\t\t\tstats.waterResist,\n\t\t\t\tstats.thunderResist,\n\t\t\t\tstats.iceResist,\n\t\t\t\tstats.dragonResist];\n\t\t\tsetItem.confirm = false;\n\t\t\tthis.selectedSetIndex = this.sets.indexOf(setItem);\n\t\t} else {\n\t\t\tsetItem = {\n\t\t\t\tsetName: setName,\n\t\t\t\thashString: location.hash.replace('#v1', '#v2'),\n\t\t\t\tweaponType: stats.weaponType,\n\t\t\t\ttotalAttack: stats.totalAttack,\n\t\t\t\taffinity: stats.affinity,\n\t\t\t\telement: stats.element,\n\t\t\t\telementAttack: stats.totalElementAttack,\n\t\t\t\tailment: stats.ailment,\n\t\t\t\tailmentAttack: stats.totalAilmentAttack,\n\t\t\t\tdefense: stats.defense,\n\t\t\t\tresistances: [\n\t\t\t\t\tstats.fireResist,\n\t\t\t\t\tstats.waterResist,\n\t\t\t\t\tstats.thunderResist,\n\t\t\t\t\tstats.iceResist,\n\t\t\t\t\tstats.dragonResist],\n\t\t\t\tconfirm: false\n\t\t\t};\n\t\t\tthis.sets.push(setItem);\n\t\t\tthis.selectedSetIndex = this.sets.length - 1;\n\t\t}\n\t\tlocalStorage.setItem('mhwSets', JSON.stringify(this.sets));\n\t\tthis.setsUpdated$.next(this.sets);\n\t\tdocument.title = setName + ' - [MHWBuilder]';\n\t\treturn this.selectedSetIndex;\n\t}\n\n\tsaveSets() {\n\t\tlocalStorage.setItem('mhwSets', JSON.stringify(this.sets));\n\t\tthis.setsUpdated$.next(this.sets);\n\t}\n\n\tsortSets() {\n\t\tthis.sets.sort((a, b) => {\n\t\t\tconst w1 = this.getWeaponTypeIndex(a.weaponType);\n\t\t\tconst w2 = this.getWeaponTypeIndex(b.weaponType);\n\n\t\t\tif (w1 > w2) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (w1 < w2) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (w1 == w2) {\n\t\t\t\treturn a.setName.localeCompare(b.setName);\n\t\t\t}\n\t\t});\n\n\t\tthis.setsUpdated$.next(this.sets);\n\t}\n\n\tremove(index: number) {\n\t\tif (this.sets[index].confirm) {\n\t\t\tthis.sets.splice(index, 1);\n\t\t\tlocalStorage.setItem('mhwSets', JSON.stringify(this.sets));\n\t\t} else {\n\t\t\tthis.sets[index].confirm = true;\n\t\t}\n\t\tthis.setsUpdated$.next(this.sets);\n\t}\n\n\tselect(set: SavedSetModel): number {\n\t\tthis.location.replaceState(this.location.path(false), set.hashString);\n\t\tthis.buildService.loadBuild(location.hash);\n\t\tthis.selectedSetIndex = this.sets.indexOf(set);\n\t\tdocument.title = set.setName + ' - [MHWBuilder]';\n\t\treturn this.selectedSetIndex;\n\t}\n\n\tprivate getWeaponTypeIndex(weaponType?: WeaponType): number {\n\t\tif (weaponType == null) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (weaponType == WeaponType.GreatSword) {\n\t\t\treturn 0;\n\t\t} else if (weaponType == WeaponType.SwordAndShield) {\n\t\t\treturn 1;\n\t\t} else if (weaponType == WeaponType.DualBlades) {\n\t\t\treturn 2;\n\t\t} else if (weaponType == WeaponType.LongSword) {\n\t\t\treturn 3;\n\t\t} else if (weaponType == WeaponType.Hammer) {\n\t\t\treturn 4;\n\t\t} else if (weaponType == WeaponType.HuntingHorn) {\n\t\t\treturn 5;\n\t\t} else if (weaponType == WeaponType.Lance) {\n\t\t\treturn 6;\n\t\t} else if (weaponType == WeaponType.Gunlance) {\n\t\t\treturn 7;\n\t\t} else if (weaponType == WeaponType.SwitchAxe) {\n\t\t\treturn 8;\n\t\t} else if (weaponType == WeaponType.ChargeBlade) {\n\t\t\treturn 9;\n\t\t} else if (weaponType == WeaponType.InsectGlaive) {\n\t\t\treturn 10;\n\t\t} else if (weaponType == WeaponType.Bow) {\n\t\t\treturn 11;\n\t\t} else if (weaponType == WeaponType.LightBowgun) {\n\t\t\treturn 12;\n\t\t} else if (weaponType == WeaponType.HeavyBowgun) {\n\t\t\treturn 13;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { Subject } from 'rxjs';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { EquippedSetBonusDetailModel, EquippedSetBonusModel } from '../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { ItemType } from '../types/item.type';\nimport { ModeType } from '../types/mode.type';\nimport { DataService } from './data.service';\n\n@Injectable()\nexport class SkillService {\n\tpublic skillsUpdated$ = new Subject<EquippedSkillModel[]>();\n\tpublic setBonusesUpdated$ = new Subject<EquippedSetBonusModel[]>();\n\n\tpublic skills: EquippedSkillModel[];\n\tpublic setBonuses: EquippedSetBonusModel[];\n\n\tconstructor(\n\t\tprivate dataService: DataService\n\t) { }\n\n\tupdateSkills(items: ItemModel[], decorations: DecorationModel[], augmentations: AugmentationModel[]) {\n\t\tconst equippedSkills = new Array<EquippedSkillModel>();\n\t\tconst equippedSetBonuses = new Array<EquippedSetBonusModel>();\n\n\t\tfor (const item of items) {\n\t\t\tfor (const decoration of decorations.filter(d => d.itemType == item.itemType)) {\n\t\t\t\tdecoration.active = item.active;\n\t\t\t}\n\t\t}\n\t\t// IMPROVEMENT: this code loops through items several times. Neftalí Michelet: Fixed :)\n\t\tthis.addItemSkills(items, equippedSkills);\n\t\tthis.addDecorationSkills(decorations, equippedSkills);\n\t\tthis.addSetSkills(items, equippedSkills, equippedSetBonuses);\n\t\tthis.addAugmentationSkills(augmentations, equippedSkills);\n\t\tthis.skills = equippedSkills;\n\t\tthis.setBonuses = equippedSetBonuses;\n\n\t\tthis.skillsUpdated$.next(this.skills);\n\t\tthis.setBonusesUpdated$.next(this.setBonuses);\n\t}\n\n\tprivate addItemSkills(items: ItemModel[], equippedSkills: EquippedSkillModel[]) {\n\t\tfor (const item of items) {\n\t\t\tif (!item.skills) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const itemSkill of item.skills) {\n\t\t\t\tif (!itemSkill.level) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet equippedSkill: EquippedSkillModel = _.find(equippedSkills, es => es.id == itemSkill.id);\n\t\t\t\tconst level = itemSkill.level * (item.equippedLevel ? item.equippedLevel : 1);\n\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\tequippedSkill = this.createEquippedSkill(itemSkill.id, level, item.itemType);\n\t\t\t\t\tequippedSkills.push(equippedSkill);\n\t\t\t\t} else {\n\t\t\t\t\tequippedSkill.equippedArmorCount += level;\n\t\t\t\t\tequippedSkill.equippedCount += level;\n\t\t\t\t\tthis.countSkillItemPart(equippedSkill, level, item.itemType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate addDecorationSkills(decorations: DecorationModel[], equippedSkills: EquippedSkillModel[]) {\n\t\tfor (const decoration of decorations) {\n\t\t\tif (!decoration.skills) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const itemSkill of decoration.skills) {\n\t\t\t\tif (!itemSkill.level) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet equippedSkill: EquippedSkillModel = _.find(equippedSkills, es => es.id == itemSkill.id);\n\t\t\t\tconst level = itemSkill.level;\n\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\tequippedSkill = this.createEquippedSkill(itemSkill.id, level, decoration.itemType, decoration.active);\n\t\t\t\t\tequippedSkills.push(equippedSkill);\n\t\t\t\t} else {\n\t\t\t\t\tif (decoration.itemType == ItemType.Tool1) {\n\t\t\t\t\t\tif (decoration.active) {\n\t\t\t\t\t\t\tequippedSkill.equippedToolActiveCount += level;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tequippedSkill.equippedTool1Count += level;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (decoration.itemType == ItemType.Tool2) {\n\t\t\t\t\t\tif (decoration.active) {\n\t\t\t\t\t\t\tequippedSkill.equippedToolActiveCount += level;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tequippedSkill.equippedTool2Count += level;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tequippedSkill.equippedArmorCount += level;\n\t\t\t\t\t}\n\t\t\t\t\tequippedSkill.equippedCount = equippedSkill.equippedArmorCount + equippedSkill.equippedToolActiveCount;\n\n\t\t\t\t\tthis.countSkillItemPart(equippedSkill, level, decoration.itemType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate addSetSkills(items: ItemModel[], equippedSkills: EquippedSkillModel[], equippedSetBonuses: EquippedSetBonusModel[]) {\n\t\tlet setBonusNames = new Array<string>();\n\t\tconst setBonusParts = [];\n\n\t\tfor (const item of items) {\n\t\t\tif (!item.skills) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const skill of item.skills) {\n\t\t\t\tif (!skill.level && skill.id.length > 1) {\n\t\t\t\t\tsetBonusNames.push(skill.id);\n\t\t\t\t\tsetBonusParts.push([skill.id, item.itemType]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst setCounts = _.countBy(setBonusNames);\n\t\tsetBonusNames = _.uniq(setBonusNames);\n\t\tfor (const setBonusName of setBonusNames) {\n\t\t\tconst setBonus = this.dataService.getSetBonus(setBonusName);\n\t\t\tconst setLevels = _.filter(setBonus.setLevels, sl => sl.pieces <= setCounts[setBonusName]);\n\t\t\tconst setParts = _.filter(setBonusParts, x => x[0].localeCompare(setBonusName) == 0);\n\n\t\t\tconst weaponCount = _.filter(setParts, x => x[1] == ItemType.Weapon).length > 0 ? 1 : 0;\n\t\t\tconst headCount = _.filter(setParts, x => x[1] == ItemType.Head).length > 0 ? 1 : 0;\n\t\t\tconst chestCount = _.filter(setParts, x => x[1] == ItemType.Chest).length > 0 ? 1 : 0;\n\t\t\tconst armsCount = _.filter(setParts, x => x[1] == ItemType.Arms).length > 0 ? 1 : 0;\n\t\t\tconst waistCount = _.filter(setParts, x => x[1] == ItemType.Waist).length > 0 ? 1 : 0;\n\t\t\tconst legsCount = _.filter(setParts, x => x[1] == ItemType.Legs).length > 0 ? 1 : 0;\n\t\t\tif (setLevels) {\n\t\t\t\tfor (const setLevel of setLevels) {\n\t\t\t\t\tlet equippedSkill = _.find(equippedSkills, es => es.id == setLevel.id);\n\n\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\tconst skill = this.dataService.getSkill(setLevel.id);\n\t\t\t\t\t\tequippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\tequippedSkill.skill = skill;\n\t\t\t\t\t\tequippedSkill.id = skill.id;\n\t\t\t\t\t\tequippedSkill.name = skill.name;\n\t\t\t\t\t\tequippedSkill.description = skill.description;\n\t\t\t\t\t\tequippedSkill.headCount = headCount;\n\t\t\t\t\t\tequippedSkill.chestCount = chestCount;\n\t\t\t\t\t\tequippedSkill.armsCount = armsCount;\n\t\t\t\t\t\tequippedSkill.waistCount = waistCount;\n\t\t\t\t\t\tequippedSkill.legsCount = legsCount;\n\t\t\t\t\t\tequippedSkill.isSetBonus = true;\n\t\t\t\t\t\tequippedSkill.equippedCount = 1;\n\t\t\t\t\t\tequippedSkill.equippedArmorCount = 1;\n\t\t\t\t\t\tequippedSkill.totalLevelCount = skill.levels.length;\n\t\t\t\t\t\tequippedSkills.push(equippedSkill);\n\n\t\t\t\t\t\tif (skill.mode == null) {\n\t\t\t\t\t\t\tif (skill.hasActiveStats) {\n\t\t\t\t\t\t\t\tskill.mode = ModeType.AllSkillActive;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tskill.mode = ModeType.Active;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (skill.raiseSkillId) {\n\t\t\t\t\t\t\tconst equippedSkillToRaise = _.find(equippedSkills, es => es.id == skill.raiseSkillId);\n\n\t\t\t\t\t\t\tif (equippedSkillToRaise) {\n\t\t\t\t\t\t\t\tequippedSkillToRaise.secretLevelCount = equippedSkillToRaise.skill.levels.length - equippedSkillToRaise.totalLevelCount;\n\t\t\t\t\t\t\t\tequippedSkillToRaise.totalLevelCount = equippedSkillToRaise.skill.levels.length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Fatalis Setbonus\n\t\t\t\t\t\tif (skill.id == 'inheritance') {\n\t\t\t\t\t\t\tfor (const equipped of equippedSkills) {\n\t\t\t\t\t\t\t\tif (equipped.skill.maxLevel) {\n\t\t\t\t\t\t\t\t\tequipped.secretLevelCount = equipped.skill.levels.length - equipped.totalLevelCount;\n\t\t\t\t\t\t\t\t\tequipped.totalLevelCount = equipped.skill.levels.length;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tequippedSkill.equippedCount = 2;\n\t\t\t\t\t\tequippedSkill.equippedArmorCount = 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst equippedSetBonus = new EquippedSetBonusModel();\n\t\t\tequippedSetBonus.id = setBonus.id;\n\t\t\tequippedSetBonus.name = setBonus.name;\n\t\t\tequippedSetBonus.equippedCount = setCounts[setBonusName];\n\t\t\tequippedSetBonus.weaponCount = weaponCount;\n\t\t\tequippedSetBonus.headCount = headCount;\n\t\t\tequippedSetBonus.chestCount = chestCount;\n\t\t\tequippedSetBonus.armsCount = armsCount;\n\t\t\tequippedSetBonus.waistCount = waistCount;\n\t\t\tequippedSetBonus.legsCount = legsCount;\n\t\t\tequippedSetBonus.details = [];\n\n\t\t\tfor (const bonusLevel of setBonus.setLevels) {\n\t\t\t\tconst detail = new EquippedSetBonusDetailModel();\n\t\t\t\tdetail.requiredCount = bonusLevel.pieces;\n\t\t\t\tdetail.skill = this.dataService.getSkill(bonusLevel.id);\n\t\t\t\tif (!detail.skill.levels[0].activeSkills) {\n\t\t\t\t\tdetail.mode = ModeType.AllSkillActive;\n\t\t\t\t}\n\t\t\t\tequippedSetBonus.details.push(detail);\n\t\t\t}\n\t\t\tequippedSetBonuses.push(equippedSetBonus);\n\t\t}\n\t}\n\n\tprivate addAugmentationSkills(augmentations: AugmentationModel[], equippedSkills: EquippedSkillModel[]) {\n\t\tconst augGroups = _.groupBy(augmentations, 'id');\n\t\tfor (const key in augGroups) {\n\t\t\tif (augGroups.hasOwnProperty(key)) {\n\t\t\t\tconst value = augGroups[key];\n\n\t\t\t\tconst level = value[0].levels[value.length - 1];\n\t\t\t\tif (level && level.skills) {\n\t\t\t\t\tfor (const skillRef of level.skills) {\n\n\t\t\t\t\t\tlet equippedSkill = _.find(equippedSkills, es => es.id == skillRef.id);\n\n\t\t\t\t\t\t// Augmentation skills (as of this writing) do not build on skills from other sources. If the augmentation skill level is higher, it overwrites.\n\t\t\t\t\t\tif (!equippedSkill) {\n\t\t\t\t\t\t\tconst skill = this.dataService.getSkill(skillRef.id);\n\t\t\t\t\t\t\tequippedSkill = new EquippedSkillModel();\n\t\t\t\t\t\t\tequippedSkill.skill = skill;\n\t\t\t\t\t\t\tequippedSkill.id = skill.id;\n\t\t\t\t\t\t\tequippedSkill.name = skill.name;\n\t\t\t\t\t\t\tequippedSkill.description = skill.description;\n\t\t\t\t\t\t\tequippedSkill.equippedCount = skillRef.level;\n\t\t\t\t\t\t\tequippedSkill.totalLevelCount = skill.levels.length;\n\t\t\t\t\t\t\tequippedSkills.push(equippedSkill);\n\t\t\t\t\t\t} else if (equippedSkill.equippedCount < skillRef.level) {\n\t\t\t\t\t\t\tequippedSkill.equippedCount = skillRef.level;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate countSkillItemPart(equippedSkill: EquippedSkillModel, actualCount: number, itemType?: ItemType) {\n\t\tif (itemType == ItemType.Weapon) {\n\t\t\tequippedSkill.weaponCount += actualCount;\n\t\t} else if (itemType == ItemType.Head) {\n\t\t\tequippedSkill.headCount += actualCount;\n\t\t} else if (itemType == ItemType.Chest) {\n\t\t\tequippedSkill.chestCount += actualCount;\n\t\t} else if (itemType == ItemType.Arms) {\n\t\t\tequippedSkill.armsCount += actualCount;\n\t\t} else if (itemType == ItemType.Waist) {\n\t\t\tequippedSkill.waistCount += actualCount;\n\t\t} else if (itemType == ItemType.Legs) {\n\t\t\tequippedSkill.legsCount += actualCount;\n\t\t} else if (itemType == ItemType.Charm) {\n\t\t\tequippedSkill.charmCount += actualCount;\n\t\t} else if (itemType == ItemType.Tool1 || itemType == ItemType.Tool2) {\n\t\t\tequippedSkill.toolCount += actualCount;\n\t\t}\n\t}\n\n\tcreateEquippedSkill(skillId: string, level: number, itemType?: ItemType, active?: boolean): EquippedSkillModel {\n\t\tconst skill = this.dataService.getSkill(skillId);\n\t\tconst equippedSkill = new EquippedSkillModel();\n\t\tequippedSkill.skill = skill;\n\t\tequippedSkill.id = skill.id;\n\t\tequippedSkill.name = skill.name;\n\t\tequippedSkill.description = skill.description;\n\n\t\tif (itemType == ItemType.Tool1) {\n\t\t\tif (active) {\n\t\t\t\tequippedSkill.equippedToolActiveCount = level;\n\t\t\t} else {\n\t\t\t\tequippedSkill.equippedTool1Count = level;\n\t\t\t}\n\t\t} else if (itemType == ItemType.Tool2) {\n\t\t\tif (active) {\n\t\t\t\tequippedSkill.equippedToolActiveCount = level;\n\t\t\t} else {\n\t\t\t\tequippedSkill.equippedTool2Count = level;\n\t\t\t}\n\t\t} else {\n\t\t\tequippedSkill.equippedArmorCount = level;\n\t\t}\n\n\t\tequippedSkill.equippedCount = equippedSkill.equippedArmorCount + equippedSkill.equippedToolActiveCount;\n\n\t\tequippedSkill.totalLevelCount = skill.maxLevel ? skill.maxLevel : skill.levels.length;\n\t\tthis.countSkillItemPart(equippedSkill, level, itemType);\n\t\tequippedSkill.hasActiveStats = skill.hasActiveStats;\n\n\t\tif (skill.mode == null) {\n\t\t\tif (skill.hasActiveStats) {\n\t\t\t\tskill.mode = ModeType.AllSkillActive;\n\t\t\t} else {\n\t\t\t\tskill.mode = ModeType.Active;\n\t\t\t}\n\t\t}\n\n\t\treturn equippedSkill;\n\t}\n}\n","import { ChangeDetectorRef, Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { AugmentationSlotComponent } from '../components/augmentation-slot/augmentation-slot.component';\nimport { AwakeningSlotComponent } from '../components/awakening-slot/awakening-slot.component';\nimport { DecorationSlotComponent } from '../components/decoration-slot/decoration-slot.component';\nimport { ItemSlotComponent } from '../components/item-slot/item-slot.component';\nimport { KinsectSlotComponent } from '../components/kinsect-slot/kinsect-slot.component';\nimport { ModificationSlotComponent } from '../components/modification-slot/modification-slot.component';\nimport { UpgradeSlotComponent } from '../components/upagrade-slot/upgrade-slot.component';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SetBonusModel } from '../models/set-bonus.model';\nimport { SlotEventModel } from '../models/slot-event.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { AwakeningType } from '../types/awakening.type';\nimport { ElementType } from '../types/element.type';\nimport { EquipmentCategoryType } from '../types/equipment-category.type';\nimport { ItemType } from '../types/item.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { EquipmentService } from './equipment.service';\n\n@Injectable()\nexport class SlotService {\n\tpublic anySlotSelected$ =\n\t\tnew Subject<ItemSlotComponent | DecorationSlotComponent | AugmentationSlotComponent | UpgradeSlotComponent | AwakeningSlotComponent | ModificationSlotComponent | KinsectSlotComponent>();\n\n\tpublic itemSelected$ = new Subject<SlotEventModel<ItemSlotComponent, ItemModel>>();\n\tpublic itemSelectedNew$ = new Subject<SlotEventModel<ItemSlotComponent, ItemModel>>();\n\tpublic decorationSelected$ = new Subject<SlotEventModel<DecorationSlotComponent, DecorationModel>>();\n\tpublic augmentationSelected$ = new Subject<SlotEventModel<AugmentationSlotComponent, AugmentationModel>>();\n\tpublic upgradeSelected$ = new Subject<SlotEventModel<UpgradeSlotComponent, UpgradeContainerModel>>();\n\tpublic setbonusSelected$ = new Subject();\n\tpublic modificationSelected$ = new Subject<SlotEventModel<ModificationSlotComponent, ModificationModel>>();\n\tpublic kinsectSelected$ = new Subject<SlotEventModel<KinsectSlotComponent, KinsectModel>>();\n\tpublic itemLevelChanged$ = new Subject();\n\tpublic itemActiveChanged$ = new Subject();\n\tpublic weaponSlotSelected$ = new Subject();\n\tpublic armorSlotSelected$ = new Subject();\n\n\tpublic weaponModSelected$ = new Subject();\n\n\tweaponSlot: ItemSlotComponent;\n\theadSlot: ItemSlotComponent;\n\tchestSlot: ItemSlotComponent;\n\thandsSlot: ItemSlotComponent;\n\tlegsSlot: ItemSlotComponent;\n\tfeetSlot: ItemSlotComponent;\n\tcharmSlot: ItemSlotComponent;\n\ttool1Slot: ItemSlotComponent;\n\ttool2Slot: ItemSlotComponent;\n\n\tchangeDetector: ChangeDetectorRef;\n\n\tselectedItemSlot: ItemSlotComponent;\n\tselectedDecorationSlot: DecorationSlotComponent;\n\tselectedAugmentationSlot: AugmentationSlotComponent;\n\tselectedUpgradeSlot: UpgradeSlotComponent;\n\tselectedAwakeningSlot: AwakeningSlotComponent;\n\tselectedModificationSlot: ModificationSlotComponent;\n\tselectedKinsectSlot: KinsectSlotComponent;\n\tselectedSetbonusSlot: AwakeningSlotComponent;\n\n\tonlyIceborne: boolean;\n\n\tconstructor(\n\t\tprivate equipmentService: EquipmentService\n\t) {\n\t\tthis.onlyIceborne = true;\n\t}\n\n\tinitialize(\n\t\tweaponSlot: ItemSlotComponent,\n\t\theadSlot: ItemSlotComponent,\n\t\tchestSlot: ItemSlotComponent,\n\t\thandsSlot: ItemSlotComponent,\n\t\tlegsSlot: ItemSlotComponent,\n\t\tfeetSlot: ItemSlotComponent,\n\t\tcharmSlot: ItemSlotComponent,\n\t\ttool1Slot: ItemSlotComponent,\n\t\ttool2Slot: ItemSlotComponent,\n\t\tchangeDetector: ChangeDetectorRef\n\t) {\n\t\tthis.weaponSlot = weaponSlot;\n\t\tthis.headSlot = headSlot;\n\t\tthis.chestSlot = chestSlot;\n\t\tthis.handsSlot = handsSlot;\n\t\tthis.legsSlot = legsSlot;\n\t\tthis.feetSlot = feetSlot;\n\t\tthis.charmSlot = charmSlot;\n\t\tthis.tool1Slot = tool1Slot;\n\t\tthis.tool2Slot = tool2Slot;\n\t\tthis.changeDetector = changeDetector;\n\t}\n\n\tselectItemSlot(slot: ItemSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedItemSlot = slot;\n\n\t\tif (this.selectedItemSlot) {\n\t\t\tthis.selectedItemSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedItemSlot);\n\t\t\tif (this.selectedItemSlot && this.selectedItemSlot.item) {\n\t\t\t\tif (this.selectedItemSlot.item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\t\tthis.weaponSlotSelected$.next();\n\t\t\t\t} else if (this.selectedItemSlot.item.equipmentCategory == EquipmentCategoryType.Armor) {\n\t\t\t\t\tthis.armorSlotSelected$.next();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tselectDecorationSlot(slot: DecorationSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedDecorationSlot = slot;\n\n\t\tif (this.selectedDecorationSlot) {\n\t\t\tthis.selectedDecorationSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedDecorationSlot);\n\t\t}\n\t}\n\n\tselectAugmentationSlot(slot: AugmentationSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedAugmentationSlot = slot;\n\n\t\tif (this.selectedAugmentationSlot) {\n\t\t\tthis.selectedAugmentationSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedAugmentationSlot);\n\t\t}\n\t}\n\n\tselectUpgradeSlot(slot: UpgradeSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedUpgradeSlot = slot;\n\n\t\tif (this.selectedUpgradeSlot) {\n\t\t\tthis.selectedUpgradeSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedUpgradeSlot);\n\t\t}\n\t}\n\n\tselectSetbonusSlot(slot: AwakeningSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedSetbonusSlot = slot;\n\n\t\tif (this.selectedSetbonusSlot) {\n\t\t\tthis.selectedSetbonusSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedSetbonusSlot);\n\t\t}\n\t}\n\n\tselectModificationSlot(slot: ModificationSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedModificationSlot = slot;\n\n\t\tif (this.selectedModificationSlot) {\n\t\t\tthis.selectedModificationSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedModificationSlot);\n\t\t}\n\t}\n\n\tselectKinsectSlot(slot: KinsectSlotComponent) {\n\t\tthis.clearSlotSelect();\n\t\tthis.selectedKinsectSlot = slot;\n\n\t\tif (this.selectedKinsectSlot) {\n\t\t\tthis.selectedKinsectSlot.selected = true;\n\t\t\tthis.anySlotSelected$.next(this.selectedKinsectSlot);\n\t\t}\n\t}\n\n\tclearItemSlot(slot: ItemSlotComponent) {\n\t\tthis.clearSlotItems(slot);\n\n\t\tslot.item = null;\n\t\tthis.itemSelected$.next({ slot: slot, equipment: null });\n\t}\n\tclearArmorSlot(slot: ItemSlotComponent) {\n\t\tthis.clearSlotItems(slot);\n\n\t\tslot.item = null;\n\t\tthis.itemSelectedNew$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearDecorationSlot(slot: DecorationSlotComponent) {\n\t\tthis.equipmentService.removeDecoration(slot.decoration);\n\t\tslot.decoration = null;\n\t\tthis.decorationSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearAugmentationSlot(slot: AugmentationSlotComponent) {\n\t\tthis.equipmentService.removeAugmentation(slot.augmentation);\n\t\tthis.applySlotAugmentation();\n\t\tslot.augmentation = null;\n\t\tthis.augmentationSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearUpgradeSlot(slot: UpgradeSlotComponent) {\n\t\tthis.equipmentService.removeUpgrade();\n\t\tthis.applySlotUpgrade();\n\t\tif (slot.upgradeContainer) {\n\t\t\tthis.clearUpgradeContainer(slot.upgradeContainer);\n\t\t}\n\t\tthis.upgradeSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearAwakeningSlot(slot: AwakeningSlotComponent, update: boolean = true) {\n\t\tthis.equipmentService.removeAwakening();\n\t\tslot.awakenings = [];\n\t\tthis.clearSkillSlot(slot, false);\n\t\tif (update) {\n\t\t\tthis.weaponModSelected$.next({ slot: slot, equipment: null });\n\t\t}\n\t}\n\n\tclearSkillSlot(slot: AwakeningSlotComponent, update: boolean = true) {\n\t\tthis.equipmentService.removeSetbonus();\n\t\tslot.setbonus = null;\n\t\tif (update) {\n\t\t\tthis.weaponModSelected$.next({ slot: slot, equipment: null });\n\t\t}\n\t}\n\n\tclearModificationSlot(slot: ModificationSlotComponent) {\n\t\tthis.equipmentService.removeModification(slot.modification);\n\t\tslot.modification = null;\n\t\tthis.modificationSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tclearKinsectSlot(slot: KinsectSlotComponent) {\n\t\tthis.equipmentService.removeKinsect();\n\t\tslot.kinsect = null;\n\t\tthis.kinsectSelected$.next({ slot: slot, equipment: null });\n\t}\n\n\tselectItem(item: ItemModel, updateStats: boolean = true) {\n\t\tif (this.selectedItemSlot) {\n\t\t\tthis.clearSlotItems(this.selectedItemSlot);\n\n\t\t\tif (!item.equippedLevel && item.itemType == ItemType.Charm) {\n\t\t\t\titem.equippedLevel = item.levels;\n\t\t\t}\n\t\t\tif (item.itemType == ItemType.Tool1 || item.itemType == ItemType.Tool2) {\n\t\t\t\titem.active = false;\n\t\t\t} else {\n\t\t\t\titem.active = true;\n\t\t\t}\n\n\t\t\tthis.equipmentService.addItem(item, updateStats);\n\t\t\tthis.selectedItemSlot.item = item;\n\n\t\t\tif (item.equipmentCategory == EquipmentCategoryType.Weapon) {\n\t\t\t\tthis.selectedItemSlot.augmentations = [];\n\n\t\t\t\tif (this.selectedItemSlot.upgradeSlot) {\n\t\t\t\t\tthis.clearUpgradeSlot(this.selectedItemSlot.upgradeSlot);\n\t\t\t\t}\n\n\t\t\t\tthis.selectedItemSlot.upgradeContainer = new UpgradeContainerModel();\n\t\t\t\tthis.selectedItemSlot.upgradeContainer.hasCustomUpgrades = item.upgradeType == 1;\n\t\t\t\tthis.selectedItemSlot.upgradeContainer.weaponType = item.weaponType;\n\n\t\t\t\tif (item.rarity == 6) {\n\t\t\t\t\tthis.selectedItemSlot.augmentations = [\n\t\t\t\t\t\tnew AugmentationModel(),\n\t\t\t\t\t\tnew AugmentationModel(),\n\t\t\t\t\t\tnew AugmentationModel()\n\t\t\t\t\t];\n\t\t\t\t} else if (item.rarity == 7) {\n\t\t\t\t\tthis.selectedItemSlot.augmentations = [\n\t\t\t\t\t\tnew AugmentationModel(),\n\t\t\t\t\t\tnew AugmentationModel()\n\t\t\t\t\t];\n\t\t\t\t} else if (item.rarity == 8) {\n\t\t\t\t\tthis.selectedItemSlot.augmentations = [\n\t\t\t\t\t\tnew AugmentationModel()\n\t\t\t\t\t];\n\t\t\t\t} else if (item.rarity == 10) {\n\t\t\t\t\tthis.selectedItemSlot.upgradeContainer.slots = 10;\n\t\t\t\t} else if (item.rarity == 11) {\n\t\t\t\t\tthis.selectedItemSlot.upgradeContainer.slots = 8;\n\t\t\t\t} else if (item.rarity == 12) {\n\t\t\t\t\tthis.selectedItemSlot.upgradeContainer.slots = 6;\n\t\t\t\t}\n\n\t\t\t\tif (item.upgradeType == 2) {\n\t\t\t\t\tthis.selectedItemSlot.awakenings = [\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel(),\n\t\t\t\t\t\tnew AwakeningLevelModel()\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tthis.selectedItemSlot.kinsect = null;\n\t\t\t\tthis.selectedItemSlot.modifications = [];\n\t\t\t\tswitch (item.weaponType) {\n\t\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\t\tthis.selectedItemSlot.kinsect = new KinsectModel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\t\t\tthis.selectedItemSlot.modifications = [\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel()\n\t\t\t\t\t\t];\n\t\t\t\t\t\tif (item.rarity >= 10) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.rarity >= 12) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\t\t\tthis.selectedItemSlot.modifications = [\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel(),\n\t\t\t\t\t\t\tnew ModificationModel()\n\t\t\t\t\t\t];\n\t\t\t\t\t\tif (item.rarity >= 9) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.rarity >= 10) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.rarity >= 12) {\n\t\t\t\t\t\t\tthis.selectedItemSlot.modifications.push(new ModificationModel());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (updateStats) {\n\t\t\t\tthis.itemSelected$.next({ slot: this.selectedItemSlot, equipment: item });\n\t\t\t}\n\t\t}\n\t}\n\n\tselectArmorItemByType(item: ItemModel, closeModal?: boolean, updateStats: boolean = true) {\n\t\tlet slotAux: ItemSlotComponent;\n\t\tswitch (item.itemType) {\n\t\t\tcase ItemType.Head:\n\t\t\t\tslotAux = this.headSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Chest:\n\t\t\t\tslotAux = this.chestSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Arms:\n\t\t\t\tslotAux = this.handsSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Waist:\n\t\t\t\tslotAux = this.legsSlot;\n\t\t\t\tbreak;\n\t\t\tcase ItemType.Legs:\n\t\t\t\tslotAux = this.feetSlot;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tlet currentId = 0;\n\t\tif (slotAux.item) {\n\t\t\tcurrentId = slotAux.item.id;\n\t\t}\n\t\tif (currentId != item.id) {\n\t\t\tthis.clearSlotItems(slotAux);\n\t\t\tthis.equipmentService.addItem(item, updateStats);\n\t\t\tslotAux.item = item;\n\t\t\tif (closeModal) {\n\t\t\t\tthis.itemSelected$.next({ slot: slotAux, equipment: item });\n\t\t\t} else {\n\t\t\t\tthis.itemSelectedNew$.next({ slot: slotAux, equipment: item });\n\t\t\t}\n\t\t} else {\n\t\t\tthis.clearArmorSlot(slotAux);\n\t\t}\n\t}\n\n\tselectDecoration(decoration: DecorationModel, updateStats: boolean = true) {\n\t\tif (this.selectedDecorationSlot) {\n\t\t\tif (this.selectedDecorationSlot.decoration) {\n\t\t\t\tthis.equipmentService.removeDecoration(this.selectedDecorationSlot.decoration);\n\t\t\t}\n\n\t\t\tdecoration.itemId = this.selectedDecorationSlot.itemId;\n\t\t\tdecoration.itemType = this.selectedDecorationSlot.itemType;\n\t\t\tthis.equipmentService.addDecoration(decoration, updateStats);\n\t\t\tthis.selectedDecorationSlot.decoration = decoration;\n\t\t\tthis.decorationSelected$.next({ slot: this.selectedDecorationSlot, equipment: decoration });\n\t\t}\n\t}\n\n\tselectAugmentation(augmentation: AugmentationModel, updateStats: boolean = true) {\n\t\tif (this.selectedAugmentationSlot) {\n\t\t\tif (this.selectedAugmentationSlot.augmentation) {\n\t\t\t\tthis.equipmentService.removeAugmentation(this.selectedAugmentationSlot.augmentation);\n\t\t\t}\n\n\t\t\tthis.equipmentService.addAugmentation(augmentation, updateStats);\n\t\t\tthis.applySlotAugmentation();\n\t\t\tthis.selectedAugmentationSlot.augmentation = augmentation;\n\t\t\tthis.augmentationSelected$.next({ slot: this.selectedAugmentationSlot, equipment: augmentation });\n\t\t}\n\t}\n\n\tselectUpgradeContainer(upgradeContainer: UpgradeContainerModel, updateStats: boolean = true) {\n\t\tif (this.selectedUpgradeSlot) {\n\t\t\tif (this.selectedUpgradeSlot.upgradeContainer) {\n\t\t\t\tthis.equipmentService.removeUpgrade();\n\t\t\t}\n\n\t\t\tthis.equipmentService.addUpgrade(upgradeContainer, updateStats);\n\n\t\t\tthis.applySlotUpgrade();\n\n\t\t\tthis.selectedUpgradeSlot.upgradeContainer = upgradeContainer;\n\t\t\tthis.upgradeSelected$.next({ slot: this.selectedUpgradeSlot, equipment: upgradeContainer });\n\t\t}\n\t}\n\n\tselectAwakenings(awakenings: AwakeningLevelModel[], updateStats: boolean = true) {\n\t\tif (this.selectedAwakeningSlot) {\n\t\t} else {\n\t\t\tthis.selectedAwakeningSlot = this.weaponSlot.awakeningSlot;\n\t\t}\n\t\tthis.equipmentService.addAwakenings(awakenings, updateStats);\n\t\tthis.applySlotAwakening();\n\n\t\tthis.selectedAwakeningSlot.awakenings = awakenings;\n\t\tthis.weaponModSelected$.next({ slot: this.selectedAwakeningSlot, equipment: awakenings });\n\t}\n\n\tselectSetbonus(setbonus: SetBonusModel, updateStats: boolean = true) {\n\t\tif (this.selectedSetbonusSlot) {\n\t\t\tif (this.selectedSetbonusSlot.setbonus) {\n\t\t\t\tthis.equipmentService.removeSetbonus();\n\t\t\t}\n\t\t\tthis.equipmentService.addSetbonus(setbonus, updateStats);\n\t\t\tthis.selectedSetbonusSlot.setbonus = setbonus;\n\t\t\tthis.setbonusSelected$.next({ slot: this.selectedSetbonusSlot, equipment: setbonus });\n\t\t}\n\t}\n\n\tselectModification(modification: ModificationModel, updateStats: boolean = true) {\n\t\tif (this.selectedModificationSlot) {\n\t\t\tif (this.selectedModificationSlot.modification) {\n\t\t\t\tthis.equipmentService.removeModification(this.selectedModificationSlot.modification);\n\t\t\t}\n\n\t\t\tthis.equipmentService.addModification(modification);\n\t\t\tthis.selectedModificationSlot.modification = modification;\n\t\t\tthis.modificationSelected$.next({ slot: this.selectedModificationSlot, equipment: modification });\n\t\t}\n\t}\n\n\tselectKinsect(kinsect: KinsectModel, updateStats: boolean = true) {\n\t\tif (this.selectedKinsectSlot) {\n\t\t\tif (this.selectedKinsectSlot.kinsect) {\n\t\t\t\tthis.equipmentService.removeKinsect();\n\t\t\t}\n\t\t\tthis.equipmentService.addKinsect(kinsect, updateStats);\n\t\t\tthis.selectedKinsectSlot.kinsect = kinsect;\n\t\t\tthis.kinsectSelected$.next({ slot: this.selectedKinsectSlot, equipment: kinsect });\n\t\t}\n\t}\n\n\tupdateItemLevel() {\n\t\tthis.itemLevelChanged$.next();\n\t\tthis.equipmentService.updateItemLevel();\n\t}\n\n\tselectWeaponElement(element: ElementType, elementAttack: number) {\n\t\tthis.equipmentService.changeElement(element, elementAttack);\n\t\tthis.weaponModSelected$.next(element);\n\t}\n\n\tselectWeaponAilment(ailment: AilmentType, ailmentAttack: number) {\n\t\tthis.equipmentService.changeAilment(ailment, ailmentAttack);\n\t\tthis.weaponModSelected$.next(ailment);\n\t}\n\n\tchangeWeaponName(weaponName: string) {\n\t\tthis.equipmentService.changeWeaponName(weaponName);\n\t}\n\n\tactiveItemTool(itemType: ItemType, active: boolean) {\n\t\tif (active) {\n\t\t\tif (itemType == ItemType.Tool1 && this.tool2Slot.item) {\n\t\t\t\tthis.tool2Slot.item.active = false;\n\t\t\t}\n\t\t\tif (itemType == ItemType.Tool2 && this.tool1Slot.item) {\n\t\t\t\tthis.tool1Slot.item.active = false;\n\t\t\t}\n\t\t}\n\t\tthis.itemActiveChanged$.next();\n\t\tthis.equipmentService.updateItemActive();\n\t}\n\n\tprivate clearUpgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tupgradeContainer.used = 0;\n\t\tfor (const detail of upgradeContainer.upgradeDetails) {\n\t\t\tdetail.level = 0;\n\t\t\tdetail.totalSlots = 0;\n\t\t\tdetail.requiredSlots = 0;\n\n\t\t\tdetail.passiveAttack = 0;\n\t\t\tdetail.passiveAffinity = 0;\n\t\t\tdetail.passiveDefense = 0;\n\t\t\tdetail.slotLevel = 0;\n\t\t\tdetail.healOnHitPercent = 0;\n\t\t\tdetail.passiveElement = 0;\n\t\t\tdetail.passiveAilment = 0;\n\t\t}\n\t\tupgradeContainer.customUpgradeIds = [0, 0, 0, 0, 0, 0, 0];\n\t}\n\n\tprivate applySlotAugmentation() {\n\t\tconst slotAugs = this.equipmentService.augmentations.filter(aug => aug.id == 4);\n\t\tconst augDecorationSlot = this.weaponSlot.item.slots.find(slot => slot.augmentation);\n\n\t\tif (slotAugs && slotAugs.length) {\n\t\t\tthis.changeDetector.detectChanges();\n\n\t\t\tif (augDecorationSlot) {\n\t\t\t\taugDecorationSlot.level = slotAugs[0].levels[slotAugs.length - 1].slotLevel;\n\t\t\t\tconst decoSlot = this.weaponSlot.decorationSlots.last;\n\t\t\t\tif (decoSlot && decoSlot.decoration && augDecorationSlot.level < decoSlot.decoration.level) {\n\t\t\t\t\tthis.clearDecorationSlot(decoSlot);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!this.weaponSlot.item.slots) {\n\t\t\t\t\tthis.weaponSlot.item.slots = [];\n\t\t\t\t}\n\t\t\t\tthis.weaponSlot.item.slots.push({ level: slotAugs[0].levels[slotAugs.length - 1].slotLevel, augmentation: true });\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.weaponSlot.item.slots.some(decorationSlot => decorationSlot.augmentation)) {\n\t\t\t\tthis.weaponSlot.item.slots = this.weaponSlot.item.slots.filter(decorationSlot => !(decorationSlot === augDecorationSlot)); // Was Reject\n\t\t\t\tthis.equipmentService.removeDecoration(this.weaponSlot.decorationSlots.last.decoration);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate applySlotUpgrade() {\n\t\tconst upgradeContainer = this.equipmentService.upgradeContainer;\n\t\tif (upgradeContainer && upgradeContainer.upgradeDetails && upgradeContainer.upgradeDetails.length > 0) {\n\t\t\tthis.applySlotIncrement(upgradeContainer.upgradeDetails[3].level, ItemType.Upgrade);\n\t\t} else {\n\t\t\tthis.applySlotIncrement(0, ItemType.Upgrade);\n\t\t}\n\t}\n\n\tprivate applySlotAwakening() {\n\t\tconst slotAwakening = this.equipmentService.awakenings.find(x => x.type == AwakeningType.Slot);\n\t\tif (slotAwakening && slotAwakening.level - 1 > 0) {\n\t\t\tthis.applySlotIncrement(slotAwakening.level - 1, ItemType.Awakening);\n\t\t} else {\n\t\t\tthis.applySlotIncrement(0, ItemType.Awakening);\n\t\t}\n\t}\n\n\tprivate applySlotIncrement(extraSlots: number, itemType: ItemType) {\n\t\tconst decoSlotsIncremented = this.weaponSlot.item.slots.filter(x => x.slotsAdded && x.slotsAdded.some(y => y.itemType == itemType));\n\t\tlet totalAdded = 0;\n\t\tif (decoSlotsIncremented) {\n\t\t\tfor (const decoSlot of decoSlotsIncremented) {\n\t\t\t\tif (decoSlot.slotsAdded.length) {\n\t\t\t\t\tfor (const added of decoSlot.slotsAdded) {\n\t\t\t\t\t\tif (added.itemType == itemType) {\n\t\t\t\t\t\t\ttotalAdded += added.level;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (totalAdded != extraSlots) {\n\t\t\t\tthis.slotsIncrementRecursive(extraSlots - totalAdded, itemType);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate slotsIncrementRecursive(extraSlots: number, itemType: ItemType) {\n\t\tif (extraSlots > 0) {\n\t\t\tfor (const slot of this.weaponSlot.item.slots) {\n\t\t\t\tif (slot.level < 4) {\n\t\t\t\t\tconst toAdd = Math.min(4 - slot.level, extraSlots);\n\n\t\t\t\t\tif (!slot.slotsAdded) {\n\t\t\t\t\t\tslot.slotsAdded = [];\n\t\t\t\t\t}\n\t\t\t\t\tconst added = slot.slotsAdded.find(x => x.itemType == itemType);\n\t\t\t\t\tif (added) {\n\t\t\t\t\t\tadded.level += toAdd;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tslot.slotsAdded.push({ level: toAdd, itemType: itemType });\n\t\t\t\t\t}\n\n\t\t\t\t\tslot.level += toAdd;\n\t\t\t\t\textraSlots -= toAdd;\n\t\t\t\t}\n\t\t\t\tif (extraSlots == 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extraSlots > 0 && this.weaponSlot.item.slots.length < 3) {\n\t\t\t\tif (!this.weaponSlot.item.slots) {\n\t\t\t\t\tthis.weaponSlot.item.slots = [];\n\t\t\t\t}\n\t\t\t\tthis.weaponSlot.item.slots.push({ level: 0 });\n\t\t\t\tthis.slotsIncrementRecursive(extraSlots, itemType);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = this.weaponSlot.item.slots.length - 1; i >= 0; i--) {\n\t\t\t\tconst slot = this.weaponSlot.item.slots[i];\n\t\t\t\tconst toRemove = Math.min(slot.level, -extraSlots);\n\t\t\t\tif (slot.slotsAdded) {\n\t\t\t\t\tconst added = slot.slotsAdded.find(x => x.itemType == itemType);\n\t\t\t\t\tif (added) {\n\t\t\t\t\t\tadded.level -= toRemove;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst decoSlot = this.weaponSlot.decorationSlots.toArray()[i];\n\t\t\t\tif (decoSlot && decoSlot.decoration && decoSlot.decoration.level > slot.level - toRemove) {\n\t\t\t\t\tthis.clearDecorationSlot(decoSlot);\n\t\t\t\t}\n\t\t\t\tslot.level -= toRemove;\n\t\t\t\textraSlots += toRemove;\n\t\t\t\tif (slot.level == 0) {\n\t\t\t\t\tthis.weaponSlot.item.slots.pop();\n\t\t\t\t}\n\t\t\t\tif (extraSlots == 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate clearSlotItems(slot: ItemSlotComponent) {\n\t\tif (slot.item) {\n\t\t\tthis.equipmentService.removeItem(slot.item);\n\n\t\t\tslot.decorationSlots.forEach(ds => {\n\t\t\t\tthis.equipmentService.removeDecoration(ds.decoration);\n\t\t\t});\n\n\t\t\tslot.augmentationSlots.forEach(as => {\n\t\t\t\tthis.equipmentService.removeAugmentation(as.augmentation);\n\t\t\t});\n\n\t\t\tslot.modificationSlots.forEach(md => {\n\t\t\t\tthis.equipmentService.removeModification(md.modification);\n\t\t\t});\n\n\t\t\tif (slot.awakeningSlot) {\n\t\t\t\tthis.equipmentService.removeAwakening();\n\t\t\t\tslot.awakeningSlot.setbonus = null;\n\t\t\t}\n\t\t}\n\t\tif (slot.upgradeContainer) {\n\t\t\tslot.upgradeContainer.slots = 0;\n\t\t\tslot.upgradeContainer.used = 0;\n\t\t\tslot.upgradeContainer.hasCustomUpgrades = false;\n\t\t\tthis.clearUpgradeContainer(slot.upgradeContainer);\n\t\t\tthis.equipmentService.upgradeContainer = slot.upgradeContainer;\n\t\t}\n\t}\n\n\tprivate clearSlotSelect() {\n\t\tif (this.selectedItemSlot) {\n\t\t\tthis.selectedItemSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedDecorationSlot) {\n\t\t\tthis.selectedDecorationSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedAugmentationSlot) {\n\t\t\tthis.selectedAugmentationSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedUpgradeSlot) {\n\t\t\tthis.selectedUpgradeSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedSetbonusSlot) {\n\t\t\tthis.selectedSetbonusSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedModificationSlot) {\n\t\t\tthis.selectedModificationSlot.selected = false;\n\t\t}\n\n\t\tif (this.selectedKinsectSlot) {\n\t\t\tthis.selectedKinsectSlot.selected = false;\n\t\t}\n\n\t\tthis.selectedItemSlot = null;\n\t\tthis.selectedDecorationSlot = null;\n\t\tthis.selectedAugmentationSlot = null;\n\t\tthis.selectedUpgradeSlot = null;\n\t\tthis.selectedSetbonusSlot = null;\n\t\tthis.selectedModificationSlot = null;\n\t\tthis.selectedKinsectSlot = null;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport { Subject } from 'rxjs';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { AwakeningLevelModel } from '../models/awakening-level.model';\nimport { AwakeningModel } from '../models/awakening.model';\nimport { BuffModel } from '../models/buffs.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SkillLevelModel } from '../models/skill-level.model';\nimport { StatsModel } from '../models/stats.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\nimport { WeaponModifierModel } from '../models/weapon-modifier.model';\nimport { AilmentType } from '../types/ailment.type';\nimport { AmmoType } from '../types/ammo.type';\nimport { AwakeningType } from '../types/awakening.type';\nimport { DamageType } from '../types/damage.type';\nimport { EldersealType } from '../types/elderseal.type';\nimport { ElementType } from '../types/element.type';\nimport { ItemType } from '../types/item.type';\nimport { ModeType } from '../types/mode.type';\nimport { WeaponType } from '../types/weapon.type';\nimport { CalculationService } from './calculation.service';\nimport { DataService } from './data.service';\n\n@Injectable()\nexport class StatService {\n\tpublic statsUpdated$ = new Subject<StatsModel>();\n\n\treadonly defaultElementAttackIncreaseCap = 10.0;\n\n\tstats = new StatsModel();\n\tweaponModifier: WeaponModifierModel;\n\n\tawakeningsData: AwakeningModel[] = [];\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate calcService: CalculationService\n\t) {\n\t\tthis.awakeningsData = this.dataService.getAwakenings();\n\t}\n\n\tupdate(\n\t\tskills: EquippedSkillModel[],\n\t\titems: ItemModel[],\n\t\taugmentations: AugmentationModel[],\n\t\tupgradeContainer: UpgradeContainerModel,\n\t\tawakenings: AwakeningLevelModel[],\n\t\tmodifications: ModificationModel[],\n\t\tkinsect: KinsectModel,\n\t\tbuffs: BuffModel\n\t) {\n\n\t\tthis.stats = new StatsModel();\n\n\t\t// ---------------------------- Weapon\n\t\tconst weapon = items.find(x => x.itemType == ItemType.Weapon);\n\t\tif (weapon) {\n\t\t\tthis.weaponModifier = this.dataService.getWeaponModifier(weapon.weaponType);\n\n\t\t\tswitch (weapon.weaponType) {\n\t\t\t\tcase WeaponType.HeavyBowgun:\n\t\t\t\tcase WeaponType.LightBowgun:\n\t\t\t\t\tthis.stats.ammoCapacities = weapon.ammoCapacities;\n\t\t\t\t\tbreak;\n\t\t\t\tcase WeaponType.InsectGlaive:\n\t\t\t\t\tthis.stats.kinsect = kinsect;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.stats.weaponType = weapon.weaponType;\n\t\t}\n\t\t// ---------------------------- Awakenings\n\t\tif (weapon && awakenings.length) {\n\t\t\tthis.updateAwakenings(weapon, awakenings);\n\t\t}\n\t\t// ---------------------------- Upgrades\n\t\tif (upgradeContainer) {\n\t\t\tthis.updateUpgrades(upgradeContainer);\n\t\t}\n\t\t// ----------------------------\n\t\tthis.updateItemStats(items, buffs);\n\t\tthis.updateSkillStats(skills);\n\t\tthis.updateAugmentations(augmentations);\n\n\t\tthis.updateModifications(modifications);\n\n\t\tthis.calculateAttack(weapon);\n\n\t\tthis.statsUpdated$.next(this.stats);\n\n\t\tthis.calcService.updateCalcs(this.stats);\n\t}\n\n\tprivate updateItemStats(items: ItemModel[], buffs: BuffModel) {\n\t\tfor (const item of items) {\n\t\t\tif (item.itemType != ItemType.Tool1 && item.itemType != ItemType.Tool2) {\n\t\t\t\tif (item.baseAttack) {\n\t\t\t\t\tthis.stats.attack += item.baseAttack;\n\t\t\t\t\tthis.stats.attack = this.nearestTen(this.stats.attack * 10) / 10;\n\t\t\t\t}\n\t\t\t\tif (item.baseAffinityPercent) { this.stats.affinity += item.baseAffinityPercent; }\n\t\t\t\tif (item.itemType == ItemType.Weapon) {\n\t\t\t\t\tif (item.defense) {\n\t\t\t\t\t\tfor (let i = 0; i < this.stats.defense.length; i++) {\n\t\t\t\t\t\t\tthis.stats.defense[i] += item.defense[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (item.defense) {\n\t\t\t\t\t\tfor (let i = 0; i < this.stats.defense.length; i++) {\n\t\t\t\t\t\t\tthis.stats.defense[i] += item.defense[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (item.fireResist) { this.stats.fireResist += item.fireResist; }\n\t\t\t\tif (item.waterResist) { this.stats.waterResist += item.waterResist; }\n\t\t\t\tif (item.thunderResist) { this.stats.thunderResist += item.thunderResist; }\n\t\t\t\tif (item.iceResist) { this.stats.iceResist += item.iceResist; }\n\t\t\t\tif (item.dragonResist) { this.stats.dragonResist += item.dragonResist; }\n\t\t\t\tif (item.element) { this.stats.element = item.element; }\n\t\t\t\tif (item.elementBaseAttack) { this.stats.baseElementAttack += item.elementBaseAttack; }\n\t\t\t\tif (item.ailment) { this.stats.ailment = item.ailment; }\n\t\t\t\tif (item.ailmentBaseAttack) { this.stats.baseAilmentAttack += item.ailmentBaseAttack; }\n\t\t\t\tif (item.elderseal) { this.stats.elderseal = item.elderseal; }\n\t\t\t}\n\t\t}\n\n\t\tthis.stats.fireResist += (buffs.elementBuff * 5);\n\t\tthis.stats.waterResist += (buffs.elementBuff * 5);\n\t\tthis.stats.thunderResist += (buffs.elementBuff * 5);\n\t\tthis.stats.iceResist += (buffs.elementBuff * 5);\n\t\tthis.stats.dragonResist += (buffs.elementBuff * 5);\n\t}\n\n\tprivate updateSkillStats(equippedSkills: EquippedSkillModel[]) {\n\t\tfor (const equippedSkill of equippedSkills) {\n\t\t\tlet level: SkillLevelModel;\n\n\t\t\tif (equippedSkill.equippedCount) {\n\t\t\t\tconst levelIndex = Math.min(equippedSkill.equippedCount, equippedSkill.skill.levels.length) - 1;\n\t\t\t\tlevel = equippedSkill.skill.levels[levelIndex];\n\t\t\t}\n\t\t\tif (level) {\n\t\t\t\tif (equippedSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tconst skillUpgrade = equippedSkills.find(x => x.id == 'true' + equippedSkill.id.substring(0, 1).toUpperCase() + equippedSkill.id.substring(1, equippedSkill.id.length));\n\t\t\t\t\tif (skillUpgrade == null || skillUpgrade.skill.mode == ModeType.Active) {\n\t\t\t\t\t\tif (level.activeElementAttack) { this.stats.activeElementAttack += level.activeElementAttack; }\n\t\t\t\t\t\tif (level.activeAilmentAttack) { this.stats.activeAilmentAttack += level.activeAilmentAttack; }\n\t\t\t\t\t\tif (level.activeAilmentAttackBuildUpPercent) { this.stats.activeAilmentAttackBuildUpPercent += level.activeAilmentAttackBuildUpPercent; }\n\t\t\t\t\t\tif (level.activeAttack) { this.stats.activeAttack += level.activeAttack; }\n\t\t\t\t\t\tif (level.activeAttackPercent) { this.stats.activeAttackPercent += level.activeAttackPercent; }\n\t\t\t\t\t\tif (level.activeAffinity) { this.stats.activeAffinity += level.activeAffinity; }\n\t\t\t\t\t\tif (level.activeWeakPointAffinity) { this.stats.weakPointAffinity += level.activeWeakPointAffinity; }\n\t\t\t\t\t\tif (level.activeDefense) { this.stats.activeDefense += level.activeDefense; }\n\t\t\t\t\t\tif (equippedSkill.skill.id == 'frostcraft') {\n\t\t\t\t\t\t\tthis.stats.activeAttackPercent += this.weaponModifier.frostcraft[2];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (equippedSkill.skill.mode == ModeType.Active || equippedSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\t\t\tif (level.passiveAttack) { this.stats.passiveAttack += level.passiveAttack; }\n\t\t\t\t\tif (level.elementlessBoostPercent) { this.stats.elementlessBoostPercent += level.elementlessBoostPercent; }\n\t\t\t\t\tif (level.passiveAffinity) { this.stats.passiveAffinity += level.passiveAffinity; }\n\t\t\t\t\tif (level.weakPointAffinity) { this.stats.weakPointAffinity += level.weakPointAffinity; }\n\t\t\t\t\tif (level.passiveSharpness) { this.stats.passiveSharpness += level.passiveSharpness; }\n\n\t\t\t\t\tif (level.passiveCriticalBoostPercent) { this.stats.passiveCriticalBoostPercent += level.passiveCriticalBoostPercent; }\n\t\t\t\t\tif (level.criticalElement) { this.stats.criticalElement = true; }\n\t\t\t\t\tif (level.criticalStatus) { this.stats.criticalStatus = true; }\n\t\t\t\t\tif (level.trueCriticalElement) { this.stats.trueCriticalElement = true; }\n\t\t\t\t\tif (level.trueCriticalStatus) { this.stats.trueCriticalStatus = true; }\n\n\t\t\t\t\tif (level.passiveFireAttack) { this.stats.passiveFireAttack += level.passiveFireAttack; }\n\t\t\t\t\tif (level.passiveWaterAttack) { this.stats.passiveWaterAttack += level.passiveWaterAttack; }\n\t\t\t\t\tif (level.passiveThunderAttack) { this.stats.passiveThunderAttack += level.passiveThunderAttack; }\n\t\t\t\t\tif (level.passiveIceAttack) { this.stats.passiveIceAttack += level.passiveIceAttack; }\n\t\t\t\t\tif (level.passiveDragonAttack) { this.stats.passiveDragonAttack += level.passiveDragonAttack; }\n\n\t\t\t\t\tif (level.passiveFireAttackPercent) { this.stats.passiveFireAttackPercent += level.passiveFireAttackPercent; }\n\t\t\t\t\tif (level.passiveWaterAttackPercent) { this.stats.passiveWaterAttackPercent += level.passiveWaterAttackPercent; }\n\t\t\t\t\tif (level.passiveThunderAttackPercent) { this.stats.passiveThunderAttackPercent += level.passiveThunderAttackPercent; }\n\t\t\t\t\tif (level.passiveIceAttackPercent) { this.stats.passiveIceAttackPercent += level.passiveIceAttackPercent; }\n\t\t\t\t\tif (level.passiveDragonAttackPercent) { this.stats.passiveDragonAttackPercent += level.passiveDragonAttackPercent; }\n\n\t\t\t\t\tif (level.passivePoisonAttack) { this.stats.passivePoisonAttack += level.passivePoisonAttack; }\n\t\t\t\t\tif (level.passiveSleepAttack) { this.stats.passiveSleepAttack += level.passiveSleepAttack; }\n\t\t\t\t\tif (level.passiveParalysisAttack) { this.stats.passiveParalysisAttack += level.passiveParalysisAttack; }\n\t\t\t\t\tif (level.passiveBlastAttack) { this.stats.passiveBlastAttack += level.passiveBlastAttack; }\n\t\t\t\t\tif (level.passiveStunAttack) { this.stats.passiveStunAttack += level.passiveStunAttack; }\n\n\t\t\t\t\tif (level.passivePoisonBuildupPercent) { this.stats.passivePoisonBuildupPercent += level.passivePoisonBuildupPercent; }\n\t\t\t\t\tif (level.passiveSleepBuildupPercent) { this.stats.passiveSleepBuildupPercent += level.passiveSleepBuildupPercent; }\n\t\t\t\t\tif (level.passiveParalysisBuildupPercent) { this.stats.passiveParalysisBuildupPercent += level.passiveParalysisBuildupPercent; }\n\t\t\t\t\tif (level.passiveBlastBuildupPercent) { this.stats.passiveBlastBuildupPercent += level.passiveBlastBuildupPercent; }\n\t\t\t\t\tif (level.passiveStunBuildupPercent) { this.stats.passiveStunBuildupPercent += level.passiveStunBuildupPercent; }\n\n\t\t\t\t\tif (level.passiveDefense) { this.stats.passiveDefense += level.passiveDefense; }\n\t\t\t\t\tif (level.passiveDefensePercent) { this.stats.passiveDefensePercent += level.passiveDefensePercent; }\n\t\t\t\t\tif (level.passiveHealth) { this.stats.passiveHealth += level.passiveHealth; }\n\t\t\t\t\tif (level.passiveStamina) { this.stats.passiveStamina += level.passiveStamina; }\n\n\t\t\t\t\tif (level.passiveFireResist) { this.stats.passiveFireResist += level.passiveFireResist; }\n\t\t\t\t\tif (level.passiveWaterResist) { this.stats.passiveWaterResist += level.passiveWaterResist; }\n\t\t\t\t\tif (level.passiveThunderResist) { this.stats.passiveThunderResist += level.passiveThunderResist; }\n\t\t\t\t\tif (level.passiveIceResist) { this.stats.passiveIceResist += level.passiveIceResist; }\n\t\t\t\t\tif (level.passiveDragonResist) { this.stats.passiveDragonResist += level.passiveDragonResist; }\n\n\t\t\t\t\tif (level.passiveElementResistPercent) { this.stats.passiveElementResistPercent = level.passiveElementResistPercent; }\n\n\t\t\t\t\tif (level.hiddenElementUp) { this.stats.elementAttackMultiplier = level.hiddenElementUp; }\n\t\t\t\t\tif (level.ammoUp) { this.stats.ammoUp += level.ammoUp; }\n\t\t\t\t\tif (level.eldersealLevelBoost) { this.stats.eldersealLevelBoost = level.eldersealLevelBoost; }\n\t\t\t\t}\n\t\t\t\tif (equippedSkill.skill.id == 'hastenRecovery') {\n\t\t\t\t\tthis.stats.hastenRecovery = 0;\n\t\t\t\t}\n\t\t\t\tif (equippedSkill.skill.id == 'frostcraft') {\n\t\t\t\t\tthis.stats.frostcraft = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.stats.passiveElementResistPercent) {\n\t\t\tthis.stats.passiveFireResist += (this.stats.fireResist + this.stats.passiveFireResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveWaterResist += (this.stats.waterResist + this.stats.passiveWaterResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveThunderResist += (this.stats.thunderResist + this.stats.passiveThunderResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveIceResist += (this.stats.iceResist + this.stats.passiveIceResist) * this.stats.passiveElementResistPercent / 100;\n\t\t\tthis.stats.passiveDragonResist += (this.stats.dragonResist + this.stats.passiveDragonResist) * this.stats.passiveElementResistPercent / 100;\n\t\t}\n\n\t\tconst elementConversionSkill = equippedSkills.find(skill => skill.id == 'elementConversion');\n\t\tif (elementConversionSkill && elementConversionSkill.skill.mode == ModeType.AllSkillActive) {\n\t\t\tconst sumElementalRes =\n\t\t\t\tthis.stats.fireResist + this.stats.passiveFireResist\n\t\t\t\t+ this.stats.waterResist + this.stats.passiveWaterResist\n\t\t\t\t+ this.stats.thunderResist + this.stats.passiveThunderResist\n\t\t\t\t+ this.stats.iceResist + this.stats.passiveIceResist\n\t\t\t\t+ this.stats.dragonResist + this.stats.passiveDragonResist;\n\t\t\tlet elementalBonus = 0;\n\t\t\tif (sumElementalRes >= 15) {\n\t\t\t\tif (sumElementalRes < 30) {\n\t\t\t\t\telementalBonus = 10;\n\t\t\t\t} else if (sumElementalRes < 40) {\n\t\t\t\t\telementalBonus = 20;\n\t\t\t\t} else {\n\t\t\t\t\telementalBonus = Math.floor((sumElementalRes - 30) / 20) * 10 + 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.stats.baseElementAttack += elementalBonus;\n\t\t}\n\t}\n\n\tprivate updateAugmentations(augmentations: AugmentationModel[]) {\n\t\tconst augGroups = _.groupBy(augmentations, 'id');\n\n\t\tfor (const key in augGroups) {\n\t\t\tif (augGroups.hasOwnProperty(key)) {\n\t\t\t\tconst value = augGroups[key];\n\n\t\t\t\tconst level = value[0].levels[value.length - 1];\n\t\t\t\tif (level) {\n\t\t\t\t\tif (level.passiveAttack) { this.stats.passiveAttack += level.passiveAttack; }\n\t\t\t\t\tif (level.passiveAffinity) { this.stats.passiveAffinity += level.passiveAffinity; }\n\t\t\t\t\tif (level.passiveDefense) { this.stats.passiveDefense += level.passiveDefense; }\n\t\t\t\t\tif (level.healOnHitPercent) { this.stats.healOnHitPercent += level.healOnHitPercent; }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateUpgrades(upgradeContainer: UpgradeContainerModel) {\n\t\tconst attackModifier = this.weaponModifier.attackModifier;\n\n\t\tfor (const detail of upgradeContainer.upgradeDetails) {\n\t\t\tif (detail.passiveAttack) {\n\t\t\t\tthis.stats.upgradeAttack += detail.passiveAttack;\n\t\t\t}\n\t\t\tif (detail.passiveAffinity) {\n\t\t\t\tthis.stats.affinity += detail.passiveAffinity;\n\t\t\t\tthis.stats.upgradeAffinity += detail.passiveAffinity;\n\t\t\t}\n\t\t\tif (detail.passiveDefense) { this.stats.passiveDefense += detail.passiveDefense; }\n\t\t\tif (detail.healOnHitPercent) { this.stats.healOnHitPercent += detail.healOnHitPercent; }\n\t\t\tif (detail.passiveElement) {\n\t\t\t\tthis.stats.baseElementAttack += detail.passiveElement;\n\t\t\t\tthis.stats.upgradeElementAttack += detail.passiveElement;\n\t\t\t}\n\t\t\tif (detail.passiveAilment) {\n\t\t\t\tthis.stats.baseAilmentAttack += detail.passiveAilment;\n\t\t\t\tthis.stats.upgradeAilmentAttack += detail.passiveAilment;\n\t\t\t}\n\t\t}\n\n\t\tlet upgradePassiveAttack = 0;\n\t\tlet upgradePassiveAffinity = 0;\n\t\tlet upgradePassiveAilmentElement = 0;\n\t\tlet upgradePassiveDefense = 0;\n\n\t\tlet weaponIndex = 0;\n\t\tfor (const item in WeaponType) {\n\t\t\tif (isNaN(Number(item))) {\n\t\t\t\tif (item == upgradeContainer.weaponType) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tweaponIndex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst upgrades = this.dataService.getUpgrades();\n\t\tfor (const [i, customId] of upgradeContainer.customUpgradeIds.entries()) {\n\t\t\tif (customId > 0) {\n\t\t\t\tconst value = upgrades.find(x => x.id == customId).WeaponCustomUpgrades[weaponIndex][i];\n\t\t\t\tupgradeContainer.customUpgradeValues[i] = value;\n\t\t\t\tswitch (customId) {\n\t\t\t\t\tcase 1: // Attack\n\t\t\t\t\t\tupgradePassiveAttack += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2: // Affinity\n\t\t\t\t\t\tupgradePassiveAffinity += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3: // Defense\n\t\t\t\t\t\tupgradePassiveDefense += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6: // Element / Ailment\n\t\t\t\t\t\tupgradePassiveAilmentElement += value * 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 7: // Sharpness\n\t\t\t\t\t\tthis.stats.extraSharpness += value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.stats.upgradeAttack += upgradePassiveAttack;\n\t\tthis.stats.affinity += upgradePassiveAffinity;\n\t\tthis.stats.upgradeAffinity += upgradePassiveAffinity;\n\t\tthis.stats.passiveDefense += upgradePassiveDefense;\n\n\t\tthis.stats.baseElementAttack += upgradePassiveAilmentElement;\n\t\tthis.stats.upgradeElementAttack += upgradePassiveAilmentElement;\n\t\tthis.stats.baseAilmentAttack += upgradePassiveAilmentElement;\n\t\tthis.stats.upgradeAilmentAttack += upgradePassiveAilmentElement;\n\t}\n\n\tprivate updateAwakenings(weapon: ItemModel, awakenings: AwakeningLevelModel[]) {\n\t\tlet weaponIndex = 0;\n\t\tfor (const type in WeaponType) {\n\t\t\tif (isNaN(Number(type))) {\n\t\t\t\tif (type == weapon.weaponType) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tweaponIndex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst attackModifier = this.weaponModifier.attackModifier;\n\n\t\tconst awakeningAttack: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Attack).awakenings[weaponIndex];\n\t\tconst awakeningAffinity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Affinity).awakenings[0];\n\t\tconst awakeningDefense: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Defense).awakenings[0];\n\t\tconst awakeningSlot: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Slot).awakenings[0];\n\t\tconst awakeningAilment: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Ailment).awakenings[weaponIndex];\n\t\tconst awakeningElement: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Element).awakenings[weaponIndex];\n\t\tconst awakeningSharpness: number[] = this.awakeningsData.find(x => x.type == AwakeningType.Sharpness).awakenings[0];\n\n\t\tfor (const awakening of awakenings) {\n\t\t\tif (awakening.level > 0) {\n\t\t\t\tswitch (awakening.type) {\n\t\t\t\t\tcase AwakeningType.Attack:\n\t\t\t\t\t\tthis.stats.awakeningAttack += awakeningAttack[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Affinity:\n\t\t\t\t\t\tthis.stats.affinity += awakeningAffinity[awakening.level - 1];\n\t\t\t\t\t\tthis.stats.awakeningAffinity += awakeningAffinity[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Defense:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Slot:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Ailment:\n\t\t\t\t\t\tthis.stats.baseAilmentAttack += awakeningAilment[awakening.level - 1];\n\t\t\t\t\t\tthis.stats.awakeningAilmentAttack += awakeningAilment[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Element:\n\t\t\t\t\t\tthis.stats.baseElementAttack += awakeningElement[awakening.level - 1];\n\t\t\t\t\t\tthis.stats.awakeningElementAttack += awakeningElement[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase AwakeningType.Sharpness:\n\t\t\t\t\t\tthis.stats.extraSharpness += awakeningSharpness[awakening.level - 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst defense = awakenings.find(x => x.type == AwakeningType.Defense);\n\t\tif (defense) {\n\t\t\tthis.stats.passiveDefense += awakeningDefense[defense.level - 1];\n\t\t}\n\t\tconst slot = awakenings.find(x => x.type == AwakeningType.Slot);\n\t\tif (slot) {\n\t\t\tthis.stats.extraSlot += awakeningSlot[slot.level - 1];\n\t\t}\n\n\t\tif (weapon.weaponType == WeaponType.HuntingHorn) {\n\t\t\tlet melodyId = weapon.id;\n\n\t\t\tconst attackMelody = awakenings.find(x => x.type == AwakeningType.AttackMelody);\n\t\t\tif (attackMelody && attackMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.AttackMelody).awakenings[0][attackMelody.level - 1];\n\t\t\t}\n\t\t\tconst staminaMelody = awakenings.find(x => x.type == AwakeningType.StaminaMelody);\n\t\t\tif (staminaMelody && staminaMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.StaminaMelody).awakenings[0][staminaMelody.level - 1];\n\t\t\t}\n\t\t\tconst elementalMelody = awakenings.find(x => x.type == AwakeningType.ElementalMelody);\n\t\t\tif (elementalMelody && elementalMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.ElementalMelody).awakenings[0][elementalMelody.level - 1];\n\t\t\t}\n\t\t\tconst statusMelody = awakenings.find(x => x.type == AwakeningType.StatusMelody);\n\t\t\tif (statusMelody && statusMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.StatusMelody).awakenings[0][statusMelody.level - 1];\n\t\t\t}\n\t\t\tconst earplugsMelody = awakenings.find(x => x.type == AwakeningType.EarplugsMelody);\n\t\t\tif (earplugsMelody && earplugsMelody.level > 0) {\n\t\t\t\tmelodyId = this.awakeningsData.find(x => x.type == AwakeningType.EarplugsMelody).awakenings[0][earplugsMelody.level - 1];\n\t\t\t}\n\n\t\t\tweapon.melodies = this.dataService.getMelodiesById(melodyId);\n\t\t}\n\n\t\tif (weapon.ammoCapacities) {\n\t\t\tweapon.ammoCapacities = JSON.parse(JSON.stringify(this.dataService.getAmmoCapacities(weapon.id)));\n\n\t\t\tconst awakeningNormalCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.NormalCapacity).awakenings[0];\n\t\t\tconst awakeningPierceCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.PierceCapacity).awakenings[0];\n\t\t\tconst awakeningSpreadCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.SpreadCapacity).awakenings[0];\n\t\t\tconst awakeningElementalCapacity: number[] = this.awakeningsData.find(x => x.type == AwakeningType.ElementalCapacity).awakenings[0];\n\n\t\t\tconst normalCapacity = awakenings.find(x => x.type == AwakeningType.NormalCapacity);\n\t\t\tif (normalCapacity && normalCapacity.level >= 4) {\n\t\t\t\tconst normalAmmo = awakeningNormalCapacity[normalCapacity.level - 1];\n\t\t\t\tconst ammo = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.normal);\n\t\t\t\tif (ammo) {\n\t\t\t\t\tfor (const level of ammo.levels) {\n\t\t\t\t\t\tif (level.capacity > 0) {\n\t\t\t\t\t\t\tlevel.capacity += normalAmmo;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst pierceCapacity = awakenings.find(x => x.type == AwakeningType.PierceCapacity);\n\t\t\tif (pierceCapacity && pierceCapacity.level >= 4) {\n\t\t\t\tconst pierceAmmo = awakeningPierceCapacity[pierceCapacity.level - 1];\n\t\t\t\tconst ammo = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.pierce);\n\t\t\t\tif (ammo) {\n\t\t\t\t\tfor (const level of ammo.levels) {\n\t\t\t\t\t\tif (level.capacity > 0) {\n\t\t\t\t\t\t\tlevel.capacity += pierceAmmo;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst spreadCapacity = awakenings.find(x => x.type == AwakeningType.SpreadCapacity);\n\t\t\tif (spreadCapacity && spreadCapacity.level >= 4) {\n\t\t\t\tconst spreadAmmo = awakeningSpreadCapacity[spreadCapacity.level - 1];\n\t\t\t\tconst ammo = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.spread);\n\t\t\t\tif (ammo) {\n\t\t\t\t\tfor (const level of ammo.levels) {\n\t\t\t\t\t\tif (level.capacity > 0) {\n\t\t\t\t\t\t\tlevel.capacity += spreadAmmo;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst elementalCapacity = awakenings.find(x => x.type == AwakeningType.ElementalCapacity);\n\t\t\tif (elementalCapacity && elementalCapacity.level >= 4) {\n\t\t\t\tconst elementalAmmo = awakeningElementalCapacity[elementalCapacity.level - 1];\n\n\t\t\t\tconst fire = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.flaming);\n\t\t\t\tconst water = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.water);\n\t\t\t\tconst thunder = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.thunder);\n\t\t\t\tconst ice = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.freeze);\n\t\t\t\tconst dragon = weapon.ammoCapacities.ammo.find(x => x.name == AmmoType.dragon);\n\n\t\t\t\tif (fire && fire.levels[0].capacity > 0) {\n\t\t\t\t\tfire.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (water && water.levels[0].capacity > 0) {\n\t\t\t\t\twater.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (thunder && thunder.levels[0].capacity > 0) {\n\t\t\t\t\tthunder.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (ice && ice.levels[0].capacity > 0) {\n\t\t\t\t\tice.levels[0].capacity += elementalAmmo;\n\t\t\t\t}\n\t\t\t\tif (dragon && dragon.levels[0].capacity > 0) {\n\t\t\t\t\tdragon.levels[0].capacity = Math.min(dragon.levels[0].capacity + elementalAmmo, 3); // Dragon Max = 3\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateModifications(modifications: ModificationModel[]) {\n\t\tconst modGroups = _.groupBy(modifications, 'id');\n\n\t\tfor (const key in modGroups) {\n\t\t\tif (modGroups.hasOwnProperty(key)) {\n\t\t\t\tconst value = modGroups[key];\n\n\t\t\t\tconst level = value[0].levels[value.length - 1];\n\t\t\t\tif (level) {\n\t\t\t\t\tif (level.recoil) { this.stats.recoil += level.recoil; }\n\t\t\t\t\tif (level.reload) { this.stats.reload += level.reload; }\n\t\t\t\t\tif (level.deviation) { this.stats.deviation += level.deviation; }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate calculateAttack(weapon: ItemModel) {\n\t\tswitch (this.stats.element) {\n\t\t\tcase ElementType.Fire:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveFireAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveFireAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Water:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveWaterAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveWaterAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Thunder:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveThunderAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveThunderAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Ice:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveIceAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveIceAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tcase ElementType.Dragon:\n\t\t\t\tthis.stats.effectivePassiveElementAttack = this.stats.passiveDragonAttack;\n\t\t\t\tthis.stats.effectivePassiveElementAttack += this.nearestTen(this.stats.baseElementAttack * (this.stats.passiveDragonAttackPercent / 100));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (this.stats.ailment) {\n\t\t\tcase AilmentType.Poison:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passivePoisonAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passivePoisonBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passivePoisonBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Sleep:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveSleepAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveSleepBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveSleepBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Paralysis:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveParalysisAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveParalysisBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveParalysisBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Blast:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveBlastAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveBlastBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveBlastBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tcase AilmentType.Stun:\n\t\t\t\tthis.stats.effectivePassiveAilmentAttack = this.stats.passiveStunAttack;\n\t\t\t\t// this.stats.effectivePassiveAilmentAttack += this.nearestTen(this.stats.baseAilmentAttack * (this.stats.passiveStunBuildupPercent / 100));\n\t\t\t\tthis.stats.effectivePassiveAilmentBuildupPercent = this.stats.passiveStunBuildupPercent;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (weapon) {\n\t\t\tthis.stats.sharpnessDataNeeded = weapon.sharpnessDataNeeded;\n\t\t\tthis.stats.elementHidden = weapon.elementHidden;\n\t\t\tthis.stats.ailmentHidden = weapon.ailmentHidden;\n\t\t\tthis.stats.extraData = {\n\t\t\t\tweaponType: weapon.weaponType,\n\t\t\t\totherData: weapon.otherData\n\t\t\t};\n\n\t\t\tif (this.weaponModifier) {\n\t\t\t\tthis.stats.weaponAttackModifier = this.weaponModifier.attackModifier;\n\t\t\t\tthis.stats.critElementModifier = this.weaponModifier.critElementModifier;\n\t\t\t\tthis.stats.trueCritElementModifier = this.weaponModifier.trueCritElementModifier;\n\t\t\t\tthis.stats.critStatusModifier = this.weaponModifier.critStatusModifier;\n\t\t\t\tthis.stats.trueCritStatusModifier = this.weaponModifier.trueCritStatusModifier;\n\n\t\t\t\tif (this.stats.hastenRecovery != null) {\n\t\t\t\t\tthis.stats.hastenRecovery = this.weaponModifier.hastenRecovery;\n\t\t\t\t}\n\t\t\t\tif (this.stats.frostcraft != null) {\n\t\t\t\t\tthis.stats.frostcraft = this.weaponModifier.frostcraft;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (weapon && weapon.sharpnessLevelsBar.length && !isNaN(weapon.sharpnessLevelsBar[0])) {\n\t\t\tthis.stats.sharpnessLevelsBar = JSON.parse(JSON.stringify(weapon.sharpnessLevelsBar));\n\t\t\tif (weapon.sharpnessLevelsBar && !isNaN(weapon.sharpnessLevelsBar[0])) {\n\t\t\t\t// Extra Sharpness\n\t\t\t\tif (this.stats.extraSharpness > 0) {\n\t\t\t\t\tconst extraSharpness = this.stats.extraSharpness / 10;\n\n\t\t\t\t\tconst total = this.stats.sharpnessLevelsBar.reduce((a, b) => a + b, 0);\n\t\t\t\t\tlet maxHandicraft = 40 + 5 - total;\n\t\t\t\t\tlet currentSharpnessIndex = 0;\n\t\t\t\t\tfor (let i = this.stats.sharpnessLevelsBar.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tif (maxHandicraft > 0) {\n\t\t\t\t\t\t\tconst toSubstract = Math.min(this.stats.sharpnessLevelsBar[i], maxHandicraft);\n\t\t\t\t\t\t\tif (toSubstract < this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\t\tcurrentSharpnessIndex = i;\n\t\t\t\t\t\t\t} else if (toSubstract == this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\t\tcurrentSharpnessIndex = i - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmaxHandicraft -= toSubstract;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.stats.sharpnessLevelsBar[i] == 0) {\n\t\t\t\t\t\t\tcurrentSharpnessIndex = i - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet extraSharpnessAdd = extraSharpness;\n\t\t\t\t\tfor (let i = currentSharpnessIndex; i < this.stats.sharpnessLevelsBar.length; i++) {\n\t\t\t\t\t\tlet toAdd = 0;\n\t\t\t\t\t\tif (i < 6) {\n\t\t\t\t\t\t\ttoAdd = Math.min(12 - this.stats.sharpnessLevelsBar[i], extraSharpnessAdd);\n\t\t\t\t\t\t\tthis.stats.sharpnessLevelsBar[i] += toAdd;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoAdd = extraSharpnessAdd;\n\t\t\t\t\t\t\tthis.stats.sharpnessLevelsBar[i] += toAdd;\n\t\t\t\t\t\t}\n\t\t\t\t\t\textraSharpnessAdd -= toAdd;\n\t\t\t\t\t\tif (extraSharpnessAdd == 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet extraSharpnessRemove = extraSharpness;\n\t\t\t\t\tfor (let i = 0; i < this.stats.sharpnessLevelsBar.length; i++) {\n\t\t\t\t\t\tconst toRemove = Math.min(this.stats.sharpnessLevelsBar[i] - 1, extraSharpnessRemove);\n\t\t\t\t\t\tthis.stats.sharpnessLevelsBar[i] -= toRemove;\n\t\t\t\t\t\textraSharpnessRemove -= toRemove;\n\t\t\t\t\t\tif (extraSharpnessRemove == 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t// Handicraft\n\t\t\t\tlet levelsToSubstract = 5 - (this.stats.passiveSharpness / 10);\n\t\t\t\tlet colorIndex = this.stats.sharpnessLevelsBar.length - 1;\n\t\t\t\tfor (let i = this.stats.sharpnessLevelsBar.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (levelsToSubstract > 0) {\n\t\t\t\t\t\tconst toSubstract = Math.min(this.stats.sharpnessLevelsBar[i], levelsToSubstract);\n\t\t\t\t\t\tif (toSubstract < this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\tcolorIndex = i;\n\t\t\t\t\t\t} else if (toSubstract == this.stats.sharpnessLevelsBar[i]) {\n\t\t\t\t\t\t\tcolorIndex = i - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlevelsToSubstract -= toSubstract;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.stats.sharpnessLevelsBar[i] == 0) {\n\t\t\t\t\t\tcolorIndex = i - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst sharpnessModifier = this.dataService.getSharpnessModifier(DamageType.Physical, colorIndex);\n\t\t\t\tif (sharpnessModifier) {\n\t\t\t\t\tthis.stats.effectivePhysicalSharpnessModifier = sharpnessModifier.value;\n\t\t\t\t}\n\t\t\t\tconst ElementalSharpnessModifier = this.dataService.getSharpnessModifier(DamageType.Elemental, colorIndex);\n\t\t\t\tif (ElementalSharpnessModifier) {\n\t\t\t\t\tthis.stats.effectiveElementalSharpnessModifier = ElementalSharpnessModifier.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst elementAttackIncreaseCap = weapon ? weapon.elementAttackIncreaseCapOverride || this.defaultElementAttackIncreaseCap : this.defaultElementAttackIncreaseCap;\n\t\tconst ailmentAttackIncreaseCap = weapon ? weapon.elementAttackIncreaseCapOverride || this.defaultElementAttackIncreaseCap : this.defaultElementAttackIncreaseCap;\n\n\t\tif (this.stats.elementHidden) {\n\t\t\tthis.stats.effectiveElementAttack = this.nearestTen(Math.round(this.stats.baseElementAttack * this.stats.elementAttackMultiplier));\n\t\t} else {\n\t\t\tthis.stats.effectiveElementAttack = this.stats.baseElementAttack;\n\t\t}\n\n\t\tif (this.stats.ailmentHidden) {\n\t\t\tthis.stats.effectiveAilmentAttack = this.nearestTen(Math.round(this.stats.baseAilmentAttack * this.stats.elementAttackMultiplier));\n\n\t\t} else {\n\t\t\tthis.stats.effectiveAilmentAttack = this.stats.baseAilmentAttack;\n\t\t}\n\n\t\tthis.stats.elementCap = this.nearestTen(Math.round(this.stats.effectiveElementAttack + (this.stats.effectiveElementAttack * elementAttackIncreaseCap)));\n\t\tthis.stats.ailmentCap = this.nearestTen(Math.round(this.stats.effectiveAilmentAttack + (this.stats.effectiveAilmentAttack * ailmentAttackIncreaseCap)));\n\n\t\t// this.stats.totalElementAttack = Math.min(this.stats.effectiveElementAttack + this.stats.effectivePassiveElementAttack, this.stats.elementCap);\n\t\t// this.stats.totalAilmentAttack = Math.min(this.stats.effectiveAilmentAttack + this.stats.effectivePassiveAilmentAttack, this.stats.ailmentCap);\n\t\t// this.stats.elementCapped = this.stats.totalElementAttack > 0 && (this.stats.effectiveElementAttack + this.stats.effectivePassiveElementAttack) > this.stats.elementCap;\n\t\t// this.stats.ailmentCapped = this.stats.totalAilmentAttack > 0 && (this.stats.effectiveAilmentAttack + this.stats.effectivePassiveAilmentAttack) > this.stats.ailmentCap;\n\n\t\tthis.stats.totalElementAttack =\n\t\t\tthis.stats.effectiveElementAttack\n\t\t\t+ this.stats.effectivePassiveElementAttack;\n\t\tthis.stats.totalElementAttackPotential =\n\t\t\tthis.stats.effectiveElementAttack\n\t\t\t+ this.stats.effectivePassiveElementAttack\n\t\t\t+ this.stats.activeElementAttack;\n\t\tthis.stats.totalElementAttackPotential = this.nearestTen(this.stats.totalElementAttackPotential * 10) / 10;\n\n\t\tthis.stats.totalAilmentAttack =\n\t\t\tthis.stats.effectiveAilmentAttack * (1 + this.stats.effectivePassiveAilmentBuildupPercent / 100)\n\t\t\t+ this.stats.effectivePassiveAilmentAttack;\n\t\tthis.stats.totalAilmentAttackPotential =\n\t\t\tthis.stats.effectiveAilmentAttack * (1 + this.stats.effectivePassiveAilmentBuildupPercent / 100 + this.stats.activeAilmentAttackBuildUpPercent / 100)\n\t\t\t+ this.stats.effectivePassiveAilmentAttack\n\t\t\t+ this.stats.activeAilmentAttack;\n\t\tthis.stats.totalAilmentAttack = this.nearestTen(this.stats.totalAilmentAttack * 10) / 10;\n\t\tthis.stats.totalAilmentAttackPotential = this.nearestTen(this.stats.totalAilmentAttackPotential * 10) / 10;\n\n\t\tconst rawAttack = this.stats.attack / this.stats.weaponAttackModifier;\n\t\tconst elementless = 1 + this.stats.elementlessBoostPercent / 100;\n\t\tconst attackPercent = 1 + this.stats.activeAttackPercent / 100;\n\t\tif (this.checkElementless()) {\n\t\t\tthis.stats.totalAttack =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.round(\n\t\t\t\t\t\tMath.round(rawAttack * elementless)\n\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t) * this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.totalAttackPotential =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.round(\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tMath.round(rawAttack * elementless)\n\t\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t) * attackPercent\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t\t+ this.stats.activeAttack\n\t\t\t\t\t)\n\t\t\t\t\t* this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.elementless = true;\n\t\t} else {\n\t\t\tthis.stats.totalAttack =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.floor(\n\t\t\t\t\t\trawAttack\n\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t) * this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.totalAttackPotential =\n\t\t\t\tMath.round(\n\t\t\t\t\tMath.floor(\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\trawAttack\n\t\t\t\t\t\t\t+ this.stats.upgradeAttack\n\t\t\t\t\t\t\t+ this.stats.awakeningAttack\n\t\t\t\t\t\t) * attackPercent\n\t\t\t\t\t\t+ this.stats.passiveAttack\n\t\t\t\t\t\t+ this.stats.activeAttack\n\t\t\t\t\t)\n\t\t\t\t\t* this.stats.weaponAttackModifier\n\t\t\t\t);\n\t\t\tthis.stats.elementless = false;\n\t\t}\n\n\t\tif (this.stats.elderseal && this.stats.eldersealLevelBoost) {\n\t\t\tconst eldersealTypes = Object.keys(EldersealType);\n\t\t\tconst currentIndex = eldersealTypes.indexOf(this.stats.elderseal);\n\t\t\tconst newIndex = Math.min(currentIndex + this.stats.eldersealLevelBoost, eldersealTypes.length - 1);\n\t\t\tthis.stats.elderseal = eldersealTypes[newIndex];\n\t\t}\n\t}\n\n\tprivate checkElementless() {\n\t\tif (this.stats.elementlessBoostPercent > 0 && this.stats.totalElementAttack == 0 && this.stats.totalAilmentAttack == 0) {\n\t\t\tif (this.stats.ammoCapacities) {\n\t\t\t\tconst flaming = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'flaming');\n\t\t\t\tconst water = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'water');\n\t\t\t\tconst freeze = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'freeze');\n\t\t\t\tconst thunder = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'thunder');\n\t\t\t\tconst dragon = this.stats.ammoCapacities.ammo.filter(ammo => ammo.name === 'dragon');\n\t\t\t\tif (\n\t\t\t\t\t(flaming.length == 0 || flaming[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (water.length == 0 || water[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (freeze.length == 0 || freeze[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (thunder.length == 0 || thunder[0].levels[0].capacity == 0)\n\t\t\t\t\t&& (dragon.length == 0 || dragon[0].levels[0].capacity == 0)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate nearestTen(value: number): number {\n\t\treturn Math.round(value / 10) * 10;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { AugmentationModel } from '../models/augmentation.model';\nimport { DecorationModel } from '../models/decoration.model';\nimport { EquippedSetBonusModel } from '../models/equipped-set-bonus.model';\nimport { EquippedSkillModel } from '../models/equipped-skill.model';\nimport { ItemModel } from '../models/item.model';\nimport { KinsectModel } from '../models/kinsect.model';\nimport { ModificationModel } from '../models/modification.model';\nimport { SkillModel } from '../models/skill.model';\nimport { StatDetailModel } from '../models/stat-detail.model';\nimport { UpgradeContainerModel } from '../models/upgrade-container.model';\n\n@Injectable()\nexport class TooltipService {\n\tpublic itemChanged$ = new Subject<ItemModel>();\n\tpublic decorationChanged$ = new Subject<DecorationModel>();\n\tpublic augmentationChanged$ = new Subject<AugmentationModel>();\n\tpublic upgradeContainerChanged$ = new Subject<UpgradeContainerModel>();\n\tpublic modificationChanged$ = new Subject<ModificationModel>();\n\tpublic kinsectChanged$ = new Subject<KinsectModel>();\n\tpublic equippedSkillChanged$ = new Subject<EquippedSkillModel>();\n\tpublic equippedSetBonusChanged$ = new Subject<EquippedSetBonusModel>();\n\tpublic skillChanged$ = new Subject<SkillModel>();\n\tpublic calcChanged$ = new Subject<StatDetailModel>();\n\n\tpublic item: ItemModel;\n\tpublic decoration: DecorationModel;\n\tpublic augmentation: AugmentationModel;\n\tpublic upgradeContainer: UpgradeContainerModel;\n\tpublic modification: ModificationModel;\n\tpublic kinsect: KinsectModel;\n\tpublic equippedSkill: EquippedSkillModel;\n\tpublic equippedSetBonus: EquippedSetBonusModel;\n\tpublic skill: SkillModel;\n\tpublic calc: StatDetailModel;\n\n\tsetItem(item: ItemModel) {\n\t\tif (item != this.item) {\n\t\t\tthis.reset();\n\t\t\tthis.item = item;\n\t\t\tthis.itemChanged$.next(item);\n\t\t}\n\t}\n\n\tsetDecoration(decoration: DecorationModel) {\n\t\tif (decoration != this.decoration) {\n\t\t\tthis.reset();\n\t\t\tthis.decoration = decoration;\n\t\t\tthis.decorationChanged$.next(decoration);\n\t\t}\n\t}\n\n\tsetAugmentation(augmentation: AugmentationModel) {\n\t\tif (augmentation != this.augmentation) {\n\t\t\tthis.reset();\n\t\t\tthis.augmentation = augmentation;\n\t\t\tthis.augmentationChanged$.next(augmentation);\n\t\t}\n\t}\n\n\tsetUpgradeContainer(upgradeContainer: UpgradeContainerModel) {\n\t\tif (upgradeContainer != this.upgradeContainer) {\n\t\t\tthis.reset();\n\t\t\tthis.upgradeContainer = upgradeContainer;\n\t\t\tthis.upgradeContainerChanged$.next(upgradeContainer);\n\t\t}\n\t}\n\n\tsetModification(modification: ModificationModel) {\n\t\tif (modification != this.modification) {\n\t\t\tthis.reset();\n\t\t\tthis.modification = modification;\n\t\t\tthis.modificationChanged$.next(modification);\n\t\t}\n\t}\n\n\tsetKinsect(kinsect: KinsectModel) {\n\t\tif (kinsect != this.kinsect) {\n\t\t\tthis.reset();\n\t\t\tthis.kinsect = kinsect;\n\t\t\tthis.kinsectChanged$.next(kinsect);\n\t\t}\n\t}\n\n\tsetEquippedSkill(equippedSkill: EquippedSkillModel) {\n\t\tif (equippedSkill != this.equippedSkill) {\n\t\t\tthis.reset();\n\t\t\tthis.equippedSkill = equippedSkill;\n\t\t\tthis.equippedSkillChanged$.next(equippedSkill);\n\t\t}\n\t}\n\n\tsetEquippedSetBonus(equippedSetBonus: EquippedSetBonusModel) {\n\t\tif (equippedSetBonus != this.equippedSetBonus) {\n\t\t\tthis.reset();\n\t\t\tthis.equippedSetBonus = equippedSetBonus;\n\t\t\tthis.equippedSetBonusChanged$.next(equippedSetBonus);\n\t\t}\n\t}\n\n\tsetSkill(skill: SkillModel) {\n\t\tif (skill != this.skill) {\n\t\t\tthis.reset();\n\t\t\tthis.skill = skill;\n\t\t\tthis.skillChanged$.next(skill);\n\t\t}\n\t}\n\n\tsetCalc(calc: StatDetailModel) {\n\t\tif (calc != this.calc) {\n\t\t\tthis.reset();\n\t\t\tthis.calc = calc;\n\t\t\tthis.calcChanged$.next(calc);\n\t\t}\n\t}\n\n\tprivate reset() {\n\t\tthis.item = null;\n\t\tthis.decoration = null;\n\t\tthis.augmentation = null;\n\t\tthis.upgradeContainer = null;\n\t\tthis.modification = null;\n\t\tthis.kinsect = null;\n\t\tthis.equippedSkill = null;\n\t\tthis.equippedSetBonus = null;\n\t\tthis.skill = null;\n\t\tthis.calc = null;\n\t}\n}\n","export enum AilmentType {\n\tNone = 'None',\n\tParalysis = 'Paralysis',\n\tSleep = 'Sleep',\n\tPoison = 'Poison',\n\tBlast = 'Blast',\n\tStun = 'Stun'\n}\n","export enum AmmoType {\n\tnormal = 'normal',\n\tpierce = 'pierce',\n\tspread = 'spread',\n\tsticky = 'sticky',\n\tcluster = 'cluster',\n\trecover = 'recover',\n\tpoison = 'poison',\n\tparalysis = 'paralysis',\n\tsleep = 'sleep',\n\texhaust = 'exahust',\n\tflaming = 'flaming',\n\twater = 'water',\n\tfreeze = 'freeze',\n\tthunder = 'thunder',\n\tdragon = 'dragon',\n\tslicing = 'slicing',\n\twyvern = 'wyvern',\n\tdemon = 'demon',\n\tarmor = 'armor',\n\ttranq = 'tranq'\n}\n","export enum AttackType {\n\tSever = 'Sever',\n\tBlunt = 'Blunt'\n}\n","export enum AwakeningType {\n\tNone = 'None',\n\tAttack = 'Attack',\n\tAffinity = 'Affinity',\n\tDefense = 'Defense',\n\tSlot = 'Slot',\n\tAilment = 'Ailment',\n\tElement = 'Element',\n\tSharpness = 'Sharpness',\n\tNormalCapacity = 'NormalCapacity',\n\tPierceCapacity = 'PierceCapacity',\n\tSpreadCapacity = 'SpreadCapacity',\n\tElementalCapacity = 'ElementalCapacity',\n\tAttackMelody = 'AttackMelody',\n\tStaminaMelody = 'StaminaMelody',\n\tElementalMelody = 'ElementalMelody',\n\tStatusMelody = 'StatusMelody',\n\tEarplugsMelody = 'EarplugsMelody'\n}\n","export enum DamageType {\n\tPhysical = 'Physical',\n\tElemental = 'Elemental'\n}\n","export enum DeviationType {\n\tNA = 'NA',\n\tNone = 'None',\n\tLow = 'Low',\n\tAverage = 'Average',\n\tHigh = 'High'\n}\n\nexport enum RecoilType {\n\tAutoReload = 0,\n\tVeryLow = 1,\n\tLow = 2,\n\tAverage = 3,\n\tHigh = 4,\n\tVeryHigh = 5,\n\tWyvern = 6\n}\nexport enum ReloadType {\n\tVerySlow = 1,\n\tSlow = 2,\n\tNormal = 3,\n\tFast = 4,\n\tVeryFast = 5\n}\n\n","export enum EldersealType {\n\tLow = 'Low',\n\tAverage = 'Average',\n\tHigh = 'High'\n}\n","export enum ElementType {\n\tNone = 'None',\n\tFire = 'Fire',\n\tWater = 'Water',\n\tThunder = 'Thunder',\n\tIce = 'Ice',\n\tDragon = 'Dragon'\n}\n","export enum EquipmentCategoryType {\n\tWeapon = 'Weapon',\n\tArmor = 'Armor',\n\tCharm = 'Charm',\n\tTool = 'Tool',\n\tKinsect = 'Kinsect'\n}\n","export enum ItemType {\n\tWeapon = 'Weapon',\n\tHead = 'Head',\n\tChest = 'Chest',\n\tArms = 'Arms',\n\tWaist = 'Waist',\n\tLegs = 'Legs',\n\tCharm = 'Charm',\n\tTool1 = 'Tool1',\n\tTool2 = 'Tool2',\n\tDecoration = 'Decoration',\n\tAugmentation = 'Augmentation',\n\tUpgrade = 'Upgrade',\n\tAwakening = 'Awakening',\n\tModification = 'Modification',\n\tKinsect = 'Kinsect'\n}\n","export enum ModeType {\n\tActive = 1,\n\tInactive = 2,\n\tAllSkillActive = 3\n}\n","export enum PointerType {\n\tMouse = 'mouse',\n\tTouch = 'touch',\n\tPen = 'pen'\n}\n","export enum WeaponType {\n\tGreatSword = 'GreatSword',\n\tLongSword = 'LongSword',\n\tSwordAndShield = 'SwordAndShield',\n\tDualBlades = 'DualBlades',\n\tHammer = 'Hammer',\n\tHuntingHorn = 'HuntingHorn',\n\tLance = 'Lance',\n\tGunlance = 'Gunlance',\n\tSwitchAxe = 'SwitchAxe',\n\tChargeBlade = 'ChargeBlade',\n\tInsectGlaive = 'InsectGlaive',\n\tLightBowgun = 'LightBowgun',\n\tHeavyBowgun = 'HeavyBowgun',\n\tBow = 'Bow'\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}